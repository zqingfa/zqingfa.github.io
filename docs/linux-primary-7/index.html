<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-linux/primary/linux-primary-7">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">第 7 章 Linux Raid 存储管理 - Linux技术分享</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://zhangqf.com/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://zhangqf.com/img/logo.png"><meta data-rh="true" property="og:url" content="https://zhangqf.com/docs/linux-primary-7"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="第 7 章 Linux Raid 存储管理 - Linux技术分享"><meta data-rh="true" name="description" content="RAID 独立磁盘冗余阵列(Redundant Array of Independent Disks)，RAID 技术是将许多块硬盘设备组合成一个容量更大、更安全的硬盘组。"><meta data-rh="true" property="og:description" content="RAID 独立磁盘冗余阵列(Redundant Array of Independent Disks)，RAID 技术是将许多块硬盘设备组合成一个容量更大、更安全的硬盘组。"><meta data-rh="true" name="keywords" content="linux,RAID"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zhangqf.com/docs/linux-primary-7"><link data-rh="true" rel="alternate" href="https://zhangqf.com/en/docs/linux-primary-7" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://zhangqf.com/docs/linux-primary-7" hreflang="zh"><link data-rh="true" rel="alternate" href="https://zhangqf.com/docs/linux-primary-7" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9B0V5WT2X8-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S4SD5NXWXF"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-S4SD5NXWXF",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Linux技术分享" href="/opensearch.xml">
<link rel="preconnect" href="https://zhangqf.com/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://zhangqf.com/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script>


<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?77dc6b24cf1d939292e9fe13be271a96",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<meta name="baidu-site-verification" content="code-rqLUw5reVS">
<script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",t.defer=!0;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script>
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="zhangqf RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="zhangqf Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="zhangqf JSON Feed">

<link rel="icon" href="/img/logo.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(51 139 255)"><link rel="stylesheet" href="/assets/css/styles.86c9ae18.css">
<link rel="preload" href="/assets/js/runtime~main.9e73f1b3.js" as="script">
<link rel="preload" href="/assets/js/main.39d37d57.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><span>更新 <a href="/website">网址导航</a> 带你发现感兴趣的技术</span></div><button type="button" aria-label="关闭" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="zhangqf" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.webp" alt="zhangqf" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">zhangqf</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/linux">Linux</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/category/Linux基础">Linux 基础</a></li><li><a class="dropdown__link" href="/docs/category/Linux进阶">Linux 进阶</a></li><li><a class="dropdown__link" href="/docs/category/Linux测试">Linux 测试</a></li><li><a class="dropdown__link" href="/docs/category/LinuxCICD">Linux CICD研发</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Blog</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tags">标签</a></li><li><a class="dropdown__link" href="/archive">归档</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/skill/">笔记</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">工具</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/tools/">工具推荐</a></li><li><a href="https://api.kuizuo.cn" target="_blank" rel="noopener noreferrer" class="dropdown__link">API服务</a></li><li><a href="https://js-de-obfuscator.vercel.app" target="_blank" rel="noopener noreferrer" class="dropdown__link">JS代码还原</a></li><li><a href="https://cipher.kuizuo.cn" target="_blank" rel="noopener noreferrer" class="dropdown__link">CyberChef加密</a></li></ul></div><a class="navbar__item navbar__link" href="/website">导航</a><a class="navbar__item navbar__link" href="/project">项目</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/en/docs/linux-primary-7" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-GB">English</a></li><li><a href="/docs/linux-primary-7" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.webp" alt="zhangqf" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.webp" alt="zhangqf" class="themedImage_ToTc themedImage--dark_i4oU"><b>zhangqf</b></a><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux">linux</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/linux基础">Linux基础</a><button aria-label="打开/收起侧边栏菜单「Linux基础」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-1">第 1 章 Linux 基础命令</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-2">第 2 章 Linux 系统用户</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-3">第 3 章 Linux 文件权限</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-4">第 4 章 Linux ext 文件系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-5">第 5 章 Linux 磁盘管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-6">第 6 章 Linux LVM 存储管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/linux-primary-7">第 7 章 Linux Raid 存储管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-8">第 8 章 Linux 包管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-9">第 9 章 Linux 进程和信号</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-10">第 10 章 Linux 系统资源监控</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-11">第 11 章 Linux 服务管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-12">第 12 章 Linux 定时任务</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-13">第 13 章 Linux 网络管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux-primary-14">第 14 章 Linux 开机启动流程(UEFI+systemd)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/linux进阶">Linux进阶</a><button aria-label="打开/收起侧边栏菜单「Linux进阶」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/linux测试">Linux测试</a><button aria-label="打开/收起侧边栏菜单「Linux测试」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/linuxcicd">Linux CICD研发</a><button aria-label="打开/收起侧边栏菜单「Linux CICD研发」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/linux基础"><span itemprop="name">Linux基础</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">第 7 章 Linux Raid 存储管理</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>第 7 章 Linux Raid 存储管理</h1></header><p>RAID 独立磁盘冗余阵列(Redundant Array of Independent Disks)，RAID 技术是将许多块硬盘设备组合成一个容量更大、更安全的硬盘组。</p><p>RAID 可以将数据切割成多个区段后分别存放在各个不同物理硬盘设备上，然后利用分散读写需求来提升硬盘组整体的性能，同时将重要数据同步保存多份到不同的物理硬盘设备上，可以有非常好的数据备份效果。</p><p>由于对成本和技术两方面的考虑，因此需要针对不同的需求在数据可靠性及读写性能上做权衡，制定出各自不同的合适方案，目前已有的 RAID 硬盘组的方案至少有十几种，RAID0、RAID1、RAID5、RAID10 和 RAID01 是五种最常见的方案。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="71常用-raid-组">7.1、常用 RAID 组<a class="hash-link" href="#71常用-raid-组" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="711raid-0">7.1.1、RAID 0<a class="hash-link" href="#711raid-0" title="标题的直接链接">​</a></h3><p>RAID0 硬盘组是将 2 块或更多物理硬盘设备通过硬件或软件的方式串联在一起，成为一个大的卷组，有时它称为条带卷(striping)。</p><p>RAID0 将数据依次分别写入到各个物理硬盘中，这样最理想的状态会使得读写性能提升数倍，但若任意一块硬盘故障则会让整个系统的数据都受到破坏。</p><p>RAID0 模型如下图：</p><p><img loading="lazy" alt="disk raid0" src="/assets/images/disk raid0-37115aa567e2500f884fab9d24dfa5bc.png" width="714" height="578" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="712raid-1">7.1.2、RAID 1<a class="hash-link" href="#712raid-1" title="标题的直接链接">​</a></h3><p>RAID1 硬盘组技术是将 2 块或更多的存储设备进行绑定，目的是让数据被多块硬盘同时写入，类似于把数据再制作出多份镜像，当有某一块硬盘损坏后,一般可以立即通过热交换方式来恢复数据的正常使用。</p><p>RAID1 注重了数据的安全性，但因为是将多块硬盘中写入相同的数据，也就是说硬盘空间的真实可用率在理论上只有 50%(利用率是1/n，n是阵列中的磁盘数量，不分奇偶)，因此会明显的提高硬盘组成本。</p><p>RAID1 需要将数据同时写入到两块以上的硬盘设备中，这无疑也会增加一定系统负载。</p><p>RAID1 因为同一份数据保存了多份，所以读性能和 RAID0 是一样的(粗略的说是一样。更细致的要分随机读、顺序读，这时不一定和 raid0 一样)。</p><p>RAID1 模型如下图：</p><p><img loading="lazy" alt="disk raid1" src="/assets/images/disk raid1-f146927d403d798ac90be2f6c4425dd3.png" width="702" height="546" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="713raid-5">7.1.3、RAID 5<a class="hash-link" href="#713raid-5" title="标题的直接链接">​</a></h3><p>RAID5 需要 3 块或更多硬盘组成硬盘组，一份数据按照一定大小拆开，并且按照特定的算法，每 N-1 份数据计算一份校验数据，拆分的数据和校验数据平均分散存储在组成 RAID 5 的各个磁盘上。</p><p>RAID5 容量是单个硬盘的 N-1 倍，持续读取速度是单个硬盘的 N-1 倍，持续写入速度要看 RAID 控制器的性能和写入策略，理论上最高写入速度可以达到单个硬盘的 N-1 倍。</p><p>RAID5 数据安全方面，如果一个硬盘坏了，阵列会降级为 RAID0 运行；用新硬盘替换旧硬盘可以重建 RAID5。</p><p>RAID5 模型如下图：</p><p><img loading="lazy" alt="disk raid5" src="/assets/images/disk raid5-450a8163715ae92ced0db23663cdc30a.png" width="784" height="532" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="714raid-10">7.1.4、RAID 10<a class="hash-link" href="#714raid-10" title="标题的直接链接">​</a></h3><p>RAID10 需要至少 4 块硬盘，先分别两两制作成 RAID1，保证数据的安全性，然后再对两个 RAID1 实施 RAID0 技术，进一步的提高存储设备的读写速度。</p><p>RAID10 理论上只要坏的不是同一组中的所有硬盘，那么最多可以损坏 50% 的硬盘设备而不丢失数据。</p><p>RAID10 硬盘组技术继承了 RAID0 更高的读写速度和 RAID1 更安全的数据保障，在不考虑成本的情况下 RAID10 在读写速度和数据保障性方面都超过了 RAID5，是较为广泛使用的存储技术。</p><p>RAID10 模型如下图：根据数据复制的偏移方式不同，分如下图三种方式。</p><p><img loading="lazy" alt="disk raid10" src="/assets/images/disk raid10-d1dcdb146dcfde584c9700119692ecac.png" width="927" height="773" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="715raid-01">7.1.5、RAID 01<a class="hash-link" href="#715raid-01" title="标题的直接链接">​</a></h3><p>RAID 10 是 RAID1+RAID0，而 RAID01 则是 RAID0+RAID1。看起来它们是相同的，但实际上它们的差别在安全性上差很大。</p><p>RAID 01 模型如下图：</p><p><img loading="lazy" alt="disk raid01" src="/assets/images/disk raid01-d5c5b12438d410a29cdfa9abd01621ce.png" width="713" height="620" class="img_ev3q"></p><p>从图中可以看出，在 RAID01 正常工作的时候，它的性能和 RAID10 是一样的，都是条带一份，镜像一份。但是区别就在于安全性上。</p><p>如果 RAID0 组中的一块磁盘坏了，对于这一个 RAID0 组来说，它已经失效了，并不是还可以从该组中的另一块磁盘中读取一半数据。</p><p>也就是说，RAID01 只要坏了一块盘后，该 RAID0 组就失效，IO 的压力就只在另一个 RAID0 组上，这很容易导致这一个 RAID0 组也损坏磁盘，只要这时再坏一块盘，所有数据就丢失了。</p><p>RAID01 基本无人使用，太不安全。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="72linux-软-raid-管理">7.2、Linux 软 raid 管理<a class="hash-link" href="#72linux-软-raid-管理" title="标题的直接链接">​</a></h2><p>在生产应用环境当中，绝大多数用的是 RAID 卡组成的硬 RAID 阵列；少数情况下因为成本原因，选择了软 RAID 方式，这种方式可靠性也是相当不错的。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="721实现-raid10">7.2.1、实现 RAID10<a class="hash-link" href="#721实现-raid10" title="标题的直接链接">​</a></h3><p>实验环境：我们使用一台 ARM64 架构的飞腾 2000+ 的物理服务器做实验，64 核 256G内存，6 块 SSD，20 块 HDD，Logic MegaRAID SAS-3 3108 硬 RAID 卡，板载 2 口千兆，2 张 82599ES 10-Gigabit SFI/SFP+ 双万兆口网卡。当然这台服务器配置很高，目前只需使用 4 个 SSD 硬盘实现软 RAID。</p><p>mdadm 工具用于在 Linux 系统中创建和管理软 RAID。</p><p>mdadm 命令语法格式为：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">mdadm</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">模式</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">RAID设备名称</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">选项</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">成员设备名称</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">选项说明：</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">【创建模式】</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-C：创建</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">create a new array</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-l：指定raid级别</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">Set RAID level,0,1,5,10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-c：指定chunk大小</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">Specify chunk size of kibibytes，default 512KB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-a：检测设备名称</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">--auto</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">yes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">，yes表示自动创建设备文件/dev/mdN</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-n：指定设备数量</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">--raid-devices:Specify the number of active devices </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> the array</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-x：指定备用设备数量</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">--spare-devices:Specify the number of spare </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">eXtra</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> devices </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> the initial array</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-v：显示过程</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-f：强制行为</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-r：移除设备</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">remove listed devices</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-S：停止阵列</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">--stop:deactivate array, releasing all resources</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-A：装配阵列，将停止状态的阵列重新启动起来</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">【监控模式】</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-Q：查看摘要信息</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-D：查看详细信息</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">Print details of one or </span><span class="token function" style="color:rgb(0, 0, 255)">more</span><span class="token plain"> md devices</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">mdadm</span><span class="token plain"> -D --scan </span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain">/etc/mdadm.conf，以后可以直接mdadm -A进行装配这些阵列</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">【管理模式】</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">mdadm</span><span class="token plain"> --manage /dev/md</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">-9</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">--add 设备名</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">--remove 设备名</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">--fail 设备名</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--manage ：mdadm使用manage模式，此模式下可以做--add/--remove/--fail/--replace动作</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-add     ：将后面列出的设备加入到这个md</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--remove ：将后面列出的设备从md中移除，相当于硬件raid的拔出动作</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--fail   ：将后面列出的设备设定为错误状态，即人为损坏，损坏后该设备放在raid中已经是无意义状态的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><p>我们选择其中的 4 块未使用的 SSD，另外 2 块 SSD 已经做了硬 RAID1 装系统了。通过系统查看，这 4 块未使用的 SSD 分别为 /dev/sdb、/dev/sdc、/dev/sdd 和 /dev/sde，单盘容量为 447.130GB。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">PD LIST </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">EID:Slt DID State DG       Size Intf Med SED PI SeSz Model               Sp Type </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:0     </span><span class="token number" style="color:rgb(9, 134, 88)">30</span><span class="token plain"> JBOD  -  </span><span class="token number" style="color:rgb(9, 134, 88)">447.130</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:1     </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain"> JBOD  -  </span><span class="token number" style="color:rgb(9, 134, 88)">447.130</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:2     </span><span class="token number" style="color:rgb(9, 134, 88)">31</span><span class="token plain"> JBOD  -  </span><span class="token number" style="color:rgb(9, 134, 88)">447.130</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:3     </span><span class="token number" style="color:rgb(9, 134, 88)">34</span><span class="token plain"> JBOD  -  </span><span class="token number" style="color:rgb(9, 134, 88)">447.130</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:4     </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:5     </span><span class="token number" style="color:rgb(9, 134, 88)">27</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:6     </span><span class="token number" style="color:rgb(9, 134, 88)">14</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:7     </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:8     </span><span class="token number" style="color:rgb(9, 134, 88)">17</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:9      </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:10    </span><span class="token number" style="color:rgb(9, 134, 88)">21</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:11    </span><span class="token number" style="color:rgb(9, 134, 88)">22</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:12     </span><span class="token number" style="color:rgb(9, 134, 88)">9</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:13    </span><span class="token number" style="color:rgb(9, 134, 88)">23</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:14    </span><span class="token number" style="color:rgb(9, 134, 88)">15</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:15    </span><span class="token number" style="color:rgb(9, 134, 88)">24</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:16    </span><span class="token number" style="color:rgb(9, 134, 88)">11</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:17    </span><span class="token number" style="color:rgb(9, 134, 88)">28</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:18    </span><span class="token number" style="color:rgb(9, 134, 88)">26</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:19    </span><span class="token number" style="color:rgb(9, 134, 88)">20</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:20    </span><span class="token number" style="color:rgb(9, 134, 88)">13</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:21    </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:22    </span><span class="token number" style="color:rgb(9, 134, 88)">19</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:23    </span><span class="token number" style="color:rgb(9, 134, 88)">25</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">252</span><span class="token plain">:0    </span><span class="token number" style="color:rgb(9, 134, 88)">29</span><span class="token plain"> Onln  </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">446.625</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">252</span><span class="token plain">:1    </span><span class="token number" style="color:rgb(9, 134, 88)">32</span><span class="token plain"> Onln  </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">446.625</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>使用 mdadm 命令创建 RAID10，名称为 &quot;/dev/md0&quot;。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -C /dev/md0 -n 4 -l 10 -a yes /dev/sd{b,c,d,e}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: Defaulting to version </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"> metadata</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: array /dev/md0 started.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>-<!-- -->C 参数代表创建一个 RAID 阵列卡</li><li>-<!-- -->a yes 参数代表自动创建设备文件</li><li>-<!-- -->n 4 参数代表使用 4 块硬盘来制作这个 RAID 组</li><li>-<!-- -->l 10 参数则代表 RAID10</li><li>-<!-- -->v 参数来显示出创建的过程，同时在后面追加一个设备名称</li></ul><p>查看 RAID 设备信息</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -D /dev/md0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/dev/md0:</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          Version </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Creation Time </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> Thu Jun </span><span class="token number" style="color:rgb(9, 134, 88)">24</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain">:25:51 </span><span class="token number" style="color:rgb(9, 134, 88)">2021</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       Raid Level </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> raid10</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       Array Size </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">937438208</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">894.01</span><span class="token plain"> GiB </span><span class="token number" style="color:rgb(9, 134, 88)">959.94</span><span class="token plain"> GB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># 总共能使用的空间，因为是raid10，所以总可用空间为894GiB左右</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Used Dev Size </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">468719104</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">447.01</span><span class="token plain"> GiB </span><span class="token number" style="color:rgb(9, 134, 88)">479.97</span><span class="token plain"> GB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># 每个raid组或设备上的可用空间，也即每个RAID1组可用大小为447GiB左右</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     Raid Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">   </span><span class="token comment" style="color:rgb(0, 128, 0)"># raid中设备的个数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Total Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">   </span><span class="token comment" style="color:rgb(0, 128, 0)"># 总设备个数，包括raid中设备个数，备用设备个数等</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      Persistence </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> Superblock is persistent</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Intent Bitmap </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> Internal</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      Update Time </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> Thu Jun </span><span class="token number" style="color:rgb(9, 134, 88)">24</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain">:29:00 </span><span class="token number" style="color:rgb(9, 134, 88)">2021</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            State </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> clean, resyncing    </span><span class="token comment" style="color:rgb(0, 128, 0)"># 当前raid状态，有clean/degraded(降级)/recovering/resyncing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">   Active Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  Working Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">   Failed Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Spare Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           Layout </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">near</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)"># RAID10数据分布方式，有near/far/offset，默认为near，即数据的副本存储在相邻设备的相同偏移上。near=2表示要备份2份数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       Chunk Size </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> 512K</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Consistency Policy </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> bitmap</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Resync Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">% complete</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">             Name </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> arm64v8:0  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">local to </span><span class="token function" style="color:rgb(0, 0, 255)">host</span><span class="token plain"> arm64v8</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">             UUID </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> f9f70e82:7bd3a018:57bccfcb:e699365d</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           Events </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">36</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">   Number   Major   Minor   RaidDevice State</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-A   /dev/sdb </span><span class="token comment" style="color:rgb(0, 128, 0)"># 第一个raid1组A成员</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">32</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-B   /dev/sdc </span><span class="token comment" style="color:rgb(0, 128, 0)"># 第一个raid1组B成员</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">48</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-A   /dev/sdd </span><span class="token comment" style="color:rgb(0, 128, 0)"># 第二个raid1组A成员</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">64</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-B   /dev/sde </span><span class="token comment" style="color:rgb(0, 128, 0)"># 第二个raid1组B成员</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>raid 创建好后，它的运行状态信息放在 /proc/mdstat 中。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># cat /proc/mdstat </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Personalities </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">raid10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">md0 </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> active raid10 sde</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdd</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdb</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">937438208</span><span class="token plain"> blocks super </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"> 512K chunks </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> near-copies </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">/4</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">UUUU</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">  resync </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">25.3</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">237395968</span><span class="token plain">/937438208</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">finish</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">56</span><span class="token plain">.1min </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">speed</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">207803K/sec</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     bitmap: </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">/1 pages </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">64KB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">, 65536KB chunk</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">unused devices: </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>&quot;md0 : active raid10 sde<!-- -->[<!-- -->3<!-- -->]<!-- --> sdd<!-- -->[<!-- -->2<!-- -->]<!-- --> sdc<!-- -->[<!-- -->1<!-- -->]<!-- --> sdb<!-- -->[<!-- -->0<!-- -->]<!-- -->&quot; 表示 md0 是 raid10 级别的 raid，且是激活状态，sdX<!-- -->[<!-- -->N<!-- -->]<!-- --> 表示该设备在 raid 组中的位置是 N，如果有备用设备，则表示方式为 sdX<!-- -->[<!-- -->N<!-- -->]<!-- -->[<!-- -->S<!-- -->]<!-- -->，S 就表示 spare 的意思。</li><li>&quot;937438208 blocks super 1.2 512K chunks 2 near-copies <!-- -->[<!-- -->4/4<!-- -->]<!-- --> <!-- -->[<!-- -->UUUU<!-- -->]<!-- -->&quot; 表示该 raid 可用总空间为 937438208 个 blocks，chunks 的大小 512K，<!-- -->[<!-- -->m/n<!-- -->]<!-- --> 表示此 raid10 阵列需要 m 个设备，且 n 个设备正在正常运行，<!-- -->[<!-- -->UUUU<!-- -->]<!-- --> 分别表示 m 个的每一个运行状态，这里表示这 4 个设备都是正常工作的，如果是不正常的，则以 &quot;<!-- -->_<!-- -->&quot; 显示。</li><li>&quot;<!-- -->[<!-- -->===&gt;.........<!-- -->]<!-- -->&quot; 这一行表示数据正在同步已完成多少，还需要多少分钟，同步速度是多少。</li></ul><p>再看看lsblk的结果</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># lsblk -f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">NAME   FSTYPE        LABEL     UUID                                 FSAVAIL FSUSE% MOUNTPOINT</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">sda                                                                              </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">├─sda1 vfat                    3A6D-9E42                             </span><span class="token number" style="color:rgb(9, 134, 88)">194</span><span class="token plain">.1M     </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">├─sda2 ext4                    d533f939-91c7-481a-a460-ddbea8197c6b  </span><span class="token number" style="color:rgb(9, 134, 88)">743</span><span class="token plain">.8M    </span><span class="token number" style="color:rgb(9, 134, 88)">17</span><span class="token plain">% /boot</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">├─sda3 ext4                    29df12e4-805b-44a7-9550-078075a521c1  </span><span class="token number" style="color:rgb(9, 134, 88)">408</span><span class="token plain">.6G     </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└─sda4 swap                    c1507076-744d-4a85-9a29-ff49e5659a3d                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">SWAP</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">sdb    linux_raid_me arm64v8:0 f9f70e82-7bd3-a018-57bc-cfcbe699365d              </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└─md0                                                                            </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">sdc    linux_raid_me arm64v8:0 f9f70e82-7bd3-a018-57bc-cfcbe699365d              </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└─md0                                                                            </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">sdd    linux_raid_me arm64v8:0 f9f70e82-7bd3-a018-57bc-cfcbe699365d              </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└─md0                                                                            </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">sde    linux_raid_me arm64v8:0 f9f70e82-7bd3-a018-57bc-cfcbe699365d              </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└─md0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>将制作好的 RAID 组格式化创建文件系统。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mke2fs -t ext4 /dev/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>挂载 raid 设备，挂载成功后可看到可用空间为879G，因为 RAID 在创建文件系统时也消耗了一部分空间存储文件系统的元数据。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mount /dev/md0 /mnt/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># df -hT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">devtmpfs       devtmpfs  127G     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">  127G   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">% /dev</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">tmpfs          tmpfs     127G     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">  127G   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">% /dev/shm</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">tmpfs          tmpfs     127G   17M  127G   </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">% /run</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">tmpfs          tmpfs     127G     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">  127G   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/dev/sda3      ext4      434G  </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">.9G  409G   </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">tmpfs          tmpfs     127G     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">  127G   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">% /tmp</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/dev/sda2      ext4      976M  165M  744M  </span><span class="token number" style="color:rgb(9, 134, 88)">19</span><span class="token plain">% /boot</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/dev/sda1      vfat      200M  </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain">.8M  195M   </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">tmpfs          tmpfs      26G     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   26G   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">% /run/user/0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/dev/md0       ext4      879G   72M  835G   </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">% /mnt</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="722磁盘阵列损坏及修复">7.2.2、磁盘阵列损坏及修复<a class="hash-link" href="#722磁盘阵列损坏及修复" title="标题的直接链接">​</a></h3><p>通过 manage 模式可以模拟阵列中的设备损坏。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">mdadm</span><span class="token plain"> --manage /dev/md</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">-9</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">--add 设备名</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">--remove 设备名</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">--fail 设备名</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">选项说明：</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--manage ：mdadm使用manage模式，此模式下可以做--add/--remove/--fail/--replace动作</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--add    ：将后面列出的设备加入到这个md</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--remove ：将后面列出的设备从md中移除</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--fail   ：将后面列出的设备设定为错误状态，即人为损坏</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>模拟 /dev/sde 损坏。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --manage /dev/md0 --fail /dev/sde </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> /dev/sde faulty </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> /dev/md0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>再查看 raid 状态。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -D /dev/md0 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/dev/md0:</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           Version </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     Creation Time </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> Thu Jun </span><span class="token number" style="color:rgb(9, 134, 88)">24</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain">:25:51 </span><span class="token number" style="color:rgb(9, 134, 88)">2021</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        Raid Level </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> raid10</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        Array Size </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">937438208</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">894.01</span><span class="token plain"> GiB </span><span class="token number" style="color:rgb(9, 134, 88)">959.94</span><span class="token plain"> GB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     Used Dev Size </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">468719104</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">447.01</span><span class="token plain"> GiB </span><span class="token number" style="color:rgb(9, 134, 88)">479.97</span><span class="token plain"> GB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      Raid Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     Total Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       Persistence </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> Superblock is persistent</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     Intent Bitmap </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> Internal</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       Update Time </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> Thu Jun </span><span class="token number" style="color:rgb(9, 134, 88)">24</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">20</span><span class="token plain">:22:44 </span><span class="token number" style="color:rgb(9, 134, 88)">2021</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">             State </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> active, degraded </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Active Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">   Working Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Failed Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     Spare Devices </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            Layout </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">near</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        Chunk Size </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> 512K</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Consistency Policy </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> bitmap</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">              Name </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> arm64v8:0  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">local to </span><span class="token function" style="color:rgb(0, 0, 255)">host</span><span class="token plain"> arm64v8</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">              UUID </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> f9f70e82:7bd3a018:57bccfcb:e699365d</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            Events </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">893</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Number   Major   Minor   RaidDevice State</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-A   /dev/sdb</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">32</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-B   /dev/sdc</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">48</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-A   /dev/sdd</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       -       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">      removed</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">64</span><span class="token plain">        -      faulty   /dev/sde</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>由于 4 块磁盘组成的 raid10 允许损坏一块盘，且还允许坏第二块非对称盘。所以这里损坏了一块盘后 raid10 是可以正常工作的。</li></ul><p>现在可以将损坏的磁盘拔出，然后向 raid 中加入新的磁盘即可。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --manage /dev/md0 --remove /dev/sde</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: hot removed /dev/sde from /dev/md0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>再修复时，可以将新磁盘加入到 raid 中。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --manage /dev/md0 --add /dev/sde</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: re-added /dev/sde</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># cat /proc/mdstat </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Personalities </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">raid10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">md0 </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> active raid10 sde</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdd</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdb</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">937438208</span><span class="token plain"> blocks super </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"> 512K chunks </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> near-copies </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">/3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">UUU_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">  recovery </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">49.9</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">233898048</span><span class="token plain">/468719104</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">finish</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">.2min </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">speed</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">19491504K/sec</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      bitmap: </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">/1 pages </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">64KB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">, 65536KB chunk</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">unused devices: </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="723raid-备用盘">7.2.3、raid 备用盘<a class="hash-link" href="#723raid-备用盘" title="标题的直接链接">​</a></h3><p>使用 mdadm 的 &quot;-x&quot; 选项可以指定备用盘的数量，备用盘的作用是自动顶替 raid 组中坏掉的盘。</p><p>实验环境中还有大量的磁盘没有使用，我们取 /dev/sdf、/dev/sdg、/dev/sdh、/dev/sdi、/dev/sdj 和 /dev/sdk 做备用盘实验。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># fdisk -l | grep &quot;Disk /dev/sd[fghijk]&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdf: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdg: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdh: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdi: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdj: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdk: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>根据前面实验的基础，直接使用一行命令实现创建 raid10 的同时创建两个备用盘。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -C /dev/md1 -l10 -n4 -x2 -a yes /dev/sd{f,g,h,i,j,k}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: Defaulting to version </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"> metadata</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: array /dev/md1 started.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>此行命令等效于 mdadm --create --auto=yes /dev/md1 --level=10 --raid-devices=4 --spare-devices=2 /dev/sd{f,g,h,i,j,k}</li></ul><p>查看刚创建的 raid10 状态</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># cat /proc/mdstat </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Personalities </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">raid10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">md1 </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> active raid10 sdk</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> sdj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> sdi</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdh</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">4688165888</span><span class="token plain"> blocks super </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"> 512K chunks </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> near-copies </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">/4</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">UUUU</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">  resync </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">7.0</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">329351168</span><span class="token plain">/4688165888</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">finish</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">361</span><span class="token plain">.4min </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">speed</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">201003K/sec</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      bitmap: </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">/3 pages </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">192KB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">, 65536KB chunk</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">unused devices: </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>sdk<!-- -->[<!-- -->5<!-- -->]<!-- -->(S) sdj<!-- -->[<!-- -->4<!-- -->]<!-- -->(S) 这两个盘就是备用盘。</li><li>从进度条来看，要完成 100% 数据同步，大概需要 6 个小时，当前实验用的是生产环境服务器，6 个盘都是 2.19 TiB，容量较大。</li><li>对于生产环境来说，raid 中坏一块盘，恢复数据是极慢的，本人经历过无数这种痛苦时期，这里的软 raid 是这样，硬 raid 也是如此。<ul><li>建议生产环境中使用 1 到 2 块盘用作备用盘，raid 阵列中有坏盘时，备用盘可以自动顶上，然后手动更换坏盘并设为备用盘，如此循环运维，方便很多。</li></ul></li></ul><p>模拟 /dev/sdi 盘故障，然后看备用盘是否自动顶上。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 模拟 /dev/sdi 盘故障</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --manage /dev/md1 --fail /dev/sdi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> /dev/sdi faulty </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> /dev/md1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 查看发现 /dev/sdk 备用盘自动顶上</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -D /dev/md1 | grep &quot;/dev&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/dev/md1:</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">80</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-A   /dev/sdf</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">96</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-B   /dev/sdg</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">112</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-A   /dev/sdh</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">160</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">      spare rebuilding   /dev/sdk</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">128</span><span class="token plain">        -      faulty   /dev/sdi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">144</span><span class="token plain">        -      spare   /dev/sdj</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 查看数据同步进度条依然很慢，但是好在是自动完成</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># cat /proc/mdstat </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Personalities </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">raid10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">md1 </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> active raid10 sdk</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> sdi</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">F</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> sdh</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">4688165888</span><span class="token plain"> blocks super </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"> 512K chunks </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> near-copies </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">/3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">UUU_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">  recovery </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">0.5</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">13299968</span><span class="token plain">/2344082944</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">finish</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">194</span><span class="token plain">.2min </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">speed</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">200021K/sec</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      bitmap: </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">/3 pages </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">0KB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">, 65536KB chunk</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">unused devices: </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="724停止和装配-raid">7.2.4、停止和装配 raid<a class="hash-link" href="#724停止和装配-raid" title="标题的直接链接">​</a></h3><p>关闭 raid 阵列后，该 raid 组 /dev/md0 就停止工作了。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 先卸载后停止 raid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># umount /dev/md0 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --stop /dev/md0 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: stopped /dev/md0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 查看 raid10 的状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># cat /proc/mdstat </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Personalities </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">raid10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">unused devices: </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -D -s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -D /dev/md0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: cannot </span><span class="token function" style="color:rgb(0, 0, 255)">open</span><span class="token plain"> /dev/md0: No such </span><span class="token function" style="color:rgb(0, 0, 255)">file</span><span class="token plain"> or directory</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>当停止 raid 10 后，内存中看不到 raid 10 的状态，/dev/md0 字符设备也取消了。</li></ul><p>如果下次想继续启动它，直接使用 -A 来装配 /dev/md0 是不可以的，需要再次指定该 raid 中的设备成员，且和关闭前的成员一样，不能有任何不同。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -A /dev/md0 /dev/sd{b,c,d,e}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: /dev/md0 has been started with </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain"> drives.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># cat /proc/mdstat </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Personalities </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">raid10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">md0 </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"> active raid10 sdb</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sde</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdd</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> sdc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">937438208</span><span class="token plain"> blocks super </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"> 512K chunks </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> near-copies </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">/4</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">UUUU</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      bitmap: </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">/1 pages </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">0KB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">, 65536KB chunk</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">unused devices: </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上面做法风险太大，如果盘比较多很容易出错，其实可以在停止 raid 前，扫描 raid，将扫描的结果保存到配置文件中，下次启动的时候直接读取配置文件即可。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 这是默认配置文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -D --scan &gt;&gt; /etc/mdadm.conf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>下次直接使用 -A 就可以装置配置文件中的 raid 组。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -A /dev/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果不放在默认配置文件中，则装配的时候使用 &quot;-c&quot; 或 &quot;--config&quot; 选项指定配置文件即可。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -D --scan &gt;&gt; /tmp/mdadm.conf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -A /dev/md0 -c /tmp/mdadm.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="725彻底移除-raid-设备">7.2.5、彻底移除 raid 设备<a class="hash-link" href="#725彻底移除-raid-设备" title="标题的直接链接">​</a></h3><p>当已经确定一个磁盘不需要再做为 raid 的一部分，可以将它移除掉。彻底移除一个 raid 设备并非那么简单，因为 raid 控制器已经标记了一个设备，即使将它 &quot;mdadm --remove&quot; 也无法彻底消除 raid 的信息。</p><p>所以想要彻底移除 raid 设备，严格执行下面步骤：</p><ol><li><p>确认 raid 阵列由哪些设备组成，需要提前记下来。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm -D /dev/md0 | grep &quot;/dev/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/dev/md0:</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-A   /dev/sdb</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">32</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-B   /dev/sdc</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">48</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-A   /dev/sdd</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">64</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">      active </span><span class="token function" style="color:rgb(0, 0, 255)">sync</span><span class="token plain"> set-B   /dev/sde</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>先 umount 组建好的 raid</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># umount /dev/md0 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>停止 raid 设备</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --stop /dev/md0 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mdadm: stopped /dev/md0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>删除 raid 里的所有硬盘</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --misc --zero-superblock /dev/sdb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --misc --zero-superblock /dev/sdc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --misc --zero-superblock /dev/sdd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># mdadm --misc --zero-superblock /dev/sde</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>第 1 步就是为这一步做的准备</li><li>这一步很关键，如果不执行这一步，就算 &quot;mdadm --remove&quot; 移除设备，该设备也无法另作它用，因为该设备中还记录了 raid superblock 配置信息，只能使用 0(--zero-superblock) 将其覆盖。</li><li>有几块硬盘，就按格式删几次，注意最后面的硬盘名称。</li></ul></li><li><p>删除配置文件</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># rm -rf /etc/mdadm.conf </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>如果之前将 raid 相关信息写入了 /etc/fstab 配置文件中，还需 vim /etc/fstab，将 raid 相关的内容删除即可。</p></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="73linux-硬-raid-管理">7.3、Linux 硬 raid 管理<a class="hash-link" href="#73linux-硬-raid-管理" title="标题的直接链接">​</a></h2><p>说到 linux 硬 raid 管理，可能有人会疑惑，硬 raid 不是使用 raid 卡管理硬盘，在 bios 下进行图形化管理岂不是很方便，并不涉及 linux 系统层啊。</p><p>没错，用 bios 层图形化管理 raid 确实非常方便，但是我要说的是，本人职业生涯中绝大多数修复 raid 阵列，甚至是创建 raid 阵列都是在 linux 系统层完成的。</p><p>原因在于大多数情况下，硬 raid 出现问题，是因为存储服务器已经使用了 2 - 3 年，甚至更久，磁盘已达生命周期坏掉了，必须换新继续使用。此时，如果想要使用 bios 进行配置，需要重启 linux 操作系统，这是很不明智的选择，本人曾经就有过血的教训，特此警示。</p><p>最好的方式，在操作系统里面使用 Megacli 或者 storcli 工具操作 raid。Megacli 是早期使用的 raid 管理工具，晦涩难懂，而且没有 arm64v8 版本。storcli 工具是下一代用来代替 Megacli 的，功能更加强大，使用简单方便，而且支持 arm64v8 版本。</p><p><img loading="lazy" alt="linux_static_tools" src="/assets/images/linux_static_tools-9bf948c0f625abcf4d498d08e50ce45e.png" width="2400" height="1800" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="731storcli-命令基础">7.3.1、storcli 命令基础<a class="hash-link" href="#731storcli-命令基础" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7311基本语法">7.3.1.1、基本语法<a class="hash-link" href="#7311基本语法" title="标题的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">object identifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">verb</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">adverb </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> attributes </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> properties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">key</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参数解释：</p><table><thead><tr><th>object identifier</th><th>解释</th><th>例子</th><th>说明</th></tr></thead><tbody><tr><td>/c</td><td>控制器</td><td>/c0</td><td>第一个控制器</td></tr><tr><td>/v</td><td>VD</td><td>/v0</td><td>第一个 VD</td></tr><tr><td>/e</td><td>enclosure</td><td>/e0</td><td>第一个 enclosure</td></tr><tr><td>/f</td><td>外部配置</td><td>/f0</td><td>第一个外部配置</td></tr><tr><td>/s</td><td>slot</td><td>/s0</td><td>第一个 slot</td></tr><tr><td>/d</td><td>磁盘驱动</td><td>/d0</td><td>第一个磁盘驱动</td></tr></tbody></table><p>参数解释：</p><table><thead><tr><th>verb</th><th>功能描述</th></tr></thead><tbody><tr><td>add</td><td>添加虚拟磁盘、JBODs等到对象标识符中</td></tr><tr><td>compare</td><td>将输入值与系统值进行比较</td></tr><tr><td>del</td><td>删除对象标识符的磁盘、值或属性</td></tr><tr><td>download</td><td>下载并将文件闪存到目标</td></tr><tr><td>expand</td><td>扩展虚拟磁盘的大小</td></tr><tr><td>erase</td><td>根据指定的参数擦除控制器上的特定区域</td></tr><tr><td>flush</td><td>刷新控制器缓存或磁盘缓存</td></tr><tr><td>flasherase</td><td>擦除控制器上的闪存</td></tr><tr><td>get</td><td>从控制器获取数据</td></tr><tr><td>import</td><td>将外部配置导入到磁盘中</td></tr><tr><td>insert</td><td>替换标识为缺失的已配置磁盘，并启动自动重修复</td></tr><tr><td>pause</td><td>暂停正在进行的操作</td></tr><tr><td>resume</td><td>继续暂停的操作</td></tr><tr><td>restart</td><td>在不重启系统的情况下重新启动控制器</td></tr><tr><td>set</td><td>设置对象标识符的值</td></tr><tr><td>show</td><td>显示对象标识符的值和属性</td></tr><tr><td>split</td><td>使您能够在磁盘组上执行中断镜像操作</td></tr><tr><td>suspend</td><td>挂起正在执行的特定操作</td></tr><tr><td>start</td><td>开始一个操作</td></tr><tr><td>stop</td><td>停止正在进行的操作。已停止的进程无法恢复</td></tr><tr><td>spinup</td><td>使连接到控制器的磁盘旋转起来</td></tr><tr><td>spindown</td><td>关闭一个未配置的磁盘，并准备移除它</td></tr><tr><td>shutdown</td><td>关闭控制器</td></tr><tr><td>transform</td><td>降级控制器上的固件内存</td></tr></tbody></table><p><code>&lt;[adverb | attributes | properties]&gt;</code> ：指定动词修饰或显示的内容</p><p><code>&lt;[key=value]&gt;</code>：如果命令需要一个值，则指定一个值。</p><p>举一个小例子：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 打开第一个控制器的报警设置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 set alarm=on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller Properties </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Ctrl_Prop Value </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Alarm     ON  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7312系统命令">7.3.1.2、系统命令<a class="hash-link" href="#7312系统命令" title="标题的直接链接">​</a></h4><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>storcli show</td><td>查看 RAID 控制器的摘要信息</td></tr><tr><td>storcli show all</td><td>查看详细的 RAID 控制器信息</td></tr><tr><td>storcli show ctrlcount</td><td>查看 RAID 卡控制器数量</td></tr><tr><td>storcli show help</td><td>查看 Storcli 帮助</td></tr><tr><td>storcli -v</td><td>查看 Storcli 版本</td></tr></tbody></table><p>举个小例子：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status Code </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Number of Controllers </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Host Name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> arm64v8</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating System  </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">StoreLib IT Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 07.1400.0200.0200</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">System Overview </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Ctl Model                   Ports PDs DGs DNOpt VDs VNOpt BBU sPR DS  EHS ASOs Hlth </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> AVAGOMegaRAIDSAS9361-8i     </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">26</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> N/A On  </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> Y      </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain"> Opt  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Ctl</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Controller Index</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DGs</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Drive </span><span class="token function" style="color:rgb(0, 0, 255)">groups</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">VDs</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Virtual drives</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Fld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Failed</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">PDs</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Physical drives</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DNOpt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Array NotOptimal</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">VNOpt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">LD NotOptimal</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Opt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Optimal</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Msng</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Missing</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Dgd</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Degraded</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">NdAtn</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Need Attention</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Unkwn</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Unknown</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">sPR</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Scheduled Patrol Read</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DS</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">DimmerSwitch</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">EHS</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Emergency Spare Drive</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Y</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Yes</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">N</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">No</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">ASOs</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Advanced Software Options</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">BBU</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Battery backup unit/CV</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Hlth</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Health</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Safe</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Safe-mode boot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7313控制器命令">7.3.1.3、控制器命令<a class="hash-link" href="#7313控制器命令" title="标题的直接链接">​</a></h4><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>show</td><td>查看控制器所有属性</td></tr><tr><td>\set<code>&lt;properties&gt;</code></td><td>设置控制器属性</td></tr><tr><td>show<code>&lt;properties&gt;</code></td><td>查看控制器某个属性</td></tr></tbody></table><p>举个小例子：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 show alarm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller Properties </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Ctrl_Prop Value </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Alarm     ON  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>服务器支持的常用属性如下：</p><table><thead><tr><th>属性名</th><th>参数值</th><th>说明</th></tr></thead><tbody><tr><td>alarm</td><td>on</td><td>off</td></tr><tr><td>bgirate</td><td>0 to 100</td><td>设置后台初始化占用系统百分比</td></tr><tr><td>ccrate</td><td>0 to 100</td><td>设置一致性校验 cc 占系统资源百分比</td></tr><tr><td>coercion</td><td>0: No coercion</td><td></td></tr><tr><td>1: 128 MB</td><td></td><td></td></tr><tr><td>2: 1 GB</td><td>磁盘强制是一个能强制有多种变化能力的物理磁盘</td><td></td></tr><tr><td>成为同一尺寸的工具这样变换后这些磁盘就能在阵</td><td></td><td></td></tr><tr><td>列中使用，这些选项有128MB-way,1GB-way.</td><td></td><td></td></tr><tr><td>默认值是无。</td><td></td><td></td></tr><tr><td>copyback</td><td>on</td><td>off</td></tr><tr><td>type = smartssd</td><td>smarthdd</td><td>all</td></tr><tr><td>smartssd: Copy back enabled for SSD drives</td><td></td><td></td></tr><tr><td>smarthdd: Copy back enabled for HDD drives.</td><td></td><td></td></tr><tr><td>all: Copy back enabled for both ssd drives and HDD drives.</td><td></td><td></td></tr><tr><td>Example: storcli /cx set copyback=on type=all</td><td>控制磁盘的回拷</td><td></td></tr><tr><td>foreignautoimport</td><td>on</td><td>off</td></tr><tr><td>jbod</td><td>on</td><td>off</td></tr><tr><td>loadbalancemode</td><td>on</td><td>off</td></tr><tr><td>patrolread</td><td>storcli /cx resume patrolread</td><td></td></tr><tr><td>storcli /cx set patrolread ={{on mode=&lt;auto</td><td>manual&gt;}</td><td>{off}}</td></tr><tr><td>storcli /cx set patrolread<!-- -->[<!-- -->starttime=&lt;yyyy/mm/dd hh&gt;<!-- -->]</td><td></td><td></td></tr><tr><td>[<!-- -->maxconcurrentpd=<code>&lt;value&gt;</code>]</td><td></td><td></td></tr><tr><td>[<!-- -->includessds=&lt;on</td><td>off&gt;<!-- -->]</td><td></td></tr><tr><td>[<!-- -->uncfgareas=&lt;on</td><td>off&gt;<!-- -->]</td><td></td></tr></tbody></table><p>storcli /cx set patrolread delay=<code>&lt;value&gt;</code>
storcli /cx show patrolread
storcli /cx start patrolread
storcli /cx stop patrolread
storcli /cx suspend patrolread</p><p> | 控制磁盘巡读 |
| pi | on|off | 开启控制器的数据保护功能 |
| rebuildrate | 0 to 100 | 设置重建占用系统资源百分比 |
| reconrate | 0 to 100 | 系统扩容占用资源百分比 |</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7314物理磁盘命令">7.3.1.4、物理磁盘命令<a class="hash-link" href="#7314物理磁盘命令" title="标题的直接链接">​</a></h4><table><thead><tr><th>命令</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td>set</td><td>missing</td><td></td></tr><tr><td>good</td><td></td><td></td></tr><tr><td>offline</td><td></td><td></td></tr><tr><td>online</td><td>设置磁盘状态</td><td></td></tr><tr><td>show</td><td>all</td><td>显示磁盘信息</td></tr></tbody></table><p><strong>查看磁盘命令</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/eall/sall show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Show Drive Information Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Drive Information </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">EID:Slt DID State DG       Size Intf Med SED PI SeSz Model               Sp Type </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:0     </span><span class="token number" style="color:rgb(9, 134, 88)">30</span><span class="token plain"> JBOD  -  </span><span class="token number" style="color:rgb(9, 134, 88)">447.130</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:1     </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain"> JBOD  -  </span><span class="token number" style="color:rgb(9, 134, 88)">447.130</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:2     </span><span class="token number" style="color:rgb(9, 134, 88)">31</span><span class="token plain"> JBOD  -  </span><span class="token number" style="color:rgb(9, 134, 88)">447.130</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:3     </span><span class="token number" style="color:rgb(9, 134, 88)">34</span><span class="token plain"> JBOD  -  </span><span class="token number" style="color:rgb(9, 134, 88)">447.130</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:4     </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:5     </span><span class="token number" style="color:rgb(9, 134, 88)">27</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:6     </span><span class="token number" style="color:rgb(9, 134, 88)">14</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:7     </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:8     </span><span class="token number" style="color:rgb(9, 134, 88)">17</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:9      </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:10    </span><span class="token number" style="color:rgb(9, 134, 88)">21</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:11    </span><span class="token number" style="color:rgb(9, 134, 88)">22</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:12     </span><span class="token number" style="color:rgb(9, 134, 88)">9</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:13    </span><span class="token number" style="color:rgb(9, 134, 88)">23</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:14    </span><span class="token number" style="color:rgb(9, 134, 88)">15</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:15    </span><span class="token number" style="color:rgb(9, 134, 88)">24</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:16    </span><span class="token number" style="color:rgb(9, 134, 88)">11</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:17    </span><span class="token number" style="color:rgb(9, 134, 88)">28</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:18    </span><span class="token number" style="color:rgb(9, 134, 88)">26</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:19    </span><span class="token number" style="color:rgb(9, 134, 88)">20</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:20    </span><span class="token number" style="color:rgb(9, 134, 88)">13</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:21    </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:22    </span><span class="token number" style="color:rgb(9, 134, 88)">19</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:23    </span><span class="token number" style="color:rgb(9, 134, 88)">25</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">252</span><span class="token plain">:0    </span><span class="token number" style="color:rgb(9, 134, 88)">29</span><span class="token plain"> Onln  </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">446.625</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">252</span><span class="token plain">:1    </span><span class="token number" style="color:rgb(9, 134, 88)">32</span><span class="token plain"> Onln  </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">446.625</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">EID</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Enclosure Device ID</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Slt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Slot No.</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DID</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Device ID</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DG</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">DriveGroup</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DHS</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Dedicated Hot Spare</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UGood</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Unconfigured Good</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">GHS</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Global Hotspare</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UBad</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Unconfigured Bad</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Sntze</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Sanitize</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Onln</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Online</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Offln</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Offline</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Intf</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Interface</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Med</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Media Type</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">SED</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Self Encryptive Drive</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">PI</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Protection Info</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">SeSz</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Sector Size</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Sp</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Spun</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">U</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Up</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">D</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Down</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">T</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Transition</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">F</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Foreign</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UGUnsp</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">UGood Unsupported</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UGShld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">UGood shielded</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">HSPShld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Hotspare shielded</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">CFShld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Configured shielded</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Cpybck</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">CopyBack</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">CBShld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Copyback Shielded</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UBUnsp</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">UBad Unsupported</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Rbld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Rebuild</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 查看控制器 1， enclosure18，4，5 槽位的磁盘信息(注意序号都是从 0 开始)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s3,4 show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Show Drive Information Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Drive Information </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">EID:Slt DID State DG       Size Intf Med SED PI SeSz Model               Sp Type </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:3     </span><span class="token number" style="color:rgb(9, 134, 88)">34</span><span class="token plain"> JBOD  -  </span><span class="token number" style="color:rgb(9, 134, 88)">447.130</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:4     </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain"> JBOD  -    </span><span class="token number" style="color:rgb(9, 134, 88)">2.182</span><span class="token plain"> TB SAS  HDD N   N  512B AL15SEB24EQ         U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">EID</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Enclosure Device ID</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Slt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Slot No.</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DID</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Device ID</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DG</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">DriveGroup</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DHS</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Dedicated Hot Spare</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UGood</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Unconfigured Good</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">GHS</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Global Hotspare</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UBad</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Unconfigured Bad</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Sntze</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Sanitize</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Onln</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Online</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Offln</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Offline</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Intf</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Interface</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Med</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Media Type</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">SED</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Self Encryptive Drive</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">PI</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Protection Info</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">SeSz</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Sector Size</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Sp</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Spun</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">U</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Up</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">D</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Down</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">T</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Transition</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">F</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Foreign</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UGUnsp</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">UGood Unsupported</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UGShld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">UGood shielded</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">HSPShld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Hotspare shielded</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">CFShld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Configured shielded</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Cpybck</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">CopyBack</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">CBShld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Copyback Shielded</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">UBUnsp</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">UBad Unsupported</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Rbld</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Rebuild</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 查看控制器 1， enclosure18，前4个槽位的磁盘信息(注意序号都是从 0 开始)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s0-3 show</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>设置磁盘状态</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> jbod</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> good </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">force</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> offline</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> online</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用 raid 卡管理的磁盘有两种模式状态，第一种就是 raid 阵列状态，第二种就是 jbod 直通状态。<strong>需要说明的是</strong>，控制器的 jbod 开关关闭，则只能配置 raid 阵列；控制器的 jbod 开关打开，虽然所有磁盘的 state 会自动变为 jbod，但依然可以配置 raid 阵列，即 jbod 和 raid 阵列共存。</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="73141raid-阵列状态">7.3.1.4.1、raid 阵列状态<a class="hash-link" href="#73141raid-阵列状态" title="标题的直接链接">​</a></h5><ol><li><p>关闭控制器的 jbod 模式，将自动切回 raid 模式，只能配置 raid 阵列</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 set jbod=off</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller Properties </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Ctrl_Prop Value </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">JBOD      OFF   </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>raid 模式下，如果不对磁盘进行 raid 配置，在操作系统里面是看不到磁盘的。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 一共有26块盘，现在只看到一个系统盘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># fdisk -l | egrep &quot;Disk /dev&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sda: </span><span class="token number" style="color:rgb(9, 134, 88)">446.64</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">479559942144</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">936640512</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>在 raid 模式下不能再 set jbod，只能配置 raid，设置 good、offline 和 online 等磁盘状态。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s0 set jbod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Failure</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Set Drive JBOD Failed. </span><span class="token comment" style="color:rgb(0, 128, 0)"># 报错，因为控制器关闭了jbod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Drive      Status  ErrCd ErrMsg         </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/c0/e18/s0 Failure     </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">command</span><span class="token plain"> invalid  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 不指明 pdperarray 报错，因为 raid10 里面有两个组，如果创建 raid5 这样的单组就不用指了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 add vd type=raid10 size=2gb,3gb,4gb name=tmp1,tmp2,tmp3 drives=18:0-3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Failure</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> operation not possible </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> current RAID level, Cannot create configuration with </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> span</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 使用/e18/s0-s3四个磁盘创建raid10磁盘组，并且创建3个虚拟磁盘。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 add vd type=raid10 size=2gb,3gb,4gb name=tmp1,tmp2,tmp3 drives=18:0-3 pdperarray=2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Add VD Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 其中raid1磁盘组用来装操作系统</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/vall show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Virtual Drives </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">DG/VD TYPE   State Access Consist Cache Cac sCC       Size Name </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">/0   RAID1  Optl  RW     Yes     RWTD  -   ON  </span><span class="token number" style="color:rgb(9, 134, 88)">446.625</span><span class="token plain"> GB    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">/1   RAID10 Optl  RW     No      RWTD  -   ON    </span><span class="token number" style="color:rgb(9, 134, 88)">2.000</span><span class="token plain"> GB tmp1 </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">/2   RAID10 Optl  RW     No      RWTD  -   ON    </span><span class="token number" style="color:rgb(9, 134, 88)">3.000</span><span class="token plain"> GB tmp2 </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">/3   RAID10 Optl  RW     No      RWTD  -   ON    </span><span class="token number" style="color:rgb(9, 134, 88)">4.000</span><span class="token plain"> GB tmp3 </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">VD</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Virtual Drive</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">DG</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Drive Group</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Rec</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Recovery</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Cac</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">CacheCade</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">OfLn</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">OffLine</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Pdgd</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Partially Degraded</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Dgrd</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Degraded</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Optl</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Optimal</span><span class="token operator" style="color:rgb(0, 0, 0)">||</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">dflt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Default</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">RO</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Read Only</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">RW</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Read Write</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">HD</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Hidden</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">TRANS</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">TransportReady</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">B</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Blocked</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Consist</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Consistent</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">R</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Read Ahead Always</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">NR</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">No Read Ahead</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">WB</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">WriteBack</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">AWB</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Always WriteBack</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">WT</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">WriteThrough</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">C</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Cached IO</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">D</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Direct IO</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">sCC</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Scheduled</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Check Consistency</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 磁盘组raid10剩余所有容量都给tmp4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 add vd type=raid10 size=all name=tmp4 drives=18:0-3 pdperarray=2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Add VD Succeeded.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="73142jbod-直通状态">7.3.1.4.2、jbod 直通状态<a class="hash-link" href="#73142jbod-直通状态" title="标题的直接链接">​</a></h5><ol><li><p>打开控制器的 jbod 模式，将自动从 raid 状态切换至 jbod 状态，并且可以同时配置 raid 阵列，使 jbod 和 raid 共存。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 set jbod=on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller Properties </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Ctrl_Prop Value </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">JBOD      ON  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>打开 jbod 直通模式后，在操作系统里面可以直接看到磁盘</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># fdisk -l | egrep &quot;Disk /dev&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sda: </span><span class="token number" style="color:rgb(9, 134, 88)">446.64</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">479559942144</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">936640512</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdb: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdc: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdd: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sde: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdf: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdg: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdh: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdi: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdj: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdk: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdl: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdm: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdn: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdo: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdp: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdq: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdr: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sds: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdt: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdv: </span><span class="token number" style="color:rgb(9, 134, 88)">447.13</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">480103981056</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">937703088</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdu: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdw: </span><span class="token number" style="color:rgb(9, 134, 88)">447.13</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">480103981056</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">937703088</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdx: </span><span class="token number" style="color:rgb(9, 134, 88)">447.13</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">480103981056</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">937703088</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdy: </span><span class="token number" style="color:rgb(9, 134, 88)">447.13</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">480103981056</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">937703088</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>部分磁盘配置 raid 阵列，与部分 jbod 磁盘共存。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s0-4 set good force</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Set Drive Good Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 add vd type=raid5 size=2Gb names=first drives=18:0,1,2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Add VD Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># fdisk -l | egrep &quot;Disk /dev&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sda: </span><span class="token number" style="color:rgb(9, 134, 88)">446.64</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">479559942144</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">936640512</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdf: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdg: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdh: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdi: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdk: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdl: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdm: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdn: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdo: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdp: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdq: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdr: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sds: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdt: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdu: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdv: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdw: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdx: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdy: </span><span class="token number" style="color:rgb(9, 134, 88)">2.19</span><span class="token plain"> TiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2400476553216</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4688430768</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdb: </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">2147483648</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">4194304</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>这个过程要体会一下，我把前 5 块配置成了 unconfigured good，所以这 5 块 OS 是不能直接识别的，然后我又把前 3 块配置成了 raid 5 并创建了一个 2Gb 的虚拟磁盘，最终 OS 识别所有的磁盘如上所示。</li></ul></li></ol><p><strong>磁盘初始化命令</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 查看，开始和停止磁盘初始化操作</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx show initialization</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx start initialization</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx stop initialization</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s0 start initialization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Start Drive Initialization Succeeded.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>注意：对磁盘进行初始化，必须是在 raid 模式下进行，jbod 模式下会报错。</em></p><p><strong>磁盘定位命令</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 开始、停止定位磁盘，也就是磁盘亮灯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx start </span><span class="token function" style="color:rgb(0, 0, 255)">locate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx stop </span><span class="token function" style="color:rgb(0, 0, 255)">locate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>磁盘挂起，启动命令</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 这两个命令是在准备移除磁盘时使用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx spindown</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx spinup</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>磁盘安全擦除命令</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx secureerase </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">force</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx show erase</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx start erase </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">simple</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">normal</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">crypto</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">thorough</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">patternA</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">value</span><span class="token operator file-descriptor important" style="color:rgb(0, 0, 0)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">patternB</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">value</span><span class="token operator file-descriptor important" style="color:rgb(0, 0, 0)">2</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx stop erase</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>用来执行或控制安全擦除磁盘</p><table><thead><tr><th>选项</th><th>值范围</th><th>描述</th></tr></thead><tbody><tr><td>erase</td><td>simple : Single pass, single pattern write</td><td></td></tr><tr><td>normal : Three pass, three pattern write</td><td></td><td></td></tr><tr><td>thorough : Nine pass, repeats the normal write three times</td><td></td><td></td></tr><tr><td>crypto : Performs cryptographic erase for SSD drives</td><td>Secures erase type.</td><td></td></tr><tr><td>patternA</td><td>8-bit value</td><td>Erases pattern A to overwrite the data.</td></tr><tr><td>patternB</td><td>8-bit value</td><td>Erases pattern B to overwrite the data.</td></tr></tbody></table><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s0 start erase thorough patternA=10010011 patternB=11110000CLI Version = 007.1316.0000.0000 Mar 12, 2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Start Drive Erase Succeeded.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>磁盘重建命令</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx pause rebuild</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx resume rebuild</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx show rebuild</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx start rebuild</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx stop rebuild</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>如果 enclosures 用来连接控制器下的物理磁盘，要在命令行中指定 enclosure ID</li></ul><p><code>storcli /cx[/ex]/sx pause rebuild</code>：此命令暂停正在进行的重建进程。您只能对当前正在重建的驱动器运行此命令。</p><p><code>storcli /cx[/ex]/sx resume rebuild</code>：此命令恢复暂停的重建进程。只有当驱动器存在一个暂停的重建进程时，才能执行此命令。</p><p><code>storcli /cx[/ex]/sx show rebuild</code>：该命令以百分比显示重建进程的进度。还显示了完成操作所需的估计时间(以分钟计)。</p><p><code>storcli /cx[/ex]/sx start rebuild</code>：此命令启动驱动器的重建操作。</p><p><code>storcli /cx[/ex]/sx stop rebuild</code>：此命令停止重建操作。您只能对当前正在重建的驱动器运行此命令。</p><p><strong>磁盘回拷命令</strong></p><p>默认情况下控制器回拷开关是关闭的，回拷发生在，raid 组中有一块盘坏掉了比如 slot0，有另一块热备盘 slot10 直接顶上进行 rebuild；slot0 换新盘后，slot10 恢复好的数据会回拷至 slot0 的新盘，slot10 重新回到热备状态。</p><p>由此可见，回拷过程会占用大量的带宽，除非你知道自己在干什么，否则不建议开启回拷。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx pause copyback</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx resume copyback</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx show copyback</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx start copyback </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">target</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">eid:sid</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx stop copyback</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">copyback</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">type</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">ctrl</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">copyback</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">type</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">smarthdd</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">copyback</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">type</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">ssd</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">copyback</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">type</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>回拷命令中，cx<!-- -->[<!-- -->/ex<!-- -->]<!-- -->/sx 表示源驱动器，eid:sid 表示目标驱动器。</li><li>当启用回拷操作时，即使重构完成，告警也会继续提示；只有回拷操作完成后，告警才会停止。</li></ul><p><code>storcli /cx[/ex]/sx pause copyback</code>：该命令暂停回拷操作。该命令只能在进行回拷操作时使用。</p><p><code>storcli /cx[/ex]/sx resume copyback</code>：此命令恢复暂停的回拷操作。该命令只能在驱动器存在暂停的回拷进程时使用。</p><p><code>storcli /cx show copyback</code>：该命令以百分比显示回拷操作的进度。还显示了完成操作所需的估计时间(以分钟计)。</p><p><code>storcli /cx[/ex]/sx start copyback target=eid:sid</code>：该命令对驱动器启动回拷操作。</p><p><code>storcli /cx[/ex]/sx stop copyback</code>：该命令用于停止回拷操作。该命令只能在运行回拷操作的驱动器上执行。</p><p><code>storcli /cx set copyback=on type=ctrl</code>：该命令设置控制回拷操作。</p><p><code>storcli /cx set copyback=on type=smarthdd</code>：该命令设置智能硬盘回拷操作。</p><p><code>storcli /cx set copyback=on type=smartssd</code>：该命令用于设置智能 SSD 回拷操作。</p><p><code>storcli /cx set copyback=on type=all</code>：该命令用于设置回拷操作。</p><p><strong>热备盘命令</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">/ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx </span><span class="token function" style="color:rgb(0, 0, 255)">add</span><span class="token plain"> hotsparedrive </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain">dgs</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">n</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">0,1</span><span class="token plain">,2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token plain">.</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">enclaffinity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">nonrevertible</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">/sx delete hotsparedrive</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>如果 enclosures 用来连接控制器下的物理磁盘，要在命令行中指定 enclosure ID</li></ul><p><code>storcli /cx[/ex]/sx add hotsparedrive [{dgs=&lt;n|0,1,2...&gt;}] [enclaffinity] [nonrevertible]</code>：创建热备盘。可通过以下选项创建热备盘。</p><table><thead><tr><th>Option</th><th>Value Range</th><th>Description</th></tr></thead><tbody><tr><td>dgs</td><td>Valid drive group number</td><td>Specifies the drive group to which the hot spare drive is dedicated.</td></tr><tr><td>enclaffinity</td><td>Valid enclosure number</td><td>Specifies the enclosure with which the hot spare is associated. If this</td></tr><tr><td>option is specified, affinity is set; if it is not specified, there is no affinity.</td><td></td><td></td></tr><tr><td>Affinity cannot be removed after it is set for a hot spare drive.</td><td></td><td></td></tr><tr><td>nonrevertible</td><td>—</td><td>Sets the drive as a nonrevertible hot spare.</td></tr></tbody></table><p>做一个实验：</p><ol><li><p>创建一个磁盘组 raid5</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 add vd type=raid5 size=2gb,3gb,4gb name=tmp1,tmp2,tmp3 drives=18:0-2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Add VD Succeeded.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>创建 slot3 为热备盘</p><ul><li><p>全局热备盘</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s3 add hotsparedrive</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>把 slot3 设为 groups 1 的专用热备盘</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s3 add hotsparedrive dgs=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Add Hot Spare Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># slot3 的状变为 DHS，即 Dedicated Hot Spare</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s3 show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Show Drive Information Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Drive Information </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">EID:Slt DID State DG       Size Intf Med SED PI SeSz Model               Sp Type </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:3     </span><span class="token number" style="color:rgb(9, 134, 88)">34</span><span class="token plain"> DHS   </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">446.625</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>模拟 slot2 坏掉</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 模拟 slot2 坏掉</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s2 set offline</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Set Drive Offline Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># slot3 自动顶上</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s3 show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Show Drive Information Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Drive Information </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">EID:Slt DID State DG       Size Intf Med SED PI SeSz Model               Sp Type </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:3     </span><span class="token number" style="color:rgb(9, 134, 88)">34</span><span class="token plain"> Onln   </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">446.625</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p><code>storcli /cx/[ex]/sx delete hotsparedrive</code>：删除热备盘</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s3 delete hotsparedrive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Delete Hot Spare Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s3 show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Show Drive Information Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Drive Information </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">EID:Slt DID State DG       Size Intf Med SED PI SeSz Model               Sp Type </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">:3     </span><span class="token number" style="color:rgb(9, 134, 88)">34</span><span class="token plain"> UGood -  </span><span class="token number" style="color:rgb(9, 134, 88)">446.625</span><span class="token plain"> GB SATA SSD N   N  512B INTEL SSDSC2KB480G8 U  -  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="732vd-命令">7.3.2、VD 命令<a class="hash-link" href="#732vd-命令" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7321创建-vd">7.3.2.1、创建 VD<a class="hash-link" href="#7321创建-vd" title="标题的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token function" style="color:rgb(0, 0, 255)">add</span><span class="token plain"> vd raid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">6</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">00</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">50</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">60</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Size</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">VD1_Sz</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain">,</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">VD2_Sz</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain">,</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">remaining</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">name</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">VDNAME</span><span class="token operator file-descriptor important" style="color:rgb(0, 0, 0)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain">,</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">drives</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">e:s</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">e:s-x,y,e:s-x,y,z </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">PDperArray</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">SED</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">pdcache</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">default</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">pi</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">DimmerSwitch</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">ds</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">default</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">automatic</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">auto</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> none</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">maximum</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">max</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">MaximumWithoutCaching</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">maxnocache</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">wt</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">wb</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">awb</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">nora</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">ra</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">direct</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">cached</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">cachevd</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Strip</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">32</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">64</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">128</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">256</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">102</span><span class="token operator file-descriptor important" style="color:rgb(0, 0, 0)">4</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">AfterVd</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">X</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">EmulationType</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Spares </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">e:</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">s</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">e:</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">s-x</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">e:</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">s-x,y</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">force</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">ExclusiveAccess</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Cbsize</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">Cbmode</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">7</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>MegaRAID 控制器支持的条带大小从最小 64kb 到 1mb 不等，集成 MegaRAID 控制器支持的条带大小仅为 64kb。</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token function" style="color:rgb(0, 0, 255)">add</span><span class="token plain"> vd each raid0 </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">name</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">VDNAME</span><span class="token operator file-descriptor important" style="color:rgb(0, 0, 0)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain">,</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">drives</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">e:s</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">e:s-x</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">e:s-x,y</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">SED</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">pdcache</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">default</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">pi</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">DimmerSwitch</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">ds</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">default</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">automatic</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">auto</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> none</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">maximum</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">max</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">MaximumWithoutCaching</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">maxnocache</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">wt</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">wb</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">awb</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">nora</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">ra</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">direct</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">cached</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">EmulationType</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Strip</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">32</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">64</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">128</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">256</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">102</span><span class="token operator file-descriptor important" style="color:rgb(0, 0, 0)">4</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">ExclusiveAccess</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>MegaRAID 控制器支持的条带大小从最小 64kb 到 1mb 不等，集成 MegaRAID 控制器支持的条带大小仅为 64kb。</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token function" style="color:rgb(0, 0, 255)">add</span><span class="token plain"> VD cachecade</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">cc raid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0,1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> drives </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">e:</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">s</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">e:</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">s-x</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">e:</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">s-x,y </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">WT</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">WB</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">assignvds </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0,1</span><span class="token plain">,2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>该命令用于创建 RAID 配置。可以使用下表中的选项创建 RAID 卷。</li></ul><table><thead><tr><th>Option</th><th>Value Range</th><th>Description</th></tr></thead><tbody><tr><td>raid</td><td>[<!-- -->0</td><td>1</td></tr><tr><td>size</td><td>基于物理驱动器和RAID级别的最大大小</td><td>设置每个虚拟磁盘的大小。默认值为所有被引用磁盘的容量。</td></tr><tr><td>name</td><td>长度为15个字符</td><td>每个虚拟磁盘的磁盘名称</td></tr><tr><td>drives</td><td>有效的 enclosure 和 slot 号</td><td>e:s</td></tr><tr><td>• e 表示 enclosure ID</td><td></td><td></td></tr><tr><td>• s 表示 enclosure 中的槽位号</td><td></td><td></td></tr><tr><td>• e:s-x 是用于表示框 e 中从 s 到 x 槽位的范围约定(最多250个字符)。</td><td></td><td></td></tr><tr><td>确保在每个<!-- -->[<!-- -->e:s<!-- -->]<!-- --> 对中使用了相同的块大小(在物理驱动器中)。例如，如果 e0:s0 对中</td><td></td><td></td></tr><tr><td>使用 4096 字节，那么 e1:s1 对中也使用 4096 字节。不支持在<!-- -->[<!-- -->e:s<!-- -->]<!-- --> 对之间混合块大小。</td><td></td><td></td></tr><tr><td>pdperarray</td><td>1–16</td><td>指定每个阵列的物理驱动器数量。系统自动选择默认值。</td></tr><tr><td>sed</td><td>—</td><td>创建启用了安全性的驱动器</td></tr><tr><td>pdcache</td><td>on</td><td>off</td></tr><tr><td>pi</td><td>—</td><td>使保护信息</td></tr><tr><td>dimmerswitch</td><td>default: 逻辑设备采用控制器默认节能策略。</td><td></td></tr><tr><td>automatic (auto): 逻辑设备省电由固件管理。</td><td></td><td></td></tr><tr><td>none: 无节能策略。</td><td></td><td></td></tr><tr><td>maximum (max): 逻辑设备最大节电。</td><td></td><td></td></tr><tr><td>MaximumWithoutCaching(maxnocache): 逻辑设备不缓存写，以最大限度地节省电力。</td><td>节能策略。</td><td></td></tr><tr><td>自动设置为默认值。</td><td></td><td></td></tr><tr><td>direct</td><td>cached</td><td>cached: 缓存的I/O。</td></tr><tr><td>direct: 直接I/O。</td><td>设置逻辑盘 cache 策略。</td><td></td></tr><tr><td>直接 I/O 是默认的。</td><td></td><td></td></tr><tr><td>EmulationType</td><td>0: 默认仿真，这意味着如果在配置的 ID 中有 512e 驱动器，那么每个扇区的物理字节显示为 512e (4k)。如果没有 512e 驱动器，则每个扇区的物理字节数为 512e 512 n。</td><td></td></tr><tr><td>1: 禁用，这意味着即使在配置的 ID 中有 512e 驱动器，每个扇区的物理字节也会显示512 n。</td><td></td><td></td></tr><tr><td>2: Force，这意味着即使在配置的 ID 中没有 512e 驱动器，每个扇区的物理字节将显示为512 e (4 k)。</td><td></td><td></td></tr><tr><td>wt</td><td>wb</td><td>awb</td></tr><tr><td>• wb : Write back.</td><td></td><td></td></tr><tr><td>• awb : Always Write Back.</td><td>开启直写</td><td></td></tr><tr><td>缓存写是默认配置</td><td></td><td></td></tr><tr><td>nora</td><td>ra</td><td>• ra : Read ahead.</td></tr><tr><td>• nora : No read ahead.</td><td>禁止直读</td><td></td></tr><tr><td>开启是默认配置</td><td></td><td></td></tr><tr><td>cachevd</td><td>—</td><td>启用创建的虚拟磁盘的SSD caching功能。</td></tr><tr><td>strip</td><td>8 , 16 , 32 , 64 , 128 , 256 , 512 , 1024</td><td></td></tr><tr><td>备注: 支持的条带大小从最小 64kb 到 1mb 不等</td><td></td><td></td></tr><tr><td>集成 MegaRAID 控制器仅为64kb</td><td>设置 RAID 配置的条带大小。</td><td></td></tr><tr><td>aftervd</td><td>有效的虚拟磁盘号</td><td>在指定的相邻空闲槽中创建VD</td></tr><tr><td>spares</td><td>存在空闲物理驱动器数</td><td>指定要分配给磁盘组作为备用的物理驱动器</td></tr><tr><td>force</td><td>强制将安全物理驱动器添加到没有安全性的现有驱动器组</td><td>强制将具有安全性的物理驱动器添加到没有安全性的驱动器组中</td></tr></tbody></table><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 add vd raid10 size=2gb,3gb,4gb names=tmp1,tmp2,tmp3 drives=18:0-3 pdperarray=2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Add VD Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7322删除-vd">7.3.2.2、删除 VD<a class="hash-link" href="#7322删除-vd" title="标题的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">vall del </span><span class="token comment" style="color:rgb(0, 128, 0)"># 删除所有 vd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">vall del cachecade   </span><span class="token comment" style="color:rgb(0, 128, 0)"># 删除 SSD 缓存的 VD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">vall del force   </span><span class="token comment" style="color:rgb(0, 128, 0)"># 强制删除所有 vd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx del </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">cachecade</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">discardcache</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">force</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>如果虚拟磁盘有用户数据，必须使用 force 选项删除虚拟磁盘。</li><li>具有有效主引导记录(MBR)和分区表的虚拟驱动器被认为包含用户数据。</li><li>注意 cachecade 需要 storcli /c0/v1 set ssdcaching=on<ul><li>如果提示 &quot;Controller has no Cachecade support&quot;，说明此 raid 卡不支持</li><li><strong>另外，当我们在使用某个功能的时候报错，要考虑是否开启了 controller、enclosure 和 vd 上的相关属性。</strong></li></ul></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 删除控制器 C0 上所有的配置 SSD 缓存的 VD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 我们这个 raid 卡不支持 ssd cachecade</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 del cachecade</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Failure</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> CacheCade is not supported</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7323查看-vd-命令">7.3.2.3、查看 vd 命令<a class="hash-link" href="#7323查看-vd-命令" title="标题的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 查看控制器指定 VD 的摘要信息或全部信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx show</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx show all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Virtual Drives </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">DG/VD TYPE   State Access Consist Cache Cac sCC       Size Name </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">/1   RAID10 Optl  RW     No      RWTD  -   ON  </span><span class="token number" style="color:rgb(9, 134, 88)">893.250</span><span class="token plain"> GB tmp1 </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7324保留缓存命令">7.3.2.4、保留缓存命令<a class="hash-link" href="#7324保留缓存命令" title="标题的直接链接">​</a></h4><p>如果虚拟磁盘离线或由于丢失物理磁盘而被删除，控制器将从虚拟磁盘中保留脏缓存。StorCLI 实用程序支持以下保留缓存的命令</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx delete preservedCache </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">force</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx show preservedCache</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx delete preservedcache</code>：</p><p>该命令将删除控制器上某个处于缺失状态的特定虚拟磁盘的保留缓存。当虚拟磁盘处于离线状态时，使用 force 选项将保留的缓存连同虚拟磁盘一起删除</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 delete preservedcache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> No Virtual Drive has Preserved Cache Data.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx show preservedCache</code>：</p><p>该命令显示保留了缓存的虚拟磁盘，以及该虚拟磁盘是否离线或丢失。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 show preservedcache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> No Virtual Drive has Preserved Cache Data.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7325修改-vd-属性">7.3.2.5、修改 VD 属性<a class="hash-link" href="#7325修改-vd-属性" title="标题的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">accesspolicy</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">rw</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">ro</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">blocked</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">rmvblkd</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">iopolicy</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">cached</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">direct</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">name</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">namestring</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">pdcache</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">default</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">rdcache</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">ra</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">nora</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">vall </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">ssdcaching</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">vall </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">HostAccess</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">ExclusiveAccess</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">SharedAccess</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">wrcache</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">wt</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">wb</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">awb</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">emulationType</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">ds</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Default</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">Auto</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">None</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">Max</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">MaxNoCache</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">autobgi</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">On</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">Off</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">pi</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Off</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">bootdrive</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">On</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">Off</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">hidden</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">On</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">Off</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">cbsize</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">cbmode</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx set accesspolicy=&lt;rw|ro|blocked|rmvblkd&gt;</code>：</p><p>该命令将虚拟磁盘的访问策略设置为 read/write、read only、blocked 或 rmvblkd (remove或blocked)。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set accesspolicy=rw</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property  Value Status  ErrCd ErrMsg </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> AccPolicy RW    Success     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> -    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx set iopolicy=&lt;cached|direct&gt;</code>：</p><p>该命令将虚拟磁盘的 I/O 策略设置为缓存 I/O 或直接 I/O。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set iopolicy=cached</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property Value  Status  ErrCd ErrMsg </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> IoPolicy Cached Success     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> -    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx set name=&lt;namestring&gt;</code>：</p><p>该命令为虚拟磁盘命名。名称限制为 15 个字符。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set name=Brinnatt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property Value    Status  ErrCd ErrMsg </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> Name     Brinnatt Success     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> -    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx set pdcache=&lt;on|off|default&gt;</code>：</p><p>该命令将虚拟磁盘上的当前磁盘缓存策略设置为打开、关闭或默认设置。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set pdcache=on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Failure</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property Value Status ErrCd ErrMsg                      </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> PdCac    -     Failed   </span><span class="token number" style="color:rgb(9, 134, 88)">255</span><span class="token plain"> SSD Physical drive is present </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx set rdcache=&lt;ra|nora&gt;</code>：</p><p>该命令将虚拟磁盘的读 cache 策略设置为预读或不预读。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set rdcache=nora</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property Value Status  ErrCd ErrMsg </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> rdCache  NoRA  Success     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> -    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx|vall set ssdcaching=&lt;on|off&gt;</code>：</p><p>该命令分配 CacheCade 虚拟磁盘。如果 ssdcaching=off，表示 CacheCade 虚拟磁盘被移除。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 这个 raid 卡不支持 cachecade</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set ssdcaching=on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Failure</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property   Value Status ErrCd ErrMsg                             </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> SSDCaching On    Failed   </span><span class="token number" style="color:rgb(9, 134, 88)">255</span><span class="token plain"> Controller has no Cachecade support. </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx|vall set HostAccess=ExclusiveAccess|SharedAccess</code>：</p><p>该命令用于设置虚拟磁盘的主机访问策略。当主机访问策略为独占访问时，服务器对虚拟磁盘具有独占访问权限。服务器之间不能共享虚拟驱动器。如果主机策略为共享访问，则可以在服务器之间共享虚拟磁盘。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># 当前 raid 卡不支持 HostAccess</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set HostAccess=ExclusiveAccess</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Failure</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property   Value Status ErrCd ErrMsg                                         </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> HostAccess -     Failed   </span><span class="token number" style="color:rgb(9, 134, 88)">255</span><span class="token plain"> This feature is not supported on this Controller </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx set wrcache=&lt;wt|wb|awb&gt;</code>：</p><p>该命令将虚拟磁盘的写 cache 策略设置为回写、透写或始终回写。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set wrcache=wt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property Value Status  ErrCd ErrMsg </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> wrCache  WT    Success     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> -    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx set hidden=on|off</code>：</p><p>该命令隐藏或显示虚拟驱动器。如果 hidden=on，表示虚拟磁盘不会被导出到操作系统。操作系统将无法读取或写入该虚拟驱动器，直到该虚拟驱动器被显示。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># fdisk -l | egrep &quot;Disk /dev&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sda: </span><span class="token number" style="color:rgb(9, 134, 88)">446.64</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">479559942144</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">936640512</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sdb: </span><span class="token number" style="color:rgb(9, 134, 88)">893.26</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">959119884288</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">1873281024</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set hidden=on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property Value Status  ErrCd ErrMsg </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> Hidden   On    Success     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> -    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># fdisk -l | egrep &quot;Disk /dev&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Disk /dev/sda: </span><span class="token number" style="color:rgb(9, 134, 88)">446.64</span><span class="token plain"> GiB, </span><span class="token number" style="color:rgb(9, 134, 88)">479559942144</span><span class="token plain"> bytes, </span><span class="token number" style="color:rgb(9, 134, 88)">936640512</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx set cbsize=0|1|2 cbmode=0|1|2|3|4|7</code>：</p><p>该命令用于设置虚拟磁盘的 Cache bypass 大小和 Cache bypass 模式。</p><p>cbsize选项的取值如下:</p><ul><li>0 – 64k cache bypass.</li><li>1 – 128k cache bypass.</li><li>2 – 256k cache bypass.</li></ul><p>cbmode选项的值如下:</p><ul><li>0 – Enable the intelligent mode cache bypass.</li><li>1 – Enable the standard mode cache bypass.</li><li>2 – Enable the custom mode cache bypass 1.</li><li>3 – Enable the custom mode cache bypass 2.</li><li>4 – Enable the custom mode cache bypass 3.</li><li>7 – Disable Cache bypass.<ul><li>当 cbmode 设置为 7 时，将忽略用户提供的 cbsize 值。</li></ul></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 set cbsize=1 cbmode=7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Property    Value Status  ErrCd ErrMsg </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> Cachebypass -     Success     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> -    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7326vd-初始化">7.3.2.6、VD 初始化<a class="hash-link" href="#7326vd-初始化" title="标题的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx show init</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx start init </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">full</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Force</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx stop init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>如果虚拟磁盘有用户数据，必须使用 force 选项初始化虚拟磁盘。</li><li>具有有效 MBR 和分区表的虚拟驱动器被认为包含用户数据。</li></ul><p><code>storcli /cx/vx show init</code>：</p><p>该命令以百分比显示虚拟磁盘初始化进度。还显示了完成操作所需的估计时间(以分钟计)。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-----------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Progress% Status          Estimated Time Left </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-----------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> INIT      -         Not </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> progress -                 </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-----------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx start init [full]</code>：</p><p>该命令启动虚拟磁盘的初始化。默认的初始化类型是快速初始化。如果指定 full 选项，将启动虚拟磁盘的全量初始化。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 start init full</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Start INIT Operation Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Progress% Status      Estimated Time Left </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> INIT              </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> In progress </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain"> Minutes        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx stop init</code>：</p><p>该命令停止虚拟磁盘的初始化，已停止的初始化不能恢复</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Progress% Status      Estimated Time Left </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> INIT             </span><span class="token number" style="color:rgb(9, 134, 88)">19</span><span class="token plain"> In progress </span><span class="token number" style="color:rgb(9, 134, 88)">13</span><span class="token plain"> Minutes        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 stop init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Stop INIT Operation Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-----------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Progress% Status          Estimated Time Left </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-----------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> INIT      -         Not </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> progress -                 </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-----------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7327vd-擦除">7.3.2.7、VD 擦除<a class="hash-link" href="#7327vd-擦除" title="标题的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">start</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">stop</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> erase</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx show erase</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx start erase</code>：</p><p>在指定的虚拟磁盘上启动数据擦除操作。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 start erase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Start ERASE Operation Success</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx show erase</code>：</p><p>该命令显示虚拟磁盘上的擦除操作的状态。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show erase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Progress% Status      Estimated Time Left </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> ERASE             </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain"> In progress </span><span class="token number" style="color:rgb(9, 134, 88)">15</span><span class="token plain"> Minutes        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7328vd-迁移">7.3.2.8、VD 迁移<a class="hash-link" href="#7328vd-迁移" title="标题的直接链接">​</a></h4><p>嵌入式 MegaRAID 不支持虚拟磁盘迁移命令。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx show migrate</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx start migrate </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">type</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">raidx</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">option</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">add</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">remove</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">drives</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">e:</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">s</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">e:</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">s-x</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">e:</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">s-x,y</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Force</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>如果没有 RAID 级别迁移，可用容量减少是不可能的。</li></ul><p><code>storcli /cx/vx show migrate</code>：</p><p>该命令以百分比显示虚拟磁盘迁移进度。还显示了完成操作所需的估计时间(以分钟计)。</p><p><code>storcli /cx/vx start migrate &lt;type=raidlevel&gt; [option=&lt;add | remove&gt; drives=&lt;e1:s1,e2:s2 ...&gt; ]</code>：</p><p>通过添加或移除现有虚拟磁盘中的磁盘，将虚拟磁盘重构到指定的 RAID 级别。可以在 start migrate 命令中使用以下选项。</p><table><thead><tr><th>Options</th><th>Value Range</th><th>Description</th></tr></thead><tbody><tr><td>type = RAID level</td><td>RAID<!-- -->[<!-- -->0</td><td>1</td></tr><tr><td>[<!-- -->option=&lt;add</td><td>remove&gt;drives=&lt;e1:s1,e2:s2, …&gt;<!-- -->]</td><td>add: 添加磁盘到虚拟磁盘并开始重构。</td></tr><tr><td>remove: 从虚拟磁盘中移除磁盘并开始重构。</td><td></td><td></td></tr><tr><td>drives: 要加入虚拟磁盘的硬盘的 enclosure 号和 slot 号。</td><td></td><td></td></tr><tr><td>确保在每个<!-- -->[<!-- -->e:s<!-- -->]<!-- -->对中使用了相同的块大小(在物理驱动器中)。</td><td></td><td></td></tr><tr><td>例如，如果e0:s0对中使用4096字节，那么e1:s1对中也使</td><td></td><td></td></tr><tr><td>用4096字节。不支持在<!-- -->[<!-- -->e:s<!-- -->]<!-- -->对之间混合块大小。</td><td>从虚拟磁盘中添加或删除驱动器。</td><td></td></tr></tbody></table><p>以下 RAID 级别可以进行虚拟磁盘迁移。</p><table><thead><tr><th>Initial RAID level</th><th>Migrated RAID level</th></tr></thead><tbody><tr><td>RAID 0</td><td>RAID 1</td></tr><tr><td>RAID 0</td><td>RAID 5</td></tr><tr><td>RAID 0</td><td>RAID 6</td></tr><tr><td>RAID 1</td><td>RAID 0</td></tr><tr><td>RAID 1</td><td>RAID 5</td></tr><tr><td>RAID 1</td><td>RAID 6</td></tr><tr><td>RAID 5</td><td>RAID 0</td></tr><tr><td>RAID 5</td><td>RAID 6</td></tr><tr><td>RAID 6</td><td>RAID 0</td></tr><tr><td>RAID 6</td><td>RAID 5</td></tr></tbody></table><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 add vd type=raid0 drives=18:0,1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Add VD Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 start migrate type=raid5 option=add drives=18:3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Start VD Operation Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show migrate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Progress% Status      Estimated Time Left </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> Migrate           </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> In progress </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> Hours </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain"> Minutes  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>这个实验是在不同的 raid 级别之间进行 migrate，其实在生产环境上不建议这么干，速度慢不说，而且数据损坏风险还比较大。</li><li>大多数情况下，可以在同一 raid 级别下进行增删硬盘。</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7329vd-一致性校验">7.3.2.9、VD 一致性校验<a class="hash-link" href="#7329vd-一致性校验" title="标题的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">start</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">stop</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">pause</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">resume</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">show</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> cc </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">force</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>启动虚拟磁盘一致性检查操作。一般来说，一致性检查操作在初始化的虚拟磁盘上运行。使用 force 选项在未初始化的驱动器上运行一致性检查。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 start cc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Failure</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Status ErrCd ErrMsg           </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> CC        Failed   </span><span class="token number" style="color:rgb(9, 134, 88)">255</span><span class="token plain"> VD not Initialized </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 start init full</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Progress% Status      Estimated Time Left </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> INIT             </span><span class="token number" style="color:rgb(9, 134, 88)">56</span><span class="token plain"> In progress </span><span class="token number" style="color:rgb(9, 134, 88)">6</span><span class="token plain"> Minutes         </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 start cc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Start CC Operation Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show cc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD Operation Progress% Status      Estimated Time Left </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> CC                </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> In progress </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> Seconds         </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="73210vd-扩展">7.3.2.10、VD 扩展<a class="hash-link" href="#73210vd-扩展" title="标题的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx </span><span class="token function" style="color:rgb(0, 0, 255)">expand</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">size</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">value</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">expandarray</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/vx</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">vall show expansion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx expand size=&lt;value&gt; [expandarray]</code>：</p><p>如果您使用大于现有阵列大小的驱动器替换驱动器，则此命令将扩展现有阵列中的虚拟驱动器。</p><p>虽然提供的值可能以 MB 为单位，但扩展大小的值是基于最近的可能单位显示的。</p><p>根据您提供的输入(值)，storcli 从您提供的输入中识别大小，并将大小舍入到驱动器组剩余空闲空间的最近百分比。</p><p>因此，实际扩展的尺寸可能与您要求的尺寸不同。如果指定了 expandarray 选项，则扩展现有的数组。如果不指定此选项，则扩展虚拟磁盘。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 add vd type=raid5 size=2Gb names=first drives=18:0,1,2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Add VD Succeeded.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Virtual Drives </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">DG/VD TYPE  State Access Consist Cache Cac sCC     Size Name  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">/1   RAID5 Optl  RW     No      RWTD  -   ON  </span><span class="token number" style="color:rgb(9, 134, 88)">2.000</span><span class="token plain"> GB first </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">--------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 expand size=10Gb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> expansion operation succeeded</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">EXPANSION RESULT </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD     Size FreSpc     ReqSize   AbsUsrSz  %FreSpc NewSize   Status NoArrExp   </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2.000</span><span class="token plain"> GB </span><span class="token number" style="color:rgb(9, 134, 88)">891.250</span><span class="token plain"> GB </span><span class="token number" style="color:rgb(9, 134, 88)">10.000</span><span class="token plain"> GB </span><span class="token number" style="color:rgb(9, 134, 88)">17.824</span><span class="token plain"> GB       </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">19.824</span><span class="token plain"> GB -      </span><span class="token number" style="color:rgb(9, 134, 88)">891.250</span><span class="token plain"> GB </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Virtual Drives </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">DG/VD TYPE  State Access Consist Cache Cac sCC      Size Name  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">/1   RAID5 Optl  RW     No      RWTD  -   ON  </span><span class="token number" style="color:rgb(9, 134, 88)">19.824</span><span class="token plain"> GB first </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">---------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/vx show expansion</code>：</p><p>该命令显示包含或不包含阵列扩展的虚拟磁盘的扩展信息。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/v1 show expansion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">EXPANSION INFORMATION </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">VD      Size OCE NoArrExp   WithArrExp Status </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">19.824</span><span class="token plain"> GB Y   </span><span class="token number" style="color:rgb(9, 134, 88)">873.424</span><span class="token plain"> GB -          -    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">----------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">OCE - Online Capacity Expansion </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> WithArrExp - With Array Expansion </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">VD</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Virtual Drive </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> NoArrExp - Without Array Expansion</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="733foreign-配置">7.3.3、Foreign 配置<a class="hash-link" href="#733foreign-配置" title="标题的直接链接">​</a></h3><p>StorCLI 工具支持以下命令查看、导入和删除外部配置：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/fall del</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">delete </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">securitykey</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">sssssssssss</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/fall </span><span class="token function" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">preview</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">securitykey</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">sssssssssss</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/fall show </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">all</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">securitykey</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">sssssssssss</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>如果要导入到另外一个使用安全密钥加密并锁定外部配置的服务器中时，需要提供这个安全密钥。</li></ul><p><code>storcli /cx/fall|del| delete [securitykey=sssssssssss]</code>：</p><p>该命令将删除控制器的外部配置。如果控制器已安全，请输入安全密钥。</p><p><code>storcli /cx/fall import [preview] [securitykey=sssssssssss]</code>：</p><p>该命令将导入控制器的外部配置。在导入外部配置之前，preview 选项会显示该配置的摘要。</p><p><code>storcli /cx/fall show [all] [securitykey=sssssssssss]</code>：</p><p>这个命令显示特定控制器的整个外部配置的摘要。all 选项显示整个外部配置的所有信息。</p><p><em>注意：EID:Slot 列为被锁定的外部 PDs 填充。</em></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="734bios-相关命令">7.3.4、BIOS 相关命令<a class="hash-link" href="#734bios-相关命令" title="标题的直接链接">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> bios </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">state</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Mode</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">SOE</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">PE</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">IE</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">SME</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">abs</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">DeviceExposure</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">value</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>该命令用于开启或关闭 MegaRAID 控制器的 BIOS，设置 BIOS 的启动方式，并使 BIOS 能选择最优逻辑盘作为启动盘。模式选项的缩写如下:</p><table><thead><tr><th>mode</th><th>description</th></tr></thead><tbody><tr><td>SOE</td><td>Stop on Errors</td></tr><tr><td>PE</td><td>Pause on Errors</td></tr><tr><td>IE</td><td>Ignore Errors</td></tr><tr><td>SME</td><td>Safe mode on Errors</td></tr></tbody></table><ul><li>传统 BIOS 只能加载有限数量的 PCI 设备 BIOS。关闭 MegaRAID BIOS 以避免 POST 过程中出现问题。</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0 show bios</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller Properties </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-----------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Ctrl_Prop                        Value             </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-----------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Basic Input/Output System </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">BIOS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> ON                </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Auto Boot Select</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">ABS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">            OFF               </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">BIOS Boot Mode                   Safe mode on errors </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Device Exposure                  Expose All        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">-----------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/ex/sx set bootdrive=on|off</code>：</p><p>该命令将指定的物理磁盘设置为启动盘。在下一次重新启动时，BIOS 将在指定的物理驱动器中寻找引导扇区。</p><p><code>storcli /cx/vx set bootdrive=on|off</code>：</p><p>该命令将指定的虚拟磁盘设置为启动盘。在下一次重新启动时，BIOS 将在指定的虚拟驱动器中寻找引导扇区。</p><p><code>storcli /cx/vx show bootdrive</code>：</p><p>该命令显示控制器的启动驱动器。启动盘可以是物理盘，也可以是虚拟盘。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="735dg-命令">7.3.5、DG 命令<a class="hash-link" href="#735dg-命令" title="标题的直接链接">​</a></h3><p>StorCLI 实用程序支持以下驱动器组命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/dall show </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">all</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/dall show cachecade</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/dx show </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">all</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/dx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">security</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/dx </span><span class="token function" style="color:rgb(0, 0, 255)">split</span><span class="token plain"> mirror</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/dall show mirror</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/dall </span><span class="token function" style="color:rgb(0, 0, 255)">add</span><span class="token plain"> mirror </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">src</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">val</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">force</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/dx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">hidden</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/dall show all</code>：该命令显示控制器中所有可用配置信息，包括拓扑信息、虚拟磁盘信息、物理磁盘信息、空闲空间信息和空闲槽位信息。</p><p><code>storcli /cx/dall show cachecade</code>：该命令显示所有 CacheCade 虚拟磁盘信息。</p><p><code>storcli /cx/dx show all</code>：该命令显示磁盘组的物理磁盘和虚拟磁盘信息。</p><p><code>storcli /cx/dx set security=on</code>：该命令开启指定磁盘组的安全性。</p><p><code>storcli /cx/dx split mirror</code>：</p><p>该命令用于对磁盘组执行打破镜像操作。打破镜像操作使 RAID 1 配置的驱动器组被分解成两个卷。您可以在另一个系统中使用一个卷并复制它，而无需复制虚拟驱动器。打破镜像是一个脱机操作。该命令仅在 UEFI 系统支持。</p><p><code>storcli /cx/dall show mirror</code>：该命令显示与该磁盘组关联的镜像的信息。</p><p><code>storcli /cx/dall add mirror src=&lt;val&gt;[force]</code>：该命令将虚拟磁盘与其镜像合并。可能的值为 0、1 或 2。</p><p><code>storcli /cx/dx set hidden=&lt;on|off&gt;</code>：该命令隐藏或显示驱动器组。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="736enclosure-命令">7.3.6、Enclosure 命令<a class="hash-link" href="#736enclosure-命令" title="标题的直接链接">​</a></h3><p>StorCLI 实用程序支持以下 enclosure 命令:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/ex show </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">all</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/ex download </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">src</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> filepath </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">forceActivate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">mode</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">7</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">bufferid</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">val</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/ex download </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">src</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> filepath </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">mode</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">e offline </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">forceActivate </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">delay</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">val</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">bufferid</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">val</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/ex download </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">mode</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">f offline </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">delay</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">val</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">bufferid</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">val</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/ex show status</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/ex show phyerrorcounters</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/ex/sx reset phyerrorcounters</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/ex show all</code>：</p><p>该命令显示 enclosure 的所有信息，包括 enclosure 的总体信息、enclosure 的查询数据、enclosure 元素的个数和 enclosure 元素的信息。</p><p><code>storcli /cx/ex download src=filepath [mode=5 | [forceActivate] mode=7] [bufferid=&lt;val&gt;]</code>：</p><p>这个命令用命令行指定的文件刷新固件。操作完成后，enclosure 会进行错误检查。以下选项可以与 enclosure 固件下载命令一起使用。</p><table><thead><tr><th>Option</th><th>Value Range</th><th>Description</th></tr></thead><tbody><tr><td>forceactivate</td><td>—</td><td>Issues a command descriptor block (CDB) with write command with no data with</td></tr><tr><td>command mode 0x0F (flash download already in progress). This option is used</td><td></td><td></td></tr><tr><td>primarily to activate Scotch Valley enclosures.</td><td></td><td></td></tr></tbody></table><p><em>注意：用于刷新 enclosure 的固件文件可以是任何格式。StorCLI 实用程序假定您提供了一个有效的固件映像。</em></p><p><code>storcli /cx/ex download src=filepath mode=e offline [forceActivate [delay=val]] [bufferid=&lt;val&gt;]</code>：</p><p>该命令使用模式 E 支持驱动器固件。模式 E 下载微码，并允许您为多个设备发出此命令。</p><p>您可以通过在同一命令行中执行 activenow 命令来下载和激活驱动器固件。您也可以指定延迟时间，但您指定的延迟时间只适用于激活，不适用于下载驱动器固件。</p><p><code>storcli /cx/ex download mode=f offline [delay=val] [bufferid=&lt;val&gt;]</code>：</p><p>该命令使用模式 F 支持驱动器固件。模式 F 激活延迟微码，并允许您以安全的方式向所有设备发出此命令。在发出模式 E 命令之前不能发出此命令。缺省情况下，延迟时间为 15 秒。您可以指定 1 到 300 秒之间的任何延迟时间。</p><p><code>storcli /cx/ex show status</code>：该命令显示 enclosure 状态和所有 enclosure 元素的状态。</p><p><code>storcli /cx/ex show phyerrorcounters</code>：该命令显示 enclosure 和 expander phy error counters.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18 show phyerrorcounters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Detailed Status </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">EID PNO InDwdCnt RnDiErCnt LsDwSyCnt PRstPrbCnt </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">6</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">7</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">9</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">11</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">13</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">14</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">15</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">17</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">19</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">20</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">21</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">22</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">23</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">24</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">36</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">25</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">38</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">26</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">23</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">27</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">34</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">28</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">29</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">30</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">31</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">32</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">34</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">35</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">36</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">37</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">18</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">38</span><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">          </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">------------------------------------------------</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">EID</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Enclosure Device ID </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">PNO</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Phy Number </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">InDwdCnt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Invalid dword count </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">RnDiErCnt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Running Disparity Error Count </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">LsDwSyCnt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Loss of dword system count </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">PRstPrbCnt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Phy reset prob count</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/ex/sx reset phyerrorcounters</code>：该命令重置磁盘 phy error counters.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">root@arm64v8 ~</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token comment" style="color:rgb(0, 128, 0)"># storcli /c0/e18/s23 reset phyerrorcounters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CLI Version </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> 007.1316.0000.0000 Mar </span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain">, </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Operating system </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Linux </span><span class="token number" style="color:rgb(9, 134, 88)">4.19</span><span class="token plain">.90-17.ky10.aarch64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Controller </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Status </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Reset Drive PhyErrorCounters Succeeded.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="737phy-命令">7.3.7、PHY 命令<a class="hash-link" href="#737phy-命令" title="标题的直接链接">​</a></h3><p>StorCLI 实用程序支持以下 phy 命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/px</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">pall </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">linkspeed</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">auto</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">1.5</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">6</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/px</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">pall show </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">all</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/px|pall set linkspeed=0(auto)|1.5|3|6|12</code>：</p><p>该命令用于设置 PHY 链路速度。可设置为 1.5Gb/s、3Gb/s、6Gb/s、12Gb/s。当您指定 linkspeed = 0 时，链路速度被设置为自动。</p><p><code>storcli /cx/px|pall show all</code>：该命令显示所有 PHY 层信息。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="738pcie-接口命令">7.3.8、PCIe 接口命令<a class="hash-link" href="#738pcie-接口命令" title="标题的直接链接">​</a></h3><p>PCIe 存储接口是将外设设备连接到主机处理器并通过内存控制器连接到系统中的内存架构的基本接口。PCIe 接口通过一个或多个通道进行通信，每个通道由一个发送和一个接收串行接口组成。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7381通道速度命令">7.3.8.1、通道速度命令<a class="hash-link" href="#7381通道速度命令" title="标题的直接链接">​</a></h4><p>StorCLI 实用程序支持以下通道速度命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/lnx show</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/lnall show</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/lnx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">lanespeed</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">disabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">2.5</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token number" style="color:rgb(9, 134, 88)">16</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx/lnx show</code>：该命令用来显示通道信息。</p><p><code>storcli /cx/lnall show</code>：该命令显示所有退出通道的摘要信息。</p><p><code>storcli /cx/lnx set lanespeed=0 (disabled) | 2.5 |5 | 8 | 16</code>：</p><p>该命令设置通道速度。可设置为 0(禁用)、2.5GT/s、5GT/s、8GT/s、16GT/s。控制器中通道速度默认为 8GT/s 或您上次保存的值。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7382链接配置命令">7.3.8.2、链接配置命令<a class="hash-link" href="#7382链接配置命令" title="标题的直接链接">​</a></h4><p>StorCLI 实用程序支持以下链接配置命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/show linkconfig</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx/set linkconfig </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">connname</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">cx,cy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">linkconfig</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">val</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli cx/show linkconfig</code>：该命令显示当前链路配置、挂起链路配置和可用链路配置信息。</p><p><code>storcli /cx set linkconfig [connname=cx,cy] linkconfig=&lt;val&gt;</code>：该命令用于配置控制器不同端口的链路。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="739logging-命令">7.3.9、Logging 命令<a class="hash-link" href="#739logging-命令" title="标题的直接链接">​</a></h3><p>StorCLI 工具支持以下命令来生成和维护日志文件：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx delete events</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx delete termlog</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx show events </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">file</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">absolute path</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx show eventloginfo</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx show termlog </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">type</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">config</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">contents </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">logfile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">filename</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx show dequeuelog </span><span class="token function" style="color:rgb(0, 0, 255)">file</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">filepath</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx show alilog </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">logfile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">filename</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx delete events</code>：该命令将删除事件日志中的所有记录。</p><p><code>storcli /cx delete termlog</code>：这个命令清除 TTY(用于问题故障排除的固件日志)日志。</p><p><code>storcli /cx show events file=&lt;absolute path&gt;</code>：该命令将系统日志打印到一个文本文件中，并将文件保存到指定的位置。不能转化成 json 格式。</p><p><code>storcli /cx show eventloginfo</code>：该命令显示生成的日志文件的历史。不能转化成 json 格式。</p><p><code>storcli /cx show termlog type=config|contents [logfile[=filename]]</code>：</p><p>此命令显示固件日志。config 选项显示term日志配置(TTY BBU缓冲的设置)；contents 选项显示终端日志。contents 选项是默认的。</p><p>如果在命令语法中使用 logfile 选项，日志将被写入指定的文件。如果不指定文件名，则将日志写入到 storsas.log 文件中。如果在命令语法中不使用 logfile 选项，则将整个日志输出打印到控制台。不能转化成 json 格式。</p><p><code>storcli /cx show dequeuelog =&lt;filepath&gt;</code>：这个命令显示来自固件的调试日志。不能转化成 json 格式。</p><p><code>storcli /cx show alilog [logfile[=filename]]</code>：这个命令获取指定文件的控制器属性、TTY 日志和事件。不能转化成 json 格式。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7310自动化-pd-配置">7.3.10、自动化 PD 配置<a class="hash-link" href="#7310自动化-pd-配置" title="标题的直接链接">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">autoconfig</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">r0 </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">immediate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx show autoconfig</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">autoconfig</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">JBOD</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">jbod</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">storcli /cx </span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">set</span><span class="token plain"> autoconfig </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">none </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> R0 </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">immediate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> JBOD</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">usecurrent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">sesmgmt</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">securesed</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">off</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">multipath</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">multiinit</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">discardpinnedcache</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Val</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">failPDOnReadME</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain">off</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Lowlatency</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">low</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">off</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>storcli /cx set autoconfig=r0 [immediate]</code>：</p><p>该命令用于设置控制器的自动配置策略为 RAID 0。当设置为 RAID 0 时，所有未配置的物理磁盘将被设置为单个RAID 0，直到达到最大虚拟磁盘数量限制。</p><p>immediate 选项让此命令只在所有现有的 Unconfigured Good 驱动器上执行转换(到RAID 0)操作。此时 <strong>autoconfig 设置还是默认值 none</strong>，将来新连接的任何物理驱动器都不会被转换为 RAID 0。</p><p>如果省略此命令中的 immediate 选项，则所有附加的 Unconfigured Good 驱动器将成为单驱动器 RAID 0，<strong>autoconfig 设置将变为 R0</strong>。在新连接的物理驱动器上不会发生到 RAID 0 的转换。</p><p>实际上并没有功能设置让新添加的 Unconfigured Drives 自动转换为 RAID 0。</p><p><em>说明：英文原文我读了很多遍，实验也做过好几遍，加不加 immediate 从执行效果来看完全是一样的，只不过 autoconfig 值会不一样，新加的盘也不会因为加不加 immediate 而自动转化成 raid0，所以纠结于此意义不大。</em></p><p><code>storcli /cx show autoconfig</code>：这个命令用来查看物理磁盘的自动化策略</p><p><code>storcli /cx set autoconfig=JBOD</code>：</p><p>该命令让你设置控制器的物理磁盘自动化策略为 JBOD，当设置为 JBOD 模式后，所有 unconfigured good 磁盘都变成 JBOD。</p><p><em>注意：如果该命令失败，请先启用传统 JBOD 模式，然后重试该命令。</em></p><p><code>storcli /cx set jbod=on|off</code>：该命令用来设置传统的 JBOD 模式</p><p><code>storcli /cx set autoconfig [=none | R0 [immediate] | JBOD&gt; [usecurrent] ] [[sesmgmt=on|off] [securesed=on|off] [multipath=on|off][multiinit=on|off] [discardpinnedcache=Val&gt;] [failPDOnReadME=on|off] [Lowlatency=low|off]]</code>：</p><p>此命令在所选适配器上启用或禁用 autoconfig。可以使用 set autoconfig 命令使用以下选项。</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>none</td><td>Disable autoconfig.</td></tr><tr><td>r0</td><td>Autoconfig for single PD as r0.</td></tr><tr><td>JBOD</td><td>Autoconfig each PD as JBOD.</td></tr><tr><td>immediate</td><td>Configure.</td></tr><tr><td>unconfigured</td><td>Pds once and will not configure any newly inserted UG drives and this option is only for R0.</td></tr><tr><td>usecurrent</td><td>Use current parameter values that are supported while changing the mode.</td></tr><tr><td>sesmgmt</td><td>Enable or disable SES management.</td></tr><tr><td>securesed</td><td>Enable or disable Security on SED.</td></tr><tr><td>multiinit</td><td>Enable or disable multi init.</td></tr><tr><td>multipath</td><td>Enable or disable multi path.</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/linux-primary-6"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">第 6 章 Linux LVM 存储管理</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/linux-primary-8"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">第 8 章 Linux 包管理</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#71常用-raid-组" class="table-of-contents__link toc-highlight">7.1、常用 RAID 组</a><ul><li><a href="#711raid-0" class="table-of-contents__link toc-highlight">7.1.1、RAID 0</a></li><li><a href="#712raid-1" class="table-of-contents__link toc-highlight">7.1.2、RAID 1</a></li><li><a href="#713raid-5" class="table-of-contents__link toc-highlight">7.1.3、RAID 5</a></li><li><a href="#714raid-10" class="table-of-contents__link toc-highlight">7.1.4、RAID 10</a></li><li><a href="#715raid-01" class="table-of-contents__link toc-highlight">7.1.5、RAID 01</a></li></ul></li><li><a href="#72linux-软-raid-管理" class="table-of-contents__link toc-highlight">7.2、Linux 软 raid 管理</a><ul><li><a href="#721实现-raid10" class="table-of-contents__link toc-highlight">7.2.1、实现 RAID10</a></li><li><a href="#722磁盘阵列损坏及修复" class="table-of-contents__link toc-highlight">7.2.2、磁盘阵列损坏及修复</a></li><li><a href="#723raid-备用盘" class="table-of-contents__link toc-highlight">7.2.3、raid 备用盘</a></li><li><a href="#724停止和装配-raid" class="table-of-contents__link toc-highlight">7.2.4、停止和装配 raid</a></li><li><a href="#725彻底移除-raid-设备" class="table-of-contents__link toc-highlight">7.2.5、彻底移除 raid 设备</a></li></ul></li><li><a href="#73linux-硬-raid-管理" class="table-of-contents__link toc-highlight">7.3、Linux 硬 raid 管理</a><ul><li><a href="#731storcli-命令基础" class="table-of-contents__link toc-highlight">7.3.1、storcli 命令基础</a><ul><li><a href="#7311基本语法" class="table-of-contents__link toc-highlight">7.3.1.1、基本语法</a></li><li><a href="#7312系统命令" class="table-of-contents__link toc-highlight">7.3.1.2、系统命令</a></li><li><a href="#7313控制器命令" class="table-of-contents__link toc-highlight">7.3.1.3、控制器命令</a></li><li><a href="#7314物理磁盘命令" class="table-of-contents__link toc-highlight">7.3.1.4、物理磁盘命令</a></li></ul></li><li><a href="#732vd-命令" class="table-of-contents__link toc-highlight">7.3.2、VD 命令</a><ul><li><a href="#7321创建-vd" class="table-of-contents__link toc-highlight">7.3.2.1、创建 VD</a></li><li><a href="#7322删除-vd" class="table-of-contents__link toc-highlight">7.3.2.2、删除 VD</a></li><li><a href="#7323查看-vd-命令" class="table-of-contents__link toc-highlight">7.3.2.3、查看 vd 命令</a></li><li><a href="#7324保留缓存命令" class="table-of-contents__link toc-highlight">7.3.2.4、保留缓存命令</a></li><li><a href="#7325修改-vd-属性" class="table-of-contents__link toc-highlight">7.3.2.5、修改 VD 属性</a></li><li><a href="#7326vd-初始化" class="table-of-contents__link toc-highlight">7.3.2.6、VD 初始化</a></li><li><a href="#7327vd-擦除" class="table-of-contents__link toc-highlight">7.3.2.7、VD 擦除</a></li><li><a href="#7328vd-迁移" class="table-of-contents__link toc-highlight">7.3.2.8、VD 迁移</a></li><li><a href="#7329vd-一致性校验" class="table-of-contents__link toc-highlight">7.3.2.9、VD 一致性校验</a></li><li><a href="#73210vd-扩展" class="table-of-contents__link toc-highlight">7.3.2.10、VD 扩展</a></li></ul></li><li><a href="#733foreign-配置" class="table-of-contents__link toc-highlight">7.3.3、Foreign 配置</a></li><li><a href="#734bios-相关命令" class="table-of-contents__link toc-highlight">7.3.4、BIOS 相关命令</a></li><li><a href="#735dg-命令" class="table-of-contents__link toc-highlight">7.3.5、DG 命令</a></li><li><a href="#736enclosure-命令" class="table-of-contents__link toc-highlight">7.3.6、Enclosure 命令</a></li><li><a href="#737phy-命令" class="table-of-contents__link toc-highlight">7.3.7、PHY 命令</a></li><li><a href="#738pcie-接口命令" class="table-of-contents__link toc-highlight">7.3.8、PCIe 接口命令</a><ul><li><a href="#7381通道速度命令" class="table-of-contents__link toc-highlight">7.3.8.1、通道速度命令</a></li><li><a href="#7382链接配置命令" class="table-of-contents__link toc-highlight">7.3.8.2、链接配置命令</a></li></ul></li><li><a href="#739logging-命令" class="table-of-contents__link toc-highlight">7.3.9、Logging 命令</a></li><li><a href="#7310自动化-pd-配置" class="table-of-contents__link toc-highlight">7.3.10、自动化 PD 配置</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">学习</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/tags">标签</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">归档</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/skill">技术笔记</a></li><li class="footer__item"><a class="footer__link-item" href="/project">实战项目</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/linux">Linux</a></li></ul></div><div class="col footer__col"><div class="footer__title">社交媒体</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">关于我</a></li><li class="footer__item"><a href="https://github.com/zqingfa" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juejin.cn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">掘金<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="right" href="/friends">友链</a></li><li class="footer__item"><a class="footer__link-item" position="right" href="/website">导航</a></li><li class="footer__item"><a href="https://docusaurus.io/zh-CN/" target="_blank"><img style="height:50px;margin-top:0.5rem" src="/img/buildwith.png"><a></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p><a href="http://beian.miit.gov.cn/">浙ICP备20024502号-1</a></p><p>Copyright © 2022 - PRESENT zhangqf Built with Docusaurus.</p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.9e73f1b3.js"></script>
<script src="/assets/js/main.39d37d57.js"></script>
</body>
</html>