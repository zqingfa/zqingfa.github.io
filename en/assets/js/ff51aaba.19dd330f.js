"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[188],{3905:function(e,n,t){t.d(n,{Zo:function(){return m},kt:function(){return u}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),v=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},m=function(e){var n=v(e.components);return a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),p=v(t),u=r,c=p["".concat(s,".").concat(u)]||p[u]||d[u]||l;return t?a.createElement(c,o(o({ref:n},m),{},{components:t})):a.createElement(c,o({ref:n},m))}));function u(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=p;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var v=2;v<l;v++)o[v]=t[v];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},39453:function(e,n,t){t.r(n),t.d(n,{assets:function(){return m},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return i},metadata:function(){return v},toc:function(){return d}});var a=t(87462),r=t(63366),l=(t(67294),t(3905)),o=["components"],i={id:"linux-primary-6",slug:"/linux-primary-6",title:"\u7b2c 6 \u7ae0 Linux LVM \u5b58\u50a8\u7ba1\u7406",authors:"zhangqf",keywords:["linux","LVM"]},s=void 0,v={unversionedId:"linux/primary/linux-primary-6",id:"linux/primary/linux-primary-6",title:"\u7b2c 6 \u7ae0 Linux LVM \u5b58\u50a8\u7ba1\u7406",description:"LVM(Logical Volume Manager) \u53ef\u4ee5\u8ba9\u5206\u533a\u53d8\u5f97\u5f39\u6027\uff0c\u53ef\u4ee5\u968f\u65f6\u968f\u5730\u7684\u6269\u5927\u548c\u7f29\u5c0f\u5206\u533a\u5927\u5c0f\uff0c\u524d\u63d0\u662f\u8be5\u5206\u533a\u662f LVM \u683c\u5f0f\u7684\u3002",source:"@site/docs/linux/primary/\u7b2c 6 \u7ae0 Linux LVM \u5b58\u50a8\u7ba1\u7406.md",sourceDirName:"linux/primary",slug:"/linux-primary-6",permalink:"/en/docs/linux-primary-6",draft:!1,tags:[],version:"current",frontMatter:{id:"linux-primary-6",slug:"/linux-primary-6",title:"\u7b2c 6 \u7ae0 Linux LVM \u5b58\u50a8\u7ba1\u7406",authors:"zhangqf",keywords:["linux","LVM"]},sidebar:"linux",previous:{title:"\u7b2c 5 \u7ae0 Linux \u78c1\u76d8\u7ba1\u7406",permalink:"/en/docs/linux-primary-5"},next:{title:"\u7b2c 7 \u7ae0 Linux Raid \u5b58\u50a8\u7ba1\u7406",permalink:"/en/docs/linux-primary-7"}},m={},d=[{value:"6.1\u3001LVM \u76f8\u5173\u6982\u5ff5",id:"61lvm-\u76f8\u5173\u6982\u5ff5",level:2},{value:"6.2\u3001LVM \u5199\u5165\u673a\u5236",id:"62lvm-\u5199\u5165\u673a\u5236",level:2},{value:"6.3\u3001LVM \u7684\u5b9e\u73b0",id:"63lvm-\u7684\u5b9e\u73b0",level:2},{value:"6.3.1\u3001\u7ba1\u7406 PV",id:"631\u7ba1\u7406-pv",level:3},{value:"6.3.2\u3001\u7ba1\u7406 VG",id:"632\u7ba1\u7406-vg",level:3},{value:"6.3.3\u3001\u7ba1\u7406 LV",id:"633\u7ba1\u7406-lv",level:3},{value:"6.3.4\u3001\u683c\u5f0f\u5316 lv \u6587\u4ef6\u7cfb\u7edf",id:"634\u683c\u5f0f\u5316-lv-\u6587\u4ef6\u7cfb\u7edf",level:3},{value:"6.4\u3001LVM \u6269\u5bb9",id:"64lvm-\u6269\u5bb9",level:2},{value:"6.5\u3001LVM \u7f29\u5bb9",id:"65lvm-\u7f29\u5bb9",level:2}],p={toc:d};function u(e){var n=e.components,i=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},p,i,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"LVM(Logical Volume Manager) \u53ef\u4ee5\u8ba9\u5206\u533a\u53d8\u5f97\u5f39\u6027\uff0c\u53ef\u4ee5\u968f\u65f6\u968f\u5730\u7684\u6269\u5927\u548c\u7f29\u5c0f\u5206\u533a\u5927\u5c0f\uff0c\u524d\u63d0\u662f\u8be5\u5206\u533a\u662f LVM \u683c\u5f0f\u7684\u3002"),(0,l.kt)("p",null,"LVM \u9700\u8981\u4f7f\u7528\u7684\u8f6f\u4ef6\u5305\u4e3a lvm2\uff0c\u4e00\u822c\u5728 RHEL \u7cfb\u5217\u53d1\u884c\u7248\u4e2d\u90fd\u5df2\u7ecf\u9884\u5b89\u88c5\u4e86\u3002"),(0,l.kt)("h2",{id:"61lvm-\u76f8\u5173\u6982\u5ff5"},"6.1\u3001LVM \u76f8\u5173\u6982\u5ff5"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"PV(Physical Volume) \u5373\u7269\u7406\u5377"),(0,l.kt)("p",{parentName:"li"},"\u786c\u76d8\u5206\u533a\u540e(\u8fd8\u672a\u683c\u5f0f\u5316\u4e3a\u6587\u4ef6\u7cfb\u7edf)\u4f7f\u7528 pvcreate \u547d\u4ee4\u53ef\u4ee5\u5c06\u5206\u533a\u521b\u5efa\u4e3a pv\uff0c\u8981\u6c42\u5206\u533a\u7684 system ID \u4e3a 8e\uff0c\u5373\u4e3a LVM \u683c\u5f0f\u7684\u7cfb\u7edf\u6807\u8bc6\u7b26\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"VG(Volume Group) \u5373\u5377\u7ec4"),(0,l.kt)("p",{parentName:"li"},"\u5c06\u591a\u4e2a PV \u7ec4\u5408\u8d77\u6765\uff0c\u4f7f\u7528 vgcreate \u547d\u4ee4\u521b\u5efa\u6210\u5377\u7ec4\uff0c\u8fd9\u6837\u5377\u7ec4\u5305\u542b\u4e86\u591a\u4e2a PV \u5c31\u6bd4\u8f83\u5927\u4e86\uff0c\u76f8\u5f53\u4e8e\u91cd\u65b0\u6574\u5408\u4e86\u591a\u4e2a\u5206\u533a\u540e\u5f97\u5230\u7684\u78c1\u76d8\u3002"),(0,l.kt)("p",{parentName:"li"},"\u867d\u7136 VG \u662f\u6574\u5408\u591a\u4e2a PV \u7684\uff0c\u4f46\u662f\u521b\u5efa VG \u65f6\u4f1a\u5c06 VG \u6240\u6709\u7684\u7a7a\u95f4\u6839\u636e\u6307\u5b9a\u7684 PE \u5927\u5c0f\u5212\u5206\u4e3a\u591a\u4e2a PE\uff0c\u5728 LVM \u6a21\u5f0f\u4e0b\u7684\u5b58\u50a8\u90fd\u4ee5 PE \u4e3a\u5355\u5143\uff0c\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u7cfb\u7edf\u7684 Block\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"PE(Physical Extend)"),(0,l.kt)("p",{parentName:"li"},"PE \u662f VG \u4e2d\u7684\u5b58\u50a8\u5355\u5143\uff0c\u5b9e\u9645\u5b58\u50a8\u7684\u6570\u636e\u90fd\u662f\u5b58\u50a8\u5728\u8fd9\u91cc\u9762\u7684\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"LV(Logical Volume)"),(0,l.kt)("p",{parentName:"li"},"VG \u76f8\u5f53\u4e8e\u6574\u5408\u8fc7\u7684\u786c\u76d8\uff0c\u90a3\u4e48 LV \u5c31\u76f8\u5f53\u4e8e\u5206\u533a\uff0c\u53ea\u4e0d\u8fc7\u8be5\u5206\u533a\u662f\u901a\u8fc7 VG \u6765\u5212\u5206\u7684\u3002"),(0,l.kt)("p",{parentName:"li"},"VG \u4e2d\u6709\u5f88\u591a PE \u5355\u5143\uff0c\u53ef\u4ee5\u6307\u5b9a\u5c06\u591a\u5c11\u4e2a PE \u5212\u5206\u7ed9\u4e00\u4e2a LV\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u5927\u5c0f(\u5982\u591a\u5c11\u5146)\u6765\u5212\u5206\u3002"),(0,l.kt)("p",{parentName:"li"},"\u5212\u5206\u4e3a LV \u4e4b\u540e\u5c31\u76f8\u5f53\u4e8e\u5212\u5206\u4e86\u5206\u533a\uff0c\u53ea\u9700\u518d\u5bf9 LV \u8fdb\u884c\u683c\u5f0f\u5316\u5373\u53ef\u53d8\u6210\u666e\u901a\u7684\u6587\u4ef6\u7cfb\u7edf\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"LE(logical extent)"),(0,l.kt)("p",{parentName:"li"},"PE \u662f\u7269\u7406\u5b58\u50a8\u5355\u5143\uff0c\u800c LE \u5219\u662f\u903b\u8f91\u5b58\u50a8\u5355\u5143\uff0c\u4e5f\u5373\u4e3a LV \u4e2d\u7684\u903b\u8f91\u5b58\u50a8\u5355\u5143\uff0c\u548c PE \u7684\u5927\u5c0f\u662f\u4e00\u6837\u7684\u3002\u4ece VG \u4e2d\u5212\u5206 LV\uff0c\u5b9e\u9645\u4e0a\u662f\u4ece VG \u4e2d\u5212\u5206 PE\uff0c\u53ea\u4e0d\u8fc7\u5212\u5206 LV \u540e\u5b83\u4e0d\u518d\u79f0\u4e3a PE\uff0c\u800c\u662f LE\u3002"))),(0,l.kt)("p",null,"LVM \u4e4b\u6240\u4ee5\u80fd\u591f\u4f38\u7f29\u5bb9\u91cf\uff0c\u5176\u5b9e\u73b0\u7684\u65b9\u6cd5\u5c31\u662f\u5c06 LV \u91cc\u7a7a\u95f2\u7684 PE \u79fb\u51fa\uff0c\u6216\u5411 LV \u4e2d\u6dfb\u52a0\u7a7a\u95f2\u7684 PE\u3002"),(0,l.kt)("p",null,"\u4ee5\u4e0a\u6982\u5ff5\u4f7f\u7528\u903b\u8f91\u56fe\u8868\u793a\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"LVM concept",src:t(67152).Z,width:"753",height:"661"})),(0,l.kt)("h2",{id:"62lvm-\u5199\u5165\u673a\u5236"},"6.2\u3001LVM \u5199\u5165\u673a\u5236"),(0,l.kt)("p",null,"LV \u662f\u4ece VG \u4e2d\u5212\u5206\u51fa\u6765\u7684\uff0cLV \u4e2d\u7684 PE \u5f88\u53ef\u80fd\u6765\u81ea\u4e8e\u591a\u4e2a PV\u3002\u5728\u5411 LV \u5b58\u50a8\u6570\u636e\u65f6\uff0c\u6709\u591a\u79cd\u5b58\u50a8\u673a\u5236\uff0c\u5176\u4e2d\u4e24\u79cd\u662f\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7ebf\u6027\u6a21\u5f0f(linear)\uff1a\u5148\u5199\u5b8c\u6765\u81ea\u4e8e\u540c\u4e00\u4e2a PV \u7684 PE\uff0c\u518d\u5199\u6765\u81ea\u4e8e\u4e0b\u4e00\u4e2a PV \u7684 PE\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u6761\u5e26\u6a21\u5f0f(striped)\uff1a\u4e00\u4efd\u6570\u636e\u62c6\u5206\u6210\u591a\u4efd\uff0c\u5206\u522b\u5199\u5165\u8be5 LV \u5bf9\u5e94\u7684\u6bcf\u4e2a PV \u4e2d\uff0c\u6240\u4ee5\u8bfb\u5199\u6027\u80fd\u8f83\u597d\uff0c\u7c7b\u4f3c\u4e8e RAID 0\u3002")),(0,l.kt)("p",null,"\u5c3d\u7ba1 striped \u8bfb\u5199\u6027\u80fd\u8f83\u597d\u4e5f\u4e0d\u5efa\u8bae\u4f7f\u7528\u8be5\u6a21\u5f0f\uff0c\u56e0\u4e3a lvm \u7684\u7740\u91cd\u70b9\u5728\u4e8e\u5f39\u6027\u5bb9\u91cf\u6269\u5c55\u800c\u975e\u6027\u80fd\uff0c\u8981\u5b9e\u73b0\u6027\u80fd\u5e94\u8be5\u4f7f\u7528 RAID \u6765\u5b9e\u73b0\uff0c\u800c\u4e14\u4f7f\u7528 striped \u6a21\u5f0f\u65f6\u8981\u8fdb\u884c\u5bb9\u91cf\u7684\u6269\u5c55\u548c\u6536\u7f29\u5c06\u6bd4\u8f83\u9ebb\u70e6\u3002"),(0,l.kt)("p",null,"\u9ed8\u8ba4\u7684\u662f\u4f7f\u7528\u7ebf\u6027\u6a21\u5f0f\u3002"),(0,l.kt)("h2",{id:"63lvm-\u7684\u5b9e\u73b0"},"6.3\u3001LVM \u7684\u5b9e\u73b0"),(0,l.kt)("p",null,"\u51c6\u5907\u4e00\u4e2a\u5982\u4e0a\u56fe\u7684\u73af\u5883\uff1a\u6211\u4eec\u4f7f\u7528\u4e00\u53f0 ARM64 \u67b6\u6784\u7684\u98de\u817e 2000+ \u7684\u7269\u7406\u670d\u52a1\u5668\u4e0a\u7684\u4e00\u53f0\u865a\u62df\u673a\u5b9e\u73b0\u3002"),(0,l.kt)("p",null,"\u9996\u5148\u9700\u8981\u5c06 /dev/sda \u4e0b\u7684\u5206\u533a /dev/sda{1,2,3,4} \u4fee\u6539\u4e3a LVM \u683c\u5f0f\u7684\u6807\u8bc6\u7b26\u3002mbr \u683c\u5f0f\u4e0b\u6807\u8bc6\u7b26\u662f 8e\uff0cgpt \u683c\u5f0f\u4e0b\u662f 8300\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# gdisk -l /dev/sda\nGPT fdisk (gdisk) version 0.8.10\n\nPartition table scan:\n  MBR: protective\n  BSD: not present\n  APM: not present\n  GPT: present\n\nFound valid GPT with protective MBR; using GPT.\nDisk /dev/sda: 2147483648 sectors, 1024.0 GiB\nLogical sector size: 512 bytes\nDisk identifier (GUID): 2CBEB962-B6BD-4A42-AB11-56100F9BCC9D\nPartition table holds up to 128 entries\nFirst usable sector is 34, last usable sector is 2147483614\nPartitions will be aligned on 2048-sector boundaries\nTotal free space is 1098907581 sectors (524.0 GiB)\n\nNumber  Start (sector)    End (sector)  Size       Code  Name\n   1            2048       209717247   100.0 GiB   8300  Linux filesystem\n   2       209717248       419432447   100.0 GiB   8300  Linux filesystem\n   3       419432448       629147647   100.0 GiB   8300  Linux filesystem\n   4       629147648       838862847   100.0 GiB   8300  Linux filesystem\n   5       838862848      1048578047   100.0 GiB   8300  Linux filesystem\n[root@arm64v8 ~]#\n")),(0,l.kt)("h3",{id:"631\u7ba1\u7406-pv"},"6.3.1\u3001\u7ba1\u7406 PV"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4"),(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pvcreate"),(0,l.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa PV")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pvscan"),(0,l.kt)("td",{parentName:"tr",align:null},"\u626b\u63cf\u5e76\u5217\u51fa\u6240\u6709\u7684 pv")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pvdisplay"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5217\u51fa pv \u5c5e\u6027\u4fe1\u606f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pvremove"),(0,l.kt)("td",{parentName:"tr",align:null},"\u79fb\u9664 pv")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pvmove"),(0,l.kt)("td",{parentName:"tr",align:null},"\u79fb\u52a8 pv \u4e2d\u7684\u6570\u636e")))),(0,l.kt)("p",null,"\u5176\u4e2d pvscan \u641c\u7d22\u76ee\u524d\u6709\u54ea\u4e9b pv\uff0c\u626b\u63cf\u4e4b\u540e\u5c06\u7ed3\u679c\u653e\u5728\u7f13\u5b58\u4e2d\uff1bpvdisplay \u4f1a\u663e\u793a\u6bcf\u4e2a pv \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5982 PV name \u548c pv size \u4ee5\u53ca\u6240\u5c5e\u7684 VG \u7b49\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5c06 /dev/sda{1,2,3,4} \u521b\u5efa pv\n[root@arm64v8 ~]# pvcreate -y /dev/sda{1,2,3,4}     # -y\u9009\u9879\u7528\u4e8e\u81ea\u52a8\u56de\u7b54yes\n\n# \u4f7f\u7528pvscan\u6765\u67e5\u770b\u54ea\u4e9bpv\u548c\u57fa\u672c\u5c5e\u6027\u3002\n[root@arm64v8 ~]# pvscan \n  PV /dev/sda4                      lvm2 [<102.40 GiB]\n  PV /dev/sda3                      lvm2 [102.40 GiB]\n  PV /dev/sda2                      lvm2 [<102.40 GiB]\n  PV /dev/sda1                      lvm2 [<102.40 GiB]\n  Total: 4 [<409.60 GiB] / in use: 0 [0   ] / in no VG: 4 [<409.60 GiB]\n[root@arm64v8 ~]#\n")),(0,l.kt)("p",null,'\u6ce8\u610f\u6700\u540e\u4e00\u884c\u663e\u793a\u7684\u662f "pv \u7684\u603b\u5bb9\u91cf / \u5df2\u4f7f\u7528\u7684 pv \u5bb9\u91cf / \u7a7a\u95f2\u7684 pv \u5bb9\u91cf"'),(0,l.kt)("p",null,"\u4f7f\u7528 pvdisplay \u67e5\u770b\u5176\u4e2d\u4e00\u4e2a pv \u7684\u5c5e\u6027\u4fe1\u606f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# pvdisplay /dev/sda1\n  "/dev/sda1" is a new physical volume of "<102.40 GiB"\n  --- NEW Physical volume ---\n  PV Name               /dev/sda1\n  VG Name             \n  PV Size               <102.40 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               p9jsx0-AJIY-rWCf-eomh-mNTN-55eQ-dUo9C2\n\n[root@arm64v8 ~]# \n')),(0,l.kt)("p",null,'pvdisplay \u8fd8\u6709\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u9009\u9879 "-m"\uff0c\u53ef\u4ee5\u67e5\u770b\u8be5\u8bbe\u5907\u4e2d PE \u7684\u4f7f\u7528\u5206\u5e03\u56fe\u3002\u4ee5\u4e0b\u662f\u67d0\u6b21\u663e\u793a\u7ed3\u679c\u3002'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# pvdisplay -m /dev/sda2\n  --- Physical volume ---\n  PV Name               /dev/sda2\n  VG Name               BrinnattVg\n  PV Size               <102.40 GiB / not usable 9.00 MiB\n  Allocatable           yes \n  PE Size               16.00 MiB\n  Total PE              6553\n  Free PE               4454\n  Allocated PE          2099\n  PV UUID               rQv2z4-VKB8-3kFq-X3Lr-iaP7-donM-sWAx3N\n\n  --- Physical Segments ---\n  Physical extent 0 to 4453:\n    FREE\n  Physical extent 4454 to 6552:\n    Logical volume  /dev/BrinnattVg/first_lv\n    Logical extents 10807 to 12905\n\n[root@arm64v8 ~]#\n")),(0,l.kt)("p",null,"\u77e5\u9053\u4e86 PE \u7684\u5206\u5e03\uff0c\u5c31\u53ef\u4ee5\u8f7b\u677e\u5730\u4f7f\u7528 pvmove \u547d\u4ee4\u5728\u8bbe\u5907\u4e4b\u95f4\u8fdb\u884c PE \u6570\u636e\u7684\u79fb\u52a8\u3002\u5177\u4f53\u5173\u4e8e pvmove \u7684\u7528\u6cd5\uff0c\u8bf7\u5bf9\u7167\u540e\u6587\u4e2d\u7684 lvm \u7f29\u5bb9\u90e8\u5206\u3002"),(0,l.kt)("p",null,"\u518d\u6d4b\u8bd5 pvremove\uff0c\u79fb\u9664 /dev/sda4\uff0c\u7136\u540e\u5c06\u5176\u6dfb\u52a0\u56de pv\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# pvremove /dev/sda4\n  Labels on physical volume "/dev/sda4" successfully wiped.\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# pvcreate /dev/sda4\n  Physical volume "/dev/sda4" successfully created.\n[root@arm64v8 ~]# \n')),(0,l.kt)("h3",{id:"632\u7ba1\u7406-vg"},"6.3.2\u3001\u7ba1\u7406 VG"),(0,l.kt)("p",null,"\u7ba1\u7406VG\u4e5f\u6709\u51e0\u4e2a\u547d\u4ee4\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4"),(0,l.kt)("th",{parentName:"tr",align:null},"\u529f\u80fd"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"vgcreate"),(0,l.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa VG")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"vgscan"),(0,l.kt)("td",{parentName:"tr",align:null},"\u626b\u63cf\u5e76\u5217\u51fa\u6240\u6709\u7684 vg")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"vgdisplay"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5217\u51fa vg \u5c5e\u6027\u4fe1\u606f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"vgremove"),(0,l.kt)("td",{parentName:"tr",align:null},"\u79fb\u9664 vg\uff0c\u5373\u5220\u9664 vg")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"vgreduce"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4ece vg \u4e2d\u79fb\u9664 pv")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"vgextend"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5c06 pv \u6dfb\u52a0\u5230 vg \u4e2d")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"vgchange"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4fee\u6539 vg \u5c5e\u6027")))),(0,l.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a vg\uff0c\u5e76\u5c06\u4e0a\u8ff0 4 \u4e2a pv /dev/sda{1,2,3,4} \u90fd\u6dfb\u52a0\u5230\u8be5 vg \u4e2d\u3002"),(0,l.kt)("p",null,"\u6ce8\u610f vg \u662f\u9700\u8981\u547d\u540d\u7684\uff0cvg \u53ef\u4ee5\u7b49\u540c\u4e8e\u78c1\u76d8\u7684\u5c42\u6b21\uff0c\u800c\u78c1\u76d8\u662f\u6709\u540d\u79f0\u7684\uff0c\u5982 /dev/sdb\uff0c/dev/sdc \u7b49\u3002"),(0,l.kt)("p",null,"\u540c\u65f6\u521b\u5efa vg \u65f6\u53ef\u4ee5\u4f7f\u7528 -s \u9009\u9879\u6307\u5b9a pe \u7684\u5927\u5c0f\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u9ed8\u8ba4\u4e3a 4M\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# vgcreate -s 16M BrinnattVg /dev/sda{1,2,3,4}\n  Volume group "BrinnattVg" successfully created\n[root@arm64v8 ~]#\n')),(0,l.kt)("p",null,"\u6b64\u5904\u521b\u5efa\u7684 vg \u540d\u79f0\u4e3aBrinnattVg\uff0c\u6307\u5b9a pe \u5927\u5c0f\u4e3a 16M\u3002\u521b\u5efa vg \u540e\uff0c\u662f\u5f88\u96be\u518d\u4fee\u6539 pe \u5927\u5c0f\u7684\uff0c\u53ea\u6709\u7a7a\u6570\u636e\u7684 vg \u53ef\u4ee5\u4fee\u6539\uff0c\u4f46\u8fd9\u6837\u8fd8\u4e0d\u5982\u91cd\u65b0\u521b\u5efa vg\u3002"),(0,l.kt)("p",null,"\u6ce8\u610f\uff0clvm1 \u4e2d\u6bcf\u4e2a vg \u4e2d\u53ea\u80fd\u6709 65534 \u4e2a pe\uff0c\u6240\u4ee5\u6307\u5b9a pe \u7684\u5927\u5c0f\u80fd\u6539\u53d8\u6bcf\u4e2a vg \u7684\u6700\u5927\u5bb9\u91cf\u3002\u4f46\u5728 lvm2 \u4e2d\u5df2\u7ecf\u6ca1\u6709\u8be5\u9650\u5236\u4e86\uff0c\u800c\u73b0\u5728\u8bf4\u7684 lvm \u4e00\u822c\u90fd\u6307 lvm2\uff0c\u8fd9\u4e5f\u662f\u9ed8\u8ba4\u7684\u7248\u672c\u3002"),(0,l.kt)("p",null,"\u521b\u5efa\u4e86 vg \u5b9e\u9645\u4e0a\u662f\u5728 /dev \u76ee\u5f55\u4e0b\u7ba1\u7406\u4e86\u4e00\u4e2a vg \u76ee\u5f55 /dev/BrinnattVg\uff0c\u4e0d\u8fc7\u53ea\u6709\u5728\u521b\u5efa\u4e86 lv \u8be5\u76ee\u5f55\u624d\u4f1a\u88ab\u521b\u5efa\uff0c\u800c\u8be5 vg \u4e2d\u521b\u5efa lv\uff0c\u5c06\u4f1a\u5728\u8be5\u76ee\u5f55\u4e0b\u751f\u6210\u94fe\u63a5\u6587\u4ef6\u6307\u5411 /dev/dm \u8bbe\u5907\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'# vgscan \u67e5\u770b\n[root@arm64v8 ~]# vgscan \n  Reading volume groups from cache.\n  Found volume group "BrinnattVg" using metadata type lvm2\n[root@arm64v8 ~]# \n\n# vgdisplay \u67e5\u770b\n[root@arm64v8 ~]# vgdisplay BrinnattVg \n  --- Volume group ---\n  VG Name               BrinnattVg\n  System ID           \n  Format                lvm2\n  Metadata Areas        4\n  Metadata Sequence No  1\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                0\n  Open LV               0\n  Max PV                0\n  Cur PV                4\n  Act PV                4\n  VG Size               409.56 GiB\n  PE Size               16.00 MiB\n  Total PE              26212\n  Alloc PE / Size       0 / 0   \n  Free  PE / Size       26212 / 409.56 GiB\n  VG UUID               2TFj3n-4hVL-N0ui-jyUG-j7YL-wQBM-lPil4v\n\n[root@arm64v8 ~]#\n')),(0,l.kt)("p",null,"\u4ece vg \u4e2d\u79fb\u9664\u4e00\u4e2a pv\uff0c\u5982 /dev/sda4\uff0c\u518d vgdisplay\uff0c\u53d1\u73b0 pv \u5c11\u4e86\u4e00\u4e2a\uff0cpe \u76f8\u5e94\u7684\u4e5f\u51cf\u5c11\u4e86\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# vgreduce BrinnattVg /dev/sda4\n  Removed "/dev/sda4" from volume group "BrinnattVg"\n[root@arm64v8 ~]#\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# vgdisplay BrinnattVg \n  --- Volume group ---\n  VG Name               BrinnattVg\n  System ID           \n  Format                lvm2\n  Metadata Areas        3\n  Metadata Sequence No  2\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                0\n  Open LV               0\n  Max PV                0\n  Cur PV                3\n  Act PV                3\n  VG Size               307.17 GiB\n  PE Size               16.00 MiB\n  Total PE              19659\n  Alloc PE / Size       0 / 0   \n  Free  PE / Size       19659 / 307.17 GiB\n  VG UUID               2TFj3n-4hVL-N0ui-jyUG-j7YL-wQBM-lPil4v\n\n[root@arm64v8 ~]#\n")),(0,l.kt)("p",null,"\u518d\u5c06 /dev/sda4 \u52a0\u5165 vg\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# vgextend BrinnattVg /dev/sda4\n  Volume group "BrinnattVg" successfully extended\n[root@arm64v8 ~]# \n')),(0,l.kt)("p",null,"vgchange \u7528\u4e8e\u8bbe\u7f6e\u5377\u7ec4\u7684\u6d3b\u52a8\u72b6\u6001\uff0c\u5377\u7ec4\u7684\u6fc0\u6d3b\u72b6\u6001\u4e3b\u8981\u5f71\u54cd\u7684\u662f lv\u3002\u4f7f\u7528 -a \u9009\u9879\u6765\u8bbe\u7f6e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'# \u5c06BrinnattVg\u8bbe\u7f6e\u4e3a\u6d3b\u52a8\u72b6\u6001(active yes)\u3002\n[root@arm64v8 ~]# vgchange -a y BrinnattVg \n  0 logical volume(s) in volume group "BrinnattVg" now active\n[root@arm64v8 ~]#\n\n# \u5c06BrinnattVg\u8bbe\u7f6e\u4e3a\u975e\u6fc0\u6d3b\u72b6\u6001(active no)\u3002\n[root@arm64v8 ~]# vgchange -a n BrinnattVg \n  0 logical volume(s) in volume group "BrinnattVg" now active\n[root@arm64v8 ~]#\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u76ee\u524d\u8fd8\u6ca1\u6709\u521b\u5efa lv \u5c42\uff0c\u6240\u4ee5\u6fc0\u4e0d\u6fc0\u6d3b\u5b9e\u9645\u4e0a\u6ca1\u6709\u4ec0\u4e48\u610f\u601d\uff0c\u5377\u7ec4\u7684\u6fc0\u6d3b\u72b6\u6001\u4e3b\u8981\u5f71\u54cd\u7684\u662f lv\u3002")),(0,l.kt)("h3",{id:"633\u7ba1\u7406-lv"},"6.3.3\u3001\u7ba1\u7406 LV"),(0,l.kt)("p",null,"\u6709\u4e86 vg \u4e4b\u540e\u5c31\u53ef\u4ee5\u6839\u636e vg \u8fdb\u884c\u5206\u533a\uff0c\u5373\u521b\u5efa LV\u3002\u7ba1\u7406 lv \u4e5f\u6709\u7c7b\u4f3c\u7684\u4e00\u4e9b\u547d\u4ee4\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4"),(0,l.kt)("th",{parentName:"tr",align:null},"\u529f\u80fd"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lvcreate"),(0,l.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa LV")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lvscan"),(0,l.kt)("td",{parentName:"tr",align:null},"\u626b\u63cf\u5e76\u5217\u51fa\u6240\u6709\u7684 lv")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lvdisplay"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5217\u51fa lv \u5c5e\u6027\u4fe1\u606f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lvremove"),(0,l.kt)("td",{parentName:"tr",align:null},"\u79fb\u9664 lv\uff0c\u5373\u5220\u9664 lv")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lvreduce(lvresize)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7f29\u5c0f lv \u5bb9\u91cf")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lvextend(lvresize)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u589e\u5927 lv \u5bb9\u91cf")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lvresize"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6539\u53d8 lv \u5bb9\u91cf")))),(0,l.kt)("p",null,"lvcreate \u547d\u4ee4\u5e38\u7528\u7684\u51e0\u4e2a\u9009\u9879"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"lvcreate {-L size(M/G) | -l PEnum} -n lv_name vg_name\n\u9009\u9879\u8bf4\u660e\uff1a\n-L\uff1a\u6839\u636e\u5927\u5c0f\u6765\u521b\u5efalv\uff0c\u5373\u5206\u914d\u591a\u5927\u7a7a\u95f4\u7ed9\u6b64lv\n-l\uff1a\u6839\u636ePE\u7684\u6570\u91cf\u6765\u521b\u5efalv\uff0c\u5373\u5206\u914d\u591a\u5c11\u4e2ape\u7ed9\u6b64lv,\u53ef\u4ee5\u662f\u767e\u5206\u6bd4\n-n\uff1a\u6307\u5b9alv\u7684\u540d\u79f0\n")),(0,l.kt)("p",null,"\u524d\u9762\u521b\u5efa\u7684 vg \u6709 26212 \u4e2a PE\uff0c\u603b\u5bb9\u91cf\u4e3a 409.56GiB\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# vgdisplay | grep PE\n  PE Size               16.00 MiB\n  Total PE              26212\n  Alloc PE / Size       0 / 0   \n  Free  PE / Size       26212 / 409.56 GiB\n[root@arm64v8 ~]# \n")),(0,l.kt)("p",null,"\u4f7f\u7528 -L \u548c -l \u5206\u522b\u521b\u5efa\u540d\u79f0\u4e3a first","_","lv \u548c second","_","lv \u7684 lv\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# lvcreate -L 10G -n first_lv BrinnattVg \n  Logical volume "first_lv" created.\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# lvcreate -l 200 -n second_lv BrinnattVg\n  Logical volume "second_lv" created.\n[root@arm64v8 ~]#\n')),(0,l.kt)("p",null,"\u521b\u5efa lv \u540e\uff0c\u5c06\u5728 /dev/BrinnattVg \u76ee\u5f55\u4e2d\u521b\u5efa\u5bf9\u5e94 lv \u540d\u79f0\u7684\u8f6f\u94fe\u63a5\u6587\u4ef6\uff0c\u540c\u65f6\u4e5f\u5728 /dev/mapper \u76ee\u5f55\u4e0b\u521b\u5efa\u94fe\u63a5\u6587\u4ef6\uff0c\u5b83\u4eec\u90fd\u6307\u5411 /dev/dm \u8bbe\u5907\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# ll /dev/BrinnattVg/\ntotal 0\nlrwxrwxrwx 1 root root 7 Jun 23 09:03 first_lv -> ../dm-0\nlrwxrwxrwx 1 root root 7 Jun 23 09:04 second_lv -> ../dm-1\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# ll /dev/mapper/\ntotal 0\nlrwxrwxrwx 1 root root       7 Jun 23 09:03 BrinnattVg-first_lv -> ../dm-0\nlrwxrwxrwx 1 root root       7 Jun 23 09:04 BrinnattVg-second_lv -> ../dm-1\ncrw------- 1 root root 10, 236 Jun 23 09:03 control\n[root@arm64v8 ~]#\n")),(0,l.kt)("p",null,"\u4f7f\u7528 lvscan \u548c lvdisplay \u67e5\u770b lv \u4fe1\u606f\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c lvdisplay \u8981\u663e\u793a\u67d0\u4e00\u4e2a\u6307\u5b9a\u7684 lv\uff0c\u9700\u8981\u6307\u5b9a\u5176\u5168\u8def\u5f84\uff0c\u800c\u4e0d\u80fd\u7b80\u5355\u7684\u6307\u5b9a lv \u540d\uff0c\u5f53\u7136\u5982\u679c\u4e0d\u6307\u5b9a\u4efb\u4f55\u53c2\u6570\u5c06\u663e\u793a\u6240\u6709 lv \u7684\u4fe1\u606f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# lvscan \n  ACTIVE            '/dev/BrinnattVg/first_lv' [10.00 GiB] inherit\n  ACTIVE            '/dev/BrinnattVg/second_lv' [3.12 GiB] inherit\n[root@arm64v8 ~]# lvdisplay /dev/BrinnattVg/first_lv \n  --- Logical volume ---\n  LV Path                /dev/BrinnattVg/first_lv\n  LV Name                first_lv\n  VG Name                BrinnattVg\n  LV UUID                HKjlKO-vYVZ-vg6b-q3kZ-YtM0-RnhF-uXIxX9\n  LV Write Access        read/write\n  LV Creation host, time arm64v8, 2021-06-23 09:03:15 +0800\n  LV Status              available\n  # open                 0\n  LV Size                10.00 GiB\n  Current LE             640\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     8192\n  Block device           252:0\n\n[root@arm64v8 ~]#\n")),(0,l.kt)("h3",{id:"634\u683c\u5f0f\u5316-lv-\u6587\u4ef6\u7cfb\u7edf"},"6.3.4\u3001\u683c\u5f0f\u5316 lv \u6587\u4ef6\u7cfb\u7edf"),(0,l.kt)("p",null,"\u5bf9 lv \u8fdb\u884c\u683c\u5f0f\u5316\uff0c\u5373\u53ef\u5f62\u6210\u6587\u4ef6\u7cfb\u7edf\uff0c\u7136\u540e\u8fdb\u884c\u6302\u8f7d\u4f7f\u7528\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# mkfs.xfs /dev/BrinnattVg/first_lv \nmeta-data=/dev/BrinnattVg/first_lv isize=512    agcount=4, agsize=655360 blks\n         =                       sectsz=512   attr=2, projid32bit=1\n         =                       crc=1        finobt=0, sparse=0\ndata     =                       bsize=4096   blocks=2621440, imaxpct=25\n         =                       sunit=0      swidth=0 blks\nnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1\nlog      =internal log           bsize=4096   blocks=2560, version=2\n         =                       sectsz=512   sunit=0 blks, lazy-count=1\nrealtime =none                   extsz=4096   blocks=0, rtextents=0\n[root@arm64v8 ~]# \n")),(0,l.kt)("p",null,"\u67e5\u770b lv \u683c\u5f0f\u5316\u7684\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f\u548c\u7c7b\u578b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4e0a\u9762\u683c\u5f0f\u5316\u540e\uff0c\u53ef\u4ee5\u76f4\u63a5\u6302\u8f7d\u4f7f\u7528\n[root@arm64v8 ~]# mount /dev/BrinnattVg/first_lv /mnt/\n[root@arm64v8 ~]# mount | grep /mnt\n/dev/mapper/BrinnattVg-first_lv on /mnt type xfs (rw,relatime,attr2,inode64,noquota)\n[root@arm64v8 ~]#\n\n# \u67e5\u770b\u6b64\u65f6 first_lv \u6587\u4ef6\u7cfb\u7edf\u7684\u5927\u5c0f\n[root@arm64v8 ~]# df -h | grep /mnt\n/dev/mapper/BrinnattVg-first_lv   10G   33M   10G   1% /mnt\n[root@arm64v8 ~]#\n\n# \u67e5\u770b first_lv \u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\n[root@arm64v8 ~]# file -s /dev/dm-0\n/dev/dm-0: SGI XFS filesystem data (blksz 4096, inosz 512, v2 dirs)\n[root@arm64v8 ~]# \n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f7f\u7528 file -s \u67e5\u770b\uff0c\u8981\u6ce8\u610f\uff0c/dev/BrinnattVg \u548c /dev/mapper \u4e0b\u7684 lv \u90fd\u662f\u94fe\u63a5\u5230 /dev/ \u4e0b\u5757\u8bbe\u5907\u7684\u94fe\u63a5\u6587\u4ef6\uff0c\u6240\u4ee5\u53ea\u80fd\u5bf9\u5757\u8bbe\u5907\u8fdb\u884c\u67e5\u770b\uff0c\u5426\u5219\u67e5\u770b\u7684\u7ed3\u679c\u4e5f\u4ec5\u4ec5\u53ea\u662f\u4e2a\u94fe\u63a5\u6587\u4ef6\u7c7b\u578b\u3002")),(0,l.kt)("p",null,"\u518d\u53bb\u770b\u770b /dev/sda \u7684\u60c5\u51b5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# lsblk -f /dev/sda\nNAME                     FSTYPE      LABEL UUID                                   MOUNTPOINT\nsda                                                                             \n\u251c\u2500sda4                   LVM2_member       O33Drf-4Hei-Q0LA-46ip-4OcY-zHbA-gcExVK \n\u251c\u2500sda2                   LVM2_member       rQv2z4-VKB8-3kFq-X3Lr-iaP7-donM-sWAx3N \n\u251c\u2500sda5                                                                          \n\u251c\u2500sda3                   LVM2_member       3DjHsv-VBiR-2A7D-2VWM-91U5-XnAu-hUbrzW \n\u2514\u2500sda1                   LVM2_member       p9jsx0-AJIY-rWCf-eomh-mNTN-55eQ-dUo9C2 \n  \u251c\u2500BrinnattVg-second_lv                                                        \n  \u2514\u2500BrinnattVg-first_lv  xfs               90543211-66da-404f-800d-16f4da95a82e   /mnt\n[root@arm64v8 ~]# \n")),(0,l.kt)("h2",{id:"64lvm-\u6269\u5bb9"},"6.4\u3001LVM \u6269\u5bb9"),(0,l.kt)("p",null,"lvm \u6700\u5927\u7684\u4f18\u52bf\u5c31\u662f\u5176\u53ef\u4f38\u7f29\u6027\uff0c\u800c\u5176\u4f38\u7f29\u6027\u53c8\u66f4\u504f\u91cd\u4e8e\u6269\u5bb9\uff0c\u8fd9\u65f6\u4f7f\u7528 lvm \u7684\u6700\u5927\u539f\u56e0\u3002"),(0,l.kt)("p",null,"\u6269\u5bb9\u7684\u5b9e\u8d28\u662f\u5c06 vg \u4e2d\u7a7a\u95f2\u7684 pe \u6dfb\u52a0\u5230 lv \u4e2d\uff0c\u6240\u4ee5\u53ea\u8981 vg \u4e2d\u6709\u7a7a\u95f2\u7684 pe\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c\u6269\u5bb9\uff0c\u5373\u4f7f\u6ca1\u6709\u7a7a\u95f2\u7684 pe\uff0c\u4e5f\u53ef\u4ee5\u6dfb\u52a0 pv\uff0c\u5c06 pv \u52a0\u5165\u5230 vg \u4e2d\u589e\u52a0\u7a7a\u95f2 pe\u3002"),(0,l.kt)("p",null,"\u6269\u5bb9\u7684\u4e24\u4e2a\u5173\u952e\u6b65\u9aa4\u5982\u4e0b\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528 lvextend \u6216\u8005 lvresize \u6dfb\u52a0\u66f4\u591a\u7684 pe \u6216\u5bb9\u91cf\u5230 lv \u4e2d"),(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528 resize2fs \u547d\u4ee4(xfs\u5219\u4f7f\u7528xfs","_","growfs)\u5c06 lv \u589e\u52a0\u540e\u7684\u5bb9\u91cf\u589e\u52a0\u5230\u5bf9\u5e94\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d(\u6b64\u8fc7\u7a0b\u662f\u4fee\u6539\u6587\u4ef6\u7cfb\u7edf\u800c\u975e LVM \u5185\u5bb9)")),(0,l.kt)("p",null,"\u4e3e\u4f8b\uff1a\u5c06\u4e00\u76f4\u6ca1\u7528\u5230\u7684 /dev/sda5 \u4f5c\u4e3a first","_","lv \u7684\u6269\u5bb9\u6765\u6e90\u3002\u9996\u5148\u5c06 /dev/sda5 \u521b\u5efa\u6210 pv\uff0c\u52a0\u5165\u5230 BrinnattVg \u4e2d\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# parted /dev/sda toggle 5 lvm\nInformation: You may need to update /etc/fstab.\n\n[root@arm64v8 ~]# pvcreate /dev/sda5\n  Physical volume "/dev/sda5" successfully created.\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# vgextend BrinnattVg /dev/sda5\n  Volume group "BrinnattVg" successfully extended\n[root@arm64v8 ~]#\n')),(0,l.kt)("p",null,"\u67e5\u770b BrinnattVg \u4e2d\u7a7a\u95f2\u7684 pe \u6570\u91cf\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# vgdisplay BrinnattVg | grep -i pe\n  Open LV               1\n  PE Size               16.00 MiB\n  Total PE              32765\n  Alloc PE / Size       840 / 13.12 GiB\n  Free  PE / Size       31925 / <498.83 GiB\n[root@arm64v8 ~]#\n")),(0,l.kt)("p",null,"\u73b0\u5728 vg \u4e2d\u6709 31925 \u4e2a PE \u5171 498.83GiB \u5bb9\u91cf\u53ef\u7528\u3002\u5c06\u5176\u5168\u90e8\u6dfb\u52a0\u5230 first","_","lv \u4e2d\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\u6dfb\u52a0\uff1a\u6309\u5bb9\u91cf\u5927\u5c0f\u6dfb\u52a0\u548c\u6309 PE \u6570\u91cf\u6dfb\u52a0\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5148\u5378\u8f7d first_lv\n[root@arm64v8 ~]# umount /dev/BrinnattVg/first_lv   \n\n# \u6309\u5bb9\u91cf\u5927\u5c0f\u6dfb\u52a0\n[root@arm64v8 ~]# lvextend -L +20G /dev/BrinnattVg/first_lv   \n  Size of logical volume BrinnattVg/first_lv changed from 10.00 GiB (640 extents) to 30.00 GiB (1920 extents).\n  Logical volume BrinnattVg/first_lv successfully resized.\n[root@arm64v8 ~]# \n\n# \u67e5\u770b\u5206\u914d\u4e86\u591a\u5c11PE\uff0c\u8fd8\u5269\u4e0b\u591a\u5c11PE\n[root@arm64v8 ~]# vgdisplay BrinnattVg | grep -i pe \n  Open LV               0\n  PE Size               16.00 MiB\n  Total PE              32765\n  Alloc PE / Size       2120 / 33.12 GiB\n  Free  PE / Size       30645 / <478.83 GiB\n[root@arm64v8 ~]#\n\n# \u6309PE\u6570\u91cf\u6dfb\u52a0\uff0c\u4f7f\u7528\u767e\u5206\u6bd4\u7684\u65b9\u5f0f\uff0c+10%FREE \u8868\u793a\u672a\u5206\u914d\u7684 PE \u7684 10%\n[root@arm64v8 ~]# lvextend -l +10%FREE /dev/BrinnattVg/first_lv\n  Size of logical volume BrinnattVg/first_lv changed from 30.00 GiB (1920 extents) to 77.89 GiB (4985 extents).\n  Logical volume BrinnattVg/first_lv successfully resized.\n[root@arm64v8 ~]# \n\n# \u67e5\u770b\u5206\u914d\u4e86\u591a\u5c11PE\uff0c\u8fd8\u5269\u4e0b\u591a\u5c11PE\n[root@arm64v8 ~]# vgdisplay BrinnattVg | grep -i pe\n  Open LV               0\n  PE Size               16.00 MiB\n  Total PE              32765\n  Alloc PE / Size       5185 / <81.02 GiB\n  Free  PE / Size       27580 / <430.94 GiB\n[root@arm64v8 ~]#\n\n# \u6309PE\u6570\u91cf\u6dfb\u52a0\uff0c\u4f7f\u7528PE\u4e2a\u6570\n[root@arm64v8 ~]# lvextend -l +7580 /dev/BrinnattVg/first_lv\n  Size of logical volume BrinnattVg/first_lv changed from 77.89 GiB (4985 extents) to <196.33 GiB (12565 extents).\n  Logical volume BrinnattVg/first_lv successfully resized.\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# vgdisplay BrinnattVg | grep -i pe\n  Open LV               0\n  PE Size               16.00 MiB\n  Total PE              32765\n  Alloc PE / Size       12765 / 199.45 GiB\n  Free  PE / Size       20000 / 312.50 GiB\n[root@arm64v8 ~]#\n")),(0,l.kt)("p",null,"\u4e5f\u53ef\u4ee5\u4f7f\u7528 lvresize \u6765\u589e\u52a0 lv \u7684\u5bb9\u91cf\u65b9\u6cd5\u548c lvextend \u4e00\u6837\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# vgdisplay BrinnattVg | grep -i pe\n  Open LV               0\n  PE Size               16.00 MiB\n  Total PE              32765\n  Alloc PE / Size       12765 / 199.45 GiB\n  Free  PE / Size       20000 / 312.50 GiB\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# lvresize -L +20G /dev/BrinnattVg/first_lv \n  Size of logical volume BrinnattVg/first_lv changed from <196.33 GiB (12565 extents) to <216.33 GiB (13845 extents).\n  Logical volume BrinnattVg/first_lv successfully resized.\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# vgdisplay BrinnattVg | grep -i pe\n  Open LV               0\n  PE Size               16.00 MiB\n  Total PE              32765\n  Alloc PE / Size       14045 / 219.45 GiB\n  Free  PE / Size       18720 / 292.50 GiB\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# lvresize -l +720 /dev/BrinnattVg/first_lv\n  Size of logical volume BrinnattVg/first_lv changed from <216.33 GiB (13845 extents) to <227.58 GiB (14565 extents).\n  Logical volume BrinnattVg/first_lv successfully resized.\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# vgdisplay BrinnattVg | grep -i pe\n  Open LV               0\n  PE Size               16.00 MiB\n  Total PE              32765\n  Alloc PE / Size       14765 / 230.70 GiB\n  Free  PE / Size       18000 / 281.25 GiB\n[root@arm64v8 ~]# \n")),(0,l.kt)("p",null,"\u5c06 first","_","lv \u6302\u8f7d\uff0c\u67e5\u770b\u8be5 lv \u5bf9\u5e94\u6587\u4ef6\u7cfb\u7edf\u7684\u5bb9\u91cf\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# mount /dev/mapper/BrinnattVg-first_lv /mnt/\n[root@arm64v8 ~]# df -hT /mnt/\nFilesystem                      Type  Size  Used Avail Use% Mounted on\n/dev/mapper/BrinnattVg-first_lv xfs    10G   33M   10G   1% /mnt\n[root@arm64v8 ~]#\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u53d1\u73b0 first","_","lv \u6b64\u65f6\u7684\u5bb9\u91cf\u5927\u5c0f\u8ddf\u524d\u9762\u521a\u521a\u521b\u5efa first","_","lv \u5927\u5c0f\u4e00\u6837\uff0clvextend \u591a\u6b21\u5e76\u6ca1\u6709\u751f\u6548\uff1f"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u4e0a\u5e76\u4e0d\u662f\u8fd9\u6837\uff0clvextend \u5f53\u7136\u751f\u6548\u4e86\uff0c\u53ea\u4e0d\u8fc7\u589e\u52a0\u7684\u662f lv \u903b\u8f91\u5377\u7684\u5bb9\u91cf\uff0clv \u4e0a\u9762\u7684\u6587\u4ef6\u7cfb\u7edf\u5e76\u6ca1\u6709\u589e\u52a0(\u770b\u5f00\u7bc7\u90a3\u4e2a\u56fe\u7406\u89e3)\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u589e\u52a0 lv \u903b\u8f91\u5377\u4e0a\u9762\u7684\u6587\u4ef6\u7cfb\u7edf\u8fb9\u754c\u9700\u8981\u501f\u52a9\u5de5\u5177\u5b8c\u6210\uff1bresize2fs \u5de5\u5177\u7528\u6765\u6539\u53d8 ext \u6587\u4ef6\u7cfb\u7edf\u7684\u5927\u5c0f\uff0c\u5982\u679c\u662f xfs \u6587\u4ef6\u7cfb\u7edf\uff0c\u5219\u4f7f\u7528 xfs","_","growfs\u3002"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4f7f\u7528 xfs","_","growfs \u6269\u5c55 first","_","lv \u6587\u4ef6\u7cfb\u7edf\u8fb9\u754c\u3002\u4f7f lvextend \u53d8\u5f97\u5f7b\u5e95\u6709\u610f\u4e49\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u6b64\u547d\u4ee4\u5e38\u7528\u65b9\u5f0f\uff0c-d \u8868\u793a lv \u8fb9\u754c\u6709\u591a\u5927\u5c31\u5230\u591a\u5927\uff1b-D \u6307\u5b9a\u5927\u5c0f\nxfs_growfs -d | -D size mount-point\n\n[root@arm64v8 ~]# df -hT /mnt/\nFilesystem                      Type  Size  Used Avail Use% Mounted on\n/dev/mapper/BrinnattVg-first_lv xfs    10G   33M   10G   1% /mnt\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# xfs_growfs -d /mnt/\nmeta-data=/dev/mapper/BrinnattVg-first_lv isize=512    agcount=4, agsize=655360 blks\n       =                       sectsz=512   attr=2, projid32bit=1\n       =                       crc=1        finobt=0 spinodes=0\ndata     =                       bsize=4096   blocks=2621440, imaxpct=25\n       =                       sunit=0      swidth=0 blks\nnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1\nlog      =internal               bsize=4096   blocks=2560, version=2\n       =                       sectsz=512   sunit=0 blks, lazy-count=1\nrealtime =none                   extsz=4096   blocks=0, rtextents=0\ndata blocks changed from 2621440 to 59658240\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# df -hT /mnt/\nFilesystem                      Type  Size  Used Avail Use% Mounted on\n/dev/mapper/BrinnattVg-first_lv xfs   228G   37M  228G   1% /mnt\n[root@arm64v8 ~]#\n")))),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\uff0c\u4f7f\u7528 second","_","lv \u903b\u8f91\u5377\u521b\u5efa ext \u6587\u4ef6\u7cfb\u7edf\uff0c\u4f7f\u7528 lvextend \u6269\u5bb9\uff0c\u518d\u4f7f\u7528 resize2fs \u6269\u5c55\u6587\u4ef6\u7cfb\u7edf\u8fb9\u754c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# resize2fs \u5e38\u7528\u8bed\u6cd5\nresize2fs [ -fp ] device [ size ]\n\n[root@arm64v8 ~]# mkfs.ext4 /dev/mapper/BrinnattVg-second_lv\n[root@arm64v8 ~]# mount /dev/mapper/BrinnattVg-second_lv /media/\n[root@arm64v8 ~]# df -h | grep /media\n/dev/mapper/BrinnattVg-second_lv  3.1G  9.4M  2.9G   1% /media\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# lvextend -L +20G /dev/BrinnattVg/second_lv \n  Size of logical volume BrinnattVg/second_lv changed from 3.12 GiB (200 extents) to 23.12 GiB (1480 extents).\n  Logical volume BrinnattVg/second_lv successfully resized.\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# resize2fs /dev/mapper/BrinnattVg-second_lv \nresize2fs 1.42.9 (28-Dec-2013)\nFilesystem at /dev/mapper/BrinnattVg-second_lv is mounted on /media; on-line resizing required\nold_desc_blocks = 1, new_desc_blocks = 3\nThe filesystem on /dev/mapper/BrinnattVg-second_lv is now 6062080 blocks long.\n\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# df -h | grep /media\n/dev/mapper/BrinnattVg-second_lv   23G   18M   22G   1% /media\n[root@arm64v8 ~]#\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},'\u5bf9\u4e8e linux 2.6 \u5185\u6838\u4e4b\u540e\u7684\u7248\u672c\uff0c\u652f\u6301\u5728\u7ebf resize \u800c\u65e0\u9700\u5378\u8f7d\uff0c\u6211\u8fd9\u4e2a arm64v8 \u7684\u7cfb\u7edf\u5185\u6838\u7248\u672c\u8f83\u9ad8 "Linux arm64v8 4.14.0-49.el7a.aarch64"\uff0c\u5728\u7ebf resize \u6210\u529f\u3002')),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"resize2fs \u4e00\u822c\u65e0\u9700\u4f7f\u7528\u9009\u9879\uff0c\u76f4\u63a5\u4f7f\u7528 resize2fs device \u7684\u65b9\u5f0f\u5373\u53ef\uff0c\u5982\u679c\u5931\u8d25\u5219\u5c1d\u8bd5\u4f7f\u7528 -f \u9009\u9879\u5f3a\u5236\u6539\u53d8\u5927\u5c0f\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u8fd8\u6709\u4e00\u4e2a\u5c0f\u6280\u5de7\uff0clvextend -r \u9009\u9879\u53ef\u4ee5\u8c03\u7528 resize2fs\uff0c\u4e5f\u5c31\u662f\u8bf4\u4f7f\u7528 lvextend \u6269\u5bb9 lv \u7684\u540c\u65f6\uff0c\u6587\u4ef6\u7cfb\u7edf\u8fb9\u754c\u4f1a\u81ea\u52a8\u968f\u4e4b\u6269\u5927\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# df -h /media/\nFilesystem                        Size  Used Avail Use% Mounted on\n/dev/mapper/BrinnattVg-second_lv   23G   18M   22G   1% /media\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# lvextend -L +20G -r /dev/BrinnattVg/second_lv \nSize of logical volume BrinnattVg/second_lv changed from 23.12 GiB (1480 extents) to 43.12 GiB (2760 extents).\nLogical volume BrinnattVg/second_lv successfully resized.\nresize2fs 1.42.9 (28-Dec-2013)\nFilesystem at /dev/mapper/BrinnattVg-second_lv is mounted on /media; on-line resizing required\nold_desc_blocks = 3, new_desc_blocks = 6\nThe filesystem on /dev/mapper/BrinnattVg-second_lv is now 11304960 blocks long.\n\n[root@arm64v8 ~]# df -h /media/\nFilesystem                        Size  Used Avail Use% Mounted on\n/dev/mapper/BrinnattVg-second_lv   43G   21M   41G   1% /media\n[root@arm64v8 ~]#\n")))),(0,l.kt)("h2",{id:"65lvm-\u7f29\u5bb9"},"6.5\u3001LVM \u7f29\u5bb9"),(0,l.kt)("p",null,"\u5728",(0,l.kt)("strong",{parentName:"p"},"\u751f\u4ea7"),"\u5e94\u7528\u73af\u5883\u4e2d\uff0c",(0,l.kt)("strong",{parentName:"p"},"\u4e0d\u8981"),"\u8003\u8651",(0,l.kt)("strong",{parentName:"p"},"\u7f29\u5bb9"),"\uff0c\u56e0\u4e3a\u8fd9\u5e76\u4e0d\u5b89\u5168\uff0c\u6709\u4e22\u5931\u6570\u636e\u7684\u98ce\u9669\u3002ext \u6587\u4ef6\u7cfb\u7edf\u652f\u6301\u7f29\u5bb9\uff0cxfs \u6587\u4ef6\u7cfb\u7edf\u4e0d\u652f\u6301\u6536\u7f29\u3002"),(0,l.kt)("p",null,"\u4e0b\u9762\u6211\u4eec\u63a5\u7740\u4e0a\u9762\u5df2\u6709\u7684\u73af\u5883\u5bf9 second","_","lv \u73a9\u4e00\u4e0b\u7f29\u5bb9\uff0c\u7406\u89e3\u4e00\u4e0b pvdisplay \u548c pvmove \u4e24\u4e2a\u547d\u4ee4\u3002"),(0,l.kt)("p",null,"\u4e25\u683c\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u6267\u884c\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u9996\u5148\u5378\u8f7d\u8bbe\u5907\u5e76\u4f7f\u7528 resize2fs \u6536\u7f29\u6587\u4ef6\u7cfb\u7edf\u7684\u5bb9\u91cf\u4e3a\u76ee\u6807\u5927\u5c0f"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# ls /media/\nanaconda-ks.cfg  test1-ks.cfg  test2-ky.cfgg  test2-kzz.cfg\nlost+found       test2-kx.cfg  test2-kz.cfg\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# \n[root@arm64v8 ~]# df -h /media/\nFilesystem                        Size  Used Avail Use% Mounted on\n/dev/mapper/BrinnattVg-second_lv   43G   21M   41G   1% /media\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# umount /media \n[root@arm64v8 ~]# \n[root@arm64v8 ~]# e2fsck -f /dev/mapper/BrinnattVg-second_lv \ne2fsck 1.42.9 (28-Dec-2013)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/mapper/BrinnattVg-second_lv: 17/2826240 files (0.0% non-contiguous), 198939/11304960 blocks\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# resize2fs /dev/mapper/BrinnattVg-second_lv 10G\nresize2fs 1.42.9 (28-Dec-2013)\nResizing the filesystem on /dev/mapper/BrinnattVg-second_lv to 2621440 (4k) blocks.\nThe filesystem on /dev/mapper/BrinnattVg-second_lv is now 2621440 blocks long.\n\n[root@arm64v8 ~]#\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u67e5\u770b\u4e00\u4e0b\u6302\u8f7d\u70b9\u91cc\u9762\u7684\u6587\u4ef6\uff0c\u5b9e\u9a8c\u5b8c\u540e\uff0c\u770b\u8fd8\u662f\u4e0d\u662f\u5b8c\u6574\u7684\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u786e\u4fdd\u7f29\u5bb9\u540e\u53ef\u4ee5\u5bb9\u7eb3\u6240\u6709\u6570\u636e\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u5f97\u5728\u7ebf\u7f29\u5bb9\uff0c\u5fc5\u987b\u5378\u8f7d\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528 e2fsck \u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u4e00\u81f4\u6027\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6700\u540e\u7f29\u5bb9\u6587\u4ef6\u7cfb\u7edf\u8fb9\u754c\u5230\u591a\u5927\u3002"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},'\u518d\u6536\u7f29 lv\u3002\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 "-L" \u6307\u5b9a\u6536\u7f29\u5bb9\u91cf\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 "-l" \u6307\u5b9a\u6536\u7f29\u7684 PE \u6570\u91cf\u3002'),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# lvreduce -L 10G /dev/BrinnattVg/second_lv \n WARNING: Reducing active logical volume to 10.00 GiB.\n THIS MAY DESTROY YOUR DATA (filesystem etc.)\nDo you really want to reduce BrinnattVg/second_lv? [y/n]: y\n Size of logical volume BrinnattVg/second_lv changed from 43.12 GiB (2760 extents) to 10.00 GiB (640 extents).\n Logical volume BrinnattVg/second_lv successfully resized.\n[root@arm64v8 ~]#\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u53d1\u73b0\u6709\u8b66\u544a\uff1a\u53ef\u80fd\u4f1a\u635f\u6bc1\u4f60\u7684\u6570\u636e\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u5728\u8be5 lv \u4e0b\u5b58\u50a8\u7684\u5b9e\u9645\u6570\u636e\u5927\u4e8e\u6536\u7f29\u540e\u7684\u5bb9\u91cf\uff0c\u90a3\u4e48\u80af\u5b9a\u4f1a\u635f\u6bc1\u4e00\u90e8\u5206\u6570\u636e\uff0c\u4f46\u662f\u5982\u679c\u5b58\u50a8\u7684\u6570\u636e\u5c0f\u4e8e\u6536\u7f29\u540e\u7684\u5bb9\u91cf\uff0c\u90a3\u4e48\u5c31\u4e0d\u4f1a\u635f\u6bc1\u4efb\u4f55\u6570\u636e\uff0c\u8fd9\u662f lvm \u65e0\u635f\u4fee\u6539\u5206\u533a\u5927\u5c0f\u7684\u4f18\u70b9\u3002"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"pvmove \u79fb\u52a8 PE"),(0,l.kt)("p",{parentName:"li"},"\u4e0a\u9762\u8fc7\u7a0b\u5df2\u5c06 second","_","lv \u4ece 43G \u7f29\u5bb9\u81f3 10G\uff0c\u90a3\u4e48\u6b64\u65f6\u8981\u79fb\u9664 pv \u7684\u8bdd\uff0c\u79fb\u9664\u8c01\u600e\u4e48\u79fb\u5462\uff1f"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# pvdisplay | grep "PV Name\\|Free"\n PV Name               /dev/sda1\n Free PE               0\n PV Name               /dev/sda2\n Free PE               0\n PV Name               /dev/sda3\n Free PE               4454\n PV Name               /dev/sda4\n Free PE               6553\n PV Name               /dev/sda5\n Free PE               6553\n[root@arm64v8 ~]#\n')),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u67e5\u770b\u7a7a\u95f2\u7684 PE \u5206\u5e03\u5728 /dev/sda3\u3001/dev/sda4 \u548c /dev/sda5 \u4e0a\uff0c\u6240\u4ee5 /dev/sda2 \u5e76\u4e0d\u80fd\u5378\u8f7d\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u90a3\u4e48\u73b0\u5728\u9700\u8981\u505a\u7684\u4e8b\u60c5\u662f\u5c06 /dev/sda2 \u4e0a\u7684 PE \u79fb\u5230\u5176\u4ed6\u8bbe\u5907\u4e0a\uff0c\u4f7f /dev/sda2 \u7a7a\u95f2\u51fa\u6765\u3002")),(0,l.kt)("p",{parentName:"li"},"\u4f7f\u7528 pvmove \u547d\u4ee4\uff0c\u8be5\u547d\u4ee4\u7684\u6267\u884c\u5185\u90e8\u4f1a\u6d89\u53ca\u5230\u4e0d\u5c11\u6b65\u9aa4\uff0c\u6240\u4ee5\u53ef\u80fd\u4f1a\u6d88\u8017\u70b9\u65f6\u95f4\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# pvmove /dev/sda2:0-4453 /dev/sda3\n /dev/sda2: Moved: 0.00%\n /dev/sda2: Moved: 1.37%\n /dev/sda2: Moved: 2.81%\n /dev/sda2: Moved: 4.15%\n /dev/sda2: Moved: 5.59%\n /dev/sda2: Moved: 6.98%\n /dev/sda2: Moved: 8.42%\n /dev/sda2: Moved: 9.81%\n......\n /dev/sda2: Moved: 98.65%\n /dev/sda2: Moved: 100.00%\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# pvdisplay | grep "PV Name\\|Free"\n PV Name               /dev/sda1\n Free PE               0\n PV Name               /dev/sda2\n Free PE               4454\n PV Name               /dev/sda3\n Free PE               0\n PV Name               /dev/sda4\n Free PE               6553\n PV Name               /dev/sda5\n Free PE               6553\n[root@arm64v8 ~]#\n')),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u521a\u624d /dev/sda3 PE \u7a7a\u95f2 4454\u4e2a\uff0c\u73b0\u5728\u628a /dev/sda2 \u4e0a\u7684 0-4453 \u5171 4454 \u4e2a PE \u79fb\u52a8\u5230\u4e86 /dev/sda3\uff0c\u6240\u4ee5 /dev/sda3 \u4e0a\u9762\u5df2\u7ecf\u6ca1\u6709\u7a7a\u95f2\u7684 PE \u4e86\uff0c\u800c /dev/sda2 \u7a7a\u95f2\u51fa 4454 \u4e2a PE\u3002")),(0,l.kt)("p",{parentName:"li"},"\u518d\u79fb\u52a8 /dev/sda2 \u4e0a\u5269\u4f59\u7684 PE \u5230 /dev/sda4 \u4e0a\uff0c\u4f46\u6b64\u65f6\u5e94\u8be5\u5148\u770b\u770b /dev/sda2 \u4e0a\u4ecd\u88ab\u5360\u7528\u7684 PE \u7f16\u53f7\u662f\u54ea\u4e9b\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# pvdisplay -m /dev/sda2 \n --- Physical volume ---\n PV Name               /dev/sda2\n VG Name               BrinnattVg\n PV Size               <102.40 GiB / not usable 9.00 MiB\n Allocatable           yes \n PE Size               16.00 MiB\n Total PE              6553\n Free PE               4454\n Allocated PE          2099\n PV UUID               rQv2z4-VKB8-3kFq-X3Lr-iaP7-donM-sWAx3N\n\n --- Physical Segments ---\n Physical extent 0 to 4453:\n   FREE\n Physical extent 4454 to 6552:\n   Logical volume   /dev/BrinnattVg/first_lv\n   Logical extents  10807 to 12905\n\n[root@arm64v8 ~]#\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4ece Physical Segments \u53ef\u4ee5\u770b\u51fa\uff0c\u8fd8\u6709 4454 to 6552 \u4e2a PE\u3002")),(0,l.kt)("p",{parentName:"li"},"\u628a /dev/sda2 \u4e0a\u5269\u4f59\u7684 4454 to 6552 \u4e2a PE \u79fb\u5230 /dev/sda4 \u4e0a\u53bb\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# pvmove /dev/sda2:4454-6552 /dev/sda4\n /dev/sda2: Moved: 0.00%\n /dev/sda2: Moved: 2.95%\n /dev/sda2: Moved: 5.91%\n /dev/sda2: Moved: 8.91%\n /dev/sda2: Moved: 11.82%\n /dev/sda2: Moved: 14.82%\n......\n /dev/sda2: Moved: 96.76%\n /dev/sda2: Moved: 99.67%\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# pvdisplay | grep "PV Name\\|Free"\n PV Name               /dev/sda1\n Free PE               0\n PV Name               /dev/sda2\n Free PE               6553\n PV Name               /dev/sda3\n Free PE               0\n PV Name               /dev/sda4\n Free PE               4454\n PV Name               /dev/sda5\n Free PE               6553\n[root@arm64v8 ~]#\n')),(0,l.kt)("p",{parentName:"li"},"\u67e5\u770b /dev/sda2 \u662f\u5426\u5df2\u7ecf\u5b8c\u5168\u7a7a\u95f2\u4e86"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# pvdisplay -m /dev/sda2 \n --- Physical volume ---\n PV Name               /dev/sda2\n VG Name               BrinnattVg\n PV Size               <102.40 GiB / not usable 9.00 MiB\n Allocatable           yes \n PE Size               16.00 MiB\n Total PE              6553\n Free PE               6553\n Allocated PE          0\n PV UUID               rQv2z4-VKB8-3kFq-X3Lr-iaP7-donM-sWAx3N\n\n --- Physical Segments ---\n Physical extent 0 to 6552:\n   FREE\n\n[root@arm64v8 ~]#\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4ece\u7ed3\u679c\u6765\u770b\uff0c/dev/sda2 PE \u5df2\u7ecf\u5b8c\u5168\u7a7a\u95f2\u4e0b\u6765\u4e86\u3002"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u4ece vg \u4e2d\u79fb\u9664 pv"),(0,l.kt)("p",{parentName:"li"},"\u5c06 /dev/sda2 \u4ece BrinnattVg \u4e2d\u79fb\u9664"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# vgreduce BrinnattVg /dev/sda2 \n Removed "/dev/sda2" from volume group "BrinnattVg"\n[root@arm64v8 ~]# \n'))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u79fb\u9664\u8be5 pv"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# pvremove /dev/sda2\n Labels on physical volume "/dev/sda2" successfully wiped.\n[root@arm64v8 ~]# \n\n# \u67e5\u770b /dev/sda2 \u5df2\u7ecf\u79fb\u9664\u4e86\n[root@arm64v8 ~]# pvs\n PV         VG         Fmt  Attr PSize   PFree  \n /dev/sda1  BrinnattVg lvm2 a--  102.39g      0 \n /dev/sda3  BrinnattVg lvm2 a--  102.39g      0 \n /dev/sda4  BrinnattVg lvm2 a--  102.39g  69.59g\n /dev/sda5  BrinnattVg lvm2 a--  102.39g 102.39g\n[root@arm64v8 ~]#\n')))))}u.isMDXComponent=!0},67152:function(e,n,t){n.Z=t.p+"assets/images/LVM concept-7a3ac8882533cfd2abb98ac47f163454.png"}}]);