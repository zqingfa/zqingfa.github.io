"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[4821],{3905:function(e,a,t){t.d(a,{Zo:function(){return s},kt:function(){return k}});var n=t(67294);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function r(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,n,l=function(e,a){if(null==e)return{};var t,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var c=n.createContext({}),i=function(e){var a=n.useContext(c),t=a;return e&&(t="function"==typeof e?e(a):r(r({},a),e)),t},s=function(e){var a=i(e.components);return n.createElement(c.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},u=n.forwardRef((function(e,a){var t=e.components,l=e.mdxType,o=e.originalType,c=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=i(t),k=l,d=u["".concat(c,".").concat(k)]||u[k]||m[k]||o;return t?n.createElement(d,r(r({ref:a},s),{},{components:t})):n.createElement(d,r({ref:a},s))}));function k(e,a){var t=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var o=t.length,r=new Array(o);r[0]=u;var p={};for(var c in a)hasOwnProperty.call(a,c)&&(p[c]=a[c]);p.originalType=e,p.mdxType="string"==typeof e?e:l,r[1]=p;for(var i=2;i<o;i++)r[i]=t[i];return n.createElement.apply(null,r)}return n.createElement.apply(null,t)}u.displayName="MDXCreateElement"},76533:function(e,a,t){t.r(a),t.d(a,{assets:function(){return s},contentTitle:function(){return c},default:function(){return k},frontMatter:function(){return p},metadata:function(){return i},toc:function(){return m}});var n=t(87462),l=t(63366),o=(t(67294),t(3905)),r=["components"],p={id:"linux-advanced-10",slug:"/linux-advanced-10",title:"\u7b2c 10 \u7ae0 Linux Tomcat \u670d\u52a1\u57fa\u7840\u914d\u7f6e",authors:"zhangqf",keywords:["linux","tomcat"]},c=void 0,i={unversionedId:"linux/advanced/linux-advanced-10",id:"linux/advanced/linux-advanced-10",title:"\u7b2c 10 \u7ae0 Linux Tomcat \u670d\u52a1\u57fa\u7840\u914d\u7f6e",description:"8.1\u3001Tomcat \u672f\u8bed",source:"@site/docs/linux/advanced/\u7b2c 10 \u7ae0 Linux Tomcat \u670d\u52a1\u57fa\u7840\u914d\u7f6e.md",sourceDirName:"linux/advanced",slug:"/linux-advanced-10",permalink:"/en/docs/linux-advanced-10",draft:!1,tags:[],version:"current",frontMatter:{id:"linux-advanced-10",slug:"/linux-advanced-10",title:"\u7b2c 10 \u7ae0 Linux Tomcat \u670d\u52a1\u57fa\u7840\u914d\u7f6e",authors:"zhangqf",keywords:["linux","tomcat"]},sidebar:"linux",previous:{title:"\u7b2c 9 \u7ae0 Linux Nginx \u670d\u52a1\u914d\u7f6e",permalink:"/en/docs/linux-advanced-9"},next:{title:"\u7b2c 11 \u7ae0 Linux Tomcat \u670d\u52a1\u5b9e\u8df5",permalink:"/en/docs/linux-advanced-11"}},s={},m=[{value:"8.1\u3001Tomcat \u672f\u8bed",id:"81tomcat-\u672f\u8bed",level:2},{value:"8.1.1\u3001java \u548c jdk \u6982\u5ff5",id:"811java-\u548c-jdk-\u6982\u5ff5",level:3},{value:"8.1.2\u3001jsp \u548c servlet \u6982\u5ff5",id:"812jsp-\u548c-servlet-\u6982\u5ff5",level:3},{value:"8.1.3\u3001web \u670d\u52a1\u5668\u3001web \u5bb9\u5668\u3001\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668",id:"813web-\u670d\u52a1\u5668web-\u5bb9\u5668\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668",level:3},{value:"8.1.4\u3001tomcat \u4f53\u7cfb\u7ed3\u6784",id:"814tomcat-\u4f53\u7cfb\u7ed3\u6784",level:3},{value:"8.2\u3001\u5b89\u88c5 tomcat",id:"82\u5b89\u88c5-tomcat",level:2},{value:"8.2.1\u3001\u5b89\u88c5 jdk",id:"821\u5b89\u88c5-jdk",level:3},{value:"8.2.2\u3001\u5b89\u88c5 tomcat",id:"822\u5b89\u88c5-tomcat",level:3},{value:"8.3\u3001tomcat \u914d\u7f6e",id:"83tomcat-\u914d\u7f6e",level:2},{value:"8.3.1\u3001\u865a\u62df\u4e3b\u673a\u63d0\u4f9b web \u670d\u52a1",id:"831\u865a\u62df\u4e3b\u673a\u63d0\u4f9b-web-\u670d\u52a1",level:3},{value:"8.3.2\u3001tomcat \u4f53\u7cfb\u7ed3\u6784",id:"832tomcat-\u4f53\u7cfb\u7ed3\u6784",level:3},{value:"8.3.3\u3001appBase \u548c docBase \u8be6\u7ec6\u8bf4\u660e",id:"833appbase-\u548c-docbase-\u8be6\u7ec6\u8bf4\u660e",level:3},{value:"8.3.4\u3001webapp \u76ee\u5f55\u4f53\u7cfb\u7ed3\u6784",id:"834webapp-\u76ee\u5f55\u4f53\u7cfb\u7ed3\u6784",level:3},{value:"8.3.5\u3001server.xml \u8be6\u89e3",id:"835serverxml-\u8be6\u89e3",level:3},{value:"8.3.5.1\u3001\u9876\u7ea7\u5143\u7d20 server",id:"8351\u9876\u7ea7\u5143\u7d20-server",level:4},{value:"8.3.5.2\u3001\u9876\u7ea7\u5143\u7d20 service",id:"8352\u9876\u7ea7\u5143\u7d20-service",level:4},{value:"8.3.5.3\u3001\u6267\u884c\u5668 executor",id:"8353\u6267\u884c\u5668-executor",level:4},{value:"8.3.5.4\u3001\u8fde\u63a5\u5668 connector",id:"8354\u8fde\u63a5\u5668-connector",level:4},{value:"8.3.5.5\u3001\u5bb9\u5668\u7c7b engine",id:"8355\u5bb9\u5668\u7c7b-engine",level:4},{value:"8.3.5.6\u3001\u5bb9\u5668\u7c7b host",id:"8356\u5bb9\u5668\u7c7b-host",level:4},{value:"8.3.5.7\u3001\u5bb9\u5668\u7c7b context",id:"8357\u5bb9\u5668\u7c7b-context",level:4},{value:"8.3.5.8\u3001\u88ab\u5d4c\u5957\u7c7b realm",id:"8358\u88ab\u5d4c\u5957\u7c7b-realm",level:4},{value:"8.3.5.9\u3001\u88ab\u5d4c\u5957\u7c7b valve",id:"8359\u88ab\u5d4c\u5957\u7c7b-valve",level:4},{value:"8.4\u3001tomcat \u56fe\u5f62\u7ba1\u7406\u548c\u8eab\u4efd\u8ba4\u8bc1",id:"84tomcat-\u56fe\u5f62\u7ba1\u7406\u548c\u8eab\u4efd\u8ba4\u8bc1",level:2}],u={toc:m};function k(e){var a=e.components,p=(0,l.Z)(e,r);return(0,o.kt)("wrapper",(0,n.Z)({},u,p,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"81tomcat-\u672f\u8bed"},"8.1\u3001Tomcat \u672f\u8bed"),(0,o.kt)("h3",{id:"811java-\u548c-jdk-\u6982\u5ff5"},"8.1.1\u3001java \u548c jdk \u6982\u5ff5"),(0,o.kt)("p",null,"\u65e0\u8bba\u662f\u4f55\u79cd\u7a0b\u5e8f\uff0c\u8981\u80fd\u5728\u8ba1\u7b97\u673a\u4e0a\u8fd0\u884c\uff0c\u5fc5\u987b\u80fd\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u7684\u673a\u5668\u8bed\u8a00\u624d\u80fd\u548c\u786c\u4ef6\u8fdb\u884c\u4ea4\u4e92\uff0c\u5728\u673a\u5668\u8bed\u8a00\u7684\u4e0a\u5c42\u662f\u6c47\u7f16\u8bed\u8a00\uff0c\u518d\u4e0a\u5c42\u662f C/C++ \u8fd9\u6837\u8f83\u5e95\u5c42\u7684\u8bed\u8a00\uff0c\u7531\u4e8e\u5b83\u4eec\u4e25\u91cd\u4f9d\u8d56\u4e8e\u5e73\u53f0\u67b6\u6784\uff0c\u6240\u4ee5\u4e00\u822c\u53ea\u80fd\u8fd0\u884c\u5728\u7a0b\u5e8f\u6e90\u4ee3\u7801\u5df2\u7f16\u8bd1\u7684\u673a\u5668\u4e0a\uff0c\u53ef\u79fb\u690d\u6027\u6bd4\u8f83\u5dee\u3002"),(0,o.kt)("p",null,"Java \u662f\u4e00\u79cd\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\uff0c\u5b83\u7684\u5c42\u6b21\u6bd4 C \u66f4\u9ad8\u4e00\u70b9\uff0c\u5c42\u6b21\u6307\u7684\u662f\u79bb\u786c\u4ef6\u66f4\u8fdc\u4e00\u70b9\u3002\u5b83\u5c06\u5199\u597d\u7684\u7a0b\u5e8f\u6587\u4ef6(.java)\u901a\u8fc7 java \u7f16\u8bd1\u5668 javac \u7f16\u8bd1\u6210\u5b57\u8282\u7801\u7c7b\u578b\u7684 class \u6587\u4ef6(.class)\uff0c\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u6d89\u53ca\u8bcd\u6cd5\u5206\u6790\u3001\u8bed\u6cd5\u5206\u6790\u3001\u8bed\u4e49\u5206\u6790\u3001\u5b57\u8282\u7801\u751f\u6210\u7b49\u8fc7\u7a0b\uff0c\u6700\u7ec8\u751f\u6210\u5b57\u8282\u7801\u7684 class \u6587\u4ef6\u3002"),(0,o.kt)("p",null,"class \u6587\u4ef6\u662f Java \u7684\u7c7b\u6587\u4ef6\uff0c\u662f\u7f16\u8bd1\u6210\u529f\u540e\u7684\u5b57\u8282\u7801\u6587\u4ef6\uff0c\u5b57\u8282\u7801\u7531 Java \u865a\u62df\u673a JVM \u89e3\u91ca\u6267\u884c\uff0c\u5b83\u5c06\u6bcf\u4e00\u6761\u5b57\u8282\u7801\u9001\u7ed9\u89e3\u91ca\u5668\uff0c\u518d\u7ffb\u8bd1\u6210\u673a\u5668\u8bed\u8a00\uff0c\u4ece\u800c\u5728\u7279\u5b9a\u7684\u673a\u5668\u4e0a\u8fd0\u884c\u3002Java \u901a\u8fc7 JVM \u7684\u65b9\u5f0f\u5b9e\u73b0\u4e86\u4e00\u6b21\u7f16\u8bd1\u5230\u5904\u8fd0\u884c\u7684\u529f\u80fd\u3002"),(0,o.kt)("p",null,"\u5373\uff1aXXX.java(\u6e90\u7801) --\x3e javac(\u7f16\u8bd1\u5668) --\x3e XXX.class(\u5b57\u8282\u7801) --\x3e JVM --\x3e \u673a\u5668\u8bed\u8a00(\u4f9d\u8d56\u4e8e\u4e0d\u540c\u5e73\u53f0) --\x3e \u6267\u884c"),(0,o.kt)("p",null,"JRE(Java Runtime Environment) \u662f\u5305\u542b\u4e86 JVM \u548c\u5176\u4ed6\u4e00\u4e9b\u7b80\u5355\u529f\u80fd\u7684 JAVA \u8fd0\u884c\u73af\u5883\uff0c\u5b83\u9002\u7528\u4e8e\u53ea\u8fd0\u884c java \u7a0b\u5e8f\u65f6\u3002"),(0,o.kt)("p",null,"JDK(Java Development Kit) \u6bd4 JRE \u5305\u542b\u4e86\u66f4\u591a\u4e1c\u897f\uff0c\u5b83\u9664\u4e86\u80fd\u4f5c\u4e3a JAVA \u8fd0\u884c\u73af\u5883\uff0c\u8fd8\u63d0\u4f9b\u4e86\u5f88\u591a\u7528\u4e8e\u5f00\u53d1\u7684\u5de5\u5177\uff0c\u6240\u4ee5\u5b83\u9002\u7528\u4e8e\u5f00\u53d1\u7a0b\u5e8f\u65f6\u4f7f\u7528\u3002"),(0,o.kt)("p",null,"JAVA SE \u662f java \u5f00\u53d1\u6807\u51c6\u7248\uff0c\u91cc\u9762\u6709 JDK\uff0cJava EE \u662f\u4f01\u4e1a\u7248\uff0c\u672c\u8d28\u4e0a ee \u53ea\u662f\u6bd4 se \u591a\u63d0\u4f9b\u4e86\u51e0\u4e2a\u7c7b\u5e93\u800c\u5df2\u3002"),(0,o.kt)("h3",{id:"812jsp-\u548c-servlet-\u6982\u5ff5"},"8.1.2\u3001jsp \u548c servlet \u6982\u5ff5"),(0,o.kt)("p",null,"\u5728 web \u5e94\u7528\u7a0b\u5e8f\u4e0a\uff0c\u65e9\u671f Java \u7684\u5b9e\u73b0\u65b9\u5f0f\u662f\u670d\u52a1\u5668\u7aef\u653e\u7f6e\u5e94\u7528\u7a0b\u5e8f\uff0c\u5ba2\u6237\u7aef\u8bbf\u95ee\u65f6\u5c06\u5176\u4e0b\u8f7d\u5230\u5ba2\u6237\u7aef\u672c\u5730\u5e76\u6267\u884c\uff0c\u8fd9\u6837\u4e0d\u4ec5\u4e0d\u5b89\u5168\uff0c\u800c\u4e14\u8981\u6c42\u5ba2\u6237\u6709 java \u8fd0\u884c\u73af\u5883\uff0c\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u662f applet\u3002"),(0,o.kt)("p",null,"\u4e0e applet \u76f8\u5bf9\u7684\u662f servlet\uff0c\u4f46\u5b83\u662f\u670d\u52a1\u7aef\u7a0b\u5e8f\u3002\u540e\u6765\uff0cjava \u5c06\u5e94\u7528\u7a0b\u5e8f\u653e\u5728\u670d\u52a1\u5668\u7aef\uff0c\u5ba2\u6237\u7aef\u8bf7\u6c42\u6b64\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u670d\u52a1\u7aef\u901a\u8fc7 servlet \u7c7b\u5e93\u5206\u6790 http \u534f\u8bae\uff0c\u5c06\u8bf7\u6c42\u7684\u5e94\u7528\u7a0b\u5e8f\u5728\u670d\u52a1\u7aef\u6267\u884c\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u7ec4\u7ec7\u8d77\u6765\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u4f46\u6b64\u65f6 servlet \u80fd\u5206\u6790\u7684 http \u534f\u8bae\u975e\u5e38\u7b80\u5355\uff0c\u4e14\u548c html \u7684\u7ec4\u7ec7\u65b9\u5f0f\u975e\u5e38\u4e0d\u53cb\u597d\uff0c\u5b83\u8981\u6c42 java \u7a0b\u5e8f\u5458\u9996\u5148\u5f97\u61c2 html \u5f00\u53d1(\u5b9e\u9645\u4e0a\u73b0\u5728\u8fd8\u662f\u5982\u6b64\uff0cjava \u7a0b\u5e8f\u5458\u81f3\u5c11\u8981\u61c2\u7b80\u5355\u7684 html/css/javascript \u7b49\u524d\u7aef\u6280\u672f)\uff0c\u4e8e\u662f\u540e\u6765\u51fa\u73b0\u4e86 JSP \u7c7b\u5e93\u3002"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"JSP \u53ef\u4ee5\u7b80\u5355\u7684\u5c06 java \u4ee3\u7801\u5d4c\u5165\u5728 html \u6587\u6863\u4e2d\uff0c\u5b83\u4eec\u80fd\u591f\u5f88\u53cb\u597d\u5730\u7ed3\u5408\uff0c\u7ed3\u5408\u540e\u7684\u6587\u6863\u7c7b\u578b\u4e3a .jsp \u6587\u4ef6\u3002")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"\u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u5e94\u7528\u7a0b\u5e8f\u8d44\u6e90\u65f6\uff0cJSP \u7c7b\u5e93\u8d1f\u8d23\u89e3\u6790 .jsp \u6587\u4ef6\u4e2d\u7684 jsp \u90e8\u5206\u5e76\u901a\u8fc7 jasper \u7ec4\u4ef6\u5c06\u5176\u7ffb\u8bd1\u6210 servlet \u7684 java \u6e90\u4ee3\u7801\uff0c\u7136\u540e\u518d\u7f16\u8bd1\u6210 class \u6587\u4ef6\u5e76\u4ea4\u7ed9 JVM \u6765\u6267\u884c"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u4e0a\uff0cjsp \u672c\u8d28\u5c31\u662f servlet\uff0cjsp \u7c7b\u53ea\u4e0d\u8fc7\u662f\u7ee7\u627f\u4e8e servlet \u7c7b\u5e76\u6dfb\u52a0\u4e86\u4e00\u4e9b\u548c html \u53cb\u597d\u7ed3\u5408\u7684\u7279\u6027\uff0c\u6700\u7ec8\u5b83\u8fd8\u662f\u8981\u7ffb\u8bd1\u6210 servlet \u4ee3\u7801\u3002")),(0,o.kt)("p",null,"JSP \u7684\u672c\u8d28\u8fd8\u662f Servlet\uff0c\u6bcf\u4e2a JSP \u9875\u9762\u5c31\u662f\u4e00\u4e2a Servlet \u5bf9\u8c61(\u5f53\u7136\u4e5f\u53ef\u80fd\u5f15\u7528\u4e86\u5176\u4ed6 servlet \u5bf9\u8c61)\uff0cServlet \u518d\u8d1f\u8d23\u54cd\u5e94\u7528\u6237\u7684\u52a8\u6001\u8bf7\u6c42\u6570\u636e(\u5176\u5b9e\u4e5f\u5305\u62ec\u9759\u6001\u6570\u636e\uff0c\u56e0\u4e3a jasper \u7ffb\u8bd1 jsp \u4ee3\u7801\u65f6\uff0c\u9759\u6001\u6807\u7b7e\u4e5f\u88ab\u7ffb\u8bd1\u5230 servlet \u7684 java \u6e90\u6587\u4ef6\u4e2d\u4ee5\u5f85\u8f93\u51fa)\u3002\u5bf9\u4e8e Tomcat \u800c\u8a00\uff0cJSP \u9875\u9762\u751f\u6210\u7684 Servlet \u653e\u5728 work \u8def\u5f84\u5bf9\u5e94\u7684 Web \u5e94\u7528\u4e0b\u3002"),(0,o.kt)("p",null,"\u8003\u8651\u5230 tomcat \u548c httpd\u3001nginx \u7b49 http \u670d\u52a1\u7a0b\u5e8f\u7684\u5bf9\u6bd4\uff0c\u6709\u4e24\u70b9\u9700\u8981\u660e\u786e\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"\u4e00\u4e2a java \u7a0b\u5e8f\u53ea\u6709\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u4f46\u662f\u53ef\u4ee5\u6709\u591a\u4e2a\u7ebf\u7a0b\uff0c\u4e5f\u5c31\u662f\u8bf4 java \u7a0b\u5e8f\u7684\u5f00\u53d1\u662f\u57fa\u4e8e\u7ebf\u7a0b\u7684"),"\u3002\u90a3\u552f\u4e00\u7684\u8fdb\u7a0b\u5c31\u662f JVM \u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u90fd\u5f00\u542f\u4e00\u4e2a JVM \u8fdb\u7a0b\uff0c\u6839\u636e\u5f00\u53d1\u65f6\u8bbe\u8ba1\u7684\u591a\u7ebf\u7a0b\u4ee3\u7801\uff0c\u5728\u8fd9\u4e2a JVM \u8fdb\u7a0b\u4e2d\u4f1a\u542f\u52a8\u591a\u4e2a\u7ebf\u7a0b\u3002\u5b83\u4e0d\u50cf httpd \u6216 nginx\uff0c\u80fd\u5f00\u542f\u591a\u8fdb\u7a0b(\u5bf9\u4e8e tomcat \u800c\u8a00\uff0c\u8fd9\u610f\u5473\u7740\u591a\u4e2a\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u751a\u81f3\u610f\u5473\u7740\u5f00\u542f\u591a\u4e2a tomcat \u5b9e\u4f8b)\u3002"),(0,o.kt)("li",{parentName:"ol"},"tomcat \u53ef\u4ee5\u5904\u7406\u52a8\u6001\u8bf7\u6c42\uff0c\u4e5f\u53ef\u4ee5\u5904\u7406\u9759\u6001\u8d44\u6e90\u8bf7\u6c42\u3002",(0,o.kt)("strong",{parentName:"li"},"\u4f46\u65e0\u8bba\u662f\u52a8\u6001\u8d44\u6e90\uff0c\u8fd8\u662f\u9759\u6001\u8d44\u6e90\u7684\u8bf7\u6c42\uff0c\u90fd\u662f\u7ecf\u8fc7 servlet \u5904\u7406\u5e76\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\u7684"),"\uff0c\u53ea\u4e0d\u8fc7\u8bf7\u6c42\u9759\u6001\u8d44\u6e90\u65f6\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u7684 servlet\u3002\u867d\u7136\u5b83\u80fd\u50cf httpd \u548c nginx \u4e00\u6837\u5904\u7406\u9759\u6001\u8d44\u6e90\uff0c\u4f46\u663e\u7136\uff0c\u5b83\u65e2\u8981\u5904\u7406\u52a8\u6001\u8bf7\u6c42\uff0c\u53c8\u8981\u5904\u7406\u9759\u6001\u8bf7\u6c42\uff0c\u538b\u529b\u4f1a\u5f88\u5927\u3002\u56e0\u6b64 tomcat \u524d\u4e00\u822c\u4f7f\u7528 httpd \u6216 nginx \u4e13\u95e8\u5904\u7406\u9759\u6001\u8bf7\u6c42\uff0c\u800c\u52a8\u6001\u8bf7\u6c42\u5219\u901a\u8fc7\u53cd\u5411\u4ee3\u7406\u7684\u65b9\u5f0f\u4ee3\u7406\u81f3 tomcat\u3002")),(0,o.kt)("h3",{id:"813web-\u670d\u52a1\u5668web-\u5bb9\u5668\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668"},"8.1.3\u3001web \u670d\u52a1\u5668\u3001web \u5bb9\u5668\u3001\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668"),(0,o.kt)("p",null,"web \u670d\u52a1\u5668\u7528\u4e8e\u63d0\u4f9b web \u670d\u52a1\uff0c\u8981\u6c42\u80fd\u89e3\u6790 http \u534f\u8bae\uff0c\u901a\u5e38\u8ba4\u4e3a\u63d0\u4f9b\u9759\u6001\u5185\u5bb9\u7684\u670d\u52a1\u5668\u662f web \u670d\u52a1\u5668\u3002\u5982 apache httpd\u3001nginx \u7b49\u3002"),(0,o.kt)("p",null,"\u5bf9\u4e8e java \u800c\u8a00\uff0cweb \u5bb9\u5668\u662f\u80fd\u63d0\u4f9b servlet \u5bb9\u5668\u7684\u670d\u52a1\u5668\uff0c\u5b83\u4eec\u662f\u7b49\u4ef7\u7684\u6982\u5ff5\u3002\u5e38\u89c1\u7684\u6709 tomcat\u3001weblogic\u3001websphere\u3001jboss\u3002\u5176\u4e2d tomcat \u53ea\u63d0\u4f9b servlet \u5bb9\u5668\uff0c\u5b83\u4eec\u5728\u529f\u80fd\u4e0a\u662f\u7b49\u4ef7\u7684\u3002\u9664 tomcat \u5916\uff0c\u540e\u9762 3 \u79cd web \u5bb9\u5668\u8fd8\u63d0\u4f9b\u9664 servlet \u5bb9\u5668\u5916\u7684 EJB \u5bb9\u5668\uff0c\u4e13\u7528\u4e8e\u5927\u578b\u5206\u5e03\u5f0f\u7a0b\u5e8f\u5f00\u53d1\u3002"),(0,o.kt)("p",null,"\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u662f\u7528\u4e8e\u63d0\u4f9b\u5e94\u7528\u670d\u52a1\u7684\u670d\u52a1\u5668\u3002\u8fd9\u662f\u4e1a\u52a1\u903b\u8f91\u4e0a\u7684\u6982\u5ff5\u5212\u5206\u3002\u66f4\u5177\u4f53\u4e00\u70b9\u7684\u8bf4\uff0c\u5b83\u63d0\u4f9b WEB \u5bb9\u5668(servlet \u5bb9\u5668)\u3001EJB \u5bb9\u5668\u4ee5\u53ca\u5176\u4ed6\u529f\u80fd\u3002"),(0,o.kt)("p",null,"\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u548c\u529f\u80fd\u5927\u81f4\u5982\u4e0b\uff1a"),(0,o.kt)("p",null,"web \u670d\u52a1\u5668\u63d0\u4f9b web \u670d\u52a1\uff0c\u4e3b\u8981\u5904\u7406 http \u8bf7\u6c42\u5e76\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\uff0c\u5e76\u53ef\u4ee5\u5c06\u52a8\u6001\u8bf7\u6c42\u59d4\u6258\u7ed9\u5176\u4ed6\u7a0b\u5e8f\uff0c\u5982 cgi \u811a\u672c\u3001jsp \u811a\u672c\u3001asp \u811a\u672c\u7b49\u8fdb\u884c\u5904\u7406\uff1b"),(0,o.kt)("p",null,"web \u5bb9\u5668\u5373 servlet \u5bb9\u5668\u4e3b\u8981\u8d1f\u8d23\u5904\u7406\u57fa\u4e8e http \u8bf7\u6c42\u7684\u52a8\u6001 jsp \u5185\u5bb9\uff1bEJB \u5bb9\u5668\u4e3b\u8981\u63d0\u4f9b\u548c\u540e\u7aef\u6570\u636e\u5e93\u670d\u52a1\u3001\u5176\u4ed6\u670d\u52a1\u8fdb\u884c\u4ea4\u4e92\u7684\u529f\u80fd\uff1b"),(0,o.kt)("p",null,"\u5e94\u7528\u670d\u52a1\u5668\u901a\u5e38\u6765\u8bf4\u5305\u62ec servlet \u5bb9\u5668\u6216 EJB \u5bb9\u5668\uff0c\u5b83\u4eec\u90fd\u8fd0\u884c\u4e8e\u652f\u6301 Java \u7684\u5e94\u7528\u670d\u52a1\u5668\u4e2d\uff0c\u56e0\u6b64 tomcat/weblogic/websphere/jboss \u90fd\u7b97\u662f\u5e94\u7528\u670d\u52a1\u5668\u3002"),(0,o.kt)("h3",{id:"814tomcat-\u4f53\u7cfb\u7ed3\u6784"},"8.1.4\u3001tomcat \u4f53\u7cfb\u7ed3\u6784"),(0,o.kt)("p",null,"tomcat \u662f jdk+servlet(\u4e25\u683c\u5730\u8bf4\u662f+jsp) \u5b9e\u73b0\u7684\u7cbe\u7b80\u7248\u7684 java ee\uff0c\u7531\u4e8e\u5b83\u53ea\u5728 jdk \u7684\u57fa\u7840\u4e0a\u9644\u52a0\u4e86 jsp \u548c servlet \u7c7b\u5e93\uff0c\u6240\u4ee5\u5b83\u7684\u5e94\u7528\u8303\u56f4\u4e3b\u8981\u662f web \u5e94\u7528\u3002tomcat \u9879\u76ee\u76ee\u524d\u7531 apache \u8f6f\u4ef6\u57fa\u91d1\u4f1a\u7ef4\u62a4\u3002"),(0,o.kt)("p",null,"\u5b83\u662f\u4e00\u79cd\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\uff0c\u53ea\u63d0\u4f9b servlet \u5bb9\u5668\uff0c\u540c\u65f6\u8fd8\u63d0\u4f9b apache \u89e3\u6790\u9759\u6001 HTML\uff0c\u53ea\u4e0d\u8fc7\u5b83\u7684\u5904\u7406\u80fd\u529b\u4e0d\u5982\u72ec\u7acb\u7684 apache \u670d\u52a1\u5668\u3002\u7c7b\u4f3c\u7684\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u8fd8\u6709 websphere/weblogic/jetty/resin/jboss \u7b49\uff0c\u5b83\u4eec\u90fd\u662f\u5728 jdk \u57fa\u7840\u4e0a\u9644\u52a0\u5404\u79cd\u7c7b\u5e93\u5b9e\u73b0\u4e0d\u540c\u7a0b\u5ea6\u7684 java ee(tomcat=jdk+servlet)\u3002"),(0,o.kt)("p",null,"\u5bf9\u4e8e tomcat \u6765\u8bf4\uff0c\u5b83\u9ad8\u5ea6\u6a21\u5757\u5316\uff0c\u901a\u8fc7\u5404\u4e2a\u7ec4\u4ef6\u5b9e\u73b0\u5404\u79cd\u529f\u80fd\u3002\u5b83\u7684\u4f53\u7cfb\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tomcat",src:t(16174).Z,width:"819",height:"642"})),(0,o.kt)("p",null,"\u5176\u4e2d\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"server \u662f\u9876\u7ea7\u7c7b\uff0c\u4e00\u4e2a server \u7b97\u662f\u4e00\u4e2a tomcat \u5b9e\u4f8b\uff0c\u5728\u6b64\u5c42\u6b21\u4e2d\u53ef\u5b9a\u4e49 tomcat \u670d\u52a1\u7684\u76d1\u542c\u7aef\u53e3\u3002"),(0,o.kt)("li",{parentName:"ul"},"service \u662f server \u4e0b\u7684\u5b50\u7ec4\u4ef6\uff0c\u7528\u4e8e\u5c01\u88c5\u7ed1\u5b9a connector \u548c containor\uff0c\u5e76\u4e3a\u5b83\u4eec\u63d0\u4f9b\u4e00\u4e2a\u540d\u79f0\u5c5e\u6027\u3002\u6709\u4e86 service \u5c31\u53ef\u4ee5\u63d0\u4f9b\u76f8\u5173\u7684\u670d\u52a1\uff0c\u5982\u76d1\u542c TCP \u8fde\u63a5\u8bf7\u6c42\u3001\u5904\u7406 http \u8bf7\u6c42\u3002\u6ce8\u610f server \u662f\u7ba1\u7406\u6574\u4e2a tomcat \u5b9e\u4f8b\u7684\u5c42\u6b21\uff0c\u5b83\u548c\u63d0\u4f9b\u670d\u52a1\u6ca1\u6709\u5173\u7cfb\u3002"),(0,o.kt)("li",{parentName:"ul"},"connector \u662f\u8fde\u63a5\u5668\uff0c\u5b9a\u4e49 http \u534f\u8bae(\u9ed8\u8ba4)\u4ee5\u53ca\u8be5\u534f\u8bae\u7684\u76d1\u542c\u7aef\u53e3\u3002\u8fde\u63a5\u5668\u7528\u4e8e",(0,o.kt)("strong",{parentName:"li"},"\u63a5\u6536\u5ba2\u6237\u7aef\u8bf7\u6c42\u5e76\u5c06 containor \u5904\u7406\u7684\u6570\u636e\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},"containor \u79f0\u4e3a\u5bb9\u5668\uff0c\u5b83\u548c connector \u8fde\u63a5\u5668\u8fdb\u884c\u7ed1\u5b9a\u3002\u8be5\u5bb9\u5668\u5185\u6709 4 \u4e2a\u5b50\u5bb9\u5668\uff0c\u5305\u62ec\uff1aengine \u5bb9\u5668\u3001host \u5bb9\u5668\u3001context \u5bb9\u5668\u3001Wrapper \u5bb9\u5668\u3002",(0,o.kt)("strong",{parentName:"li"},"\u5bb9\u5668\u7528\u4e8e\u5206\u6790\u3001\u5904\u7406\u8bf7\u6c42\uff0c\u5e76\u6784\u5efa\u54cd\u5e94\u7ed9 connector \u4ee5\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef"),"\u3002\u5b83\u548c connector \u662f tomcat \u7684\u5fc3\u810f\u7ec4\u4ef6\u3002"),(0,o.kt)("li",{parentName:"ul"},"engine \u5bb9\u5668\u5b9a\u4e49 servlet \u5f15\u64ce\uff0c\u7528\u4e8e\u5b9a\u4e49\u5f15\u64ce\u7684\u540d\u79f0\u3001\u9ed8\u8ba4\u7684\u865a\u62df\u4e3b\u673a\u3002",(0,o.kt)("strong",{parentName:"li"},"\u5f15\u64ce\u7528\u4e8e\u5206\u6790 http \u8bf7\u6c42\u5e76\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5bf9\u5e94\u7684\u865a\u62df\u4e3b\u673a\u3002")),(0,o.kt)("li",{parentName:"ul"},"host \u5bb9\u5668\u7528\u4e8e\u5b9a\u4e49\u865a\u62df\u4e3b\u673a\u3002"),(0,o.kt)("li",{parentName:"ul"},"context \u5bb9\u5668\u7528\u4e8e\u5b9a\u4e49 webapp\uff0c\u4e00\u4e2a context \u5b9a\u4e49\u4e00\u4e2a webapp\u3002\u5b83\u662f\u771f\u6b63\u7ba1\u7406 servlet \u5bb9\u5668\u7684\u5c42\u6b21\u3002"),(0,o.kt)("li",{parentName:"ul"},"wrapper \u5bb9\u5668\u5bf9\u5e94\u7684\u662f\u771f\u6b63\u7684 servlet \u5bb9\u5668\uff0c\u4e00\u4e2a wrapper \u4ee3\u8868\u4e00\u4e2a servlet\uff0c\u5b83\u8d1f\u8d23\u7ba1\u7406\u4e00\u4e2a Servlet\uff0c\u5305\u62ec\u7684 Servlet \u7684\u88c5\u8f7d\u3001\u521d\u59cb\u5316\u3001\u6267\u884c\u4ee5\u53ca\u8d44\u6e90\u56de\u6536\u3002Wrapper \u662f\u6700\u5e95\u5c42\u7684\u5bb9\u5668\uff0c\u4e00\u4e2a context \u53ea\u80fd\u5305\u542b\u4e00\u4e2a wrapper\u3002\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u65e0\u6cd5\u914d\u7f6e\u8be5\u5bb9\u5668\u7684\u5c5e\u6027\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7ec4\u4ef6\uff0c\u5982 session \u7ba1\u7406\u7ec4\u4ef6\u3001JMX \u7b49\u3002")),(0,o.kt)("p",null,"\u4e00\u4e2a server \u53ef\u4ee5\u6709\u591a\u4e2a service\u3002\u4e00\u4e2a service \u53ef\u4ee5\u6709\u591a\u4e2a connector \u548c\u552f\u4e00\u7684 containor\u3002",(0,o.kt)("strong",{parentName:"p"},"containor \u662f\u5bb9\u5668\u7c7b\uff0c\u4ece containor \u5c42\u6b21\u5f00\u59cb\uff0c\u771f\u6b63\u8fdb\u5165 servlet \u5bb9\u5668\u76f8\u5173\u7684\u8fc7\u7a0b"),"\u3002\u5b83\u5305\u542b\u4e86\u552f\u4e00\u7684 engine \u5bb9\u5668\uff0cengine \u5bb9\u5668\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a\u6216\u591a\u4e2a host \u5bb9\u5668\uff0chost \u5bb9\u5668\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a\u6216\u591a\u4e2a context \u5bb9\u5668\uff0ccontext \u5bb9\u5668\u4e2d\u5305\u542b\u4e86\u552f\u4e00\u7684 wrapper\u3002\u5b83\u4eec\u7684\u7ec4\u7ec7\u7ed3\u6784\u5927\u81f4\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"<server>\n    <service>\n        <connector />\n        <engine>\n            <host>\n                <context />\n                <context />\n            </host>\n            <host>\n                <context />\n            </host>\n        </engine>\n    </service>\n\n    <service>\n         ......\n    </service>\n</server>\n")),(0,o.kt)("h2",{id:"82\u5b89\u88c5-tomcat"},"8.2\u3001\u5b89\u88c5 tomcat"),(0,o.kt)("p",null,"tomcat \u4f9d\u8d56\u4e8e jdk\uff0c\u6240\u4ee5\u9700\u8981\u5148\u5b89\u88c5 jdk\u3002tomcat \u548c jdk \u7248\u672c\u4e4b\u95f4\u5b58\u5728\u5bf9\u5e94\u5173\u7cfb\uff0c\u5e94\u8be5\u8003\u8651\u597d\u8981\u5b89\u88c5\u54ea\u4e2a\u7248\u672c\u7684 jdk \u4ee5\u53ca\u54ea\u4e2a\u7248\u672c\u7684 tomcat\u3002"),(0,o.kt)("p",null,"\u5b98\u65b9\u7ed9\u51fa\u7684\u5bf9\u5e94\u5173\u7cfb\u7f51\u5740\u4e3a\uff1a",(0,o.kt)("a",{parentName:"p",href:"https://tomcat.apache.org/whichversion.html"},"https://tomcat.apache.org/whichversion.html"),"\u3002"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tomcat versions",src:t(91939).Z,width:"1546",height:"574"})),(0,o.kt)("p",null,"\u672c\u6587 jdk \u4ee5 jdk-8u311\u4e3a\u4f8b\uff0c\u8868\u793a\u7248\u672c\u4e3a 8 \u7684\u7b2c 311 \u6b21\u66f4\u65b0\uff0ctomcat \u4ee5 apache-tomcat-8.5.72\u4e3a\u4f8b\u3002"),(0,o.kt)("h3",{id:"821\u5b89\u88c5-jdk"},"8.2.1\u3001\u5b89\u88c5 jdk"),(0,o.kt)("p",null,"\u4e0b\u8f7d\u5730\u5740\uff1a",(0,o.kt)("a",{parentName:"p",href:"http://www.oracle.com/technetwork/java/javase/downloads/index.html"},"http://www.oracle.com/technetwork/java/javase/downloads/index.html")),(0,o.kt)("p",null,"\u4ee5 rpm \u5305\u7684\u4e3a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# yum localinstall jdk-8u311-linux-aarch64.rpm -y\n")),(0,o.kt)("p",null,"\u5b89\u88c5\u8def\u5f84\u4e3a /usr/java\u3002\u5728\u8be5\u8def\u5f84\u6709 3 \u4e2a\u6587\u4ef6\uff0c\u5176\u4e2d\u4e24\u4e2a\u662f\u7248\u672c\u53f7\u7684\u8f6f\u94fe\u63a5\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# ll /usr/java/\ntotal 0\nlrwxrwxrwx 1 root root  16 Nov  9 09:13 default -> /usr/java/latest\ndrwxr-xr-x 9 root root 207 Nov  9 09:13 jdk1.8.0_311-aarch64\nlrwxrwxrwx 1 root root  30 Nov  9 09:13 latest -> /usr/java/jdk1.8.0_311-aarch64\n[root@fname1 ~]#\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u8fd9\u79cd\u8f6f\u94fe\u63a5\u65b9\u5f0f\uff0c\u4ee5\u540e\u6709\u65b0\u7248 jdk \u8981\u5b89\u88c5\uff0c\u76f4\u63a5\u6539 latest \u7684\u94fe\u63a5\u5bf9\u8c61\u5373\u53ef\u3002")),(0,o.kt)("p",null,"\u5728\u5b89\u88c5\u76ee\u5f55\u7684 Bin \u76ee\u5f55\u4e0b\uff0c\u6709\u5f88\u591a\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u5305\u62ec javac(java\u7f16\u8bd1\u5668)\uff0cjava(java \u4e3b\u7a0b\u5e8f\uff0c\u5176\u4e2d\u5305\u62ec JVM)\uff0cjps(\u67e5\u770b\u5f53\u524d java \u8fdb\u7a0b\u53ca pid\uff0c\u6240\u4ee5\u53ef\u4ee5\u67e5\u770b java \u8fdb\u7a0b\u6570)\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# cd /usr/java/latest/bin/\n[root@fname1 bin]# ls\nappletviewer  java     java-rmi.cgi  jhat   jrunscript  keytool       rmic         servertool  xjc\nextcheck      javac    jcmd          jinfo  jsadebugd   native2ascii  rmid         tnameserv\nidlj          javadoc  jconsole      jjs    jstack      orbd          rmiregistry  unpack200\njar           javah    jdb           jmap   jstat       pack200       schemagen    wsgen\njarsigner     javap    jdeps         jps    jstatd      policytool    serialver    wsimport\n[root@fname1 bin]#\n")),(0,o.kt)("p",null,"\u6267\u884c ",(0,o.kt)("inlineCode",{parentName:"p"},"java -version")," \u53ef\u4ee5\u9a8c\u8bc1 jdk \u5de5\u5177\u662f\u5426\u5b89\u88c5\u6210\u529f\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'[root@fname1 jdk1.8.0_311-aarch64]# bin/java -version\njava version "1.8.0_311"\nJava(TM) SE Runtime Environment (build 1.8.0_311-b11)\nJava HotSpot(TM) 64-Bit Server VM (build 25.311-b11, mixed mode)\n[root@fname1 jdk1.8.0_311-aarch64]#\n')),(0,o.kt)("p",null,"\u4f7f\u7528 rpm \u5305\u5b89\u88c5 java jdk \u65f6\uff0c\u65e9\u671f\u9700\u8981\u624b\u52a8\u914d\u7f6e java \u73af\u5883\u53d8\u91cf\u3002\u6bd4\u5982\u8bbe\u7f6e JAVA","_","HOME \u73af\u5883\u53d8\u91cf\u5e76\u5bfc\u51fa java \u7a0b\u5e8f\u6240\u5728\u76ee\u5f55\u7684 PATH \u73af\u5883\u53d8\u91cf\uff0c\u6bd4\u5982\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"shell> echo 'export JAVA_HOME=/usr/java/latest' > /etc/profile.d/jdk.sh\nshell> echo 'export PATH=$JAVA_HOME/bin:$PATH' >> /etc/profile.d/jdk.sh\nshell> . /etc/profile.d/jdk.sh\n")),(0,o.kt)("p",null,"\u5b9e\u9645\u4e0a\u6211\u4eec\u4f7f\u7528 jdk-8u311-linux-aarch64.rpm \u8fd9\u4e2a\u7248\u672c\u5b89\u88c5\u65f6\uff0c\u5df2\u81ea\u52a8\u901a\u8fc7\u8f6f\u94fe\u63a5\u65b9\u5f0f\u5b9e\u73b0\u4e86\u73af\u5883\u53d8\u91cf\u7684\u8bbe\u7f6e\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# ll /usr/bin/java*\nlrwxrwxrwx 1 root root 22 Nov  9 09:13 /usr/bin/java -> /etc/alternatives/java\nlrwxrwxrwx 1 root root 23 Nov  9 09:13 /usr/bin/javac -> /etc/alternatives/javac\nlrwxrwxrwx 1 root root 25 Nov  9 09:13 /usr/bin/javadoc -> /etc/alternatives/javadoc\nlrwxrwxrwx 1 root root 23 Nov  9 09:13 /usr/bin/javah -> /etc/alternatives/javah\nlrwxrwxrwx 1 root root 23 Nov  9 09:13 /usr/bin/javap -> /etc/alternatives/javap\nlrwxrwxrwx 1 root root 30 Nov  9 09:13 /usr/bin/java-rmi.cgi -> /etc/alternatives/java-rmi.cgi\n[root@fname1 ~]#\n")),(0,o.kt)("h3",{id:"822\u5b89\u88c5-tomcat"},"8.2.2\u3001\u5b89\u88c5 tomcat"),(0,o.kt)("p",null,"\u76f4\u63a5\u89e3\u538b\u5373\u53ef\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# tar xf apache-tomcat-8.5.72.tar.gz -C /usr/local/\n[root@fname1 ~]# ln -svf /usr/local/apache-tomcat-8.5.72/ /usr/local/tomcat\n\u2018/usr/local/tomcat\u2019 -> \u2018/usr/local/apache-tomcat-8.5.72/\u2019\n[root@fname1 ~]#\n")),(0,o.kt)("p",null,"\u5b89\u88c5\u5b8c\u540e\uff0c\u6709\u4ee5\u4e0b\u51e0\u4e2a\u6587\u4ef6\u548c\u76ee\u5f55\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# ll /usr/local/tomcat/*/ -d\ndrwxr-x--- 2 root root 4096 Nov  9 09:33 /usr/local/tomcat/bin/\ndrwx------ 2 root root  238 Oct  1 23:15 /usr/local/tomcat/conf/\ndrwxr-x--- 2 root root 4096 Nov  9 09:33 /usr/local/tomcat/lib/\ndrwxr-x--- 2 root root    6 Oct  1 23:15 /usr/local/tomcat/logs/\ndrwxr-x--- 2 root root   30 Nov  9 09:33 /usr/local/tomcat/temp/\ndrwxr-x--- 7 root root   81 Oct  1 23:15 /usr/local/tomcat/webapps/\ndrwxr-x--- 2 root root    6 Oct  1 23:15 /usr/local/tomcat/work/\n[root@fname1 ~]#\n")),(0,o.kt)("p",null,"logs \u76ee\u5f55\u662f\u65e5\u5fd7\u76ee\u5f55\u3002temp \u662f\u4e34\u65f6\u76ee\u5f55\u3002webapps \u662f\u5b58\u653e web \u7a0b\u5e8f\u7684\u6839\u76ee\u5f55\u3002work \u76ee\u5f55\u662f\u5b58\u653e\u7f16\u8bd1\u540e\u751f\u6210\u7684 class \u6587\u4ef6\u7684\u76ee\u5f55\u3002"),(0,o.kt)("p",null,"bin \u76ee\u5f55\u4e0b\u6709\u5f88\u591a\u811a\u672c\u6587\u4ef6\uff0c\u6709 .sh \u811a\u672c\uff0c\u4e5f\u6709 .bat \u811a\u672c\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# ls /usr/local/tomcat/bin/\nbootstrap.jar       commons-daemon-native.tar.gz  setclasspath.sh       tool-wrapper.bat\ncatalina.bat        configtest.bat                shutdown.bat          tool-wrapper.sh\ncatalina.sh         configtest.sh                 shutdown.sh           version.bat\ncatalina-tasks.xml  daemon.sh                     startup.bat           version.sh\nciphers.bat         digest.bat                    startup.sh\nciphers.sh          digest.sh                     tomcat-juli.jar\ncommons-daemon.jar  setclasspath.bat              tomcat-native.tar.gz\n[root@fname1 ~]#\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"catalina.sh \u7c7b\u4f3c\u4e8e SysV \u670d\u52a1\u7ba1\u7406\u811a\u672c\uff0c\u652f\u6301 stop\u3001start \u548c configtest\uff0c\u4f46\u4e0d\u652f\u6301 restart \u548c reload\uff0c\u5982 ",(0,o.kt)("inlineCode",{parentName:"p"},"catalina.sh start"),"\u3002")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"startup.sh \u7b49\u4ef7\u4e8e ",(0,o.kt)("inlineCode",{parentName:"p"},"catalina.sh start"),"\u3002")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"shudown.sh \u7b49\u4ef7\u4e8e ",(0,o.kt)("inlineCode",{parentName:"p"},"catalina.sh stop"),"\u3002")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"configtest.sh \u7b49\u4ef7\u4e8e ",(0,o.kt)("inlineCode",{parentName:"p"},"catalina.sh configtest"),"\u3002")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"daemon.sh \u662f\u901a\u8fc7\u6307\u5b9a\u5404\u79cd PATH \u53c2\u6570\u5c06 tomcat \u4ee5 daemon \u7684\u65b9\u5f0f\u8fd0\u884c\uff0c\u8981\u6307\u5b9a\u7684\u53c2\u6570 path \u8f83\u591a\u3002"),(0,o.kt)("p",{parentName:"li"},"catalina.sh \u6267\u884c start \u4e5f\u662f\u5728\u540e\u53f0\u8fd0\u884c tomcat \u7684\uff0c\u6240\u4ee5\u6ca1\u6709\u5fc5\u8981\u4f7f\u7528\u6b64\u811a\u672c\u6765\u5b9e\u73b0 daemon \u6a21\u5f0f\u7684 tomcat\u3002"))),(0,o.kt)("p",null,"\u5728\u5b89\u88c5\u76ee\u5f55\u4e0b\u7684 conf \u76ee\u5f55\u4e0b\u6709\u51e0\u4e2a\u914d\u7f6e xml \u683c\u5f0f\u7684\u914d\u7f6e\u6587\u4ef6\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# ls /usr/local/tomcat/conf/\ncatalina.policy      context.xml           jaspic-providers.xsd  server.xml        tomcat-users.xsd\ncatalina.properties  jaspic-providers.xml  logging.properties    tomcat-users.xml  web.xml\n[root@fname1 ~]#\n")),(0,o.kt)("p",null,"\u5176\u4e2d server.xml \u662f\u4e3b\u914d\u7f6e\u6587\u4ef6\uff0ctomcat-users.xml \u662f\u72b6\u6001\u76d1\u63a7\u548c gui \u754c\u9762\u7ba1\u7406\u7684\u8eab\u4efd\u8ba4\u8bc1\u914d\u7f6e\u6587\u4ef6\uff0c\u540e\u9762\u4f1a\u6709\u76f8\u5173\u914d\u7f6e\u8bf4\u660e\uff1b"),(0,o.kt)("p",null,"web.xml \u662f\u4e3a webapp \u63d0\u4f9b\u9ed8\u8ba4\u5c5e\u6027\u914d\u7f6e\u7684\u6587\u4ef6\uff0c\u5728 tomcat \u542f\u52a8\u65f6\u4f1a\u5148\u52a0\u8f7d webapp \u5c5e\u6027\u7684\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6 /WEB-INF/web.xml\uff0c\u7136\u540e\u518d\u52a0\u8f7d\u6b64\u6587\u4ef6\u63d0\u4f9b\u9ed8\u8ba4\u5c5e\u6027\uff0c\u4e00\u822c\u6b64\u6587\u4ef6\u90fd\u4e0d\u7528\u505a\u4efb\u4f55\u4fee\u6539\uff0c\u8981\u5b9a\u4e49\u5c5e\u6027\u65f6\u4fee\u6539 /WEB-INF/web.xml \u5373\u53ef\u3002"),(0,o.kt)("p",null,"\u5bf9\u4e8e\u6b64\u5904\u7684 web.xml\uff0c\u552f\u4e00\u9700\u8981\u77e5\u9053\u7684\u662f\u5176\u5185\u8bbe\u7f6e\u4e86\u4e3b\u9875\u6587\u4ef6\u540d\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# grep -C 1 index /usr/local/tomcat/conf/web.xml \n    <welcome-file-list>\n        <welcome-file>index.html</welcome-file>\n        <welcome-file>index.htm</welcome-file>\n        <welcome-file>index.jsp</welcome-file>\n    </welcome-file-list>\n[root@fname1 ~]#\n")),(0,o.kt)("p",null,"\u5b89\u88c5\u540e\uff0c\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"echo \"export CATALINA_HOME=/usr/local/tomcat\" > /etc/profile.d/tomcat.sh\necho 'export PATH=$CATALINA_HOME/bin:$PATH' >> /etc/profile.d/tomcat.sh\n. /etc/profile.d/tomcat.sh\n")),(0,o.kt)("p",null,"\u6267\u884c bin \u76ee\u5f55\u4e0b\u7684 version.sh \u68c0\u67e5 PATH \u73af\u5883\u53d8\u91cf\u662f\u5426\u6b63\u786e\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# version.sh \nUsing CATALINA_BASE:   /usr/local/tomcat\nUsing CATALINA_HOME:   /usr/local/tomcat\nUsing CATALINA_TMPDIR: /usr/local/tomcat/temp\nUsing JRE_HOME:        /usr\nUsing CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\nUsing CATALINA_OPTS:   \nServer version: Apache Tomcat/8.5.72\nServer built:   Oct 1 2021 15:15:33 UTC\nServer number:  8.5.72.0\nOS Name:        Linux\nOS Version:     4.18.0-193.28.1.el7.aarch64\nArchitecture:   aarch64\nJVM Version:    1.8.0_311-b11\nJVM Vendor:     Oracle Corporation\n[root@fname1 ~]#\n")),(0,o.kt)("p",null,"\u6700\u540e\u542f\u52a8 tomcat\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# catalina.sh start\nUsing CATALINA_BASE:   /usr/local/tomcat\nUsing CATALINA_HOME:   /usr/local/tomcat\nUsing CATALINA_TMPDIR: /usr/local/tomcat/temp\nUsing JRE_HOME:        /usr\nUsing CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\nUsing CATALINA_OPTS:   \nTomcat started.\n[root@fname1 ~]#\n[root@fname1 ~]# netstat -tnlp\nActive Internet connections (only servers)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name  \ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      837/sshd        \ntcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      1077/master     \ntcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      8481/java       \ntcp6       0      0 :::8080                 :::*                    LISTEN      8481/java       \ntcp6       0      0 :::22                   :::*                    LISTEN      837/sshd        \ntcp6       0      0 ::1:25                  :::*                    LISTEN      1077/master     \n[root@fname1 ~]#\n[root@fname1 ~]# curl -I http://localhost:8080\nHTTP/1.1 200 \nContent-Type: text/html;charset=UTF-8\nTransfer-Encoding: chunked\nDate: Tue, 09 Nov 2021 02:11:15 GMT\n\n[root@fname1 ~]#\n")),(0,o.kt)("h2",{id:"83tomcat-\u914d\u7f6e"},"8.3\u3001tomcat \u914d\u7f6e"),(0,o.kt)("h3",{id:"831\u865a\u62df\u4e3b\u673a\u63d0\u4f9b-web-\u670d\u52a1"},"8.3.1\u3001\u865a\u62df\u4e3b\u673a\u63d0\u4f9b web \u670d\u52a1"),(0,o.kt)("p",null,"\u8be5\u793a\u4f8b\u901a\u8fc7\u8bbe\u7f6e\u865a\u62df\u4e3b\u673a\u6765\u63d0\u4f9b web \u670d\u52a1\uff0c\u56e0\u4e3a\u662f\u5165\u95e8\u793a\u4f8b\uff0c\u6240\u4ee5\u8bbe\u7f6e\u6781\u5176\u7b80\u5355\uff0c\u53ea\u9700\u4fee\u6539 ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_HOME/conf/server.xml")," \u6587\u4ef6\u4e3a\u5982\u4e0b\u5185\u5bb9\u5373\u53ef\uff0c\u672c\u6587\u7684 tomcat \u5b89\u88c5\u5728 /usr/local/tomcat \u4e0b\uff0c\u56e0\u6b64 ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_HOME=/usr/local/tomcat"),"\u3002\u5176\u4e2d\u5927\u90e8\u5206\u90fd\u91c7\u7528\u4e86\u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u53ea\u662f\u5728 engine \u5bb9\u5668\u4e2d\u6dfb\u52a0\u4e86\u4e24\u4e2a Host \u5bb9\u5668\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'[root@fname1 ~]# cat /usr/local/tomcat/conf/server.xml\n<?xml version="1.0" encoding="UTF-8"?>\n<Server port="8005" shutdown="SHUTDOWN">\n  <Listener className="org.apache.catalina.startup.VersionLoggerListener" />\n  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />\n  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />\n  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />\n  <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener" />\n  <GlobalNamingResources>\n    <Resource name="UserDatabase" auth="Container"\n              type="org.apache.catalina.UserDatabase"\n              description="User database that can be updated and saved"\n              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"\n              pathname="conf/tomcat-users.xml" />\n  </GlobalNamingResources>\n  <Service name="Catalina">\n    <Connector port="8080" protocol="HTTP/1.1"\n               connectionTimeout="20000"\n               redirectPort="8443" />\n    <Engine name="Catalina" defaultHost="localhost">\n\n      <Realm className="org.apache.catalina.realm.LockOutRealm">\n        <Realm className="org.apache.catalina.realm.UserDatabaseRealm"\n               resourceName="UserDatabase"/>\n      </Realm>\n\n      \x3c!--  \u4ece\u6b64\u5904\u5f00\u59cb\u6dfb\u52a0\u4ee5\u4e0b\u4e24\u4e2aHost\u5bb9\u5668\u4f5c\u4e3a\u865a\u62df\u4e3b\u673a --\x3e\n      \x3c!-- \u5b9a\u4e49\u4e00\u4e2a\u5728$CATALINA_HOME\u4e4b\u5916\u7684\u865a\u62df\u4e3b\u673a --\x3e\n      <Host name="www.brinnatt.com" appBase="/www/brinnatt"\n            unpackWARs="true" autoDeploy="true">\n            <Context path="" docBase="/www/brinnatt" reloadable="true" />\n            <Context path="/yidam" docBase="yidam" reloadable="true" />\n         <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"\n                prefix="brinnatt_access_log" suffix=".txt"\n                pattern="%h %l %u %t "%r" %s %b" />\n      </Host> \n\n      \x3c!-- \u5b9a\u4e49\u4e00\u4e2a\u5728$CATALINA_HOME/webapps\u4e0b\u7684\u865a\u62df\u4e3b\u673a --\x3e\n      <Host name="www.charman.com" appBase="webapps/charman"\n            unpackWARs="true" autoDeploy="true">\n            <Context path="" docBase="" reloadable="true" />\n            <Context path="/yidam" docBase="yidam" reloadable="true" />\n         <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"\n                prefix="charman_access_log" suffix=".txt"\n                pattern="%h %l %u %t "%r" %s %b" />\n      </Host>\n\n      <Host name="localhost"  appBase="webapps"\n            unpackWARs="true" autoDeploy="true">\n        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"\n               prefix="localhost_access_log" suffix=".txt"\n               pattern="%h %l %u %t "%r" %s %b" />\n\n      </Host>\n    </Engine>\n  </Service>\n</Server>\n[root@fname1 ~]# \n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u9664\u4e86 engine \u4e2d\u5b9a\u4e49\u7684\u9ed8\u8ba4 localhost \u865a\u62df\u4e3b\u673a\uff0c\u53e6\u5916\u5e03\u7f6e\u4e86\u4e24\u4e2a\u865a\u62df\u4e3b\u673a ",(0,o.kt)("a",{parentName:"li",href:"http://www.brinnatt.com"},"www.brinnatt.com")," \u548c ",(0,o.kt)("a",{parentName:"li",href:"http://www.charman.com%EF%BC%8C%E5%AE%83%E4%BB%AC%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9B%AE%E5%BD%95%E5%88%86%E5%88%AB%E4%B8%BA"},"www.charman.com\uff0c\u5b83\u4eec\u7684\u7a0b\u5e8f\u76ee\u5f55\u5206\u522b\u4e3a")," /www/brinnatt \u548c ",(0,o.kt)("inlineCode",{parentName:"li"},"$CATALINA_HOME/webapps/charman"),"\uff0c\u6240\u4ee5\u9700\u8981\u63d0\u524d\u5efa\u7acb\u597d\u8fd9\u4e24\u4e2a\u76ee\u5f55\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u53e6\u5916\uff0c\u5728 context \u4e2d\u5b9a\u4e49\u4e86 docBase\uff0c\u5bf9\u4e8e uri \u8def\u5f84 /yidam\uff0c\u5b83\u7684\u6587\u4ef6\u7cfb\u7edf\u8def\u5f84\u5206\u522b\u4e3a /www/brinnatt/yidam \u76ee\u5f55\u548c ",(0,o.kt)("inlineCode",{parentName:"li"},"$CATALINA_HOME/webapps/charman/yidam"),"\uff0c\u6240\u4ee5\u4e5f\u8981\u5728\u4e0a\u9762\u4e24\u4e2a\u7a0b\u5e8f\u76ee\u5f55\u4e2d\u5b9a\u4e49\u597d yidam \u76ee\u5f55\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u5206\u522b\u4e3a\u8fd9 3 \u4e2a\u865a\u62df\u4e3b\u673a\u5b9a\u4e49\u4e86\u65e5\u5fd7\uff0c\u5b83\u4eec\u7684\u8def\u5f84\u4e3a\u76f8\u5bf9\u8def\u5f84 logs\uff0c\u76f8\u5bf9\u4e8e ",(0,o.kt)("inlineCode",{parentName:"li"},"$CATALINA_HOME"),"\u3002")),(0,o.kt)("p",null,"\u518d\u63d0\u4f9b appBase \u76ee\u5f55\u548c docBase \u76ee\u5f55\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# mkdir -pv /www/brinnatt/yidam\nmkdir: created directory \u2018/www\u2019\nmkdir: created directory \u2018/www/brinnatt\u2019\nmkdir: created directory \u2018/www/brinnatt/yidam\u2019\n[root@fname1 ~]# \n[root@fname1 ~]# mkdir -pv /usr/local/tomcat/webapps/charman/yidam\nmkdir: created directory \u2018/usr/local/tomcat/webapps/charman\u2019\nmkdir: created directory \u2018/usr/local/tomcat/webapps/charman/yidam\u2019\n[root@fname1 ~]#\n")),(0,o.kt)("p",null,"\u518d\u63d0\u4f9b\u6d4b\u8bd5\u7528\u7684 index.jsp \u6587\u4ef6\u3002\u5185\u5bb9\u5927\u81f4\u5982\u4e0b\uff0c\u5206\u522b\u590d\u5236\u5230\u4ee5\u4e0b\u56db\u4e2a\u76ee\u5f55\u4e2d\uff1a"),(0,o.kt)("p",null,"/www/brinnatt"),(0,o.kt)("p",null,"/www/brinnatt/yidam"),(0,o.kt)("p",null,"/usr/local/tomcat/webapps/charman"),(0,o.kt)("p",null,"/usr/local/tomcat/webapps/charman/yidam"),(0,o.kt)("p",null,"\u5e76\u5c06 out.println \u7684\u8f93\u51fa\u5185\u5bb9\u5206\u522b\u5bf9\u5e94\u4fee\u6539\uff0c\u4f7f\u80fd\u591f\u533a\u5206\u8bfb\u53d6\u7684\u662f\u54ea\u4e2a index.jsp\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<%@ page language="java" %>\n<%@ page import="java.util.*" %>\n<html>\n  <body>\n    <% out.println("hello world from [brinnatt|charman] [Root|yidam]"); %>\n  </body>\n</html>\n')),(0,o.kt)("p",null,"\u6700\u540e\u91cd\u542f catalina\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 ~]# catalina.sh stop\n[root@fname1 ~]# catalina.sh start\n")),(0,o.kt)("p",null,"\u5728\u6d4b\u8bd5\u4e3b\u673a\u4e0a\u6dfb\u52a0 www.{brinnatt,charman}.com \u7684 host \u8bb0\u5f55\u3002\u4f8b\u5982\u5728 windows \u4e0a\uff0c\u5728 C:","\\","Windows","\\","System32","\\","drivers","\\","etc","\\","hosts \u4e2d\u6dfb\u52a0\u5982\u4e0b\u8bb0\u5f55\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"192.168.122.45      www.brinnatt.com    www.charman.com\n")),(0,o.kt)("p",null,"\u5728\u6d4f\u89c8\u5668\u4e2d\u8fdb\u884c\u6d4b\u8bd5\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tomcat web",src:t(24705).Z,width:"802",height:"402"})),(0,o.kt)("h3",{id:"832tomcat-\u4f53\u7cfb\u7ed3\u6784"},"8.3.2\u3001tomcat \u4f53\u7cfb\u7ed3\u6784"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tomcat",src:t(16174).Z,width:"819",height:"642"})),(0,o.kt)("p",null,"tomcat \u9ad8\u5ea6\u6a21\u5757\u5316\uff0c\u5404\u4e2a\u6a21\u5757\u4e4b\u95f4\u6709\u5d4c\u5957\u7684\u7236\u5b50\u5173\u7cfb\u3002\u5982\u679c\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u6765\u63cf\u8ff0\uff0c\u53ef\u4ee5\u5927\u81f4\u7b80\u5316\u4e3a\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<server>\n    <service>\n        <connector PORT />\n        <engine>\n            <host name=www.brinnatt.com appBase=/www/brinnatt >\n                <context path="" docBase=/www/brinnatt />\n                <context path="/yidam" docBase=/www/brinnatt/yidam />\n            </host>\n\n            <host>\n                <context />\n            </host>\n        </engine>\n    </service>\n</server>\n')),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"server")," \u7ec4\u4ef6\u662f\u7ba1\u7406 tomcat \u5b9e\u4f8b\u7684\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u76d1\u542c\u4e00\u4e2a\u7aef\u53e3\uff0c\u4ece\u6b64\u7aef\u53e3\u4e0a\u53ef\u4ee5\u8fdc\u7a0b\u5411\u8be5\u5b9e\u4f8b\u53d1\u9001 shutdown \u5173\u95ed\u547d\u4ee4\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"service")," \u7ec4\u4ef6\u662f\u4e00\u4e2a\u903b\u8f91\u7ec4\u4ef6\uff0c\u7528\u4e8e\u7ed1\u5b9a connector \u548c container\uff0c\u6709\u4e86 service \u8868\u793a\u53ef\u4ee5\u5411\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u5c31\u50cf\u662f\u4e00\u822c\u7684 daemon \u7c7b\u670d\u52a1\u7684 service\u3002\u53ef\u4ee5\u8ba4\u4e3a\u4e00\u4e2a service \u5c31\u542f\u52a8\u4e00\u4e2a JVM\uff0c\u66f4\u4e25\u683c\u5730\u8bf4\uff0c\u4e00\u4e2a engine \u7ec4\u4ef6\u624d\u5bf9\u5e94\u4e00\u4e2a JVM(\u5b9a\u4e49\u8d1f\u8f7d\u5747\u8861\u65f6\uff0cjvmRoute \u5c31\u5b9a\u4e49\u5728 Engine \u7ec4\u4ef6\u4e0a\u7528\u6765\u6807\u8bc6\u8fd9\u4e2a JVM)\uff0c\u53ea\u4e0d\u8fc7 connector \u4e5f\u5de5\u4f5c\u5728 JVM \u4e2d\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"connector")," \u7ec4\u4ef6\u662f",(0,o.kt)("strong",{parentName:"p"},"\u76d1\u542c"),"\u7ec4\u4ef6\uff0c\u5b83\u6709\u56db\u4e2a\u4f5c\u7528\uff1a"),(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"\u5f00\u542f\u76d1\u542c\u5957\u63a5\u5b57\uff0c\u76d1\u542c\u5916\u754c\u8bf7\u6c42\uff0c\u5e76\u548c\u5ba2\u6237\u7aef\u5efa\u7acb TCP \u8fde\u63a5\uff1b"),(0,o.kt)("li",{parentName:"ol"},"\u4f7f\u7528 protocolHandler \u89e3\u6790\u8bf7\u6c42\u4e2d\u7684\u534f\u8bae\u548c\u7aef\u53e3\u7b49\u4fe1\u606f\uff0c\u5982 http \u534f\u8bae\u3001AJP \u534f\u8bae\uff1b"),(0,o.kt)("li",{parentName:"ol"},"\u6839\u636e\u89e3\u6790\u5230\u7684\u4fe1\u606f\uff0c\u4f7f\u7528 processer \u5c06\u5206\u6790\u540e\u7684\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u7ed1\u5b9a\u7684 Engine\uff1b"),(0,o.kt)("li",{parentName:"ol"},"\u63a5\u6536\u54cd\u5e94\u6570\u636e\u5e76\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"container")," \u662f\u5bb9\u5668\uff0c\u5b83\u662f\u4e00\u7c7b\u7ec4\u4ef6\uff0c\u5728\u914d\u7f6e\u6587\u4ef6(\u5982 server.xml) \u4e2d\u6ca1\u6709\u4f53\u73b0\u51fa\u6765\u3002\u5b83\u5305\u542b 4 \u4e2a\u5bb9\u5668\u7c7b\u7ec4\u4ef6\uff1aengine \u5bb9\u5668\u3001host \u5bb9\u5668\u3001context \u5bb9\u5668\u548c wrapper \u5bb9\u5668\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"engine")," \u5bb9\u5668\u7528\u4e8e\u4ece connector \u7ec4\u4ef6\u5904\u63a5\u6536\u5df2\u5efa\u7acb\u7684 TCP \u8fde\u63a5\uff0c\u8fd8\u7528\u4e8e\u63a5\u6536\u5ba2\u6237\u7aef\u53d1\u9001\u7684 http \u8bf7\u6c42\u5e76\u5206\u6790\u8bf7\u6c42\uff0c\u7136\u540e\u6309\u7167\u5206\u6790\u7684\u7ed3\u679c\u5c06\u76f8\u5173\u53c2\u6570\u4f20\u9012\u7ed9\u5339\u914d\u51fa\u7684\u865a\u62df\u4e3b\u673a\u3002engine \u8fd8\u7528\u4e8e\u6307\u5b9a\u9ed8\u8ba4\u7684\u865a\u62df\u4e3b\u673a\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"host")," \u5bb9\u5668\u5b9a\u4e49\u865a\u62df\u4e3b\u673a\uff0c\u7531\u4e8e tomcat \u4e3b\u8981\u662f\u4f5c\u4e3a servlet \u5bb9\u5668\u7684\uff0c\u6240\u4ee5\u4e3a\u6bcf\u4e2a webapp \u6307\u5b9a\u4e86\u5b83\u4eec\u7684\u6839\u76ee\u5f55 appBase\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"context")," \u5bb9\u5668\u4e3b\u8981\u662f\u6839\u636e path \u548c docBase \u83b7\u53d6\u4e00\u4e9b\u4fe1\u606f\uff0c\u5c06\u7ed3\u679c\u4ea4\u7ed9\u5176\u5185\u7684 wrapper \u7ec4\u4ef6\u8fdb\u884c\u5904\u7406(\u5b83\u63d0\u4f9b wrapper \u8fd0\u884c\u7684\u73af\u5883\uff0c\u6240\u4ee5\u5b83\u53eb\u4e0a\u4e0b\u6587 context)\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u90fd\u91c7\u7528\u9ed8\u8ba4\u7684\u6807\u51c6 wrapper \u7c7b\uff0c\u56e0\u6b64\u5728 context \u5bb9\u5668\u4e2d\u51e0\u4e4e\u4e0d\u4f1a\u51fa\u73b0 wrapper \u7ec4\u4ef6\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"wrapper")," \u5bb9\u5668\u5bf9\u5e94 servlet \u7684\u5904\u7406\u8fc7\u7a0b\u3002\u5b83\u5f00\u542f servlet \u7684\u751f\u547d\u5468\u671f\uff0c\u6839\u636e context \u7ed9\u51fa\u7684\u4fe1\u606f\u4ee5\u53ca\u89e3\u6790 web.xml \u4e2d\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u8d1f\u8d23\u88c5\u8f7d\u76f8\u5173\u7684\u7c7b\uff0c\u521d\u59cb\u5316 servlet \u5bf9\u8c61 init()\u3001\u6267\u884c servlet \u4ee3\u7801 service() \u4ee5\u53ca\u670d\u52a1\u7ed3\u675f\u65f6 servlet \u5bf9\u8c61\u7684\u9500\u6bc1 destory()\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"executor")," \u7ec4\u4ef6\u4e3a\u6bcf\u4e2a Service \u7ec4\u4ef6\u63d0\u4f9b\u7ebf\u7a0b\u6c60\uff0c\u4f7f\u5f97\u5404\u4e2a connector \u548c Engine \u53ef\u4ee5\u4ece\u7ebf\u7a0b\u6c60\u4e2d\u83b7\u53d6\u7ebf\u7a0b\u5904\u7406\u8bf7\u6c42\uff0c\u4ece\u800c\u5b9e\u73b0 tomcat \u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\u3002"),(0,o.kt)("p",{parentName:"li"},"\u4e00\u5b9a\u8981\u6ce8\u610f\uff0cExecutor \u7684\u7ebf\u7a0b\u6c60\u5927\u5c0f\u662f\u4e3a Engine \u7ec4\u4ef6\u8bbe\u7f6e\uff0c\u800c\u4e0d\u662f\u4e3a Connector \u8bbe\u7f6e\u7684\uff0cConnector \u7684\u7ebf\u7a0b\u6570\u91cf\u7531 Connector \u7ec4\u4ef6\u7684 acceptorThreadCount \u5c5e\u6027\u6765\u8bbe\u7f6e\u3002"),(0,o.kt)("p",{parentName:"li"},"\u5982\u679c\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u8be5\u7ec4\u4ef6\uff0c\u5219\u5fc5\u987b\u8bbe\u7f6e\u5728 Connector \u7ec4\u4ef6\u7684\u524d\u9762\uff0c\u4ee5\u4fbf\u5728 Connector \u7ec4\u4ef6\u4e2d\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"executor")," \u5c5e\u6027\u6765\u5f15\u7528\u914d\u7f6e\u597d\u7684 Executor \u7ec4\u4ef6\u3002\u5982\u679c\u4e0d\u663e\u5f0f\u8bbe\u7f6e\uff0c\u5219\u91c7\u7528 Connector \u7ec4\u4ef6\u4e0a\u7684\u9ed8\u8ba4\u914d\u7f6e\uff0c\u9ed8\u8ba4\u914d\u7f6e\u5982\u4e0b\uff1a"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"maxThreads\uff1a\u6700\u5927\u7ebf\u7a0b\u6570\uff0c\u9ed8\u8ba4\u503c 200\u3002"),(0,o.kt)("li",{parentName:"ul"},"minSpareThreads\uff1a\u6700\u5c0f\u7a7a\u95f2\u7ebf\u7a0b\u6570\uff0c\u9ed8\u8ba4\u503c 25\u3002"),(0,o.kt)("li",{parentName:"ul"},"maxIdleTime\uff1a\u7a7a\u95f2\u7ebf\u7a0b\u7684\u7ebf\u7a0b\u7a7a\u95f2\u591a\u957f\u65f6\u95f4\u624d\u4f1a\u9500\u6bc1\uff0c\u9ed8\u8ba4\u503c 60000 \u5373 1 \u5206\u949f\u3002"),(0,o.kt)("li",{parentName:"ul"},"prestartminSpareThreads\uff1a\u662f\u5426\u542f\u52a8 executor \u65f6\u5c31\u76f4\u63a5\u521b\u5efa\u7b49\u4e8e\u6700\u5c0f\u7a7a\u95f2\u7ebf\u7a0b\u6570\u7684\u7ebf\u7a0b\uff0c\u9ed8\u8ba4\u503c\u4e3a false\uff0c\u5373\u53ea\u5728\u6709\u8fde\u63a5\u8bf7\u6c42\u8fdb\u5165\u65f6\u624d\u4f1a\u521b\u5efa\u3002")))),(0,o.kt)("p",null,"\u6839\u636e\u4e0a\u9762\u63cf\u8ff0\u7684 tomcat \u7ec4\u4ef6\u4f53\u7cfb\u7ed3\u6784\uff0c\u5904\u7406\u8bf7\u6c42\u7684\u5927\u81f4\u8fc7\u7a0b\u5176\u5b9e\u5f88\u5bb9\u6613\u63a8\u5bfc\u51fa\u6765\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Client(request) --\x3e Connector --\x3e Engine --\x3e Host --\x3e Context --\x3e Wrapper(response data) --\x3e Connector(response header) --\x3e Client\n")),(0,o.kt)("p",null,"tomcat \u4f5c\u4e3a\u7b80\u5355\u7684 web \u670d\u52a1\u7a0b\u5e8f\u5927\u81f4\u5982\u6b64\uff0c\u4f46\u5b83\u7684\u6838\u5fc3\u6bd5\u7adf\u662f\u5904\u7406 servlet \u548c jsp\uff0c\u5b83\u5fc5\u987b\u5f97\u7ba1\u7406\u597d\u6bcf\u4e2a webapp\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e tomcat \u6765\u8bf4\uff0c\u5fc5\u987b\u8981\u638c\u63e1\u90e8\u7f72 webapp \u7684\u65b9\u5f0f\u3002\u5728 tomcat \u4e0a\u90e8\u7f72 webapp \u65f6\uff0c\u5fc5\u987b\u8981\u7406\u89e3 context \u7684\u6982\u5ff5\u3002"),(0,o.kt)("p",null,"\u5bf9\u4e8e tomcat \u800c\u8a00\uff0c",(0,o.kt)("strong",{parentName:"p"},"\u6bcf\u4e2a context \u90fd\u5e94\u8be5\u7b97\u662f\u4e00\u4e2a webapp\uff0c\u5176\u8def\u5f84\u7531 docBase \u51b3\u5b9a\uff0c\u8be5\u76ee\u5f55\u5b58\u653e\u7684\u662f\u5f52\u6863\u7684 war \u6587\u4ef6\u6216\u672a\u5f52\u6863\u7684 webapp \u76f8\u5173\u6587\u4ef6\uff0c\u800c host \u5bb9\u5668\u4e2d\u7684 appBase \u5219\u662f\u865a\u62df\u4e3b\u673a\u6574\u7406 webapp \u7684\u5730\u65b9\uff0c\u4e00\u4e2a appBase \u4e0b\u53ef\u4ee5\u6709\u591a\u4e2a webapp\uff0c\u5373\u591a\u4e2a context"),"\u3002"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"\u4e3a\u4e86\u4fbf\u4e8e\u7406\u89e3\uff0c\u6211\u4eec\u628a tomcat \u914d\u7f6e\u4e0e nginx \u914d\u7f6e\u5bf9\u6bd4\u8bb0\u5fc6\uff0c\u8fd9\u79cd\u5bf9\u6bd4\u53ea\u662f\u5728\u903b\u8f91\u4e0a\u6709\u76f8\u4f3c\u7684\u601d\u8def\uff0c\u5177\u4f53\u5b9e\u73b0\u4e0a\u6ca1\u6709\u4efb\u4f55\u5173\u8054\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'server {\n    listen PORT;                    # \u5bf9\u5e94\u4e8e connector\n    server_name www.brinnatt.com;   # \u5bf9\u5e94\u4e8e<host name=www.brinnatt.com>\n    location / {                    # \u5bf9\u5e94\u4e8econtext path=""\n            root   html;            # \u5bf9\u5e94\u4e8edocBase\n        }\n    location /yidam {               # \u5bf9\u5e94\u4e8econtext path="/yidam"\n            root   html/yidam;\n        }\n}\n')),(0,o.kt)("h3",{id:"833appbase-\u548c-docbase-\u8be6\u7ec6\u8bf4\u660e"},"8.3.3\u3001appBase \u548c docBase \u8be6\u7ec6\u8bf4\u660e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<host name=www.brinnatt.com appBase=/www/brinnatt >\n    <context path="" docBase=/www/brinnatt />\n    <context path="/yidam" docBase=/www/brinnatt/yidam />\n</host>\n')),(0,o.kt)("p",null,"appBase \u662f\u865a\u62df\u4e3b\u673a\u5b58\u653e webapp \u7684\u76ee\u5f55\uff0c\u5b83\u53ef\u4ee5\u662f\u76f8\u5bf9\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\u3002\u5982\u679c\u662f\u76f8\u5bf9\u8def\u5f84\uff0c\u5219\u76f8\u5bf9\u4e8e ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_HOME"),"\uff0c\u4e25\u683c\u5e76\u51c6\u786e\u5730\u8bf4\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_BASE"),"\u3002"),(0,o.kt)("p",null,"path \u662f URI \u7684\u5339\u914d\u8def\u5f84\uff0c\u76f8\u5f53\u4e8e nginx \u7684 location \u540e\u7684\u8def\u5f84\u3002tomcat \u8981\u6c42\u6bcf\u4e2a\u865a\u62df\u4e3b\u673a",(0,o.kt)("strong",{parentName:"p"},"\u5fc5\u987b\u914d\u7f6e\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u7684 path"),"\uff0c\u8be5\u6761 context \u4f5c\u4e3a URI \u65e0\u6cd5\u88ab\u660e\u786e\u5339\u914d\u65f6\u7684\u9ed8\u8ba4 context\uff0c\u5b83\u76f8\u5f53\u4e8e nginx \u4e2d ",(0,o.kt)("inlineCode",{parentName:"p"},"location / {}")," \u7684\u4f5c\u7528\u3002"),(0,o.kt)("p",null,"docBase \u5219\u662f\u6bcf\u4e2a webapp \u7684\u5b58\u653e\u76ee\u5f55(\u6216\u8005\u662f\u5df2\u5f52\u6863\u7684 war \u6587\u4ef6)\uff0c\u5b83\u53ef\u4ee5\u662f\u76f8\u5bf9\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\uff0c\u63d0\u4f9b\u76f8\u5bf9\u8def\u5f84\u65f6\u5b83\u76f8\u5bf9\u4e8e appBase\u3002\u8be5\u76ee\u5f55\u4e00\u822c\u5728 appBase \u7684\u76ee\u5f55\u4e0b\uff0c\u4f46\u5e76\u4e0d\u89c4\u5b9a\u4e00\u5b9a\u8981\u653e\u5728 appBase \u4e0b\u3002\u5bf9\u4e8e web \u670d\u52a1\u6765\u8bf4\uff0c\u5b83\u76f8\u5f53\u4e8e nginx \u7684 root \u6307\u4ee4\uff0c\u4f46\u5bf9\u4e8e webapp \u6765\u8bf4\uff0c\u4e00\u4e2a context \u5c31\u76f8\u5f53\u4e8e\u4e00\u4e2a webapp\uff0c\u800c docBase \u6b63\u662f webapp \u7684\u8def\u5f84\u3002"),(0,o.kt)("p",null,"\u9ed8\u8ba4\u89c4\u5219\uff0c\u6709\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u660e\u786e\u5b9a\u4e49\u4e86 ",(0,o.kt)("inlineCode",{parentName:"li"},'<context path="" docBase=webappPATH>'),"\uff0c\u6b64\u65f6\u9ed8\u8ba4 context \u7684\u5904\u7406\u8def\u5f84\u4e3a webappPATH\u3002"),(0,o.kt)("li",{parentName:"ol"},"\u660e\u786e\u5b9a\u4e49\u4e86 ",(0,o.kt)("inlineCode",{parentName:"li"},'<context path="">'),"\uff0c\u4f46\u5374\u6ca1\u7ed9\u5b9a docBase \u5c5e\u6027\uff0c\u6b64\u65f6\u8be5\u9ed8\u8ba4 context \u5904\u7406\u8def\u5f84\u4e3a appBase/ROOT \u76ee\u5f55\uff0c\u6ce8\u610f ROOT \u4e3a\u5927\u5199\u3002"),(0,o.kt)("li",{parentName:"ol"},"\u5b8c\u5168\u6ca1\u6709\u5b9a\u4e49 ",(0,o.kt)("inlineCode",{parentName:"li"},'path=""'),' \u7684 context \u65f6\uff0c\u5373 host \u5bb9\u5668\u4e2d\u6ca1\u6709\u660e\u786e\u7684 path=""\uff0c\u6b64\u65f6\u5c06\u9690\u5f0f\u5b9a\u4e49\u4e00\u4e2a\u9ed8\u8ba4 context\uff0c\u5904\u7406\u8def\u5f84\u4e3a appBase/ROOT \u76ee\u5f55\u3002'),(0,o.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u4e86 path \u4f46\u6ca1\u6709\u5b9a\u4e49 docBase \u5c5e\u6027\u65f6\uff0cdocBase \u5c06\u6839\u636e path \u63a8\u65ad\u51fa\u5b83\u7684\u8def\u5f84\u3002\u63a8\u65ad\u7684\u89c4\u5219\u5982\u4e0b\uff1a(\u6ce8\uff1a\u6b64\u65f6\u63a8\u65ad\u7684\u4e0d\u662f\u9ed8\u8ba4 context\uff0c\u800c\u662f\u5bf9\u5e94 context \u7684 docbase)")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"context path    context name    \u63a8\u65ad\u51fa\u7684docBase\u8def\u5f84\n--------------------------------------------------\n/foo            /foo            foo  \n/foo/bar        /foo/bar        foo/bar\nEmpty String    Empty String    ROOT\n")),(0,o.kt)("p",null,'\u663e\u7136\uff0c\u6ca1\u6709\u7ed9\u5b9a path="" \u6216\u7f3a\u5c11 docbase \u65f6\uff0c\u90fd\u4ee5 ROOT \u4f5c\u4e3a\u76ee\u5f55\u3002\u4ee5\u4e0b\u662f\u51e0\u4e2a\u5b9a\u4e49\u793a\u4f8b\uff1a'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'# \u865a\u62df\u4e3b\u673a\u4e2d\u6ca1\u6709\u5b9a\u4e49\u4efb\u4f55context\uff0c\u5c06\u4ee5appBase\u4e0b\u7684ROOT\u4f5c\u4e3a\u9ed8\u8ba4\u5904\u7406\u8def\u5f84\n<Host appBase="webapps">\n</Host>\n\n# \u6ca1\u6709\u5b9a\u4e49path=""\u7684context\uff0c\u4f46\u5b9a\u4e49\u4e86path\u975e\u7a7a\u7684context\uff0c\u4e5f\u5c06\u4ee5ROOT\u4f5c\u4e3a\u9ed8\u8ba4\u5904\u7406\u8def\u5f84\n# \u5982\u679c\u4e0b\u9762\u7684Context\u5bb9\u5668\u4e2d\u7701\u7565docBase\u5c5e\u6027\uff0c\u5219\u63a8\u65ad\u51fa\u8be5context\u7684docBase\u8def\u5f84\u4e3aappBase/yidam\n<Host appBase="webapps">\n    <Context path="/yidam" docBase="webappPATH" />\n</Host>\n\n# \u67d0\u4e2acontext\u5b9a\u4e49\u4e86path=""\uff0c\u8be5context\u5c06\u4f5c\u4e3a\u9ed8\u8ba4context\n# \u4f46\u8be5\u9ed8\u8ba4context\u5982\u679c\u6ca1\u6709\u5b9a\u4e49docBase\uff0c\u5c06\u63a8\u65ad\u51fa\u5176docBase\u8def\u5f84\u4e3aappBase/ROOT\n<Host appBase="webapps">\n    <Context path="" docBase="webappPATH" />\n</Host>\n\n# \u67d0\u4e2acontext\u5b9a\u4e49\u4e86path=""\uff0c\u8be5context\u5c06\u4f5c\u4e3a\u9ed8\u8ba4context\n# \u4e0b\u9762\u7684\u9ed8\u8ba4context\u660e\u786e\u5b9a\u4e49\u4e86docBase\n<Host appBase="webapps">\n    <Context path="" docBase="webappPATH" />\n</Host>\n')),(0,o.kt)("p",null,"\u4e3e\u4e2a\u76f4\u89c2\u7684\u4f8b\u5b50\uff0c\u5982\u679c\u67d0\u4e2a Host \u914d\u7f6e\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Host name="www.charman.com" appBase="/www/charman" unpackWARs="true" autoDeploy="true">\n    <Context path="/yidam" docBase="yidam" reloadable="true" />\n</Host>\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u90a3\u4e48\u6d4f\u89c8\u5668\u8bbf\u95ee ",(0,o.kt)("inlineCode",{parentName:"li"},"http://www.charman.com:8080/yidam/")," \u5c06\u8bf7\u6c42 ",(0,o.kt)("inlineCode",{parentName:"li"},"/www/charman/yidam/index.jsp"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},'\u7531\u4e8e\u6ca1\u6709\u5b9a\u4e49 path="" \u7684 Context \u7ec4\u4ef6\uff0c\u56e0\u6b64\u6d4f\u89c8\u5668\u8bbf\u95ee ',(0,o.kt)("inlineCode",{parentName:"li"},"http://www.charman.com:8080")," \u5c06\u8bf7\u6c42 /",(0,o.kt)("inlineCode",{parentName:"li"},"www/charman/ROOT/index.jsp"),"\u3002\u6ce8\u610f\uff0c\u662f ROOT \u76ee\u5f55\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u5982\u679c\u52a0\u4e0a ",(0,o.kt)("inlineCode",{parentName:"li"},'<Context path="" docBase="" reloadable="true" />'),"\uff0c\u5219\u8bbf\u95ee ",(0,o.kt)("inlineCode",{parentName:"li"},"http://www.charman.com:8080")," \u5c06\u8bf7\u6c42 ",(0,o.kt)("inlineCode",{parentName:"li"},"/www/charman/index.jsp"),"\u3002\u6ce8\u610f\uff0c\u4e0d\u662f ROOT \u76ee\u5f55\uff0c\u800c\u662f\u76f8\u5bf9\u4e8e appBase \u7684\u6839\u76ee\u5f55\uff0c\u5373 /www/charman\u3002")),(0,o.kt)("p",null,'\u5c3d\u7ba1\u672c\u6587\u89e3\u91ca\u4e86\u5f88\u591a\u5173\u4e8e appBase \u548c docBase \u7684\u8bbe\u7f6e\uff0c\u4f46\u4e00\u822c\u90fd\u4f1a\u91c7\u7528\u5927\u4f17\u6240\u719f\u77e5\u7684\u914d\u7f6e\u65b9\u5f0f\uff1aappBase \u8bbe\u7f6e\u4e3a "webapps"\uff0c\u5373 ',(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_HOME/webapps"),"\uff0c\u800c docBase \u8bbe\u7f6e\u4e3a webapps \u4e0b\u7684 webapp \u5e94\u7528\u540d\u3002"),(0,o.kt)("p",null,"\u8fd9\u6837\u914d\u7f6e\u4e0d\u4ec5\u7b26\u5408 eclipse \u90e8\u7f72 webapp \u65f6\u9ed8\u8ba4\u7684\u90e8\u7f72\u76ee\u5f55\u7ed3\u6784(eclipse \u90e8\u7f72\u5e94\u7528\u65f6\uff0c\u5c06 WebContent \u4e0b\u7684\u5185\u5bb9\u590d\u5236\u5230 docBase \u4e0b\uff0c\u5c06 servlet java \u6e90\u4ee3\u7801\u7f16\u8bd1\u540e\u7684 class \u6587\u4ef6\u590d\u5236\u5230 WEB-INF/classes \u76ee\u5f55\u4e0b)\uff0c\u66f4\u5229\u4e8e\u7ef4\u62a4 webapp \u548c\u76f8\u5173\u914d\u7f6e\u3002\u4f8b\u5982\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Context docBase="MyWeb" path="/MyWeb" reloadable="true" />\n<Context docBase="SecondWeb" path="/SecondWeb" reloadable="true" />\n<Context docBase="WEB" path="/WEB" reloadable="true" />\n')),(0,o.kt)("p",null,"\u4f46\u8fd9\u6837\u7684\u914d\u7f6e\u6709\u4e2a\u7f3a\u70b9\uff0c\u56e0\u4e3a\u9879\u76ee\u540d\u79f0\u4e00\u822c\u90fd\u4f1a\u5e26\u6709\u5927\u5199\u5b57\u6bcd\uff0c\u4f7f\u5f97\u5728\u6d4f\u89c8\u5668\u8bbf\u95ee\u65f6\uff0c\u4e5f\u8981\u5e26\u6709\u5927\u5199\u5b57\u6bcd\u3002\u4f8b\u5982\u8f93\u5165 ",(0,o.kt)("inlineCode",{parentName:"p"},"http://www.charman.com/MyWeb/index.jsp"),"\u3002\u56e0\u6b64\uff0c\u53ef\u91c7\u7528\u53e6\u4e00\u79cd\u914d\u7f6e\u65b9\u5f0f\uff1a\u8bbe\u7f6e Host \u7684 appBase \u4e3a webapps \u4e0b\u7684\u67d0\u4e2a\u76ee\u5f55\uff0c\u7136\u540e\u5728 path \u4e0a\u914d\u7f6e uri \u5339\u914d\u8def\u5f84\u3002\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Host name="www.charman.com" appBase="webapps/MyWeb" unpackWARs="true" autoDeploy="true">\n    <Context path="/yidam" docBase="yidam" reloadable="true" />\n    <Context path="" docBase="" reloadable="true" />\n</Host>\n')),(0,o.kt)("h3",{id:"834webapp-\u76ee\u5f55\u4f53\u7cfb\u7ed3\u6784"},"8.3.4\u3001webapp \u76ee\u5f55\u4f53\u7cfb\u7ed3\u6784"),(0,o.kt)("p",null,"webapp \u6709\u7279\u5b9a\u7684\u7ec4\u7ec7\u683c\u5f0f\uff0c\u662f\u4e00\u79cd\u5c42\u6b21\u578b\u76ee\u5f55\u7ed3\u6784\uff0c\u901a\u5e38\u5305\u542b\u4e86 servlet \u4ee3\u7801\u6587\u4ef6\u3001jsp \u9875\u9762\u6587\u4ef6\u3001\u7c7b\u6587\u4ef6\u3001\u90e8\u7f72\u63cf\u8ff0\u7b26\u6587\u4ef6\u7b49\u7b49\u3002"),(0,o.kt)("p",null,"\u8fd9\u4e9b\u6587\u4ef6\u53ef\u80fd\u662f\u4ee5\u76ee\u5f55\u7684\u5f62\u5f0f\u5b58\u653e\uff0c\u4e5f\u53ef\u80fd\u4f1a\u6253\u5305\u6210\u5404\u79cd\u5f52\u6863\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u5982 jar\u3001war \u7b49\u3002\u4f46 jsp \u6709\u89c4\u5b9a\uff0c\u5728 web \u5e94\u7528\u7a0b\u5e8f\u7684\u6839\u76ee\u5f55\u4e0b\uff0c\u4e00\u822c\u8981\u6709\u4e0b\u9762\u51e0\u4e2a\u76ee\u5f55\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"/WEB-INF\uff1a\u6b64 webapp \u7684\u79c1\u6709\u8d44\u6e90\u76ee\u5f55\uff0c\u4ece\u6d4f\u89c8\u5668\u4e0a\u662f\u65e0\u6cd5\u8bbf\u95ee\u6b64\u76ee\u5f55\u8d44\u6e90\u7684\uff0c\u901a\u5e38 web.xml \u653e\u7f6e\u4e8e\u6b64\u76ee\u5f55\u3002"),(0,o.kt)("li",{parentName:"ul"},"/WEB-INF/classes\uff1a\u6b64 webapp \u81ea\u6709\u7684\u7c7b\u3002"),(0,o.kt)("li",{parentName:"ul"},"/WEB-INF/lib\uff1a\u6b64 webapp \u81ea\u6709\u80fd\u591f\u6253\u5305\u4e3a jar \u683c\u5f0f\u7684\u7c7b\u3002"),(0,o.kt)("li",{parentName:"ul"},"/META-INF\uff1a\u5e76\u975e\u6807\u51c6\u7684 webapp \u76ee\u5f55\uff0c\u6709\u7684\u5e94\u7528\u7a0b\u5e8f\u624d\u6709\u3002\u5f53\u8be5\u5e94\u7528\u7a0b\u5e8f\u60f3\u72ec\u7acb\u5b9a\u4e49\u81ea\u5df1\u7684 context.xml \u65f6\u53ef\u653e\u5165\u6b64\u76ee\u5f55\uff0c\u4e5f\u662f\u79c1\u6709\u76ee\u5f55\u3002")),(0,o.kt)("p",null,"\u6bcf\u4e2a webapp \u8981\u60f3\u88ab tomcat \u52a0\u8f7d\uff0c\u4e00\u79cd\u65b9\u6cd5\u662f\u7a0b\u5e8f\u76ee\u5f55\u653e\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"$catalina.home/webapps")," \u4e0b\uff0c\u53e6\u4e00\u79cd\u65b9\u5f0f\u662f\u914d\u7f6e\u8be5 webapp \u76f8\u5173\u7684 context \u914d\u7f6e\uff0c\u4f7f tomcat \u80fd\u627e\u5230\u6b64 webapp\u3002\u6b63\u5982\u524d\u6587\u6240\u8bf4\uff0cwebapp \u76ee\u5f55\u4e00\u822c\u90fd\u4f1a\u653e\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"$catalina.home/webapps")," \u4e0b\u3002"),(0,o.kt)("p",null,"\u7b80\u5355\u90e8\u7f72\u793a\u4f8b\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u5bf9\u4e8e war \u7c7b\u5f52\u6863\u7a0b\u5e8f\uff1a\u5c06\u5f52\u6863\u6587\u4ef6\u590d\u5236\u5230 ",(0,o.kt)("inlineCode",{parentName:"li"},"$CATALINA_BASE/webapps/")," \u76ee\u5f55\u4e2d\uff0c\u5e76\u91cd\u542f tomcat \u5373\u53ef\uff0ctomcat \u4f1a\u81ea\u52a8\u5c55\u5f00 war \u5f52\u6863\u3002\u4f8b\u5982\u5b98\u65b9\u63d0\u4f9b\u4e86\u4e00\u4e2a sample.war \u4f5c\u4e3a tomcat \u5b66\u4e60\u521d\u7ea7\u793a\u4f8b( ",(0,o.kt)("a",{parentName:"li",href:"https://tomcat.apache.org/tomcat-8.5-doc/appdev/sample/sample.war"},"https://tomcat.apache.org/tomcat-8.5-doc/appdev/sample/sample.war")," )\uff0c\u4e0b\u8f7d\u540e\u53ea\u9700\u5c06\u5176\u653e\u5165 webapps \u4e0b\u5373\u53ef\u3002"),(0,o.kt)("li",{parentName:"ol"},"\u5728\u6d4b\u8bd5 tomcat \u7684\u8fc7\u7a0b\u4e2d\uff0c\u5f88\u591a\u65f6\u5019\u662f\u672a\u5f52\u6863\u7a0b\u5e8f\uff0c\u8fd9\u65f6\u53ef\u4ee5\u624b\u52a8\u521b\u5efa\u76ee\u5f55\u6765\u5b9e\u73b0\u90e8\u7f72\u3002\u9700\u8981\u521b\u5efa\u7684\u76ee\u5f55\u6709 webapps/yourapp\uff0c\u6b64\u76ee\u5f55\u4e0b\u8fd8\u8981\u521b\u5efa WEB-INF \u76ee\u5f55\uff0c\u5728 WEB-INF \u76ee\u5f55\u4e2d\u8fd8\u8981\u521b\u5efa classes \u548c lib \u76ee\u5f55\u3002\u7136\u540e\u5c06 jsp \u6587\u4ef6\u653e\u5728\u5bf9\u5e94\u76ee\u5f55\u4e0b\u5373\u53ef\uff0c\u5982\u5199\u4e00\u4e2a\u6d4b\u8bd5\u7684 index.jsp \u653e\u5728 yourapp \u76ee\u5f55\u4e0b\u3002\u800c\u5bf9\u4e8e\u5df2\u7ecf\u5f00\u53d1\u5b8c\u6bd5\u7684 webapp\uff0c\u56e0\u4e3a eclipse \u5728\u53d1\u5e03\u6d4b\u8bd5 webapp \u65f6\u5df2\u7ecf\u8bbe\u7f6e\u597d\u76ee\u5f55\uff0c\u56e0\u6b64\u53ea\u8981\u5c06 webapp \u7684\u76ee\u5f55\u590d\u5236\u5230 webapps \u76ee\u5f55\u4e0b\u5373\u53ef\u3002")),(0,o.kt)("h3",{id:"835serverxml-\u8be6\u89e3"},"8.3.5\u3001server.xml \u8be6\u89e3"),(0,o.kt)("p",null,"tomcat \u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684\u662f\u5404\u4e2a\u7ec4\u4ef6\u7684\u5c5e\u6027\uff0c",(0,o.kt)("strong",{parentName:"p"},"\u5168\u5c40"),"\u914d\u7f6e\u6587\u4ef6\u4e3a ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_HOME/conf/server.xml"),"\uff0c\u4e3b\u8981\u7684\u7ec4\u4ef6\u6709\u4ee5\u4e0b\u51e0\u9879\uff1aServer,Service,Connector,Engine,Host,Alias,Context,Valve \u7b49\u3002"),(0,o.kt)("p",null,"\u914d\u7f6e\u5b8c\u914d\u7f6e\u6587\u4ef6\u540e\u9700\u8981\u91cd\u542f tomcat\uff0c\u4f46\u5728\u542f\u52a8\u540e\u4e00\u5b9a\u8981\u68c0\u67e5 tomcat \u662f\u5426\u542f\u52a8\u6210\u529f\uff0c\u56e0\u4e3a\u5373\u4f7f\u51fa\u9519\uff0c\u5f88\u591a\u65f6\u5019\u5b83\u90fd\u4e0d\u4f1a\u62a5\u9519\uff0c\u53ef\u4ece\u76d1\u542c\u7aef\u53e3\u5224\u65ad\u3002\u914d\u7f6e\u65b9\u6cd5\u89c1 ",(0,o.kt)("a",{parentName:"p",href:"http://tomcat.apache.org/tomcat-8.5-doc/config/index.html"},"\u5b98\u65b9\u624b\u518c"),"\uff0c\u5728\u9875\u9762\u7684\u5de6\u8fb9\u6709\u5404\u4e2a\u7ec4\u4ef6\u7684\u94fe\u63a5\u3002"),(0,o.kt)("p",null,"tomcat \u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u662f xml \u6587\u4ef6\uff0c\u4ee5\u4e0b\u662f xml \u6587\u4ef6\u7684\u5e38\u89c1\u89c4\u5219\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u6587\u4ef6\u7b2c\u4e00\u884c\u8bbe\u7f6e xml \u6807\u8bc6\uff0c\u8868\u793a\u8be5\u6587\u4ef6\u662f xml \u683c\u5f0f\u7684\u6587\u4ef6\u3002\u4f8b\u5982 ",(0,o.kt)("inlineCode",{parentName:"li"},'<?xml version="1.0" encoding="UTF-8"?>'),"\u3002"),(0,o.kt)("li",{parentName:"ol"},"xml \u6587\u4ef6\u7684\u6ce8\u91ca\u65b9\u6cd5\u4e3a ",(0,o.kt)("inlineCode",{parentName:"li"},"\x3c!-- XXX --\x3e"),"\uff0c\u8fd9\u53ef\u4ee5\u662f\u5355\u884c\u6ce8\u91ca\uff0c\u4e5f\u53ef\u4ee5\u591a\u884c\u6ce8\u91ca\uff0c\u53ea\u8981\u524d\u540e\u6ce8\u91ca\u7b26\u53f7\u80fd\u5bf9\u5e94\u4e0a\uff0c\u4e2d\u95f4\u7684\u5185\u5bb9\u90fd\u662f\u6ce8\u91ca\u3002"),(0,o.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u5c5e\u6027\u65f6\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u5355\u884c\u5b9a\u4e49\u548c\u591a\u884c\u5b9a\u4e49\u3002\u4f8b\u5982\uff1a")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"\x3c!-- \u5355\u884c\u5b9a\u4e49\u7684\u65b9\u5f0f --\x3e\n<NAME key=value />\n\n\x3c!-- \u591a\u884c\u5b9a\u4e49\u7684\u65b9\u5f0f --\x3e\n<NAME key=value>\n</NAME>\n")),(0,o.kt)("p",null,"\u4e0b\u9762\u5404\u7ec4\u4ef6\u7684\u914d\u7f6e\u4e2d\u6709\u4e9b\u5730\u65b9\u4f7f\u7528\u4e86\u76f8\u5bf9\u4e8e ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_BASE")," \u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u5b83\u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_HOME")," \u5c0f\u6709\u533a\u522b\u3002\u5982\u679c\u53ea\u6709\u4e00\u4e2a tomcat \u5b9e\u4f8b\uff0c\u5219\u5b83\u4eec\u662f\u7b49\u4ef7\u7684\uff0c\u90fd\u662f tomcat \u7684\u5b89\u88c5\u8def\u5f84\u3002\u5982\u679c\u6709\u591a\u4e2a tomcat \u5b9e\u4f8b\uff0c\u5219 ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_HOME")," \u8868\u793a\u7684\u662f\u5b89\u88c5\u8def\u5f84\uff0c\u800c ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_BASE")," \u8868\u793a\u7684\u662f\u5404\u5b9e\u4f8b\u6240\u5728\u6839\u76ee\u5f55\u3002\u5173\u4e8e tomcat \u591a\u5b9e\u4f8b\uff0c\u89c1 ",(0,o.kt)("a",{parentName:"p",href:"http://tomcat.apache.org/tomcat-8.5-doc/RUNNING.txt"},"running.txt")," \u4e2d\u5bf9\u5e94\u7684\u8bf4\u660e\u3002"),(0,o.kt)("h4",{id:"8351\u9876\u7ea7\u5143\u7d20-server"},"8.3.5.1\u3001\u9876\u7ea7\u5143\u7d20 server"),(0,o.kt)("p",null,"server \u7ec4\u4ef6\u5b9a\u4e49\u7684\u662f\u4e00\u4e2a tomcat \u5b9e\u4f8b\u3002\u9ed8\u8ba4\u5b9a\u4e49\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Server port="8005" shutdown="SHUTDOWN">\n</Server>\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5b83\u9ed8\u8ba4\u76d1\u542c\u5728 8005 \u7aef\u53e3\u4ee5\u63a5\u6536 shutdown \u547d\u4ee4\u3002\u8981\u542f\u7528\u591a\u4e2a tomcat \u5b9e\u4f8b\uff0c\u5c06\u5b83\u4eec\u76d1\u542c\u5728\u4e0d\u540c\u7684\u7aef\u53e3\u5373\u53ef\u3002\u8fd9\u4e2a\u7aef\u53e3\u7684\u5b9a\u4e49\u4e3a\u7ba1\u7406\u5458\u63d0\u4f9b\u4e00\u4e2a\u5173\u95ed\u5b9e\u4f8b\u7684\u4fbf\u6377\u9014\u5f84\uff0c\u53ef\u4ee5\u76f4\u63a5 telnet \u81f3\u6b64\u7aef\u53e3\u4f7f\u7528 SHUTDOWN \u547d\u4ee4\u5173\u95ed\u6b64\u5b9e\u4f8b\u3002\u4e0d\u8fc7\u57fa\u4e8e\u5b89\u5168\u89d2\u5ea6\u7684\u8003\u8651\uff0c\u901a\u5e38\u4e0d\u5141\u8bb8\u8fdc\u7a0b\u8fdb\u884c\u3002"),(0,o.kt)("li",{parentName:"ul"},"Server \u7684\u76f8\u5173\u5c5e\u6027\uff1a",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"className"),"\uff1a\u7528\u4e8e\u5b9e\u73b0\u6b64\u7ec4\u4ef6\u7684 java \u7c7b\u7684\u540d\u79f0\uff0c\u8fd9\u4e2a\u7c7b\u5fc5\u987b\u5b9e\u73b0\u63a5\u53e3 org.apache.catalina.Server\u3002\u4e0d\u7ed9\u5b9a\u8be5\u5c5e\u6027\u65f6\u5c06\u91c7\u7528\u9ed8\u8ba4\u7684\u6807\u51c6\u7c7b org.apache.catalina.core.StandardServer\uff1b"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"address"),"\uff1a\u76d1\u542c\u7aef\u53e3\u7ed1\u5b9a\u7684\u5730\u5740\u3002\u5982\u4e0d\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u4e3a Localhost\uff0c\u5373\u53ea\u80fd\u5728 localhost \u4e0a\u53d1\u9001 SHUTDOWN \u547d\u4ee4\uff1b"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"port"),"\uff1a\u63a5\u6536 shutdown \u6307\u4ee4\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4ec5\u5141\u8bb8\u901a\u8fc7\u672c\u673a\u8bbf\u95ee\uff0c\u9ed8\u8ba4\u4e3a 8005\uff1b"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"shutdown"),"\uff1a\u901a\u8fc7 TCP/IP \u8fde\u63a5\u53d1\u5f80\u6b64 Server \u7528\u4e8e\u5b9e\u73b0\u5173\u95ed tomcat \u5b9e\u4f8b\u7684\u547d\u4ee4\u5b57\u7b26\u4e32\u3002"))),(0,o.kt)("li",{parentName:"ul"},"\u5728 server \u7ec4\u4ef6\u4e2d\u53ef\u5d4c\u5957\u4e00\u4e2a\u6216\u591a\u4e2a service \u7ec4\u4ef6\u3002")),(0,o.kt)("h4",{id:"8352\u9876\u7ea7\u5143\u7d20-service"},"8.3.5.2\u3001\u9876\u7ea7\u5143\u7d20 service"),(0,o.kt)("p",null,"\u5b9a\u4e49\u4e86 service \u5c31\u80fd\u63d0\u4f9b\u670d\u52a1\u4e86\u3002service \u7ec4\u4ef6\u4e2d\u5c01\u88c5 connector \u548c container\uff0c\u5b83\u540c\u65f6\u4e5f\u8868\u793a\u5c06\u6b64 service \u4e2d\u7684 connector \u548c container \u7ed1\u5b9a\u8d77\u6765\uff0c\u5373\u7531\u5b83\u4eec\u7ec4\u6210\u4e00\u4e2a service \u5411\u5916\u63d0\u4f9b\u670d\u52a1\u3002\u9ed8\u8ba4\u5b9a\u4e49\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Service name="Catalina">\n</Service>\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Service \u76f8\u5173\u7684\u5c5e\u6027\uff1a",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"className"),"\uff1a\u7528\u4e8e\u5b9e\u73b0 service \u7684\u7c7b\u540d\uff0c\u8fd9\u4e2a\u7c7b\u5fc5\u987b\u5b9e\u73b0 org.apache.catalina.Service \u63a5\u53e3\u3002\u4e0d\u7ed9\u5b9a\u8be5\u5c5e\u6027\u65f6\u5c06\u91c7\u7528\u9ed8\u8ba4\u7684\u6807\u51c6\u7c7b org.apache.catalina.core.StandardService\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name"),"\uff1a\u6b64 service \u7684\u663e\u793a\u540d\u79f0\uff0c\u8be5\u540d\u79f0\u4e3b\u8981\u7528\u4e8e\u5728\u65e5\u5fd7\u4e2d\u8fdb\u884c\u6807\u8bc6 service\u3002\u4e00\u822c\u6765\u8bf4\u65e0\u5173\u7d27\u8981\uff0c\u9ed8\u8ba4\u4e3a Catalina\u3002")))),(0,o.kt)("h4",{id:"8353\u6267\u884c\u5668-executor"},"8.3.5.3\u3001\u6267\u884c\u5668 executor"),(0,o.kt)("p",null,"\u6267\u884c\u5668\u5b9a\u4e49 tomcat \u5404\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u7684\u7ebf\u7a0b\u6c60\u3002\u5728\u4ee5\u524d\uff0c\u6bcf\u4e2a connector \u90fd\u4f1a\u72ec\u81ea\u521b\u5efa\u81ea\u5df1\u7684\u7ebf\u7a0b\u6c60\uff0c\u4f46\u73b0\u5728\uff0c\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u7ebf\u7a0b\u6c60\uff0c\u5404\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u5171\u4eab\u8be5\u7ebf\u7a0b\u6c60\uff0c\u4e0d\u8fc7\u4e3b\u8981\u662f\u4e3a\u5404 connector \u4e4b\u95f4\u63d0\u4f9b\u5171\u4eab\u3002"),(0,o.kt)("p",null,"\u6ce8\u610f\uff0c",(0,o.kt)("strong",{parentName:"p"},"executor \u521b\u5efa\u7684\u662f\u5171\u4eab\u7ebf\u7a0b\u6c60\uff0c\u5982\u679c\u67d0\u4e2a connector \u4e0d\u5f15\u7528 executor \u521b\u5efa\u7684\u7ebf\u7a0b\u6c60\uff0c\u90a3\u4e48\u8be5 connector \u4ecd\u4f1a\u6839\u636e\u81ea\u5df1\u6307\u5b9a\u7684\u5c5e\u6027\u521b\u5efa\u5b83\u4eec\u81ea\u5df1\u7684\u7ebf\u7a0b\u6c60"),"\u3002"),(0,o.kt)("p",null,"\u8fde\u63a5\u5668\u5fc5\u987b\u8981\u5b9e\u73b0 org.apache.catalina.Executor \u63a5\u53e3\u3002\u5b83\u662f\u4e00\u4e2a\u5d4c\u5957\u5728 service \u7ec4\u4ef6\u4e2d\u7684\u5143\u7d20\uff0c\u4e3a\u4e86\u6311\u9009\u6240\u4f7f\u7528\u7684 connector\uff0c\u8be5\u5143\u7d20\u8fd8\u5fc5\u987b\u5b9a\u4e49\u5728 connector \u5143\u7d20\u4e4b\u524d\u3002"),(0,o.kt)("p",null,"\u9ed8\u8ba4\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Executor name="tomcatThreadPool" namePrefix="catalina-exec-"\n    maxThreads="150" minSpareThreads="4"/>\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5176\u4e2d\u8be5\u7ec4\u4ef6\u7684\u5c5e\u6027\u6709\uff1a",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"className"),"\uff1a\u7528\u4e8e\u5b9e\u73b0\u6b64\u7ec4\u4ef6\u7684 java \u7c7b\u7684\u540d\u79f0\uff0c\u8fd9\u4e2a\u7c7b\u5fc5\u987b\u5b9e\u73b0\u63a5\u53e3 org.apache.catalina.Executor\u3002\u4e0d\u7ed9\u5b9a\u8be5\u5c5e\u6027\u65f6\u5c06\u91c7\u7528\u9ed8\u8ba4\u7684\u6807\u51c6\u7c7b org.apache.catalina.core.StandardThreadExecutor\uff1b"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name"),"\uff1a\u8be5\u7ebf\u7a0b\u6c60\u7684\u540d\u79f0\uff0c\u5176\u4ed6\u7ec4\u4ef6\u9700\u8981\u4f7f\u7528\u8be5\u540d\u79f0\u5f15\u7528\u8be5\u7ebf\u7a0b\u6c60\u3002"))),(0,o.kt)("li",{parentName:"ul"},"\u6807\u51c6\u7c7b\u7684\u5c5e\u6027\u5305\u62ec\uff1a",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"threadPriority"),"\uff1a\u7ebf\u7a0b\u4f18\u5148\u7ea7\uff0c\u9ed8\u8ba4\u503c\u4e3a 5\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"daemon"),"\uff1a\u7ebf\u7a0b\u662f\u5426\u4ee5 daemon \u7684\u65b9\u5f0f\u8fd0\u884c\uff0c\u9ed8\u8ba4\u503c\u4e3a true\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"namePrefix"),"\uff1a\u6267\u884c\u5668\u521b\u5efa\u6bcf\u4e2a\u7ebf\u7a0b\u65f6\u7684\u540d\u79f0\u524d\u7f00\uff0c\u6700\u7ec8\u7ebf\u7a0b\u7684\u540d\u79f0\u4e3a namePrefix+threadNumber\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"maxThreads"),"\uff1a\u7ebf\u7a0b\u6c60\u6fc0\u6d3b\u7684\u6700\u5927\u7ebf\u7a0b\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 200\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"minSpareThreads"),"\uff1a\u7ebf\u7a0b\u6c60\u4e2d\u6700\u5c11\u7a7a\u95f2\u7684\u7ebf\u7a0b\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 25\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"maxIdleTime"),"\uff1a\u5728\u7a7a\u95f2\u7ebf\u7a0b\u5173\u95ed\u524d\u7684\u6beb\u79d2\u6570\u3002\u9664\u975e\u6fc0\u6d3b\u7684\u7ebf\u7a0b\u6570\u91cf\u5c0f\u4e8e\u6216\u7b49\u4e8e minSpareThreads \u7684\u503c\uff0c\u5426\u5219\u4f1a\u6709\u7a7a\u95f2\u7ebf\u7a0b\u7684\u51fa\u73b0\u3002\u9ed8\u8ba4\u503c\u4e3a 60000\uff0c\u5373\u7a7a\u95f2\u7ebf\u7a0b\u9700\u8981\u4fdd\u7559 1 \u5206\u949f\u7684\u7a7a\u95f2\u65f6\u95f4\u624d\u88ab\u6740\u6389\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"maxQueueSize"),"\uff1a\u53ef\u6267\u884c\u4efb\u52a1\u7684\u6700\u5927\u961f\u5217\u6570\uff0c\u8fbe\u5230\u961f\u5217\u4e0a\u9650\u65f6\u7684\u8fde\u63a5\u8bf7\u6c42\u5c06\u88ab\u62d2\u7edd\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"prestartminSpareThreads"),"\uff1a\u5728\u542f\u52a8 executor \u65f6\u662f\u5426\u7acb\u5373\u521b\u5efa minSpareThreads \u4e2a\u7ebf\u7a0b\u6570\uff0c\u9ed8\u8ba4\u4e3a false\uff0c\u5373\u5728\u9700\u8981\u65f6\u624d\u521b\u5efa\u7ebf\u7a0b\u3002")))),(0,o.kt)("p",null,"\u4f8b\u5982\u5728 connector \u4e2d\u6307\u5b9a\u6240\u4f7f\u7528\u7684\u7ebf\u7a0b\u6c60\uff0c\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Connector executor="tomcatThreadPool"\n           port="8080" protocol="HTTP/1.1"\n           connectionTimeout="20000"\n           redirectPort="8443" />\n')),(0,o.kt)("h4",{id:"8354\u8fde\u63a5\u5668-connector"},"8.3.5.4\u3001\u8fde\u63a5\u5668 connector"),(0,o.kt)("p",null,"\u8fde\u63a5\u5668\u7528\u4e8e",(0,o.kt)("strong",{parentName:"p"},"\u63a5\u6536\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u8bf7\u6c42\u5e76\u8fd4\u56de\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef"),"\u3002\u4e00\u4e2a service \u4e2d\u53ef\u4ee5\u6709\u591a\u4e2a connector\u3002\u6709\u591a\u79cd connector\uff0c\u5e38\u89c1\u7684\u4e3a http/1.1\uff0chttp/2 \u548c ajp(apache jserv protocol)\u3002\u5728 tomcat \u4e2d\uff0cajp \u8fde\u63a5\u534f\u8bae\u7c7b\u578b\u4e13\u7528\u4e8e tomcat \u524d\u7aef\u662f apache \u53cd\u5411\u4ee3\u7406\u7684\u60c5\u51b5\u4e0b\u3002"),(0,o.kt)("p",null,"\u56e0\u6b64 tomcat \u53ef\u4ee5\u626e\u6f14\u4e24\u79cd\u89d2\u8272\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Tomcat \u4ec5\u4f5c\u4e3a\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\uff1a\u8bf7\u6c42\u6765\u81ea\u4e8e\u524d\u7aef\u7684 web \u670d\u52a1\u5668\uff0c\u8fd9\u53ef\u80fd\u662f Apache, IIS, Nginx \u7b49\uff1b"),(0,o.kt)("li",{parentName:"ol"},"Tomcat \u65e2\u4f5c\u4e3a web \u670d\u52a1\u5668\uff0c\u4e5f\u4f5c\u4e3a\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\uff1a\u8bf7\u6c42\u6765\u81ea\u4e8e\u6d4f\u89c8\u5668\u3002")),(0,o.kt)("p",null,"Tomcat \u5e94\u8be5\u8003\u8651\u5de5\u4f5c\u60c5\u5f62\u5e76\u4e3a\u76f8\u5e94\u60c5\u5f62\u4e0b\u7684\u8bf7\u6c42",(0,o.kt)("strong",{parentName:"p"},"\u5206\u522b\u5b9a\u4e49"),"\u597d\u9700\u8981\u7684\u8fde\u63a5\u5668\u624d\u80fd\u6b63\u786e\u63a5\u6536\u6765\u81ea\u4e8e\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u3002\u8fd9\u91cc\u5148\u4ecb\u7ecd HTTP/1.1 \u8fde\u63a5\u5668\u7684\u5c5e\u6027\u8bbe\u7f6e\u3002ajp \u540e\u9762\u518d\u505a\u4ecb\u7ecd\u3002"),(0,o.kt)("p",null,"HTTP \u8fde\u63a5\u5668\u8868\u793a\u652f\u6301 HTTP/1.1 \u534f\u8bae\u7684\u7ec4\u4ef6\u3002\u8bbe\u7f6e\u4e86\u8be5\u8fde\u63a5\u5668\u5c31\u8868\u793a catalina \u542f\u7528\u5b83\u7684\u72ec\u7acb web \u670d\u52a1\u529f\u80fd\uff0c\u5f53\u7136\uff0c\u80af\u5b9a\u4e5f\u63d0\u4f9b\u5b83\u5fc5\u987b\u7684 servlets \u548c jsp \u6267\u884c\u529f\u80fd\u3002\u5728\u4e00\u4e2a service \u4e2d\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a\u8fde\u63a5\u5668\uff0c\u6bcf\u4e2a\u8fde\u63a5\u5668\u90fd\u53ef\u4ee5\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5b83\u4eec\u76f8\u5173\u8054\u7684 engine \u4ee5\u5904\u7406\u8bf7\u6c42\u3001\u521b\u5efa\u54cd\u5e94\u3002"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u6bcf\u4e2a\u6d41\u5165\u7684\u8bf7\u6c42\u90fd\u9700\u8981\u4e00\u4e2a\u72ec\u7acb\u7684\u7ebf\u7a0b\u6765\u63a5\u6536"),'\u3002\u5f53\u5e76\u53d1\u8bf7\u6c42\u6570\u91cf\u8d85\u51fa maxThreads \u6307\u5b9a\u7684\u503c\u65f6\uff0c\u591a\u51fa\u7684\u8bf7\u6c42\u5c06\u88ab\u5806\u53e0\u5728\u5957\u63a5\u5b57\u4e2d\uff0c\u76f4\u5230\u8d85\u51fa acceptCount \u6307\u5b9a\u7684\u503c\u3002\u8d85\u51fa accpetCount \u7684\u8bf7\u6c42\u5c06\u4ee5 "connection refused" \u9519\u8bef\u8fdb\u884c\u62d2\u7edd\u3002'),(0,o.kt)("p",null,"\u9ed8\u8ba4\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Connector port="8080" protocol="HTTP/1.1"\n           connectionTimeout="20000"\n           redirectPort="8443" />\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"HTTP \u8fde\u63a5\u5668\u7684\u5c5e\u6027\u5b9e\u5728\u592a\u591a\uff0c\u8be6\u7ec6\u914d\u7f6e\u65b9\u6cd5\u89c1 ",(0,o.kt)("a",{parentName:"p",href:"http://tomcat.apache.org/tomcat-8.5-doc/config/http.html"},"\u5b98\u65b9\u624b\u518c"),'\u3002\u901a\u5e38\u5b9a\u4e49 HTTP \u8fde\u63a5\u5668\u65f6\u5fc5\u987b\u5b9a\u4e49\u7684\u5c5e\u6027\u53ea\u6709 "port"\u3002'),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"address"),"\uff1a\u6307\u5b9a\u8fde\u63a5\u5668\u76d1\u542c\u7684\u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a\u6240\u6709\u5730\u5740\uff0c\u5373 0.0.0.0\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"maxThreads"),"\uff1a\u652f\u6301\u7684\u6700\u5927\u5e76\u53d1\u8fde\u63a5\u6570\uff0c\u9ed8\u8ba4\u4e3a 200\uff1b\u5982\u679c\u5f15\u7528\u4e86 executor \u521b\u5efa\u7684\u5171\u4eab\u7ebf\u7a0b\u6c60\uff0c\u5219\u8be5\u5c5e\u6027\u88ab\u5ffd\u7565\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"acceptCount"),"\uff1a\u8bbe\u7f6e\u7b49\u5f85\u961f\u5217\u7684\u6700\u5927\u957f\u5ea6\uff1b\u901a\u5e38\u5728 tomcat \u6240\u6709\u5904\u7406\u7ebf\u7a0b\u5747\u5904\u4e8e\u7e41\u5fd9\u72b6\u6001\u65f6\uff0c\u65b0\u53d1\u6765\u7684\u8bf7\u6c42\u5c06\u88ab\u653e\u7f6e\u4e8e\u7b49\u5f85\u961f\u5217\u4e2d\uff1b"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"maxConnections"),"\uff1a\u5141\u8bb8\u5efa\u7acb\u7684\u6700\u5927\u8fde\u63a5\u6570\u3002acceptCount \u548c maxThreads \u662f\u63a5\u53d7\u8fde\u63a5\u7684\u6700\u5927\u7ebf\u7a0b\u6570\u3002\u5b58\u5728\u4e00\u79cd\u60c5\u51b5\uff0cmaxConnections \u5c0f\u4e8e acceptCount \u65f6\uff0c\u8d85\u51fa maxConnections \u7684\u8fde\u63a5\u8bf7\u6c42\u5c06\u88ab\u63a5\u6536\uff0c\u4f46\u4e0d\u4f1a\u4e0e\u4e4b\u5efa\u7acb\u8fde\u63a5\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"port"),"\uff1a\u76d1\u542c\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 0\uff0c\u6b64\u65f6\u8868\u793a\u968f\u673a\u9009\u4e00\u4e2a\u7aef\u53e3\uff0c\u901a\u5e38\u90fd\u5e94\u8be5\u663e\u5f0f\u6307\u5b9a\u76d1\u542c\u7aef\u53e3\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"protocol"),"\uff1a\u8fde\u63a5\u5668\u4f7f\u7528\u7684\u534f\u8bae\uff0c\u7528\u4e8e\u5904\u7406\u5bf9\u5e94\u7684\u8bf7\u6c42\u3002\u9ed8\u8ba4\u4e3a HTTP/1.1\uff0c\u6b64\u65f6\u5b83\u4f1a\u81ea\u52a8\u5728\u57fa\u4e8e Java NIO \u6216 APR/native \u8fde\u63a5\u5668\u4e4b\u95f4\u8fdb\u884c\u5207\u6362\u3002\u5b9a\u4e49 AJP \u534f\u8bae\u65f6\u901a\u5e38\u4e3a AJP/1.3\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"redirectPort"),"\uff1a\u5982\u679c\u67d0\u8fde\u63a5\u5668\u652f\u6301\u7684\u534f\u8bae\u662f HTTP\uff0c\u5f53\u63a5\u6536\u5ba2\u6237\u7aef\u53d1\u6765\u7684 HTTPS \u8bf7\u6c42\u65f6\uff0c\u5219\u8f6c\u53d1\u81f3\u6b64\u5c5e\u6027\u5b9a\u4e49\u7684\u7aef\u53e3\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"connectionTimeout"),"\uff1a\u7b49\u5f85\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u4e3a 60000\uff0c\u5373 1 \u5206\u949f\uff1b\u6ce8\u610f\uff0c\u8fd9\u65f6\u5019\u8fde\u63a5\u5df2\u7ecf\u5efa\u7acb\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"keepAliveTimeout"),"\uff1a\u957f\u8fde\u63a5\u72b6\u6001\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u8d85\u51fa\u8be5\u503c\u65f6\uff0c\u957f\u8fde\u63a5\u5c06\u5173\u95ed\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"enableLookups"),"\uff1a\u662f\u5426\u901a\u8fc7 request.getRemoteHost() \u8fdb\u884c DNS \u67e5\u8be2\u4ee5\u83b7\u53d6\u5ba2\u6237\u7aef\u7684\u4e3b\u673a\u540d\uff1b\u9ed8\u8ba4\u4e3a true\uff0c\u5e94\u8bbe\u7f6e\u4e3a false \u9632\u6b62\u53cd\u89e3\u5ba2\u6237\u7aef\u4e3b\u673a\uff1b"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"compression"),"\uff1a\u662f\u5426\u538b\u7f29\u6570\u636e\u3002\u9ed8\u8ba4\u4e3a off\u3002\u8bbe\u7f6e\u4e3a on \u65f6\u8868\u793a\u53ea\u538b\u7f29 text \u6587\u672c\uff0c\u8bbe\u7f6e\u4e3a force \u65f6\u8868\u793a\u538b\u7f29\u6240\u6709\u5185\u5bb9\u3002\u5e94\u8be5\u5728\u538b\u7f29\u548c sendfile \u4e4b\u95f4\u505a\u4e2a\u6743\u8861\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"useSendfile"),"\uff1a\u8be5\u5c5e\u6027\u4e3a NIO \u7684\u5c5e\u6027\uff0c\u8868\u793a\u662f\u5426\u542f\u7528 sendfile \u7684\u529f\u80fd\u3002\u9ed8\u8ba4\u4e3a true\uff0c\u542f\u7528\u8be5\u5c5e\u6027\u5c06\u4f1a\u7981\u6b62 compression \u5c5e\u6027\u3002"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\u5f53\u534f\u8bae\u6307\u5b9a\u4e3a HTTP/1.1 \u65f6\uff0c\u9ed8\u8ba4\u4f1a\u81ea\u52a8\u5728 NIO/APR \u534f\u8bae\u5904\u7406\u65b9\u5f0f\u4e0a\u8fdb\u884c\u6309\u9700\u5207\u6362\u3002\u5982\u8981\u663e\u5f0f\u6307\u5b9a\u534f\u8bae\uff0c\u65b9\u5f0f\u5982\u4e0b\uff1a"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<connector port="8080" protocol="HTTP/1.1">\n<connector port="8080" protocol="org.apache.coyote.http11.Http11NioProtocol">\n<connector port="8080" protocol="org.apache.coyote.http11.Http11Nio2Protocol">\n<connector port="8080" protocol="org.apache.coyote.http11.Http11AprProtocol">\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5176\u4e2d NIO \u662f C/C++ \u7684\u975e\u963b\u585e IO \u590d\u7528\u6a21\u578b\u5728 JAVA \u4e2d\u7684 IO \u5b9e\u73b0\uff0cNIO2 \u5373 AIO \u662f\u5f02\u6b65 NIO\uff0c\u5373\u5f02\u6b65\u975e\u963b\u585e IO\uff1a",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"NioProtocol \uff1anon blocking Java NIO connector"),(0,o.kt)("li",{parentName:"ul"},"Nio2Protocol\uff1anon blocking Java NIO2 connector"),(0,o.kt)("li",{parentName:"ul"},"AprProtocol \uff1athe APR/native connector")))),(0,o.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u5b9a\u4e49\u4e86\u591a\u4e2a\u5c5e\u6027\u7684 SSL \u8fde\u63a5\u5668\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Connector port="8443"\n    maxThreads="150" minSpareThreads="25" maxSpareThreads="75"\n    enableLookups="false" acceptCount="100" debug="0" scheme="https" secure="true"\n    clientAuth="false" sslProtocol="TLS" />\n')),(0,o.kt)("h4",{id:"8355\u5bb9\u5668\u7c7b-engine"},"8.3.5.5\u3001\u5bb9\u5668\u7c7b engine"),(0,o.kt)("p",null,"engine \u662f service \u7ec4\u4ef6\u4e2d\u7528\u6765\u5206\u6790\u534f\u8bae\u7684\u5f15\u64ce\u673a\u5668\uff0c",(0,o.kt)("strong",{parentName:"p"},"\u5b83\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a connector \u4e0a\u63a5\u6536\u8bf7\u6c42\uff0c\u5e76\u5c06\u8bf7\u6c42\u4ea4\u7ed9\u5bf9\u5e94\u7684\u865a\u62df\u4e3b\u673a\u8fdb\u884c\u5904\u7406\uff0c\u6700\u540e\u8fd4\u56de\u5b8c\u6574\u7684\u54cd\u5e94\u6570\u636e\u7ed9 connector\uff0c\u901a\u8fc7 connector \u5c06\u54cd\u5e94\u6570\u636e\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002")),(0,o.kt)("p",null,"\u53ea\u6709\u4e00\u4e2a engine \u5143\u7d20\u5fc5\u987b\u5d4c\u5957\u5728\u6bcf\u4e2a service \u4e2d\uff0c\u4e14 engine \u5fc5\u987b\u5728\u5176\u6240\u9700\u8981\u5173\u8054\u7684 connector \u4e4b\u540e\uff0c\u8fd9\u6837\u5728 engine \u524d\u9762\u7684 connector \u90fd\u53ef\u4ee5\u88ab\u6b64 engine \u5173\u8054\uff0c\u800c\u5728 engine \u540e\u9762\u7684 connector \u5219\u88ab\u5ffd\u7565\uff0c\u56e0\u4e3a\u4e00\u4e2a service \u4e2d\u53ea\u5141\u8bb8\u6709\u4e00\u4e2a engine\u3002"),(0,o.kt)("p",null,"\u5b9a\u4e49\u65b9\u5f0f\u5927\u81f4\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Engine name="Catalina" defaultHost="localhost">\n</Engine>\n\n<Engine name="Standalone" defaultHost="localhost" jvmRoute="TomcatA">\n</Engine>\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5e38\u7528\u7684 engine \u5c5e\u6027\u6709\uff1a",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"className"),"\uff1a\u5b9e\u73b0 engine \u7684\u7c7b\uff0c\u8be5\u7c7b\u5fc5\u987b\u5b9e\u73b0 org.apache.catalina.Engine \u63a5\u53e3\u3002\u4e0d\u7ed9\u5b9a\u8be5\u5c5e\u6027\u65f6\u5c06\u91c7\u7528\u9ed8\u8ba4\u7684\u6807\u51c6\u7c7b org.apache.catalina.core.StandardEngine\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"defaultHost"),"\uff1a\u6307\u5b9a\u5904\u7406\u8bf7\u6c42\u7684\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a\u3002\u5728 Engine \u4e2d\u5b9a\u4e49\u7684\u591a\u4e2a\u865a\u62df\u4e3b\u673a\u7684\u4e3b\u673a\u540d\u79f0\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u8ddf defaultHost \u5b9a\u4e49\u7684\u4e3b\u673a\u540d\u79f0\u540c\u540d\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name"),"\uff1aEngine \u7ec4\u4ef6\u7684\u540d\u79f0\uff0c\u7528\u4e8e\u8bb0\u5f55\u65e5\u5fd7\u548c\u9519\u8bef\u4fe1\u606f\uff0c\u65e0\u5173\u7d27\u8981\u7684\u5c5e\u6027\uff0c\u53ef\u968f\u610f\u7ed9\u5b9a\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"jvmRoute"),"\uff1a\u5728\u542f\u7528 session \u7c98\u6027\u65f6\u6307\u5b9a\u4f7f\u7528\u54ea\u79cd\u8d1f\u8f7d\u5747\u8861\u7684\u6807\u8bc6\u7b26\u3002\u6240\u6709\u7684 tomcat server \u5b9e\u4f8b\u4e2d\u8be5\u6807\u8bc6\u7b26\u5fc5\u987b\u552f\u4e00\uff0c\u5b83\u4f1a\u8ffd\u52a0\u5728 session \u6807\u8bc6\u7b26\u7684\u5c3e\u90e8\uff0c\u56e0\u6b64\u80fd\u8ba9\u524d\u7aef\u4ee3\u7406\u603b\u662f\u5c06\u7279\u5b9a\u7684 session \u8f6c\u53d1\u81f3\u540c\u4e00\u4e2a tomcat \u5b9e\u4f8b\u4e0a\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u6ce8\u610f\uff0cjvmRoute \u540c\u6837\u53ef\u4ee5\u4f7f\u7528 jvmRoute \u7684\u7cfb\u7edf\u5c5e\u6027\u6765\u8bbe\u7f6e\u3002\u5982\u679c\u6b64\u5904\u8bbe\u7f6e\u4e86 jvmRoute\uff0c\u5219\u8986\u76d6 jvmRoute \u7cfb\u7edf\u5c5e\u6027\u3002\u5173\u4e8e jvmRoute \u7684\u4f7f\u7528\uff0c\u5728\u540e\u9762 tomcat ajp \u8d1f\u8f7d\u5747\u8861\u7684\u6587\u7ae0\u4e2d\u4ecb\u7ecd\u3002")))),(0,o.kt)("p",null,"engine \u662f\u5bb9\u5668\u4e2d\u7684\u9876\u7ea7\u5b50\u5bb9\u5668\uff0c\u5176\u5185\u53ef\u4ee5\u5d4c\u5957\u4e00\u4e2a\u6216\u591a\u4e2a Host \u4f5c\u4e3a\u865a\u62df\u4e3b\u673a\uff0c\u4e14\u81f3\u5c11\u4e00\u4e2a host \u8981\u548c engine \u4e2d\u7684\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a\u540d\u79f0\u5bf9\u5e94\u3002\u9664\u4e86 host\uff0c\u8fd8\u53ef\u4ee5\u5d4c\u5957 releam \u548c valve \u7ec4\u4ef6\u3002"),(0,o.kt)("h4",{id:"8356\u5bb9\u5668\u7c7b-host"},"8.3.5.6\u3001\u5bb9\u5668\u7c7b host"),(0,o.kt)("p",null,"host \u5bb9\u5668\u7528\u6765\u5b9a\u4e49\u865a\u62df\u4e3b\u673a\u3002engine \u4ece connector \u63a5\u6536\u5230\u8bf7\u6c42\u8fdb\u884c\u5206\u6790\u540e\uff0c\u4f1a\u5c06\u76f8\u5173\u7684\u5c5e\u6027\u53c2\u6570(\u7b5b\u9009\u65b9\u5f0f\u662f\u4ece\u8bf7\u6c42\u9996\u90e8\u7684 host \u5b57\u6bb5\u548c\u865a\u62df\u4e3b\u673a\u540d\u79f0\u8fdb\u884c\u5339\u914d)\u4f20\u9012\u7ed9\u5bf9\u5e94\u7684\u865a\u62df host \u8fdb\u884c\u5904\u7406\u3002"),(0,o.kt)("p",null,"\u5982\u679c\u6ca1\u6709\u5408\u9002\u7684\u865a\u62df\u4e3b\u673a\uff0c\u5219\u4f20\u9012\u7ed9\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a\u3002\u56e0\u6b64\u6bcf\u4e2a\u5bb9\u5668\u4e2d\u5fc5\u987b\u81f3\u5c11\u5b9a\u4e49\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\uff0c\u4e14\u5fc5\u987b\u6709\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\u548c engine \u5bb9\u5668\u4e2d\u5b9a\u4e49\u7684\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a\u540d\u79f0\u76f8\u540c\u3002"),(0,o.kt)("p",null,"\u5927\u81f4\u5b9a\u4e49\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Host name="localhost"  appBase="webapps"\n      unpackWARs="true" autoDeploy="true">\n</Host>\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5e38\u7528\u5c5e\u6027\u8bf4\u660e\uff1a",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"className"),"\uff1a\u5b9e\u73b0 host \u5bb9\u5668\u7684\u7c7b\uff0c\u8be5\u7c7b\u5fc5\u987b\u5b9e\u73b0 org.apache.catalina.Host \u63a5\u53e3\u3002\u4e0d\u7ed9\u5b9a\u8be5\u5c5e\u6027\u65f6\u5c06\u91c7\u7528\u9ed8\u8ba4\u7684\u6807\u51c6\u7c7b org.apache.catalina.core.StandardHost\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name"),"\uff1a\u865a\u62df\u4e3b\u673a\u7684\u4e3b\u673a\u540d\uff0c\u5ffd\u7565\u5927\u5c0f\u5199(\u521d\u59cb\u5316\u65f6\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a\u5c0f\u5199)\u3002\u53ef\u4ee5\u4f7f\u7528\u524d\u7f00\u661f\u53f7\u901a\u914d\u7b26\uff0c\u5982 ",(0,o.kt)("inlineCode",{parentName:"li"},'"*.a.com"'),"\u3002\u4f7f\u7528\u4e86\u661f\u53f7\u524d\u7f00\u7684\u865a\u62df\u4e3b\u673a\u7684\u5339\u914d\u4f18\u5148\u7ea7\u4f4e\u4e8e\u7cbe\u786e\u540d\u79f0\u7684\u865a\u62df\u4e3b\u673a\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"appBase"),"\uff1a\u6b64 Host \u7684 webapps \u76ee\u5f55\uff0c\u5373 webapp \u90e8\u7f72\u5728\u6b64\u865a\u62df\u4e3b\u673a\u4e0a\u65f6\u7684\u5b58\u653e\u76ee\u5f55\u3002\u5305\u62ec\u975e\u5f52\u6863\u7684 web \u5e94\u7528\u7a0b\u5e8f\u76ee\u5f55\u548c\u5f52\u6863\u540e\u7684 WAR \u6587\u4ef6\u7684\u76ee\u5f55\u3002\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u65f6\u57fa\u4e8e ",(0,o.kt)("inlineCode",{parentName:"li"},"$CATALINA_BASE"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"xmlBase"),"\uff1a\u90e8\u7f72\u5728\u6b64\u865a\u62df\u4e3b\u673a\u4e0a\u7684 context xml \u76ee\u5f55\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"startStopThreads"),"\uff1a\u542f\u52a8 context \u5bb9\u5668\u65f6\u7684\u5e76\u884c\u7ebf\u7a0b\u6570\u3002\u5982\u679c\u4f7f\u7528\u4e86\u81ea\u52a8\u90e8\u7f72\u529f\u80fd\uff0c\u5219\u518d\u6b21\u90e8\u7f72\u6216\u66f4\u65b0\u65f6\u4f7f\u7528\u76f8\u540c\u7684\u7ebf\u7a0b\u6c60\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"autoDeploy"),"\uff1a\u5728 Tomcat \u5904\u4e8e\u8fd0\u884c\u72b6\u6001\u65f6\u653e\u7f6e\u4e8e appBase \u76ee\u5f55\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u6587\u4ef6\u662f\u5426\u81ea\u52a8\u8fdb\u884c deploy \u6216\u81ea\u52a8\u66f4\u65b0\u90e8\u7f72\u72b6\u6001\u3002\u8fd9\u7b49\u4e8e\u540c\u65f6\u5f00\u542f\u4e86 deployOnStartup \u5c5e\u6027\u548c reload/redeploy webapp \u7684\u529f\u80fd\u3002\u89e6\u53d1\u81ea\u52a8\u66f4\u65b0\u65f6\u5c06\u9ed8\u8ba4\u91cd\u8f7d\u8be5 webapp\u3002\u9ed8\u8ba4\u4e3a true\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"unpackWars"),"\uff1a\u5728\u6267\u884c\u6b64 webapps \u65f6\u662f\u5426\u5148\u5bf9\u5f52\u6863\u683c\u5f0f\u7684 WAR \u6587\u4ef6\u89e3\u538b\u518d\u8fd0\u884c\uff0c\u8bbe\u7f6e\u4e3a false \u65f6\u5219\u76f4\u63a5\u6267\u884c WAR \u6587\u4ef6\uff1b\u9ed8\u8ba4\u4e3a true\u3002\u8bbe\u7f6e\u4e3a false \u65f6\u4f1a\u635f\u8017\u6027\u80fd\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"workDir"),"\uff1a\u8be5\u865a\u62df\u4e3b\u673a\u7684\u5de5\u4f5c\u76ee\u5f55\u3002\u6bcf\u4e2a webapp \u90fd\u6709\u81ea\u5df1\u7684\u4e34\u65f6 IO \u76ee\u5f55\uff0c\u9ed8\u8ba4\u8be5\u5de5\u4f5c\u76ee\u5f55\u4e3a ",(0,o.kt)("inlineCode",{parentName:"li"},"$CATALINA_BASE/work"),"\u3002")))),(0,o.kt)("p",null,"\u5927\u591a\u6570\u65f6\u5019\u90fd\u53ea\u9700\u8bbe\u7f6e\u865a\u62df\u4e3b\u673a\u540d\u79f0 name \u548c appBase \u5c5e\u6027\u5373\u53ef\uff0c\u5176\u4f59\u91c7\u7528\u9ed8\u8ba4\uff0c\u9ed8\u8ba4\u65f6\u4f1a\u81ea\u52a8\u90e8\u7f72 webapp\u3002\u6709\u65f6\u5019\u8fd8\u9700\u8981\u7ba1\u7406\u591a\u4e2a\u7ad9\u70b9\u540d\u79f0\uff0c\u5373\u4e3b\u673a\u522b\u540d\u3002\u53ef\u4ee5\u4f7f\u7528 Alias \u4e3a Host \u6307\u5b9a\u7684\u4e3b\u673a\u540d\u5b9a\u4e49\u4e3b\u673a\u522b\u540d\u3002\u5982\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Host name="web.a.com" appBase="webapps" unpackWARs="true">\n  <Alias>www.a.com</Alias>\n</Host>\n')),(0,o.kt)("p",null,"\u81ea\u52a8\u90e8\u7f72\u6307\u7684\u662f\u81ea\u52a8\u88c5\u8f7d webapp \u4ee5\u63d0\u4f9b\u76f8\u5173 webapp \u7684\u670d\u52a1\u3002"),(0,o.kt)("h4",{id:"8357\u5bb9\u5668\u7c7b-context"},"8.3.5.7\u3001\u5bb9\u5668\u7c7b context"),(0,o.kt)("p",null,"connector \u548c container \u662f\u6574\u4e2a tomcat \u7684\u5fc3\u810f\uff0c\u800c context \u5219\u662f container \u7684\u5fc3\u810f\uff0c\u66f4\u662f tomcat \u5fc3\u810f\u7684\u5fc3\u810f\u3002\u5b83\u662f\u771f\u6b63\u7ba1\u7406 servlet \u7684\u5730\u65b9\uff0c\u5b83\u7684\u914d\u7f6e\u5f71\u54cd\u4e86 servlet \u7684\u5de5\u4f5c\u65b9\u5f0f\u3002"),(0,o.kt)("p",null,"\u4e00\u4e2a context \u4ee3\u8868\u4e00\u4e2a webapp\u3002servlet \u4e2d\u89c4\u5b9a\uff0c\u6bcf\u4e2a webapp \u90fd\u5fc5\u987b\u57fa\u4e8e\u5df2\u5f52\u6863\u7684 WAR(WEB application archive)\u6587\u4ef6\u6216\u57fa\u4e8e\u975e\u5f52\u6863\u76f8\u5173\u5185\u5bb9\u6240\u5728\u76ee\u5f55\u3002"),(0,o.kt)("p",null,"catalina \u57fa\u4e8e\u5bf9\u8bf7\u6c42 URI \u4e0e context \u4e2d\u5b9a\u4e49\u7684 path \u8fdb\u884c\u6700\u5927\u5339\u914d\u524d\u7f00\u7684\u89c4\u5219\u8fdb\u884c\u6311\u9009\uff0c\u4ece\u4e2d\u9009\u51fa\u4f7f\u7528\u54ea\u4e2a context \u6765\u5904\u7406\u8be5 HTTP \u8bf7\u6c42\u3002\u8fd9\u76f8\u5f53\u4e8e nginx \u7684 location \u5bb9\u5668\uff0ccatalina \u7684 path \u5c31\u76f8\u5f53\u4e8e location \u7684 path\uff0c\u5b83\u4eec\u7684\u4f5c\u7528\u662f\u76f8\u540c\u7684\u3002"),(0,o.kt)("p",null,"\u6bcf\u4e2a context \u90fd\u5fc5\u987b\u5728\u865a\u62df\u4e3b\u673a\u5bb9\u5668 host \u4e2d\u6709\u4e00\u4e2a\u552f\u4e00\u7684 context name\u3002context \u7684 path \u4e0d\u9700\u8981\u552f\u4e00\uff0c\u56e0\u4e3a\u5141\u8bb8\u540c\u4e00\u4e2a webapp \u4e0d\u540c\u7248\u672c\u7684\u5171\u5b58\u90e8\u7f72\u3002\u6b64\u5916\uff0c\u5fc5\u987b\u8981\u6709\u4e00\u4e2a context \u7684 path \u4e3a 0 \u957f\u5ea6\u7684\u5b57\u7b26\u4e32(\u5982 ",(0,o.kt)("inlineCode",{parentName:"p"},'<Context path="" docBase="ROOT"/>'),")\uff0c\u8be5 context \u662f\u8be5\u865a\u62df\u4e3b\u673a\u7684\u9ed8\u8ba4 webapp\uff0c\u7528\u4e8e\u5904\u7406\u6240\u6709\u65e0\u6cd5\u88ab\u865a\u62df\u4e3b\u673a\u4e2d\u6240\u6709 context path \u5339\u914d\u7684\u8bf7\u6c42\u3002"),(0,o.kt)("p",null,"\u5173\u4e8e context name\uff0c\u5b83\u662f\u4ece context path \u63a8\u65ad\u51fa\u6765\u7684\uff0c\u4e0d\u4ec5\u5982\u6b64\uff0c\u5176\u4f59\u51e0\u4e2a\u5c5e\u6027\u5982 context basefile name \u4e5f\u662f\u7531\u6b64\u63a8\u65ad\u51fa\u6765\u7684\u3002\u89c4\u5219\u5982\u4e0b\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'\u5982\u679c path \u4e0d\u4e3a\u7a7a\uff0c\u5219 context name \u7b49\u4e8e context path\uff0cbasefile name \u53d6 path \u4e2d\u53bb\u9664\u524d\u7f00 "/" \u540e\u7684\u8def\u5f84\uff0c\u4e14\u6240\u6709 "/" \u66ff\u6362\u4e3a "#"\u3002'),(0,o.kt)("li",{parentName:"ul"},"\u5982\u679c path \u4e3a\u7a7a\uff0c\u5219 context name \u4e5f\u4e3a\u7a7a\uff0c\u800c basefile \u4e3a ROOT(\u6ce8\u610f\u662f\u5927\u5199)\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"context path    context name    basefile name     deploy examples\n-----------------------------------------------------------------\n/foo            /foo            foo               foo.xml,foo.war,foo\n/foo/bar        /foo/bar        foo#bar           foo#bar.xml,foo#bar.war,foo#bar\nEmpty String    Empty String    ROOT              ROOT.xml,ROOT.war,ROOT\n")),(0,o.kt)("p",null,"\u914d\u7f6e context \u65f6\uff0c\u5f3a\u70c8\u5efa\u8bae\u4e0d\u8981\u5b9a\u4e49\u5728 server.xml \u4e2d\uff0c\u56e0\u4e3a\u5b9a\u4e49\u5728 conf/server.xml \u4e2d\u65f6\uff0c\u53ea\u80fd\u901a\u8fc7\u91cd\u542f tomcat \u6765\u91cd\u8f7d\u751f\u6548\uff0c\u4e5f\u5c31\u662f\u8bf4\u65e0\u6cd5\u81ea\u52a8\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u4e86\u3002",(0,o.kt)("strong",{parentName:"p"},"\u4f46\u5927\u591a\u6570\u4eba\u51fa\u4e8e\u4e60\u60ef\u548c\u65b9\u4fbf\uff0c\u8fd8\u662f\u4f1a\u76f4\u63a5\u5199\u5728 server.xml \u4e2d\uff0c\u8fd9\u5e76\u6ca1\u6709\u4ec0\u4e48\u95ee\u9898\uff0c\u65e0\u975e\u662f\u91cd\u542f\u4e00\u4e0b\u800c\u5df2\u3002")),(0,o.kt)("p",null,"\u53ef\u4ee5\u8003\u8651\u5b9a\u4e49\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"/META-INF/context.xml")," \u4e2d\uff0c\u5982\u679c\u6b64\u65f6\u8bbe\u7f6e\u4e86 ",(0,o.kt)("inlineCode",{parentName:"p"},"copyXML")," \u5c5e\u6027\uff0c\u5728\u90e8\u7f72\u65f6\u4f1a\u5c06\u6b64 ",(0,o.kt)("inlineCode",{parentName:"p"},"context.xml")," \u590d\u5236\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_BASE/conf/enginename/hostname/")," \u4e0b\uff0c\u5e76\u91cd\u547d\u540d\u4e3a ",(0,o.kt)("inlineCode",{parentName:"p"},'"basefile name.xml"'),"\u3002\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4e49\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_BASE/conf/enginename/hostname/")," \u4e0b\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},".xml")," \u6587\u4ef6\u4e2d\uff0c\u8be5\u8def\u5f84\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"xml")," \u4f18\u5148\u7ea7\u9ad8\u4e8e ",(0,o.kt)("inlineCode",{parentName:"p"},"/META-INF/context.xml"),"\u3002"),(0,o.kt)("p",null,"\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u9ed8\u8ba4\u7684 context.xml \u6587\u4ef6\uff0c\u5305\u62ec\u4e24\u79cd\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u5728 ",(0,o.kt)("inlineCode",{parentName:"li"},"$CATALINA_BASE/conf/context.xml")," \u4e2d\uff0c\u8be5\u9ed8\u8ba4 context \u5bf9\u6240\u6709 webapp \u90fd\u751f\u6548\uff1b"),(0,o.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u5728 ",(0,o.kt)("inlineCode",{parentName:"li"},"$CATALINA_BASE/conf/[enginename]/[hostname]/context.xml.default")," \u4e2d\uff0c\u8be5\u9ed8\u8ba4 context \u53ea\u5bf9\u8be5\u865a\u62df\u4e3b\u673a\u4e2d\u7684\u6240\u6709 webapp \u751f\u6548\u3002")),(0,o.kt)("p",null,"\u5b9a\u4e49\u65b9\u5f0f\u5927\u81f4\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Host name="www.a.com"  appBase="webapps"\n            unpackWARs="true" autoDeploy="true">\n      <Context path="" docBase="ROOT"/>\n      <Context path="/bbs" docBase="web/bbs" reloadable="true"/>\n</Host>\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5176\u4e2d\u7b2c\u4e00\u4e2a context \u7684 path \u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u5b83\u662f\u9ed8\u8ba4\u7684 context\u3002\u5f53\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 ",(0,o.kt)("a",{parentName:"li",href:"http://www.a.com"},"www.a.com")," \u65f6\uff0c\u7531\u4e8e\u65e0\u6cd5\u5339\u914d\u7b2c\u4e8c\u4e2a context\uff0c\u6240\u4ee5\u88ab\u9ed8\u8ba4\u5373\u7b2c\u4e00\u4e2a context \u5904\u7406\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u5f53\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 ",(0,o.kt)("a",{parentName:"li",href:"http://www.a.com/bbs"},"www.a.com/bbs")," \u65f6\uff0c\u5c06\u88ab\u7b2c\u4e8c\u4e2a context \u5904\u7406\uff0c\u5b83\u5c06\u6267\u884c web/bbs \u6240\u5bf9\u5e94\u7684 webapp\uff0c\u5e76\u8fd4\u56de\u76f8\u5173\u5185\u5bb9\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u5728 context \u5bb9\u5668\u4e2d\u53ef\u4ee5\u5b9a\u4e49\u975e\u5e38\u591a\u7684\u5c5e\u6027\uff0c\u8be6\u7ec6\u5185\u5bb9\u89c1 ",(0,o.kt)("a",{parentName:"li",href:"http://tomcat.apache.org/tomcat-8.5-doc/config/context.html#Attributes"},"\u5b98\u65b9\u624b\u518c"),"\uff0c\u4ee5\u4e0b\u662f\u5e38\u89c1\u7684\u51e0\u4e2a\u5c5e\u6027\uff1a",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"className"),"\uff1a\u5b9e\u73b0 host \u5bb9\u5668\u7684\u7c7b\uff0c\u8be5\u7c7b\u5fc5\u987b\u5b9e\u73b0 org.apache.catalina.Context \u63a5\u53e3\u3002\u4e0d\u7ed9\u5b9a\u8be5\u5c5e\u6027\u65f6\u5c06\u91c7\u7528\u9ed8\u8ba4\u7684\u6807\u51c6\u7c7b org.apache.catalina.core.StandardContext\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"cookies"),"\uff1a\u9ed8\u8ba4\u4e3a true\uff0c\u8868\u793a\u542f\u7528 cookie \u6765\u6807\u8bc6 session\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"docBase"),"\uff1a\u5373 DocumentRoot\uff0c\u662f\u8be5 webapp \u7684 context root\uff0c\u5373\u5f52\u6863 WAR \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u6216\u975e\u5f52\u6863\u5185\u5bb9\u6240\u5728\u76ee\u5f55\u3002\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u76f8\u5bf9\u4e8e\u8be5 webapp appBase \u7684\u76f8\u5bf9\u8def\u5f84\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"path"),'\uff1a\u5b9a\u4e49 webapp path\u3002\u6ce8\u610f\uff0c\u5f53 path="" \u65f6\uff0c\u8868\u793a\u9ed8\u8ba4\u7684 context\uff1b\u53e6\u5916\u53ea\u6709\u5728 server.xml \u4e2d\u624d\u9700\u8981\u5b9a\u4e49\u8be5\u5c5e\u6027\uff0c\u5176\u4ed6\u6240\u6709\u60c5\u51b5\u4e0b\u90fd\u4e0d\u80fd\u5b9a\u4e49\u8be5\u5c5e\u6027\uff0c\u56e0\u4e3a\u4f1a\u6839\u636e docBase \u548c context \u7684 xml \u6587\u4ef6\u540d\u63a8\u65ad\u51fa path\u3002'),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"reloadable"),"\uff1a\u662f\u5426\u76d1\u63a7 /WEB-INF/class \u548c /WEB-INF/lib \u4e24\u4e2a\u76ee\u5f55\u4e2d\u6587\u4ef6\u7684\u53d8\u5316\uff0c\u53d8\u5316\u65f6\u5c06\u81ea\u52a8\u91cd\u8f7d\u3002\u5728\u6d4b\u8bd5\u73af\u5883\u4e0b\u8be5\u5c5e\u6027\u5f88\u597d\uff0c\u4f46\u5728\u771f\u5b9e\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u5e94\u7528\u65f6\u4e0d\u5e94\u8be5\u8bbe\u7f6e\u8be5\u5c5e\u6027\uff0c\u56e0\u4e3a\u76d1\u63a7\u4f1a\u5927\u5e45\u589e\u52a0\u8d1f\u8f7d\uff0c\u56e0\u6b64\u8be5\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u4e3a false\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"wrapperClass"),"\uff1a\u5b9e\u73b0 wrapper \u5bb9\u5668\u7684\u7c7b\uff0cwrapper \u7528\u4e8e\u7ba1\u7406\u8be5 context \u4e2d\u7684 servlet\uff0c\u8be5\u7c7b\u5fc5\u987b\u5b9e\u73b0 org.apache.catalina.Wrapper \u63a5\u53e3\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u8be5\u5c5e\u6027\u5219\u91c7\u7528\u9ed8\u8ba4\u7684\u6807\u51c6\u7c7b\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"xmlNamespaceAware"),"\uff1a\u548c web.xml \u7684\u89e3\u6790\u65b9\u5f0f\u6709\u5173\u3002\u9ed8\u8ba4\u4e3a true\uff0c\u8bbe\u7f6e\u4e3a false \u53ef\u4ee5\u63d0\u5347\u6027\u80fd\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"xmlValidation"),"\uff1a\u548c web.xml \u7684\u89e3\u6790\u65b9\u5f0f\u6709\u5173\u3002\u9ed8\u8ba4\u4e3a true\uff0c\u8bbe\u7f6e\u4e3a false \u53ef\u4ee5\u63d0\u5347\u6027\u80fd\u3002")))),(0,o.kt)("h4",{id:"8358\u88ab\u5d4c\u5957\u7c7b-realm"},"8.3.5.8\u3001\u88ab\u5d4c\u5957\u7c7b realm"),(0,o.kt)("p",null,"realm \u5b9a\u4e49\u7684\u662f\u4e00\u4e2a\u5b89\u5168\u4e0a\u4e0b\u6587\uff0c\u5c31\u50cf\u662f\u4ee5\u54ea\u79cd\u65b9\u5f0f\u5b58\u50a8\u8ba4\u8bc1\u65f6\u7684\u7528\u6237\u548c\u7ec4\u76f8\u5173\u7684\u6570\u636e\u5e93\u3002\u6709\u591a\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u6570\u636e\u5b58\u653e\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"JAASRealm\uff1a\u57fa\u4e8e Java Authintication and Authorization Service \u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1\uff1b"),(0,o.kt)("li",{parentName:"ul"},"JDBCRealm\uff1a\u901a\u8fc7 JDBC \u8bbf\u95ee\u67d0\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8868\u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1\uff1b"),(0,o.kt)("li",{parentName:"ul"},"JNDIRealm\uff1a\u57fa\u4e8e JNDI \u4f7f\u7528\u76ee\u5f55\u670d\u52a1\u5b9e\u73b0\u8ba4\u8bc1\u4fe1\u606f\u7684\u83b7\u53d6\uff1b"),(0,o.kt)("li",{parentName:"ul"},"MemoryRealm\uff1a\u67e5\u627e tomcat-user.xml \u6587\u4ef6\u5b9e\u73b0\u7528\u6237\u4fe1\u606f\u7684\u83b7\u53d6\uff1b"),(0,o.kt)("li",{parentName:"ul"},"UserDatabaseRealm\uff1a\u57fa\u4e8e UserDatabase \u6587\u4ef6(\u901a\u5e38\u662f tomcat-user.xml) \u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1\uff0c\u5b83\u5b9e\u73b0\u662f\u4e00\u4e2a\u5b8c\u5168\u53ef\u66f4\u65b0\u548c\u6301\u4e45\u6709\u6548\u7684 MemoryRealm\uff0c\u56e0\u6b64\u80fd\u591f\u8ddf\u6807\u51c6\u7684 MemoryRealm \u517c\u5bb9\uff1b\u5b83\u901a\u8fc7 JNDI \u5b9e\u73b0\uff1b")),(0,o.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u4f7f\u7528 UserDatabase \u7684\u914d\u7f6e\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Realm className="org.apache.catalina.realm.UserDatabaseRealm"\n  resourceName="UserDatabase"/>\n')),(0,o.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528 JDBC \u65b9\u5f0f\u83b7\u53d6\u7528\u6237\u8ba4\u8bc1\u4fe1\u606f\u7684\u914d\u7f6e\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Realm className="org.apache.catalina.realm.JDBCRealm" debug="99"\n  driverName="org.gjt.mm.mysql.Driver"\n  connectionURL="jdbc:mysql://localhost/authority"\n  connectionName="test" connectionPassword="test"\n  userTable="users" userNameCol="user_name"\n  userCredCol="user_pass"\n  userRoleTable="user_roles" roleNameCol="role_name" />\n')),(0,o.kt)("h4",{id:"8359\u88ab\u5d4c\u5957\u7c7b-valve"},"8.3.5.9\u3001\u88ab\u5d4c\u5957\u7c7b valve"),(0,o.kt)("p",null,"Valve \u4e2d\u6587\u610f\u601d\u662f\u9600\u95e8\uff0c\u7c7b\u4f3c\u4e8e\u8fc7\u6ee4\u5668\uff0c\u5b83\u53ef\u4ee5\u5de5\u4f5c\u4e8e Engine \u548c Host/Context \u4e4b\u95f4\u3001Host \u548c Context \u4e4b\u95f4\u4ee5\u53ca Context \u548c Web \u5e94\u7528\u7a0b\u5e8f\u7684\u67d0\u8d44\u6e90\u4e4b\u95f4\u3002\u4e00\u4e2a\u5bb9\u5668\u5185\u53ef\u4ee5\u5efa\u7acb\u591a\u4e2a Valve\uff0c\u800c\u4e14 Valve \u5b9a\u4e49\u7684\u6b21\u5e8f\u4e5f\u51b3\u5b9a\u4e86\u5b83\u4eec\u751f\u6548\u7684\u6b21\u5e8f\u3002"),(0,o.kt)("p",null,"\u6709\u591a\u79cd\u4e0d\u540c\u7684 Valve\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"AccessLogValve\uff1a",(0,o.kt)("strong",{parentName:"li"},"\u8bbf\u95ee\u65e5\u5fd7 Valve"),"\uff1b"),(0,o.kt)("li",{parentName:"ul"},"ExtendedAccessValve\uff1a\u6269\u5c55\u529f\u80fd\u7684\u8bbf\u95ee\u65e5\u5fd7 Valve\uff1b"),(0,o.kt)("li",{parentName:"ul"},"JDBCAccessLogValve\uff1a\u901a\u8fc7 JDBC \u5c06\u8bbf\u95ee\u65e5\u5fd7\u4fe1\u606f\u53d1\u9001\u5230\u6570\u636e\u5e93\u4e2d\uff1b"),(0,o.kt)("li",{parentName:"ul"},"RequestDumperValve\uff1a\u8bf7\u6c42\u8f6c\u50a8 Valve\uff1b"),(0,o.kt)("li",{parentName:"ul"},"RemoteAddrValve\uff1a",(0,o.kt)("strong",{parentName:"li"},"\u57fa\u4e8e\u8fdc\u7a0b\u5730\u5740\u7684\u8bbf\u95ee\u63a7\u5236"),"\uff1b"),(0,o.kt)("li",{parentName:"ul"},"RemoteHostValve\uff1a",(0,o.kt)("strong",{parentName:"li"},"\u57fa\u4e8e\u8fdc\u7a0b\u4e3b\u673a\u540d\u79f0\u7684\u8bbf\u95ee\u63a7\u5236"),"\uff1b"),(0,o.kt)("li",{parentName:"ul"},"SemaphoreValve\uff1a\u7528\u4e8e\u63a7\u5236 Tomcat \u4e3b\u673a\u4e0a\u4efb\u4f55\u5bb9\u5668\u4e0a\u7684\u5e76\u53d1\u8bbf\u95ee\u6570\u91cf\uff1b"),(0,o.kt)("li",{parentName:"ul"},"ReplicationValve\uff1a\u4e13\u7528\u4e8e Tomcat \u96c6\u7fa4\u67b6\u6784\u4e2d\uff0c\u53ef\u4ee5\u5728\u67d0\u4e2a\u8bf7\u6c42\u7684 session \u4fe1\u606f\u53d1\u751f\u66f4\u6539\u65f6\u89e6\u53d1 session \u6570\u636e\u5728\u5404\u8282\u70b9\u95f4\u8fdb\u884c\u590d\u5236\uff1b"),(0,o.kt)("li",{parentName:"ul"},"SingleSignOn\uff1a\u5728\u8ba4\u8bc1\u7528\u6237\u65f6\u5c06\u4e24\u4e2a\u6216\u591a\u4e2a\u9700\u8981\u5bf9\u7528\u6237\u8fdb\u884c\u8ba4\u8bc1\u7684 webapp \u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5373\u4e00\u6b21\u8ba4\u8bc1\u5373\u53ef\u8bbf\u95ee\u6240\u6709\u8fde\u63a5\u5728\u4e00\u8d77\u7684 webapp\uff1b"),(0,o.kt)("li",{parentName:"ul"},"ClusterSingleSingOn\uff1a\u5bf9 SingleSignOn \u7684\u6269\u5c55\uff0c\u4e13\u7528\u4e8e Tomcat \u96c6\u7fa4\u5f53\u4e2d\uff0c\u9700\u8981\u7ed3\u5408 ClusterSingleSignOnListener \u8fdb\u884c\u5de5\u4f5c\uff1b")),(0,o.kt)("p",null,"\u5176\u4e2d RemoteHostValve \u548c RemoteAddrValve \u53ef\u4ee5\u5206\u522b\u7528\u6765\u5b9e\u73b0\u57fa\u4e8e\u4e3b\u673a\u540d\u79f0\u548c\u57fa\u4e8e IP \u5730\u5740\u7684\u8bbf\u95ee\u63a7\u5236\uff0c\u63a7\u5236\u672c\u8eab\u53ef\u4ee5\u901a\u8fc7 allow \u6216 deny \u6765\u8fdb\u884c\u5b9a\u4e49\uff0c\u8fd9\u6709\u70b9\u7c7b\u4f3c\u4e8e Apache \u7684\u8bbf\u95ee\u63a7\u5236\u529f\u80fd\u3002\u5982\u4e0b\u9762\u7684 Valve \u5b9e\u73b0\u4e86\u4ec5\u5141\u8bb8\u672c\u673a\u8bbf\u95ee /probe\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Context privileged="true" path="/probe" docBase="probe">\n  <Valve className="org.apache.catalina.valves.RemoteAddrValve"\n  allow="127\\.0\\.0\\.1"/>\n</Context>\n')),(0,o.kt)("p",null,"\u5176\u4e2d\u76f8\u5173\u5c5e\u6027\u5b9a\u4e49\u6709\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"className\uff1a\u5728\u5bf9\u5e94\u4f4d\u7f6e\u7684\u540e\u7f00\u4e0a\u52a0\u4e0a ",(0,o.kt)("inlineCode",{parentName:"li"},'".valves.RemoteHostValve"')," \u6216 ",(0,o.kt)("inlineCode",{parentName:"li"},'".valves.RemoteAddrValve"'),"\uff1b"),(0,o.kt)("li",{parentName:"ul"},"allow\uff1a\u4ee5\u9017\u53f7\u5206\u5f00\u7684\u5141\u8bb8\u8bbf\u95ee\u7684 IP \u5730\u5740\u5217\u8868\uff0c\u652f\u6301\u6b63\u5219\uff0c\u70b9\u53f7 ",(0,o.kt)("inlineCode",{parentName:"li"},".")," \u7528\u4e8e IP \u5730\u5740\u65f6\u9700\u8981\u8f6c\u4e49\uff1b\u4ec5\u5b9a\u4e49 allow \u9879\u65f6\uff0c\u975e\u660e\u786e allow \u7684\u5730\u5740\u5747\u88ab deny\uff1b"),(0,o.kt)("li",{parentName:"ul"},"deny\uff1a\u4ee5\u9017\u53f7\u5206\u5f00\u7684\u7981\u6b62\u8bbf\u95ee\u7684 IP \u5730\u5740\u5217\u8868\uff0c\u652f\u6301\u6b63\u5219\uff1b\u4f7f\u7528\u65b9\u5f0f\u540c allow\uff1b\u4ec5\u5b9a\u4e49 deny \u9879\u65f6\uff0c\u975e\u660e\u786e deny \u7684\u5730\u5740\u5747\u88ab allow\uff1b")),(0,o.kt)("p",null,"\u53e6\u5916\u4e00\u4e2a\u5e38\u7528\u7684 Valve \u4e3a AccessLogValve\uff0c\u5b9a\u4e49\u65b9\u5f0f\u5927\u81f4\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"\n               prefix="localhost_access_log" suffix=".txt"\n               pattern="%h %l %u %t "%r" %s %b" />\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5176\u4e2d prefix \u548c suffix \u8868\u793a\u65e5\u5fd7\u6587\u4ef6\u7684\u524d\u7f00\u540d\u79f0\u548c\u540e\u7f00\u540d\u79f0\u3002pattern \u8868\u793a\u8bb0\u5f55\u65e5\u5fd7\u65f6\u7684\u4fe1\u606f\u548c\u683c\u5f0f\u3002")),(0,o.kt)("h2",{id:"84tomcat-\u56fe\u5f62\u7ba1\u7406\u548c\u8eab\u4efd\u8ba4\u8bc1"},"8.4\u3001tomcat \u56fe\u5f62\u7ba1\u7406\u548c\u8eab\u4efd\u8ba4\u8bc1"),(0,o.kt)("p",null,'tomcat \u548c\u5927\u591a\u6570\u670d\u52a1\u7a0b\u5e8f\u7684\u7ba1\u7406\u4e0d\u4e00\u6837\uff0ctomcat \u66f4\u9002\u5408\u4f7f\u7528\u56fe\u5f62\u7ba1\u7406\u754c\u9762\u8fdb\u884c\u7ba1\u7406\uff0c\u4f8b\u5982\u5728\u4e0d\u505c\u6b62 tomcat \u7684\u60c5\u51b5\u4e0b\u52a8\u6001\u90e8\u7f72\u65b0\u7684 webapp \u6216\u91cd\u65b0\u52a0\u8f7d webapp\u3002\u5982\u679c\u4e0d\u4f7f\u7528\u56fe\u5f62\u7ba1\u7406\u5de5\u5177\uff0ctomcat \u867d\u7136\u4e5f\u53ef\u4ee5\u914d\u7f6e\u81ea\u52a8\u90e8\u7f72(autoDeploy="true")\uff0c\u4f46\u6211\u4eec\u5374\u65e0\u6cd5\u638c\u63e1\u5b83\u91cd\u65b0\u90e8\u7f72\u7684\u65f6\u523b\u3002'),(0,o.kt)("p",null,"\u56fe\u5f62\u7ba1\u7406\u5de5\u5177\u7684\u5b98\u65b9\u624b\u518c\uff1a",(0,o.kt)("a",{parentName:"p",href:"http://tomcat.apache.org/tomcat-8.5-doc/manager-howto.html"},"Manager App HOW-TO"),"\u3002"),(0,o.kt)("p",null,"\u76f4\u63a5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 tomcat \u6240\u5728\u673a\u5668\u7684 ip \u5730\u5740\u53ca\u5176 connector \u76d1\u542c\u7aef\u53e3\uff0c\u5373\u53ef\u8fdb\u5165 tomcat \u7684\u56fe\u5f62\u7ba1\u7406\u754c\u9762\uff0c\u4e5f\u662f\u6b22\u8fce\u754c\u9762\u3002\u8fd9\u4e2a\u6b22\u8fce\u9875\u9762\u662f tomcat engine \u4e2d\u7684\u9ed8\u8ba4 Host \u7ec4\u4ef6 localhost \u63d0\u4f9b\u7684\u9875\u9762\uff0c\u8be5\u8d44\u6e90\u7684\u8def\u5f84\u4e3a ",(0,o.kt)("inlineCode",{parentName:"p"},"$catalina_home/webapps/ROOT/index.jsp"),"\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'<Host name="localhost"  appBase="webapps"\n      unpackWARs="true" autoDeploy="true">\n')),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tomcat default",src:t(55547).Z,width:"918",height:"407"})),(0,o.kt)("p",null,"\u8fd9 3 \u4e2a\u6309\u94ae\u5bf9\u5e94\u7684\u662f tomcat \u9ed8\u8ba4\u5c31\u5b89\u88c5\u597d\u7684 3 \u4e2a\u7ba1\u7406\u5de5\u5177\uff1a\u72b6\u6001\u67e5\u770b\u5de5\u5177\u3001",(0,o.kt)("strong",{parentName:"p"},"webapp \u7ba1\u7406\u5de5\u5177"),"\u548c\u865a\u62df\u4e3b\u673a\u7ba1\u7406\u5de5\u5177\u3002\u5176\u4e2d\u524d 2 \u4e2a\u5de5\u5177\u90fd\u7531\u540d\u4e3a manager \u7684 webapp \u63d0\u4f9b\uff0c\u7b2c\u4e09\u4e2a\u5de5\u5177\u7531\u540d\u4e3a host-manager \u7684 webapp \u63d0\u4f9b\uff0c\u56e0\u6b64\u540e\u6587\u5c06\u8ba4\u4e3a\u53ea\u63d0\u4f9b\u4e86\u4e24\u4e2a\u7ba1\u7406\u7a0b\u5e8f\uff1amanager \u548c host-manager\u3002\u5b83\u4eec\u7684\u8def\u5f84\u90fd\u5728 webapps \u76ee\u5f55\u4e0b\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 tomcat]# ls webapps/\ncharman  docs  examples  host-manager  manager  ROOT\n[root@fname1 tomcat]#\n")),(0,o.kt)("p",null,'\u70b9\u51fb\u8fd9 3 \u4e2a\u6309\u94ae\uff0c\u5206\u522b\u53ef\u4ee5\u8fdb\u5165\u5bf9\u5e94\u7684\u7ba1\u7406\u754c\u9762\u3002\u4f46\u7b2c\u4e00\u6b21\u70b9\u51fb\uff0c\u4f1a\u51fa\u73b0 "403 Access denied" \u9519\u8bef\uff0c\u5e76\u63d0\u793a\u8981\u53bb\u914d\u7f6e conf/tomcat-users.xml\uff0c\u6dfb\u52a0\u76f8\u5e94\u6743\u9650\u7684\u89d2\u8272\u3002'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tomcat default access",src:t(54150).Z,width:"918",height:"518"})),(0,o.kt)("p",null,'\u5bf9\u4e8e\u8fd9\u4e24\u4e2a\u7ba1\u7406\u7a0b\u5e8f\u800c\u8a00\uff0c\u603b\u5171\u6709\u4ee5\u4e0b\u51e0\u79cd\u9884\u5b9a\u4e49\u89d2\u8272\uff1a\u5176\u4e2d\u540e\u4e24\u9879\u89d2\u8272\u662f\u4e0a\u4e00\u56fe\u4e2d "Host Manager" \u9700\u8981\u7684\u89d2\u8272\u3002'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"manager-gui - allows access to the HTML GUI and the status pages"),(0,o.kt)("li",{parentName:"ul"},"manager-script - allows access to the text interface and the status pages"),(0,o.kt)("li",{parentName:"ul"},"manager-jmx - allows access to the JMX proxy and the status pages"),(0,o.kt)("li",{parentName:"ul"},"manager-status - allows access to the status pages only"),(0,o.kt)("li",{parentName:"ul"},"admin-gui - allows access to the HTML GUI"),(0,o.kt)("li",{parentName:"ul"},"admin-script - allows access to the text interface")),(0,o.kt)("p",null,"\u5bf9\u4e8e\u4f7f\u7528 manager-gui \u89d2\u8272\u7684\u7528\u6237\uff0c\u5f3a\u70c8\u5efa\u8bae\u4e0d\u8981\u518d\u4e3a\u5176\u8d4b\u4e88 manager-script \u548c manager-jmx \u89d2\u8272\u3002"),(0,o.kt)("p",null,"\u8fd9\u4e9b\u89d2\u8272\u540d\u79f0 rolename \u5df2\u7ecf\u9884\u5b9a\u4e49\u5728\u5404\u7ba1\u7406\u7a0b\u5e8f\u5185\u7684 web.xml \u4e2d\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 tomcat]# grep 'role-name' webapps/manager/WEB-INF/web.xml\n       <role-name>manager-gui</role-name>\n       <role-name>manager-script</role-name>\n       <role-name>manager-jmx</role-name>\n       <role-name>manager-gui</role-name>\n       <role-name>manager-script</role-name>\n       <role-name>manager-jmx</role-name>\n       <role-name>manager-status</role-name>\n    <role-name>manager-gui</role-name>\n    <role-name>manager-script</role-name>\n    <role-name>manager-jmx</role-name>\n    <role-name>manager-status</role-name>\n[root@fname1 tomcat]# grep 'role-name' webapps/host-manager/WEB-INF/web.xml \n       <role-name>admin-script</role-name>\n       <role-name>admin-gui</role-name>\n    <role-name>admin-gui</role-name>\n    <role-name>admin-script</role-name>\n[root@fname1 tomcat]#\n")),(0,o.kt)("p",null,"\u56e0\u6b64\uff0c\u5728\u5404\u7ba1\u7406\u7a0b\u5e8f\u7684\u8eab\u4efd\u9a8c\u8bc1\u6587\u4ef6\u4e2d\u53ef\u4ee5\u76f4\u63a5\u5f15\u7528\u8fd9\u51e0\u4e2a\u540d\u79f0\u3002\u90a3\u4e48\u5982\u4f55\u914d\u7f6e\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f7f\u5f97\u53ea\u6709\u901a\u8fc7\u9a8c\u8bc1\u7684\u7528\u6237\u624d\u80fd\u4f7f\u7528\u8fd9\u4e9b\u7ba1\u7406\u5de5\u5177\uff1f\u6839\u636e\u524d\u9762\u7684\u9519\u8bef\u9875\u9762\u63d0\u793a\uff0c\u53ea\u9700\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"$catalina_home/conf/tomcat-user.xml")," \u4e2d\u914d\u7f6e\u5373\u53ef\u3002"),(0,o.kt)("p",null,"\u4f8b\u5982\uff0c\u4f7f\u7528\u9884\u5b9a\u4e49\u597d\u7684\u89d2\u8272\u8fdb\u884c\u914d\u7f6e\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'[root@fname1 tomcat]# pwd\n/usr/local/tomcat\n[root@fname1 tomcat]# cat conf/tomcat-users.xml\n<?xml version="1.0" encoding="UTF-8"?>\n<tomcat-users xmlns="http://tomcat.apache.org/xml"\n              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n              xsi:schemaLocation="http://tomcat.apache.org/xml tomcat-users.xsd"\n              version="1.0">\n  <user username="brinnatt" password="welcome" roles="manager-gui,admin-gui"/>\n</tomcat-users>\n[root@fname1 tomcat]#\n')),(0,o.kt)("p",null,"\u518d\u91cd\u542f tomcat \u5373\u53ef\u3002\u4f46\u662f\uff0c\u8fd9\u6837\u7684\u914d\u7f6e\u5728 tomcat 7 \u7248\u672c\u80fd\u6210\u529f\uff0c\u5728 tomcat8 \u4e0a\u4e0d\u4f1a\u6210\u529f\u3002\u67e5\u770b catalina.home\u4e0b\u7684 .RUNING \u6587\u4ef6\uff0c\u63d0\u793a\u5982\u4e0b\u5185\u5bb9\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'For example, the standard manager web application can be kept in\nCATALINA_HOME/webapps/manager and loaded into CATALINA_BASE by using\nthe following trick:\n\n * Copy the CATALINA_HOME/webapps/manager/META-INF/context.xml\n   file as CATALINA_BASE/conf/Catalina/localhost/manager.xml\n\n * Add docBase attribute as shown below.\n\nThe file will look like the following:\n\n  <?xml version="1.0" encoding="UTF-8"?>\n  <Context docBase="${catalina.home}/webapps/manager"\n    antiResourceLocking="false" privileged="true" >\n    <Valve className="org.apache.catalina.valves.RemoteAddrValve"\n         allow="127\\.0\\.0\\.1" />\n  </Context>\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5b83\u8981\u6c42\u6211\u4eec\u5c06 CATALINA","_","HOME/webapps/manager/META-INF/context.xml \u590d\u5236\u5230 CATALINA","_","BASE/conf/Catalina/localhost/manager.xml\uff0c\u5e76\u4fee\u6539\u5176\u5185\u5bb9\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u65e2\u7136\u77e5\u9053\u4e86\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u6240\u4ee5\u5728 tomcat 8 \u4e2d\u4e5f\u5c31\u4e0d\u7528\u53bb\u590d\u5236\u4e86\uff0c\u8fd9\u91cc\u76f4\u63a5\u521b\u5efa\u6587\u4ef6\u5e76\u5411\u91cc\u9762\u5199\u5165\u5185\u5bb9\u5373\u53ef\uff0c\u6ce8\u610f\u6587\u4ef6\u540d\u4e00\u5b9a\u4e0d\u80fd\u9519\u8bef\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'[root@fname1 tomcat]# mkdir -p conf/Catalina/localhost\n[root@fname1 tomcat]# cat conf/Catalina/localhost/manager.xml\n<?xml version="1.0" encoding="UTF-8"?>\n<Context docBase="${catalina.home}/webapps/manager" \n        antiResourceLocking="false" privileged="true" >\n  <Valve className="org.apache.catalina.valves.RemoteAddrValve"\n         allow="^.*$" />\n</Context>\n[root@fname1 tomcat]#\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u6b64\u5904 allow \u5b9a\u4e49\u7684\u662f\u5141\u8bb8\u6240\u6709\u4e3b\u673a\u8bbf\u95ee\u6b64\u7ba1\u7406\u72b6\u6001\u9875\u9762\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"li"},'allow="127\\.0\\.0\\.1"')," \u5b9a\u4e49\u53ea\u6709\u672c\u673a\u624d\u80fd\u8bbf\u95ee\uff0c",(0,o.kt)("inlineCode",{parentName:"li"},'allow="192\\.168\\.100.*"')," \u5b9a\u4e49\u53ea\u6709 192.168.100 \u7f51\u6bb5\u7684\u4e3b\u673a\u624d\u80fd\u8bbf\u95ee\u3002")),(0,o.kt)("p",null,"\u5b9a\u4e49\u4e86 manager.xml \u6587\u4ef6\u540e\uff0c\u4e5f\u4ec5\u80fd\u8bbf\u95ee\u524d\u4e24\u4e2a\u9875\u9762\uff0c\u56e0\u4e3a\u524d\u4e24\u4e2a\u9875\u9762\u662f manager \u7a0b\u5e8f\u63d0\u4f9b\u7684\uff0c\u8bbf\u95ee\u65f6\u9700\u8981\u5728 uri \u4e2d\u4f7f\u7528 /manager\uff0c\u6216\u76f4\u63a5\u70b9\u51fb\u4e0a\u9762\u7684\u6309\u94ae\u3002\u4ee5\u4e0b\u662f\u7ba1\u7406 webapp \u7684\u56fe\u5f62\u7ba1\u7406\u5de5\u5177\u9875\u9762\uff0c\u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u53ef\u4ee5\u8f7b\u677e\u7ba1\u7406\u67d0\u4e2a webapp \u7684\u542f\u52a8\u3001\u505c\u6b62\u3001\u90e8\u7f72\u3001\u91cd\u65b0\u90e8\u7f72\u3001\u90e8\u7f72\u672c\u5730\u9879\u76ee\u7b49\u3002"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tomcat manager app",src:t(76501).Z,width:"918",height:"945"})),(0,o.kt)("p",null,"\u7b2c\u4e09\u4e2a\u9875\u9762\u662f\u7ba1\u7406\u865a\u62df\u4e3b\u673a\u7684\u56fe\u5f62\u9875\u9762\uff0c\u8bbf\u95ee\u65f6\u7684 uri \u90e8\u5206\u662f /host-manager\u3002\u4f46\u8981\u4f7f\u7528\u5b83\uff0c\u4e5f\u9700\u8981\u5c06 context.xml \u590d\u5236\u5230\u7279\u5b9a\u8def\u5f84\u4e0b\uff0c\u5e76\u4fee\u6539\u4e00\u70b9\u5185\u5bb9\u3002\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@fname1 tomcat]# cp conf/Catalina/localhost/manager.xml conf/Catalina/localhost/host-manager.xml\n[root@fname1 tomcat]# sed -i s/manager/host-manager/ conf/Catalina/localhost/host-manager.xml\n")),(0,o.kt)("p",null,"\u4e0b\u56fe\u662f\u865a\u62df\u4e3b\u673a\u7684\u7ba1\u7406\u9875\u9762\uff1a"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tomcat host-manager",src:t(38683).Z,width:"918",height:"810"})),(0,o.kt)("p",null,"\u4ee5\u4e0a\u662f\u5c06\u6587\u4ef6 manager.xml \u6216 host-manager.xml \u590d\u5236\u5230 CATALINA","_","BASE/conf/Catalina/localhost/ \u4e0b\uff0c\u8fd9\u662f\u7ba1\u7406\u6240\u6709\u865a\u62df\u4e3b\u673a\uff0c\u5982\u679c\u60f3\u8981\u5355\u72ec\u7ba1\u7406\u67d0\u865a\u62df\u4e3b\u673a\uff0c\u5219\u53ef\u4ee5\u5c06\u6587\u4ef6\u6309\u7167 ",(0,o.kt)("inlineCode",{parentName:"p"},"$CATALINA_BASE/conf/[enginename]/[hostname]")," \u8def\u5f84\u8fdb\u884c\u590d\u5236\u3002"))}k.isMDXComponent=!0},54150:function(e,a,t){a.Z=t.p+"assets/images/tomcat default access-721e4afd6ea3b9b0043c41d6c2d0eedc.png"},55547:function(e,a,t){a.Z=t.p+"assets/images/tomcat default-3a8f9a46bdf02bcfec7c1597715b5db1.png"},38683:function(e,a,t){a.Z=t.p+"assets/images/tomcat host-manager-7b30ca0af0ab49a6ccac8b6b4911cc1c.png"},76501:function(e,a,t){a.Z=t.p+"assets/images/tomcat manager app-e5435dc916c30ca75327914dd293e884.png"},91939:function(e,a,t){a.Z=t.p+"assets/images/tomcat versions-c91da61e2abf12783caddb24671111c8.png"},24705:function(e,a,t){a.Z=t.p+"assets/images/tomcat web-5d83b89aa08a3ca4391d57394b39ca58.png"},16174:function(e,a,t){a.Z=t.p+"assets/images/tomcat-0e284dfc1a308ca76348fe642ca79dcc.png"}}]);