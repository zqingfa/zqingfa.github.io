"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9343],{3905:function(t,e,a){a.d(e,{Zo:function(){return d},kt:function(){return s}});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),m=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},d=function(t){var e=m(t.components);return n.createElement(p.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},k=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,p=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),k=m(a),s=r,N=k["".concat(p,".").concat(s)]||k[s]||u[s]||l;return a?n.createElement(N,i(i({ref:e},d),{},{components:a})):n.createElement(N,i({ref:e},d))}));function s(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=k;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var m=2;m<l;m++)i[m]=a[m];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},96616:function(t,e,a){a.r(e),a.d(e,{assets:function(){return d},contentTitle:function(){return p},default:function(){return s},frontMatter:function(){return o},metadata:function(){return m},toc:function(){return u}});var n=a(83117),r=a(80102),l=(a(67294),a(3905)),i=["components"],o={id:"linux-test-3",slug:"/linux-test-3",title:"\u7b2c 3 \u7ae0 FIO \u78c1\u76d8\u6027\u80fd\u6d4b\u8bd5",authors:"zhangqf",keywords:["linux","fio"]},p=void 0,m={unversionedId:"linux/test/linux-test-3",id:"linux/test/linux-test-3",title:"\u7b2c 3 \u7ae0 FIO \u78c1\u76d8\u6027\u80fd\u6d4b\u8bd5",description:"fio \u662f\u4e00\u4e2a\u5f00\u6e90\u538b\u529b\u6d4b\u8bd5\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u6765\u6d4b\u8bd5\u786c\u76d8 io \u6027\u80fd\u3002\u8fd9\u4e2a\u5de5\u5177\u7684\u53ef\u5b9a\u5236\u6027\u975e\u5e38\u5f3a\uff0c\u53ef\u4ee5\u6839\u636e\u6d4b\u8bd5\u8005\u7684\u60f3\u6cd5\u8fdb\u884c\u5404\u79cd\u6df7\u5408 io \u6d4b\u8bd5\uff0c\u5b83\u652f\u6301 13 \u79cd\u4e0d\u540c\u7c7b\u578b io \u5f15\u64ce\uff08libaio\u3001sync\u3001mmap\u3001posixaio\u3001network \u7b49\u7b49\uff09\u3002\u5b83\u53ef\u4ee5\u6d4b\u8bd5\u5757\u8bbe\u5907\u6216\u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u591a\u7ebf\u7a0b\u6216\u8fdb\u7a0b\u6a21\u62df\u5404\u79cd io \u64cd\u4f5c\uff0c\u53ef\u4ee5\u6d4b\u8bd5\u7edf\u8ba1 iops\u3001\u5e26\u5bbd\u548c\u65f6\u5ef6\u7b49\u6027\u80fd\u3002\u6211\u4eec\u4e3b\u8981\u4f7f\u7528 fio \u5de5\u5177\u8fdb\u884c\u5b58\u50a8\u6027\u80fd\u6d4b\u8bd5\u3002",source:"@site/docs/linux/test/\u7b2c 3 \u7ae0 FIO \u78c1\u76d8\u6027\u80fd\u6d4b\u8bd5.md",sourceDirName:"linux/test",slug:"/linux-test-3",permalink:"/docs/linux-test-3",draft:!1,tags:[],version:"current",frontMatter:{id:"linux-test-3",slug:"/linux-test-3",title:"\u7b2c 3 \u7ae0 FIO \u78c1\u76d8\u6027\u80fd\u6d4b\u8bd5",authors:"zhangqf",keywords:["linux","fio"]},sidebar:"linux",previous:{title:"\u7b2c 2 \u7ae0 STREAM \u5185\u5b58\u6d4b\u8bd5",permalink:"/docs/linux-test-2"},next:{title:"\u7b2c 4 \u7ae0 Netperf \u7f51\u7edc\u6d4b\u8bd5",permalink:"/docs/linux-test-4"}},d={},u=[{value:"3.1\u3001\u78c1\u76d8\u6027\u80fd\u57fa\u7840\u77e5\u8bc6",id:"31\u78c1\u76d8\u6027\u80fd\u57fa\u7840\u77e5\u8bc6",level:2},{value:"3.2\u3001fio \u5b89\u88c5",id:"32fio-\u5b89\u88c5",level:2},{value:"3.2.1\u3001\u5b89\u88c5\u524d\u51c6\u5907\u5de5\u4f5c",id:"321\u5b89\u88c5\u524d\u51c6\u5907\u5de5\u4f5c",level:3},{value:"3.2.2\u3001\u5b89\u88c5",id:"322\u5b89\u88c5",level:3},{value:"3.3\u3001\u4f7f\u7528\u6307\u5bfc",id:"33\u4f7f\u7528\u6307\u5bfc",level:2},{value:"3.3.1\u3001\u547d\u4ee4\u884c\u6d4b\u8bd5\u65b9\u6cd5",id:"331\u547d\u4ee4\u884c\u6d4b\u8bd5\u65b9\u6cd5",level:3},{value:"3.3.2\u3001\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f",id:"332\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f",level:3},{value:"3.3.3\u3001\u6d4b\u8bd5\u7ed3\u679c\u5206\u6790",id:"333\u6d4b\u8bd5\u7ed3\u679c\u5206\u6790",level:3},{value:"3.4\u3001\u751f\u4ea7\u6d4b\u8bd5",id:"34\u751f\u4ea7\u6d4b\u8bd5",level:2},{value:"3.4.1\u3001\u786c\u4ef6\u73af\u5883",id:"341\u786c\u4ef6\u73af\u5883",level:3},{value:"3.4.2\u3001\u6d4b\u8bd5\u7ed3\u679c",id:"342\u6d4b\u8bd5\u7ed3\u679c",level:3},{value:"3.5\u3001\u6ce8\u610f\u4e8b\u9879",id:"35\u6ce8\u610f\u4e8b\u9879",level:2},{value:"3.5.1\u3001\u6d4b\u8bd5\u6ce8\u610f\u4e8b\u9879",id:"351\u6d4b\u8bd5\u6ce8\u610f\u4e8b\u9879",level:3},{value:"3.5.2\u3001\u6027\u80fd\u8c03\u4f18\u6ce8\u610f\u4e8b\u9879",id:"352\u6027\u80fd\u8c03\u4f18\u6ce8\u610f\u4e8b\u9879",level:3},{value:"A\u3001\u9644\u5f55",id:"a\u9644\u5f55",level:2},{value:"A1\u3001IOzone \u6d4b\u8bd5\u7b80\u4ecb",id:"a1iozone-\u6d4b\u8bd5\u7b80\u4ecb",level:3},{value:"A2\u3001IOzone \u6d4b\u8bd5\u8bfb\u5199\u6a21\u5f0f",id:"a2iozone-\u6d4b\u8bd5\u8bfb\u5199\u6a21\u5f0f",level:3},{value:"A3\u3001IOzone \u5b89\u88c5",id:"a3iozone-\u5b89\u88c5",level:3},{value:"A4\u3001IOzone \u4e3b\u8981\u53c2\u6570\u8bf4\u660e",id:"a4iozone-\u4e3b\u8981\u53c2\u6570\u8bf4\u660e",level:3},{value:"A5\u3001IOzone \u6d4b\u8bd5\u7528\u4f8b",id:"a5iozone-\u6d4b\u8bd5\u7528\u4f8b",level:3}],k={toc:u};function s(t){var e=t.components,o=(0,r.Z)(t,i);return(0,l.kt)("wrapper",(0,n.Z)({},k,o,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"fio \u662f\u4e00\u4e2a\u5f00\u6e90\u538b\u529b\u6d4b\u8bd5\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u6765\u6d4b\u8bd5\u786c\u76d8 io \u6027\u80fd\u3002\u8fd9\u4e2a\u5de5\u5177\u7684\u53ef\u5b9a\u5236\u6027\u975e\u5e38\u5f3a\uff0c\u53ef\u4ee5\u6839\u636e\u6d4b\u8bd5\u8005\u7684\u60f3\u6cd5\u8fdb\u884c\u5404\u79cd\u6df7\u5408 io \u6d4b\u8bd5\uff0c\u5b83\u652f\u6301 13 \u79cd\u4e0d\u540c\u7c7b\u578b io \u5f15\u64ce\uff08libaio\u3001sync\u3001mmap\u3001posixaio\u3001network \u7b49\u7b49\uff09\u3002\u5b83\u53ef\u4ee5\u6d4b\u8bd5\u5757\u8bbe\u5907\u6216\u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u591a\u7ebf\u7a0b\u6216\u8fdb\u7a0b\u6a21\u62df\u5404\u79cd io \u64cd\u4f5c\uff0c\u53ef\u4ee5\u6d4b\u8bd5\u7edf\u8ba1 iops\u3001\u5e26\u5bbd\u548c\u65f6\u5ef6\u7b49\u6027\u80fd\u3002\u6211\u4eec\u4e3b\u8981\u4f7f\u7528 fio \u5de5\u5177\u8fdb\u884c\u5b58\u50a8\u6027\u80fd\u6d4b\u8bd5\u3002"),(0,l.kt)("h2",{id:"31\u78c1\u76d8\u6027\u80fd\u57fa\u7840\u77e5\u8bc6"},"3.1\u3001\u78c1\u76d8\u6027\u80fd\u57fa\u7840\u77e5\u8bc6"),(0,l.kt)("p",null,"\u867d\u7136\u73b0\u5728\u5927\u8303\u56f4\u7684\u4f7f\u7528 SSD\uff0c\u4f46\u662f\u5728\u4e00\u4e9b\u5b58\u50a8\u7cfb\u7edf\u4e2d HDD \u8fd8\u662f\u5927\u6279\u91cf\u88ab\u4f7f\u7528\uff0c\u6bd5\u7adf\u4fbf\u5b9c\uff1bSSD \u56fa\u6001\u786c\u76d8\u901a\u8fc7\u7535\u5b58\u50a8\uff0cHDD \u673a\u68b0\u786c\u76d8\u901a\u8fc7\u673a\u68b0\u8fd0\u52a8\u5b58\u50a8\uff0c\u5f88\u660e\u663e SSD \u5728\u5b58\u50a8\u6027\u80fd\u4e0a\u6709\u5148\u5929\u4f18\u52bf\uff1b\u5f71\u54cd SSD \u6027\u80fd\u7684\u4e3b\u8981\u56e0\u7d20\u6709\u5b58\u50a8\u4e3b\u63a7\u82af\u7247\u7684\u8bbe\u8ba1\u3001\u95ea\u5b58\u5355\u5143\u8bbe\u8ba1\uff0c\u5f53\u7136\u8fd8\u6709\u5de5\u827a\u6c34\u5e73\u3002\u76ee\u524d SSD \u4e3b\u63a7\u82af\u7247\u8bbe\u8ba1\u6700\u524d\u6cbf\u7684\u6280\u672f\u5728 Intel \u624b\u4e0a\uff0cIntel SSD \u6027\u80fd\u662f\u76ee\u524d\u6700\u597d\u7684\u3002\u5173\u4e8e SSD \u66f4\u591a\u5e38\u8bc6\u53ef\u4ee5\u53c2\u89c1 ",(0,l.kt)("a",{parentName:"p",href:"https://www.zhangqf.com/primary/%e7%ac%ac-5-%e7%ab%a0-linux-%e7%a3%81%e7%9b%98%e7%ae%a1%e7%90%86/#52%E3%80%81%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98"},"Linux Disk Manage SSD"),"\u3002"),(0,l.kt)("p",null,"\u9488\u5bf9 HDD \u673a\u68b0\u786c\u76d8\u7684\u6027\u80fd\uff0c\u6570\u636e\u7684\u8bfb\u5199\u6709 95% \u7684\u8017\u65f6\u662f\u6d88\u8017\u5728\u673a\u68b0\u8fd0\u52a8\u4e0a\uff0c\u4e00\u6b21\u6570\u636e\u64cd\u4f5c\u4e3a\u4e00\u6b21 IO \u670d\u52a1\uff0c\u5b83\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u73af\u8282\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5bfb\u9053\u65f6\u95f4\uff0c\u662f\u6307\u5c06\u8bfb\u5199\u78c1\u5934\u79fb\u52a8\u81f3\u6b63\u786e\u7684\u78c1\u9053\u4e0a\u6240\u9700\u8981\u7684\u65f6\u95f4\u3002\u5bfb\u9053\u65f6\u95f4\u8d8a\u77ed\uff0cI/O \u64cd\u4f5c\u8d8a\u5feb\uff0c\u76ee\u524d\u78c1\u76d8\u7684\u5e73\u5747\u5bfb\u9053\u65f6\u95f4\u4e00\u822c\u5728 3\uff0d15ms\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u65cb\u8f6c\u5ef6\u8fdf\uff0c\u662f\u6307\u76d8\u7247\u65cb\u8f6c\u5c06\u8bf7\u6c42\u6570\u636e\u6240\u5728\u6247\u533a\u79fb\u81f3\u8bfb\u5199\u78c1\u5934\u4e0b\u65b9\u6240\u9700\u8981\u7684\u65f6\u95f4\u3002\u65cb\u8f6c\u5ef6\u8fdf\u53d6\u51b3\u4e8e\u78c1\u76d8\u8f6c\u901f\uff0c\u901a\u5e38\u4f7f\u7528\u78c1\u76d8\u65cb\u8f6c\u4e00\u5468\u6240\u9700\u65f6\u95f4\u7684 1/2 \u8868\u793a\u3002\u6bd4\u5982\uff0c7200rpm \u7684\u78c1\u76d8\u5e73\u5747\u65cb\u8f6c\u5ef6\u8fdf\u5927\u7ea6\u4e3a 60","*","1000/7200/2 = 4.17ms"),(0,l.kt)("li",{parentName:"ol"},"\u5185\u90e8\u63a5\u53e3\u4f20\u9001\u65f6\u95f4\uff0c\u5373\u4ece\u78c1\u76d8\u76d8\u7247\u5230\u5185\u90e8\u78c1\u76d8\u7f13\u51b2\u4f20\u9001\u7684\u65f6\u95f4\uff0c\u91cf\u7ea7\u662f 440 \u5fae\u79d2\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5916\u90e8\u63a5\u53e3\u4f20\u8f93\u65f6\u95f4\uff0c\u5373\u4ece\u78c1\u76d8\u7f13\u51b2\u5230\u63a5\u53e3\u4f20\u9001\u7684\u65f6\u95f4\uff0c\u91cf\u7ea7\u662f 110 \u5fae\u79d2\u3002")),(0,l.kt)("p",null,"\u5bf9\u4e8e\u4e00\u4e2a\u786e\u5b9a\u7684\u78c1\u76d8\uff0c\u65cb\u8f6c\u5ef6\u8fdf\u4fdd\u6301\u4e0d\u53d8\uff0c\u800c\u5185\u90e8\u63a5\u53e3\u4f20\u9001\u65f6\u95f4\u548c\u5916\u90e8\u63a5\u53e3\u4f20\u8f93\u65f6\u95f4\u5fae\u79d2\u7ea7\u522b\uff0c\u57fa\u672c\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\uff0c\u90a3\u4e48\u5f71\u54cd HDD \u6027\u80fd\u6838\u5fc3\u5c31\u662f\u5bfb\u9053\u65f6\u95f4\uff1b"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5bf9\u78c1\u76d8\u6027\u80fd\u7684\u5ea6\u91cf\u6709\u4e24\u4e2a\u6307\u6807\uff1aIOPS\uff0cIO \u541e\u5410/\u5e26\u5bbd\uff1b")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"IOPS \u6307\u7684\u662f\u6bcf\u79d2\u53ef\u4ee5\u5b8c\u6210\u7684 IO \u670d\u52a1\u7684\u6b21\u6570\uff0c\u4e00\u6b21 IO \u670d\u52a1\u4e3b\u8981\u7684\u8017\u65f6\u662f\u5bfb\u9053\u65f6\u95f4\u4e0a\uff0c\u5982\u679c\u662f\u5927\u91cf\u7684\u968f\u673a IO\uff0c\u90a3\u4e48\u6bcf\u6b21\u5bfb\u9053\u65f6\u95f4\u90fd\u5904\u4e8e\u4e0a\u9650\u503c\uff0cIOPS \u4e0b\u964d\uff1b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7406\u8bba\u4e0a\u4e0b\u9650 = ","[","1000ms/(3ms+4.17ms)\uff0c1000ms/(15ms+4ms)","]"," = ","[","139\uff0c53","]","\uff1b\u4f46\u662f\u771f\u5b9e\u73af\u5883\u4e0b\uff0c\u4e00\u4e2a\u78c1\u76d8 IOPS \u7684\u503c\u53d7\u6bcf\u6b21 IO \u8bfb\u5199\u7684\u6570\u636e\u5927\u5c0f\uff0c\u6bd4\u5982 512B\uff0c4k\uff0c1M \u7b49\u5404\u4e2a\u503c\u4e0b IOPS \u80af\u5b9a\u662f\u6709\u533a\u522b\u7684\uff1b"))),(0,l.kt)("li",{parentName:"ol"},"IO \u541e\u5410\u8868\u793a\u5728\u6307\u5b9a\u65f6\u95f4\u5185\uff0c\u5b8c\u6210\u7684 IO \u8bfb\u5199\u6570\u636e\u5b57\u8282\u6570\uff0c\u5b83\u7684\u503c\u548c\u6bcf\u6b21 IO \u8bfb\u5199\u7684\u6570\u636e\u5927\u5c0f\u6709\u5bc6\u5207\u5173\u7cfb\uff0c\u4e5f\u4ece\u800c\u4f1a\u5f71\u54cd IOPS\uff0c\u6bd4\u5982\u6bcf\u6b21\u8bfb\u5199\u6570\u636e\u5757\u8f83\u5927\uff0c\u4ece\u800c\u6700\u5927\u5316\u7684\u964d\u4f4e\u4e86\u5bfb\u9053\u5e26\u6765\u7684\u5f00\u9500\uff0c\u4ece\u800c\u63d0\u9ad8\u541e\u5410\uff0c\u4f46\u662f\u6b64\u65f6 IOPS \u5c31\u4f1a\u51cf\u5c0f\uff1b")),(0,l.kt)("p",null,"\u5b9e\u4f8b\u8bf4\u660e\uff1a\u5199\u5165 10000 \u4e2a\u5927\u5c0f\u4e3a 1kb \u7684\u6587\u4ef6\u5230\u786c\u76d8\u4e0a\uff0c\u8017\u8d39\u7684\u65f6\u95f4\u8981\u6bd4\u5199\u5165 10 \u4e2a 1mb \u5927\u5c0f\u7684\u6587\u4ef6\u591a\u5f97\u591a\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u867d\u7136\u6570\u636e\u603b\u91cf\u90fd\u662f 10mb\uff0c\u4f46\u662f 10000 \u4e2a 1kb \u5927\u5c0f\u7684\u6587\u4ef6\u5728\u78c1\u9053\u4e0a\u6570\u636e\u5206\u5e03\u4e0d\u8fde\u7eed\uff0c\u53ef\u80fd\u9700\u8981\u4e0a\u5343\u4e2a IOPS \u624d\u80fd\u5b8c\u6210\u6570\u636e\u7684\u5168\u90e8\u8bfb\u53d6\uff0c\u5927\u5927\u589e\u52a0\u4e86\u5bfb\u9053\u65f6\u95f4\uff0c\u8017\u65f6\u957f\u3002",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u8fd9\u79cd\u60c5\u51b5\u7528\u6765\u6307\u5bfc HDD IOPS \u6027\u80fd\u6d4b\u8bd5\uff0c\u5373\u5c0f\u6570\u636e\u5757\u591a\u8bf7\u6c42\u6b21\u6570\u6d4b\u8bd5\u3002")))),(0,l.kt)("li",{parentName:"ul"},"\u76f8\u6bd4\u8f83\u800c\u8a00\uff0c10 \u4e2a 1mb \u5927\u5c0f\u7684\u6587\u4ef6\u5728\u78c1\u9053\u4e0a\u6570\u636e\u5206\u5e03\u8fde\u7eed\u6027\u66f4\u597d\uff0c\u53ef\u80fd\u53ea\u9700\u8981\u5341\u51e0\u4e2a IOPS \u5c31\u80fd\u5b8c\u6210\u6570\u636e\u7684\u5168\u90e8\u8bfb\u53d6\uff0c\u5927\u5927\u964d\u4f4e\u4e86\u5bfb\u9053\u65f6\u95f4\uff0c\u8017\u65f6\u5c11\u3002",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u8fd9\u79cd\u60c5\u51b5\u7528\u6765\u6307\u5bfc HDD IO \u541e\u5410/\u5e26\u5bbd\u6027\u80fd\u6d4b\u8bd5\uff0c\u5373\u5927\u6570\u636e\u5757\u5c11\u8bf7\u6c42\u6b21\u6570\u6d4b\u8bd5\u3002"))))),(0,l.kt)("p",null,"\u5bf9\u78c1\u76d8\u6027\u80fd IOPS \u548c IO \u541e\u5410\u7684\u8ffd\u6c42\u4e0e\u4e1a\u52a1\u6709\u5bc6\u5207\u5173\u7cfb\uff0c\u6bd4\u5982\u5927\u6587\u4ef6\u5b58\u50a8\u5e0c\u671b\u541e\u5410\u53ef\u4ee5\u505a\u5230\u6700\u9ad8\uff0c\u800c\u5c0f\u6587\u4ef6\u6216\u968f\u673a\u8bfb\u5199\u7684\u4e1a\u52a1\u66f4\u52a0\u8ffd\u6c42 IOPS\uff1b\u5982\u679c\u4e1a\u52a1\u5bf9\u541e\u5410\u548c IOPS \u90fd\u6709\u4e00\u5b9a\u4f9d\u8d56\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u627e\u5230\u4e00\u4e2a\u5408\u9002\u7684 blocksize \u6765\u8bbe\u7f6e\u6bcf\u6b21 IO \u5927\u5c0f\uff0c\u4ece\u800c\u5728 IOPS \u548c\u541e\u5410\u4e4b\u95f4\u5747\u8861\uff0c\u5373\uff08IOPS \xd7 block","_","size = IO \u541e\u5410\uff09\uff1b"),(0,l.kt)("p",null,"\u63d0\u4f9b IO \u6027\u80fd\u7684\u65b9\u6cd5\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"IO \u5408\u5e76\uff0c\u5373\u5c06\u591a\u4e2a IO \u8bf7\u6c42\u8fdb\u884c\u5408\u5e76\uff1b"),(0,l.kt)("li",{parentName:"ol"},"IO \u62c6\u5c01\uff0c\u91c7\u7528 raid \u7b49\u78c1\u76d8\u9635\u5217\uff0c\u5c06\u4e00\u4e2a\u666e\u901a IO \u8bf7\u6c42\uff0c\u5e76\u53d1\u7684\u5206\u53d1\u5230\u591a\u4e2a\u7269\u7406\u78c1\u76d8\uff0c\u63d0\u4f9b IO \u541e\u5410\uff1b"),(0,l.kt)("li",{parentName:"ol"},"IO \u5927 cache\uff0c\u6bcf\u6b21 IO \u5199\u64cd\u4f5c\u90fd\u4e0d\u76f4\u63a5\u5199\u5230\u7269\u7406\u8bbe\u5907\uff0c\u800c\u662f\u5b58\u50a8\u5728 IO cache \u4e2d\uff0c\u76f4\u5230 cache \u6ee1\u4e86\u518d\u66f4\u65b0\u5230\u78c1\u76d8\u8bbe\u5907\u4e2d\uff1b"),(0,l.kt)("li",{parentName:"ol"},"IO \u9884\u8bfb Buffer\uff0c\u901a\u8fc7 IO \u9884\u5224\u8bfb\uff0c\u867d\u7136\u4e00\u6b21\u53ea\u8bfb 4k\uff0c\u4f46\u662f\u9884\u5224 512k \u5230 buffer\uff0c\u5f53\u7136\u8fd9\u4e2a\u5bf9 4k \u4ee5\u4e0b\u7684\u5e94\u7528\u6765\u8bf4\u662f\u4e00\u4e2a\u5751\u3002")),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"NOTE\uff1a\u5728\u8ba1\u7b97\u673a\u7a0b\u5e8f\u8bbe\u8ba1\u5f53\u4e2d\uff0c\u5f80\u5f80\u4ece\u65f6\u95f4\u5c40\u90e8\u6027\u3001\u7a7a\u95f4\u5c40\u90e8\u6027\u53ca\u7f13\u5b58\u547d\u4e2d\u7387\u51e0\u4e2a\u89d2\u5ea6\u5bf9\u7a0b\u5e8f\u8fdb\u884c\u6027\u80fd\u4f18\u5316\uff0c\u800c\u4e14\u5728\u8ba1\u7b97\u673a\u9886\u57df\uff0c\u8fd9\u79cd\u5c40\u90e8\u6027\u539f\u7406\u90fd\u662f\u901a\u7528\u7684\u3002")),(0,l.kt)("h2",{id:"32fio-\u5b89\u88c5"},"3.2\u3001fio \u5b89\u88c5"),(0,l.kt)("p",null,"fio \u6e90\u7801\u4e0b\u8f7d\u5730\u5740\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/axboe/fio/tags"},"https://github.com/axboe/fio/tags"),"\n\u6839\u636e\u6d4b\u8bd5\u9700\u6c42\uff0c\u9009\u62e9\u5bf9\u5e94\u7684 fio \u7248\u672c\u8fdb\u884c\u6d4b\u8bd5\u3002"),(0,l.kt)("h3",{id:"321\u5b89\u88c5\u524d\u51c6\u5907\u5de5\u4f5c"},"3.2.1\u3001\u5b89\u88c5\u524d\u51c6\u5907\u5de5\u4f5c"),(0,l.kt)("p",null,"\u7531\u4e8e fio \u5de5\u5177\u4e3a\u6e90\u7801\u5f62\u5f0f\uff0c\u9700\u8981\u786e\u8ba4\u7cfb\u7edf\u5b89\u88c5\u6709 gcc \u7f16\u8bd1\u5668\u80fd\u591f\u7528\u6765\u7f16\u8bd1 fio\u3002\u786e\u8ba4\u7cfb\u7edf\u5b89\u88c5\u6709 libaio \u548c libaio-devel\uff0c\u5982\u679c\u6ca1\u6709\u5b89\u88c5\u8fd9\u4e24\u4e2a\u5305\uff0cfio \u5de5\u5177\u4e0d\u80fd\u4f7f\u7528\u5f02\u6b65\u7684 libaio \u5f15\u64ce\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# yum install gcc libaio libaio-devel -y\n[root@arm64v8 ~]# rpm -qa | grep -E "libaio|gcc"\nlibgcc-7.3.0-20190804.h30.ky10.aarch64\ngcc-gfortran-7.3.0-20190804.h30.ky10.aarch64\ngcc-c++-7.3.0-20190804.h30.ky10.aarch64\ngcc-7.3.0-20190804.h30.ky10.aarch64\nlibaio-devel-0.3.111-5.ky10.aarch64\nlibaio-0.3.111-5.ky10.aarch64\n[root@arm64v8 ~]#\n')),(0,l.kt)("h3",{id:"322\u5b89\u88c5"},"3.2.2\u3001\u5b89\u88c5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# git clone https://github.com/axboe/fio.git\n[root@arm64v8 ~]# cd fio/\n[root@arm64v8 fio]# ./configure\n[root@arm64v8 fio]# make\n[root@arm64v8 fio]# make install\ninstall -m 755 -d /usr/local/bin\ninstall fio t/fio-genzipf t/fio-btrace2fio t/fio-dedupe t/fio-verify-state ./tools/fio_generate_plots ./tools/plot/fio2gnuplot ./tools/genfio ./tools/fiologparser.py ./tools/hist/fiologparser_hist.py ./tools/hist/fio-histo-log-pctiles.py ./tools/fio_jsonplus_clat2csv /usr/local/bin\ninstall -m 755 -d /usr/local/man/man1\ninstall -m 644 ./fio.1 /usr/local/man/man1\ninstall -m 644 ./tools/fio_generate_plots.1 /usr/local/man/man1\ninstall -m 644 ./tools/plot/fio2gnuplot.1 /usr/local/man/man1\ninstall -m 644 ./tools/hist/fiologparser_hist.py.1 /usr/local/man/man1\ninstall -m 755 -d /usr/local/share/fio\ninstall -m 644 ./tools/plot/*gpm /usr/local/share/fio/\n[root@arm64v8 fio]#\n[root@arm64v8 fio]# fio -v\nfio-3.29-7-g01686\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5982\u679c\u5728\u5b89\u88c5 fio \u524d\u672a\u5b89\u88c5 libaio \u548c libaio-devel\uff0c\u90a3\u4e48\u5b89\u88c5\u4e86 libaio \u548c libaio-devel \u540e\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u5b89\u88c5 fio\uff0c\u4e0d\u7136\u4e5f\u65e0\u6cd5\u4f7f\u7528\u5f02\u6b65\u5f15\u64ce libaio\u3002\u91cd\u65b0\u7f16\u8bd1\u5b89\u88c5 fio \u65b9\u6cd5\u5982\u4e0b\uff1a\u8fdb\u5165 fio \u76ee\u5f55\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 fio]# make clean\n[root@arm64v8 fio]# ./configure\n[root@arm64v8 fio]# make && make install\n")))),(0,l.kt)("h2",{id:"33\u4f7f\u7528\u6307\u5bfc"},"3.3\u3001\u4f7f\u7528\u6307\u5bfc"),(0,l.kt)("p",null,"fio \u662f\u53ef\u4ee5\u6839\u636e\u6d4b\u8bd5\u8981\u6c42\u914d\u7f6e\u4e0d\u540c\u53c2\u6570\u8fdb\u884c io \u6027\u80fd\u6d4b\u8bd5\u7684\u5de5\u5177\uff0c\u53ef\u914d\u7f6e\u7684\u53c2\u6570\u6709\u4e0a\u767e\u4e2a\uff0c\u51e0\u4e4e\u53ef\u4ee5\u8986\u76d6\u6240\u6709\u7684 io \u6a21\u578b\uff0c\u8be6\u7ec6\u53c2\u6570\u53ef\u67e5\u8be2 fio \u7684\u5b98\u7f51\u83b7\u53d6\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://fio.readthedocs.io/en/latest/fio_doc.html"},"https://fio.readthedocs.io/en/latest/fio","_","doc.html"),"\u3002"),(0,l.kt)("p",null,"\u5b58\u50a8\u6027\u80fd\u6d4b\u8bd5\u4e2d\u5e38\u7528\u7684\u53c2\u6570\u5982\u4e0b\u6240\u793a\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570\u503c"),(0,l.kt)("th",{parentName:"tr",align:null},"\u89e3\u91ca"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"filename"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u5907\u540d\u6216\u6587\u4ef6\u540d",(0,l.kt)("br",null),"\u5982\uff1a\u88f8\u8bbe\u5907 /dev/sdb\uff0c\u6587\u4ef6 /home/test.img"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u6d4b\u8bd5\u5bf9\u8c61\uff0c\u4e00\u822c\u662f\u8bbe\u5907\u6216\u8005\u6587\u4ef6\u3002\u5982\u679c\u60f3\u6d4b\u8bd5\u88f8\u76d8\u8bbe\u5907 /dev/sdb\uff0c\u53ef\u4ee5\u8bbe\u7f6e filename=/dev/sdb\uff1b\u5982\u679c\u60f3\u8981\u6d4b\u8bd5\u6587\u4ef6\u7cfb\u7edf\u6027\u80fd\uff0c\u5219\u53ef\u4ee5\u8bbe\u7f6e filename=/home/test.img")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u6d4b\u8bd5\u540d\u79f0\u3002\u5fc5\u586b\u9879\uff0c\u672c\u5730 fio \u6d4b\u8bd5\u7684\u540d\u79f0\uff0c\u5bf9\u6027\u80fd\u6ca1\u6709\u5f71\u54cd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"rw"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u6709\uff1aread\uff0cwrite\uff0crw\uff0crandread\uff0crandwrite\uff0crandrw"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u6d4b\u8bd5\u7684\u8bfb\u5199\u7c7b\u578b\uff1aread-\u987a\u5e8f\u8bfb\uff0cwrite-\u987a\u5e8f\u5199\uff0crw(readwrite)- \u6df7\u5408\u987a\u5e8f\u8bfb\u5199\uff0crandread- \u968f\u673a\u8bfb\uff0crandwrite-\u968f\u673a\u5199\uff0crandrw-\u6df7\u5408\u968f\u673a\u8bfb\u5199\u3002\u5bf9\u4e8e\u8bfb\u5199\u6df7\u5408\u7c7b\u578b\u6765\u8bf4\uff0c\u9ed8\u8ba4\u8bfb\u5199\u6bd4\u4f8b\u4e3a 1:1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"rwmixwrite",(0,l.kt)("br",null),"rwmixread"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6df7\u5408\u8bfb\u5199\u4e2d\u8bfb\u5199\u5360\u7528\u6bd4\u4f8b\uff0c\u53ef\u9009\u503c\u4e3a","[","0,100","]"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u5728\u6df7\u5408\u8bfb\u5199\u6a21\u5f0f\u4e2d\uff0c\u5199\u6216\u8bfb\u6240\u5360\u7684\u6bd4\u4f8b\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0crwmixread \u503c\u4e3a 10\uff0c\u5219\u8868\u793a\u8bfb\u5199\u6bd4\u4e3a 10:90\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ioengine"),(0,l.kt)("td",{parentName:"tr",align:null},"io \u5f15\u64ce\u9009\u62e9\uff0c\u53ef\u9009\u503c\u6709 sync\u3001libaio\u3001psync\u3001vsync\u3001mmap \u7b49\u7b49"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49 fio \u5982\u4f55\u4e0b\u53d1 io \u8bf7\u6c42\u3002sync\uff1a\u57fa\u672c\u7684 read\u3001write io\u3002 libaio\uff1alinux \u539f\u751f\u7684\u5f02\u6b65 io\uff0clinux \u53ea\u652f\u6301 non-buffer \u60c5\u51b5\u4e0b\u7684\u6392\u961f\u64cd\u4f5c\u3002\u9ed8\u8ba4\u503c\u4e3a psync\uff0c\u8be5\u6a21\u5f0f\u4e3a\u540c\u6b65 io \u6a21\u578b\uff0c\u5f02\u6b65 io \u6a21\u578b libaio\uff0c\u4e00\u822c\u7ed3\u5408 direct=1 \u4f7f\u7528\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"direct"),(0,l.kt)("td",{parentName:"tr",align:null},"0 \u6216 1"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u662f\u5426\u4f7f\u7528 direct io\uff1a\u503c\u4e3a 0\uff0c\u8868\u793a\u4f7f\u7528 buffered io\uff1b\u503c\u4e3a 1\uff0c\u8868\u793a\u4f7f\u7528 direct io\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bs"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5e26\u5355\u4f4d\u6570\u5b57"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49 io \u7684\u5757\u5927\u5c0f\uff0c\u5355\u4f4d\u662f k\uff0cK\uff0cm\uff0cM\u3002\u9ed8\u8ba4\u503c\u4e3a 4k\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"numjobs"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6b63\u6574\u6570"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u6d4b\u8bd5\u7684\u8fdb\u7a0b/\u7ebf\u7a0b\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\uff0c\u5982\u679c\u6307\u5b9a\u4e86 thread \u53c2\u6570\uff0c\u5219\u4f7f\u7528\u5355\u8fdb\u7a0b\u591a\u7ebf\u7a0b\u6a21\u5f0f\uff0c\u5426\u5219\u4f7f\u7528\u591a\u8fdb\u7a0b\u6a21\u5f0f\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"iodepth"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6b63\u6574\u6570"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u6bcf\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u53ef\u4ee5\u540c\u65f6\u4e0b\u53d1\u7684 io \u4efb\u52a1\u6570\uff0c\u9ed8\u8ba4\u4e3a 1\uff0c\u9002\u7528\u4e8e\u5f02\u6b65 io \u573a\u666f\uff0c\u540c\u6b65 io \u573a\u666f\u8981\u7b49\u524d\u4e00\u4e2a io \u4efb\u52a1\u5b8c\u6210\u624d\u80fd\u4e0b\u53d1\u4e0b\u4e00\u4e2a\u4efb\u52a1\uff0c\u6240\u4ee5 iodepth \u5e76\u4e0d\u8d77\u4f5c\u7528\u3002")))),(0,l.kt)("p",null,"\u5176\u4ed6\u76f8\u5173\u53c2\u6570\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570\u503c"),(0,l.kt)("th",{parentName:"tr",align:null},"\u89e3\u91ca"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"size"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6574\u6570"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49 io \u64cd\u4f5c\u7684\u6570\u636e\u91cf\uff0c\u9664\u975e\u6307\u5b9a\u4e86 runtime \u8fd9\u4e2a\u53c2\u6570\uff0cfio \u4f1a\u5c06\u6307\u5b9a\u5927\u5c0f\u7684\u6570\u636e\u91cf\u5168\u90e8\u8bfb\u5199\u5b8c\u6210\uff0c\u624d\u4f1a\u505c\u6b62\u6d4b\u8bd5\u3002",(0,l.kt)("br",null),"\u8be5\u53c2\u6570\u7684\u503c\uff0c\u53ef\u4ee5\u662f\u5e26\u5355\u4f4d\u7684\u6570\u5b57\uff0c\u6bd4\u5982 size=2G\uff0c\u8868\u793a\u8bfb/\u5199\u7684\u6570\u636e\u91cf\u4e3a 2G\uff1b",(0,l.kt)("br",null),"\u4e5f\u53ef\u4ee5\u662f\u767e\u5206\u6bd4\uff0c\u6bd4\u5982 size=20%\uff0c\u8868\u793a\u8bfb\u5199\u7684\u6570\u636e\u91cf\u5360\u8be5\u8bbe\u5907/\u6587\u4ef6\u7684 20% \u7684\u7a7a\u95f4\uff1b",(0,l.kt)("br",null),"\u9664\u4e86\u8868\u793a io \u64cd\u4f5c\u6570\u636e\u91cf\uff0csize \u8fd8\u8868\u793a io \u64cd\u4f5c\u7684\u8303\u56f4\uff0c\u4e0e offset \u914d\u5408\u4e00\u8d77\u8bfb\u5199","[","offset,offset+size","]","\u8303\u56f4\u5185\u7684\u6570\u636e\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"runtime"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6b63\u6574\u6570"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u6d4b\u8bd5\u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002",(0,l.kt)("br",null),"\u5bf9\u4e8e\u6307\u5b9a\u7684\u6587\u4ef6\u8bbe\u5907\uff0c\u5982\u679c\u5728\u6d4b\u8bd5\u65f6\u95f4\u5185\u5b8c\u6210\u4e86\u8bfb\u5199\u64cd\u4f5c\uff0c\u5219\u4f1a\u4fdd\u6301\u76f8\u540c\u7684\u8d1f\u8f7d\u5faa\u73af\u8fdb\u884c\u8bfb\u5199\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ramp","_","time"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6b63\u6574\u6570"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u6d4b\u8bd5\u7684\u70ed\u8eab\u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002\u70ed\u8eab\u65f6\u95f4\u4e0d\u8ba1\u5165\u6d4b\u8bd5\u7edf\u8ba1\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"thinktime"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6b63\u6574\u6570"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u5f53\u4e00\u4e2a io \u5b8c\u6210\u540e\uff0c\u7b49\u5f85\u591a\u5c11\u65f6\u95f4\u518d\u4e0b\u53d1\u53e6\u4e00\u4e2a io\uff0c\u5355\u4f4d\u4e3a\u5fae\u5999\u3002\u4e00\u822c\u7528\u4e8e\u6a21\u62df\u5e94\u7528\u7b49\u5f85\u3001\u5904\u7406\u4e8b\u52a1\u7b49\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"time","_","based"),(0,l.kt)("td",{parentName:"tr",align:null},"NA"),(0,l.kt)("td",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c\u4e3a 0\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u53c2\u6570\uff0c\u5219\u672c\u6b21\u6d4b\u8bd5\u4f1a\u4e00\u76f4\u8fd0\u884c\u5230 runtime \u7ed3\u675f\u4e3a\u6b62\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"offset"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b9a\u4e49\u6d4b\u8bd5\u8d77\u59cb\u4f4d\u7f6e"),(0,l.kt)("td",{parentName:"tr",align:null},"fio \u5728\u786c\u76d8\u6d4b\u8bd5\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u914d\u5408\u987a\u5e8f\u8bfb\u5199\u4f7f\u7528\u3002\u4e0d\u540c\u7684 offset \u5bf9 HDD \u7684\u6027\u80fd\u5f71\u54cd\u5927\uff0c\u5bf9 SSD \u7406\u8bba\u65e0\u5f71\u54cd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"group","_","reporting"),(0,l.kt)("td",{parentName:"tr",align:null},"NA"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bf9\u4e8e\u6d4b\u8bd5\u5e76\u53d1\u6570\u5927\u4e8e 1 \u7684\u60c5\u51b5\uff0c\u5982\u679c\u60f3\u8981\u5c06\u6240\u6709\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6d4b\u8bd5\u7ed3\u679c\u8fdb\u884c\u7edf\u8ba1\uff0c\u8f93\u51fa\u603b\u7684\u6d4b\u8bd5\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u5404\u81ea\u5355\u72ec\u8f93\u51fa\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u53c2\u6570\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cpus","_","allowed"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a cpu \u7684 core"),(0,l.kt)("td",{parentName:"tr",align:null},"fio \u6d4b\u8bd5\u7684\u6240\u6709\u8fdb\u7a0b/\u7ebf\u7a0b\u53ef\u4ee5\u9009\u62e9\u7684 cpu \u6838\uff0c\u53ef\u4ee5\u662f\u5355\u72ec\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u6838\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u8303\u56f4\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"output"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7ed3\u679c\u8f93\u51fa\u8def\u5f84"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7ed3\u679c\u8f93\u51fa\u6587\u4ef6\uff0c\u9ed8\u8ba4\u76f4\u63a5\u628a\u7ed3\u679c\u6253\u5370\u5230\u547d\u4ee4\u884c\uff0c\u8bbe\u7f6e\u540e\u4f1a\u628a\u7ed3\u679c\u5199\u8fdb\u76ee\u6807\u6587\u4ef6\uff0c\u547d\u4ee4\u884c\u5219\u4e0d\u663e\u793a\u7ed3\u679c\u3002")))),(0,l.kt)("h3",{id:"331\u547d\u4ee4\u884c\u6d4b\u8bd5\u65b9\u6cd5"},"3.3.1\u3001\u547d\u4ee4\u884c\u6d4b\u8bd5\u65b9\u6cd5"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u6d4b\u8bd5\u88f8\u76d8\u6027\u80fd"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# fio -name=mytest -filename=/dev/sdb -direct=1 -iodepth=20 -thread -rw=randread -ioengine=libaio -bs=16k -size=5G -numjobs=2 -runtime=300 -group_reporting\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"name=mytest\uff1a\u672c\u6b21\u6d4b\u8bd5\u7684\u540d\u79f0 mytest\uff0c\u81ea\u5df2\u5b9a\u4e49\u3002"),(0,l.kt)("li",{parentName:"ul"},"filename=/dev/sdb\uff1a\u6d4b\u8bd5\u88f8\u76d8\u7684\u540d\u79f0\uff0c\u901a\u5e38\u9009\u62e9\u9700\u8981\u6d4b\u8bd5\u7684\u76d8\u7684 data \u76ee\u5f55\uff0c\u662f\u6ca1\u6709\u6587\u4ef6\u7cfb\u7edf\u7684\u88f8\u76d8\u3002"),(0,l.kt)("li",{parentName:"ul"},"direct=1\uff1a\u6d4b\u8bd5\u8fc7\u7a0b\u7ed5\u8fc7\u673a\u5668\u81ea\u5e26\u7684 buffer\u3002\u4f7f\u6d4b\u8bd5\u7ed3\u679c\u66f4\u771f\u5b9e\u3002"),(0,l.kt)("li",{parentName:"ul"},"iodepth=20\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u6bcf\u6b21\u4e0b\u53d1 20 \u4e2a io \u4efb\u52a1\u3002"),(0,l.kt)("li",{parentName:"ul"},"rw=randread\uff1a\u6d4b\u8bd5\u968f\u673a\u8bfb\u7684 I/O\u3002"),(0,l.kt)("li",{parentName:"ul"},"ioengine=libaio\uff1aio \u5f15\u64ce\u4f7f\u7528 libaio \u6a21\u5f0f\u3002"),(0,l.kt)("li",{parentName:"ul"},"bs=16k\uff1a\u5355\u6b21 io \u7684\u5757\u6587\u4ef6\u5927\u5c0f\u4e3a 16k\u3002"),(0,l.kt)("li",{parentName:"ul"},"size=5G\uff1a\u672c\u6b21\u7684\u6d4b\u8bd5\u6587\u4ef6\u5927\u5c0f\u4e3a 5G\uff0c\u4ee5\u6bcf\u6b21 16k \u7684 io \u8fdb\u884c\u6d4b\u8bd5\u3002"),(0,l.kt)("li",{parentName:"ul"},"numjobs=2\uff1a\u672c\u6b21\u7684\u6d4b\u8bd5\u7ebf\u7a0b\u4e3a 2\u3002"),(0,l.kt)("li",{parentName:"ul"},"runtime=300\uff1a\u6d4b\u8bd5\u65f6\u95f4\u4e3a 300 \u79d2\uff0c\u5982\u679c\u4e0d\u5199\u5219\u4e00\u76f4\u5c06 5G \u6587\u4ef6\u5206 16k \u6bcf\u6b21\u5199\u5b8c\u4e3a\u6b62\u3002"),(0,l.kt)("li",{parentName:"ul"},"group","_","reporting\uff1a\u5173\u4e8e\u663e\u793a\u7ed3\u679c\u7684\uff0c\u6c47\u603b\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u4fe1\u606f\u3002")),(0,l.kt)("p",{parentName:"li"},"\u987a\u5e8f\u8bfb\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"fio -name=mytest -filename=/dev/sdb -direct=1 -iodepth=20 -thread -rw=read -ioengine=libaio -bs=16k -size=5G -numjobs=2 -runtime=300 -group_reporting\n")),(0,l.kt)("p",{parentName:"li"},"\u987a\u5e8f\u5199\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"fio -name=mytest -filename=/dev/sdb -direct=1 -iodepth=20 -thread -rw=write -ioengine=libaio -bs=16k -size=5G -numjobs=2 -runtime=300 -group_reporting\n")),(0,l.kt)("p",{parentName:"li"},"\u968f\u673a\u5199\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"fio -name=mytest -filename=/dev/sdb -direct=1 -iodepth=20 -thread -rw=randwrite -ioengine=libaio -bs=1k -size=5G -numjobs=2 -runtime=300 -group_reporting\n")),(0,l.kt)("p",{parentName:"li"},"\u6df7\u5408\u987a\u5e8f\u8bfb\u5199\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"fio -name=mytest -filename=/dev/sdb -direct=1 -iodepth=20 -thread -rw=rw -ioengine=libaio -bs=16k -size=5G -numjobs=2 -runtime=300 -group_reporting\n")),(0,l.kt)("p",{parentName:"li"},"\u6df7\u5408\u968f\u673a\u8bfb\u5199\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"fio -name=mytest -filename=/dev/sdb -direct=1 -iodepth=20 -thread -rw=randrw -ioengine=libaio -bs=16k -size=5G -numjobs=2 -runtime=300 -group_reporting\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u6d4b\u8bd5\u6587\u4ef6\u7cfb\u7edf"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# fio -name=mytest -filename=/test/test.img -direct=1 -iodepth=20 -thread -rw=randread -ioengine=libaio -bs=16k -size=5G -numjobs=2 -runtime=300 -group_reporting\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"filename=/test/test.img\uff1a\u6d4b\u8bd5\u6587\u4ef6\u7684\u540d\u79f0\uff0c\u4e3a\u5df2\u7ecf\u505a\u8fc7\u6587\u4ef6\u7cfb\u7edf\u7684\u7a7a\u95f4\u3002\u8fd9\u79cd\u65b9\u5f0f\u901a\u5e38\u662f\u5c06\u4e00\u5757\u88f8\u76d8\uff0c\u8fdb\u884c\u5206\u533a\u3001\u683c\u5f0f\u5316\uff0c\u7136\u540e\u6302\u8f7d\u5230\u6b64\u76ee\u5f55\u3002")))),(0,l.kt)("h3",{id:"332\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f"},"3.3.2\u3001\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f"),(0,l.kt)("p",null,"fio \u4e5f\u53ef\u4ee5\u901a\u8fc7\u6267\u884c job \u65b9\u5f0f\uff0c\u540c\u65f6\u6267\u884c\u591a\u4e2a\u4e0d\u540c\u7684\u6587\u4ef6\uff0c\u4f7f\u7528\u5f88\u5c11\u7684\u547d\u4ee4\u6267\u884c\u6d4b\u8bd5\u3002\u6d4b\u8bd5\u547d\u4ee4\uff1afio ",(0,l.kt)("em",{parentName:"p"},"job"),"\u3002"),(0,l.kt)("p",null,"job \u6587\u4ef6\u7684\u7f16\u5199\u53c2\u8003\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ini"},"[global]\nioengine=libaio\ndirect=1\nsize=8g\nfilesize=500g\ntime_based\nrw=randrw\nrwmixread=70\nbs=4k\nruntime=120\n\n[job1]\nfilename=/dev/sdb\nnumjobs=16\niodepth=1\n\n[job2]\nfilename=/dev/sdc\nnumjobs=16\niodepth=1\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"job \u6587\u4ef6\u91cc\u7684\u6bcf\u4e00\u4e2a job \u90fd\u662f\u540c\u65f6\u6267\u884c\u7684\uff0cglobal \u90e8\u5206\u662f\u5168\u5c40\u7684\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u60f3\u8981\u5206\u5f00\u5404\u81ea\u6267\u884c\u5e76\u7edf\u8ba1\u7ed3\u679c\uff0c\u5c31\u8981\u8ba1\u7b97\u4e00\u4e0b\u65f6\u95f4\u4f7f\u7528 startdelay \u53c2\u6570\u63a7\u5236\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u547d\u4ee4\u884c\u540c\u65f6\u6d4b\u8bd5\u591a\u4e2a\u8bbe\u5907\uff0c\u538b\u529b\u4f1a\u5206\u5e03\u4e0d\u5747\u3002\u4f46\u662f\u901a\u8fc7 job \u6587\u4ef6\u65b9\u5f0f\u914d\u7f6e\u53ef\u4ee5\u89e3\u51b3\uff0c\u8fd9\u5c31\u76f8\u5f53\u4e8e\u5f00\u4e24\u4e2a\u7a97\u53e3\u540c\u65f6\u6267\u884c\u591a\u6761\u547d\u4ee4\u4e86\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5728 job \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u589e\u52a0 group","_","reporting \u53c2\u6570\uff0c\u5728\u6d4b\u8bd5\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5\u770b\u5230\u7edf\u8ba1\u7684\u6027\u80fd\u6570\u636e\u4e86\u3002")),(0,l.kt)("h3",{id:"333\u6d4b\u8bd5\u7ed3\u679c\u5206\u6790"},"3.3.3\u3001\u6d4b\u8bd5\u7ed3\u679c\u5206\u6790"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# fio -name=hdd7k -filename=/dev/sdb -direct=1 -iodepth=20 -thread -rw=rw -ioengine=libaio -bs=4k -size=10G -numjobs=10 -runtime=300 -group_reporting\nhdd7k: (g=0): rw=rw, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=20\n...\nfio-3.29-7-g01686\nStarting 10 threads\nJobs: 10 (f=9): [f(10)][100.0%][r=10.9MiB/s,w=10.7MiB/s][r=2785,w=2742 IOPS][eta 00m:00s] \nhdd7k: (groupid=0, jobs=10): err= 0: pid=73595: Thu Jan 13 11:19:06 2022\n  read: IOPS=3258, BW=12.7MiB/s (13.3MB/s)(3820MiB/300065msec)\n    slat (usec): min=2, max=547, avg= 6.47, stdev= 4.04\n    clat (usec): min=27, max=4722.3k, avg=33300.91, stdev=77842.79\n     lat (usec): min=47, max=4722.3k, avg=33307.62, stdev=77842.14\n    clat percentiles (usec):\n     |  1.00th=[    725],  5.00th=[   1745], 10.00th=[   2737],\n     | 20.00th=[   3228], 30.00th=[   3687], 40.00th=[   4621],\n     | 50.00th=[   5866], 60.00th=[   7832], 70.00th=[  14615],\n     | 80.00th=[  39060], 90.00th=[ 116917], 95.00th=[ 135267],\n     | 99.00th=[ 333448], 99.50th=[ 463471], 99.90th=[ 843056],\n     | 99.95th=[1052771], 99.99th=[1686111]\n   bw (  KiB/s): min=  200, max=91945, per=100.00%, avg=13408.99, stdev=1441.98, samples=5840\n   iops        : min=   50, max=22985, avg=3351.87, stdev=360.48, samples=5840\n  write: IOPS=3261, BW=12.7MiB/s (13.4MB/s)(3823MiB/300065msec); 0 zone resets\n    slat (usec): min=3, max=532, avg= 6.68, stdev= 4.17\n    clat (usec): min=38, max=4725.1k, avg=28027.57, stdev=69203.56\n     lat (usec): min=50, max=4725.2k, avg=28034.48, stdev=69202.94\n    clat percentiles (usec):\n     |  1.00th=[    848],  5.00th=[   1860], 10.00th=[   2802],\n     | 20.00th=[   3294], 30.00th=[   3752], 40.00th=[   4621],\n     | 50.00th=[   5800], 60.00th=[   7439], 70.00th=[  11994],\n     | 80.00th=[  27919], 90.00th=[ 111674], 95.00th=[ 122160],\n     | 99.00th=[ 265290], 99.50th=[ 392168], 99.90th=[ 784335],\n     | 99.95th=[ 977273], 99.99th=[1904215]\n   bw (  KiB/s): min=  208, max=91939, per=100.00%, avg=13475.63, stdev=1444.81, samples=5818\n   iops        : min=   52, max=22984, avg=3368.52, stdev=361.18, samples=5818\n  lat (usec)   : 50=0.01%, 100=0.01%, 250=0.06%, 500=0.32%, 750=0.53%\n  lat (usec)   : 1000=0.74%\n  lat (msec)   : 2=4.20%, 4=28.23%, 10=32.04%, 20=8.83%, 50=8.44%\n  lat (msec)   : 100=4.75%, 250=10.40%, 500=1.10%, 750=0.23%, 1000=0.07%\n  lat (msec)   : 2000=0.05%, >=2000=0.01%\n  cpu          : usr=0.18%, sys=0.45%, ctx=964464, majf=0, minf=210\n  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=100.0%, 32=0.0%, >=64=0.0%\n     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%\n     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, >=64=0.0%\n     issued rwts: total=977794,978699,0,0 short=0,0,0,0 dropped=0,0,0,0\n     latency   : target=0, window=0, percentile=100.00%, depth=20\n\nRun status group 0 (all jobs):\n   READ: bw=12.7MiB/s (13.3MB/s), 12.7MiB/s-12.7MiB/s (13.3MB/s-13.3MB/s), io=3820MiB (4005MB), run=300065-300065msec\n  WRITE: bw=12.7MiB/s (13.4MB/s), 12.7MiB/s-12.7MiB/s (13.4MB/s-13.4MB/s), io=3823MiB (4009MB), run=300065-300065msec\n\nDisk stats (read/write):\n  sdb: ios=480787/482996, merge=492621/492299, ticks=6820973/5217066, in_queue=7483700, util=100.00%\n[root@arm64v8 ~]#\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Fio \u6b63\u5728\u8fd0\u884c\u65f6\uff0c\u4f1a\u663e\u793a\u4efb\u52a1\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u5982\u4e0b\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u8fd0\u884c\u4e2d\nJobs: 10 (f=10): [M(10)][2.7%][r=2508KiB/s,w=2856KiB/s][r=627,w=714 IOPS][eta 04m:52s]\n\n# \u5df2\u5b8c\u6210\nJobs: 10 (f=9): [f(10)][100.0%][r=10.9MiB/s,w=10.7MiB/s][r=2785,w=2742 IOPS][eta 00m:00s]\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u7ec4\u65b9\u62ec\u53f7\u5185\u7684\u5b57\u7b26\u8868\u793a\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u5f53\u524d\u72b6\u6001\u3002 \u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f\u4efb\u52a1\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u7b2c\u4e00\u4e2a\u4efb\u52a1\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 \u53ef\u80fd\u7684\u503c(\u6309\u5178\u578b\u7684\u751f\u547d\u5468\u671f\u987a\u5e8f)\u662f:")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"P      Thread setup, but not started.\nC      Thread created.\nI      Thread initialized, waiting or generating necessary data.\np      Thread running pre-reading file(s).\n/      Thread is in ramp period.\nR      Running, doing sequential reads.\nr      Running, doing random reads.\nW      Running, doing sequential writes.\nw      Running, doing random writes.\nM      Running, doing mixed sequential reads/writes.\nm      Running, doing mixed random reads/writes.\nD      Running, doing sequential trims.\nd      Running, doing random trims.\nF      Running, currently waiting for fsync(2).\nV      Running, doing verification of written data.\nf      Thread finishing.\nE      Thread exited, not reaped by main thread yet.\n-      Thread reaped.\nX      Thread reaped, exited with an error.\nK      Thread reaped, exited due to signal.\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8fd0\u884c\u4e2d\u8fd9\u4e00\u884c\u7684\u610f\u601d\u662f\uff1a\u6267\u884c 10 \u4e2a\u4efb\u52a1\uff0c\u6253\u5f00\u6587\u4ef6\u63cf\u8ff0\u7b26 10 \u4e2a\uff0c\u6b63\u5728\u8fd0\u884c\u6df7\u5408\u987a\u5e8f\u8bfb\u5199\u5171 10 \u4e2a\u4efb\u52a1\uff0c\u5df2\u5b8c\u6210 2.7%\uff0c\u8bfb 2508KiB/s\uff0c\u5199 2856KiB/s\uff1b\u8bfb IOPS 627\uff0c\u5199 IOPS 714\uff0c\u8bc4\u4f30\u9700\u8981 04m:52s \u5b8c\u6210\u6240\u6709\u4efb\u52a1\u3002"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Fio \u5b8c\u6210\u6216 ctrl+c \u53d6\u6d88\u90fd\u4f1a\u8f93\u51fa\u6240\u6709\u7ed3\u679c\u4fe1\u606f\uff0c\u4e0b\u9762\u4e00\u4e00\u89e3\u91ca\u5173\u952e\u53c2\u6570\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"hdd7k: (groupid=0, jobs=10): err= 0: pid=73595: Thu Jan 13 11:19:06 2022\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5b9a\u4e49\u7684\u4efb\u52a1\u540d\u79f0\uff0cgroupid\uff0c\u805a\u5408\u7684\u4efb\u52a1\u6570\uff0c\u6700\u540e\u4e00\u4e2a\u9519\u8bef id(0 \u8868\u793a\u6ca1\u6709\u9519\u8bef)\u548c pid\uff0c\u5b8c\u6210\u65f6\u95f4\u3002"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"read/write/trim\uff1aIOPS \u8868\u793a\u6bcf\u79d2\u5e73\u5747 IOPS\uff1bBW \u8868\u793a\u5e73\u5747\u5e26\u5bbd\uff0cBW \u540e\u9762\u7684\u6570\u636e\u662f 2 \u8fdb\u5236\u5e26\u5bbd\uff0c\u62ec\u53f7\u4e2d\u662f 10 \u8fdb\u5236\u5e26\u5bbd\uff1b\u6700\u540e\u4e24\u4e2a\u503c\u8868\u793a(\u4e8c\u8fdb\u5236\u603b IO \u5927\u5c0f/\u603b\u8fd0\u884c\u65f6\u95f4)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"slat\uff1a\u63d0\u4ea4\u4efb\u52a1\u5ef6\u8fdf(submission latency)\uff0c\u4e5f\u5c31\u662f\u5f02\u6b65 IO \u6307\u4ee4\u751f\u6210\u6d88\u8017\u7684\u65f6\u95f4(min \u6700\u5c0f\u65f6\u95f4\uff0cmax \u6700\u5927\u65f6\u95f4\uff0cavg \u5e73\u5747\u65f6\u95f4\uff0cstdev \u6807\u51c6\u5dee)\u3002\u5bf9\u4e8e\u540c\u6b65 I/O\uff0c\u8fd9\u4e00\u884c\u4e0d\u4f1a\u663e\u793a\uff0c\u56e0\u4e3a slat \u5b9e\u9645\u4e0a\u662f\u5b8c\u6210\u5ef6\u8fdf(completion latency)\u3002\u8fd9\u4e2a\u503c\u7684\u5355\u4f4d\u53ef\u4ee5\u662f\u7eb3\u79d2\u3001\u5fae\u79d2\u6216\u6beb\u79d2\uff0c\u7531 fio \u81ea\u52a8\u9009\u62e9\u5408\u9002\u7684\u5355\u4f4d\u3002\u5728 --minimal \u6a21\u5f0f\u4e0b\uff0c\u5ef6\u8fdf\u603b\u662f\u4ee5\u5fae\u79d2\u8ba1\u7b97\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"clat\uff1a\u5b8c\u6210\u5ef6\u8fdf(completion latency)\uff0c\u8fd9\u8868\u793a\u4ece\u63d0\u4ea4 IO \u6307\u4ee4\u5230\u5185\u6838\u518d\u5230 IO \u6307\u4ee4\u5168\u90e8\u8fd0\u884c\u6240\u9700\u8981\u7684\u65f6\u95f4\uff0c\u4e0d\u5305\u62ec\u63d0\u4ea4\u4efb\u52a1\u5ef6\u8fdf(submission latency)\uff1b\u540c\u6b65 IO \u60c5\u51b5\u4e0b clat \u901a\u5e38\u7b49\u4e8e(\u6216\u975e\u5e38\u63a5\u8fd1)0\uff0c\u56e0\u4e3a\u4ece\u63d0\u4ea4\u5230\u5b8c\u6210\u4ec5\u4ec5\u8868\u793a CPU \u65f6\u95f4(IO \u6307\u4ee4\u5df2\u7ecf\u751f\u6210\u4e86)\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"lat\uff1a\u603b\u5ef6\u8fdf(total latency)\uff0c\u8fd9\u8868\u793a\u4ece fio \u521b\u5efa IO \u5355\u5143\u5230 IO \u6307\u4ee4\u5168\u90e8\u8fd0\u884c\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"clat percentiles\uff1a\u5b8c\u6210\u5ef6\u8fdf\u767e\u5206\u6bd4\u5206\u5e03\uff0c\u6ce8\u610f\uff0c\u4ece\u6e90\u7801\u6765\u770b\uff0c\u5b83\u4e0d\u662f slat + clat\uff1b\u5b83\u6709\u81ea\u5df1\u7684\u7ed3\u6784\u4f53\u63cf\u8ff0\u3002\u7406\u89e3\u601d\u8def\u53c2\u8003\u4e0b\u9762\u7684 lat(nsec/usec/msec)\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"bw\uff1a\u57fa\u4e8e\u6837\u672c\u7684\u5e26\u5bbd\u7edf\u8ba1\u6570\u636e\u3002\u6700\u597d\u662f\u5728\u540c\u4e00\u78c1\u76d8\u540c\u4e00\u7ec4\u7ebf\u7a0b\u4e2d\u53d6\u6837\uff0c\u624d\u5177\u6709\u5b9e\u9645\u610f\u4e49\uff0c\u56e0\u4e3a\u78c1\u76d8\u7ade\u4e89\u8bbf\u95ee\u624d\u7b26\u5408\u5b9e\u9645\u60c5\u51b5\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"iops\uff1a\u57fa\u4e8e\u6837\u672c\u7684 IOPS \u7edf\u8ba1\u6570\u636e\u3002\u540c bw\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"lat(nsec/usec/msec)\uff1aIO \u5b8c\u6210\u5ef6\u8fdf(I/O completion latencies)\u7684\u5206\u5e03\u60c5\u51b5\uff0c\u8fd9\u8868\u793a\u4ece IO \u79bb\u5f00 fio \u5230\u5b83\u5b8c\u6210\u7684\u65f6\u95f4\u3002\u4e0e\u4e0a\u9762\u5355\u72ec\u7684 read/write/trim \u90e8\u5206\u4e0d\u540c\uff0c\u8fd9\u91cc\u548c\u5176\u4f59\u90e8\u5206\u4e2d\u7684\u6570\u636e\u9002\u7528\u4e8e\u62a5\u544a\u7ec4\u7684\u6240\u6709 IO\u300250=0.01% \u610f\u5473\u7740\u5728 50us \u4ee5\u4e0b\u5b8c\u6210\u4e86 0.01% \u7684 IO\uff0c100=0.01% \u610f\u5473\u7740 0.01% \u7684 IO \u9700\u8981 50 \u5230 99us \u624d\u80fd\u5b8c\u6210\u3002\u4f9d\u6b21\u7c7b\u63a8\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"cpu\uff1aCPU \u4f7f\u7528\u7387\u3002 \u7528\u6237\u548c\u7cfb\u7edf\u65f6\u95f4\uff0c\u4ee5\u53ca\u8be5\u7ebf\u7a0b\u6240\u7ecf\u5386\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570\u3001\u7cfb\u7edf\u548c\u7528\u6237\u65f6\u95f4\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u6700\u540e\u662f\u4e3b\u8981\u548c\u6b21\u8981\u9875\u9762\u9519\u8bef\u7684\u6570\u91cf\u3002 CPU \u5229\u7528\u7387\u6570\u5b57\u662f\u62a5\u544a\u7ec4\u4e2d\u4efb\u52a1\u7684\u5e73\u5747\u503c\uff0c\u800c\u4e0a\u4e0b\u6587\u548c\u6545\u969c\u8ba1\u6570\u5668\u662f\u6c42\u548c\u7684\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"IO depths\uff1a\u4efb\u52a1\u751f\u547d\u5468\u671f\u5185 IO \u6df1\u5ea6\u7684\u5206\u5e03\u3002 \u8fd9\u4e9b\u6570\u5b57\u88ab\u5206\u6210 2 \u7684\u5e42\uff0c\u6bcf\u4e2a\u6761\u76ee\u6db5\u76d6\u4e86\u4ece\u8be5\u503c\u5230\u4f4e\u4e8e\u4e0b\u4e00\u4e2a\u6761\u76ee\u7684\u6df1\u5ea6\uff0c\u4f8b\u5982\uff0c16= \u6db5\u76d6\u4e86\u4ece 16 \u5230 31 \u7684\u6df1\u5ea6\u3002\u8bf7\u6ce8\u610f\uff0c\u6df1\u5ea6\u5206\u5e03\u6761\u76ee\u6240\u8986\u76d6\u7684\u8303\u56f4\u53ef\u80fd\u4e0e\u7b49\u6548\u7684 submit/complete \u5206\u5e03\u6761\u76ee\u6240\u8986\u76d6\u7684\u8303\u56f4\u4e0d\u540c\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"IO submit\uff1a\u5728\u4e00\u4e2a\u63d0\u4ea4\u8c03\u7528\u4e2d\u63d0\u4ea4\u4e86\u591a\u5c11\u4e2a IO \u5757\u3002 \u6bcf\u4e2a\u6761\u76ee\u8868\u793a\u8fd9\u4e2a\u6570\u91cf\uff0c\u76f4\u5230\u524d\u4e00\u4e2a\u6761\u76ee\u3002\u4f8b\u5982\uff0c4=100% \u610f\u5473\u7740\u6211\u4eec\u6bcf\u6b21\u63d0\u4ea4\u8c03\u7528\u63d0\u4ea4\u7684 IO \u5728 1 \u5230 4 \u4e4b\u95f4\u3002 \u8bf7\u6ce8\u610f\uff0c\u63d0\u4ea4\u5206\u5e03\u6761\u76ee\u6240\u8986\u76d6\u7684\u8303\u56f4\u53ef\u4ee5\u4e0d\u540c\u4e8e\u7b49\u6548\u6df1\u5ea6\u5206\u5e03\u6761\u76ee\u6240\u8986\u76d6\u7684\u8303\u56f4\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"IO complete\uff1a\u540c\u7406 submit\uff0c\u8868\u793a\u5b8c\u6210\u7684 IO \u5757\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"IO issued rwt\uff1a\u53d1\u5e03\u7684 read/write/trim \u8bf7\u6c42\u6570\u91cf\u4ee5\u53ca\u7f3a\u5c11\u548c\u4e22\u6389\u7684\u6570\u91cf\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"IO latency\uff1a\u8fd9\u4e9b\u503c\u7528\u4e8e latency","_","target \u548c\u76f8\u5173\u9009\u9879\u3002 \u5f53\u4f7f\u7528\u8fd9\u4e9b\u9009\u9879\u65f6\uff0c\u8be5\u7247\u6bb5\u63cf\u8ff0\u6ee1\u8db3\u6307\u5b9a\u65f6\u5ef6\u76ee\u6807\u6240\u9700\u7684 IO \u6df1\u5ea6\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4ee5\u4e0a\u662f\u62a5\u544a\u4e2d\u7684\u8be6\u7ec6\u53c2\u6570\u8bf4\u660e\uff0c\u4e0b\u9762\u5bf9\u603b\u7ed3\u62a5\u544a\u6570\u636e\u8bf4\u660e\u4e00\u4e0b\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"Run status group 0 (all jobs):\n READ: bw=12.7MiB/s (13.3MB/s), 12.7MiB/s-12.7MiB/s (13.3MB/s-13.3MB/s), io=3820MiB (4005MB), run=300065-300065msec\nWRITE: bw=12.7MiB/s (13.4MB/s), 12.7MiB/s-12.7MiB/s (13.4MB/s-13.4MB/s), io=3823MiB (4009MB), run=300065-300065msec\n\nDisk stats (read/write):\nsdb: ios=480787/482996, merge=492621/492299, ticks=6820973/5217066, in_queue=7483700, util=100.00%\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"bw\uff1a\u8be5\u7ec4\u4e2d\u6240\u6709\u7ebf\u7a0b\u7684\u6700\u5c0f\u548c\u6700\u5927\u5e26\u5bbd\u7d27\u968f\u8be5\u7ec4\u4e2d\u6240\u6709\u7ebf\u7a0b\u7684\u603b\u5e26\u5bbd\u3002 \u62ec\u53f7\u5916\u7684\u503c\u662f 2 \u8fdb\u5236\u7684\u683c\u5f0f\uff0c\u62ec\u53f7\u5185\u7684\u503c\u662f10 \u8fdb\u5236\u683c\u5f0f\u7684\u7b49\u4ef7\u503c\u3002"),(0,l.kt)("li",{parentName:"ul"},"io\uff1a\u6574\u5408\u8be5\u7ec4\u4e2d\u6240\u6709\u7ebf\u7a0b\u6267\u884c\u7684 IO\u3002 \u683c\u5f0f\u4e0e bw \u76f8\u540c\u3002"),(0,l.kt)("li",{parentName:"ul"},"run\uff1a\u8be5\u7ec4\u4e2d\u7ebf\u7a0b\u7684\u6700\u5c0f\u548c\u6700\u957f\u8fd0\u884c\u65f6\u95f4\u3002"),(0,l.kt)("li",{parentName:"ul"},"ios\uff1a\u6240\u6709\u7ebf\u7a0b\u7ec4\u7684 IO \u6570\u3002"),(0,l.kt)("li",{parentName:"ul"},"merge\uff1aIO \u8c03\u5ea6\u5668\u6267\u884c\u7684\u5408\u5e76\u6b21\u6570\u3002"),(0,l.kt)("li",{parentName:"ul"},"ticks\uff1a\u4fdd\u6301\u78c1\u76d8\u5fd9\u788c\u7684 ticks \u6570\u3002"),(0,l.kt)("li",{parentName:"ul"},"in","_","queue\uff1a\u5728\u78c1\u76d8\u961f\u5217\u4e2d\u603b\u8017\u65f6\u3002"),(0,l.kt)("li",{parentName:"ul"},"util\uff1a\u78c1\u76d8\u5229\u7528\u7387\u3002 \u503c\u4e3a 100% \u8868\u793a\u6211\u4eec\u4e00\u76f4\u4fdd\u6301\u78c1\u76d8\u7e41\u5fd9\uff0c50% \u8868\u793a\u78c1\u76d8\u6709\u4e00\u534a\u65f6\u95f4\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\u3002")))),(0,l.kt)("h2",{id:"34\u751f\u4ea7\u6d4b\u8bd5"},"3.4\u3001\u751f\u4ea7\u6d4b\u8bd5"),(0,l.kt)("h3",{id:"341\u786c\u4ef6\u73af\u5883"},"3.4.1\u3001\u786c\u4ef6\u73af\u5883"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u914d\u7f6e"),(0,l.kt)("th",{parentName:"tr",align:null},"x86"),(0,l.kt)("th",{parentName:"tr",align:null},"arm64-single"),(0,l.kt)("th",{parentName:"tr",align:null},"arm64-double"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"CPU"),(0,l.kt)("td",{parentName:"tr",align:null},"X86(Gold 6138)"),(0,l.kt)("td",{parentName:"tr",align:null},"arm64-64core"),(0,l.kt)("td",{parentName:"tr",align:null},"arm64-128core")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"MEM"),(0,l.kt)("td",{parentName:"tr",align:null},"256G"),(0,l.kt)("td",{parentName:"tr",align:null},"256G"),(0,l.kt)("td",{parentName:"tr",align:null},"256G")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SYS"),(0,l.kt)("td",{parentName:"tr",align:null},"Centos8.4"),(0,l.kt)("td",{parentName:"tr",align:null},"Centos8.4"),(0,l.kt)("td",{parentName:"tr",align:null},"Centos8.4")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DISK CARD"),(0,l.kt)("td",{parentName:"tr",align:null},"MR9361-8i"),(0,l.kt)("td",{parentName:"tr",align:null},"MR9361-8i"),(0,l.kt)("td",{parentName:"tr",align:null},"HW-SAS3508")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"RAID LEVEL"),(0,l.kt)("td",{parentName:"tr",align:null},"Raid0"),(0,l.kt)("td",{parentName:"tr",align:null},"Raid0"),(0,l.kt)("td",{parentName:"tr",align:null},"Raid0")))),(0,l.kt)("h3",{id:"342\u6d4b\u8bd5\u7ed3\u679c"},"3.4.2\u3001\u6d4b\u8bd5\u7ed3\u679c"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"fio",src:a(69638).Z,width:"688",height:"133"})),(0,l.kt)("h2",{id:"35\u6ce8\u610f\u4e8b\u9879"},"3.5\u3001\u6ce8\u610f\u4e8b\u9879"),(0,l.kt)("h3",{id:"351\u6d4b\u8bd5\u6ce8\u610f\u4e8b\u9879"},"3.5.1\u3001\u6d4b\u8bd5\u6ce8\u610f\u4e8b\u9879"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"fio \u6d4b\u8bd5\u4f1a\u5bf9\u7cfb\u7edf\u7684\u786c\u76d8\u8fdb\u884c\u8bfb\u5199\uff0c\u4f1a\u5b58\u5728\u7834\u574f\u5ba2\u6237\u6570\u636e\u7684\u98ce\u9669\uff0c\u56e0\u6b64\u5728\u751f\u4ea7\u73af\u5883\u4e0a\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u4e0d\u5efa\u8bae\u5bf9\u751f\u4ea7\u73af\u5883\u7684\u786c\u76d8\u8fdb\u884c\u88f8\u76d8\u8bfb\u5199\u6d4b\u8bd5\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u9700\u8981\u8fdb\u884c\u6d4b\u8bd5\uff0c\u6700\u597d\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u7136\u540e\u5bf9\u6307\u5b9a\u7684\u6587\u4ef6\u8fdb\u884c\u8bfb\u5199\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u9700\u8981\u505a\u6027\u80fd\u5206\u6790\u6216\u8c03\u4f18\uff0c\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u9700\u8981\u6536\u96c6 iostat \u4fe1\u606f\uff0c\u4f8b\u5982\uff1aiostat -xd 1 1000 > result.log\u3002")),(0,l.kt)("h3",{id:"352\u6027\u80fd\u8c03\u4f18\u6ce8\u610f\u4e8b\u9879"},"3.5.2\u3001\u6027\u80fd\u8c03\u4f18\u6ce8\u610f\u4e8b\u9879"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"FIO \u8fdb\u884c\u6027\u80fd\u5bf9\u6bd4\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u4fdd\u6301\u53c2\u6570\u4e00\u81f4\uff0c\u5426\u5219\u53c2\u6570\u5dee\u5f02\u4f1a\u5bfc\u81f4\u7ed3\u679c\u5dee\u5f02\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5728\u6d4b\u8bd5\u6587\u4ef6\u7cfb\u7edf\u65f6\uff0c\u8981\u5148\u5199\u4e00\u4e2a\u5927\u6587\u4ef6\uff0c\u7136\u540e\u518d\u505a\u786c\u76d8 IO \u8bfb\u5199\u6d4b\u8bd5\u3002\u907f\u514d\u5c0f\u6570\u636e\u5757 IO \u6a21\u578b\u4e0b\u8bfb\u53d6\u4e0d\u5230\u6587\u4ef6\u800c\u8bfb\u5230\u5176\u4ed6\u5730\u65b9\u53bb\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u662f SSD\uff0c\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u6700\u597d\u8fdb\u884c\u7ed1\u6838\u8bbe\u7f6e\uff0c\u56e0\u4e3a IOPS \u592a\u5927\uff0c\u5982\u679c\u7ebf\u7a0b\u8fd0\u884c\u5728 CPU0 \u6216\u8005\u662f\u6709\u5176\u4ed6\u5e94\u7528\u5360\u7528\u7684\u6838\uff0c\u90a3\u4e48\u53ef\u80fd\u4f1a\u8fbe\u4e0d\u5230\u6700\u4f73\u6027\u80fd\u3002\u7ed1\u6838\u4f7f\u7528 taskset -c 31 ./fio\u2026 \u547d\u4ee4\u5b9e\u73b0\u3002\u5bf9\u5e94\u4f7f\u7528\u54ea\u4e2a\u6838\uff0c\u53ef\u4ee5\u6267\u884c numactl -H \u67e5\u8be2\u6838\u7684\u4fe1\u606f\u3002")),(0,l.kt)("h2",{id:"a\u9644\u5f55"},"A\u3001\u9644\u5f55"),(0,l.kt)("h3",{id:"a1iozone-\u6d4b\u8bd5\u7b80\u4ecb"},"A1\u3001IOzone \u6d4b\u8bd5\u7b80\u4ecb"),(0,l.kt)("p",null,"iozone\uff08",(0,l.kt)("a",{parentName:"p",href:"http://www.iozone.org)%E6%98%AF%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84"},"www.iozone.org)\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684")," benchmark\uff08\u57fa\u51c6\uff09\u5de5\u5177\uff0c\u4e3b\u8981\u6d4b\u8bd5\u7684\u662f\u6587\u4ef6\u7cfb\u7edf\u7684\u5404\u79cd\u8bfb\u5199\u6027\u80fd\uff0c\u5305\u542b\u987a\u5e8f\u8bfb\u5199\u4ee5\u53ca\u968f\u673a\u8bfb\u5199\uff0cfread/fwrite \u8bfb\u5199\uff0c\u5927\u8de8\u5ea6\u8bfb\u5199\u7b49\u7b49\uff0c\u5728\u6d4b\u8bd5\u6587\u4ef6\u7684\u8bfb\u5199\u6027\u80fd\u65b9\u9762\uff0c\u6d4b\u8bd5\u8303\u56f4\u5e7f\uff0c\u6307\u6807\u7cbe\u786e\u3002"),(0,l.kt)("p",null,"\u78c1\u76d8\u8bbe\u5907\u4e4b\u4e0a\u662f\u6587\u4ef6\u7cfb\u7edf\uff0c\u6d4b\u8bd5\u78c1\u76d8\u7684\u5de5\u5177\u5f80\u5f80\u5c31\u662f\u8c03\u7528\u9a71\u52a8\u5757\u8bbe\u5907\u9a71\u52a8\u7684\u63a5\u53e3\u8fdb\u884c\u8bfb\u5199\u6d4b\u8bd5\u3002\u800c\u6587\u4ef6\u7cfb\u7edf\u7684\u6d4b\u8bd5\u8f6f\u4ef6\u5c31\u662f\uff0c\u9488\u5bf9\u6587\u4ef6\u7cfb\u7edf\u5c42\u63d0\u4f9b\u7684\u529f\u80fd\u8fdb\u884c\u6d4b\u8bd5\uff0c\u5305\u62ec\u6587\u4ef6\u7684\u6253\u5f00\u5173\u95ed\u901f\u5ea6\u4ee5\u53ca\u987a\u5e8f\u8bfb\u5199\uff0c\u8fd8\u6709\u968f\u673a\u4f4d\u7f6e\u7684\u8bfb\u5199\u4ee5\u53ca\u8fdb\u7a0b\u5e76\u53d1\u6570\u76ee\u7b49\u5404\u4e2a\u65b9\u9762\u8fdb\u884c\u8be6\u7ec6\u7684\u6d4b\u8bd5\u3002"),(0,l.kt)("h3",{id:"a2iozone-\u6d4b\u8bd5\u8bfb\u5199\u6a21\u5f0f"},"A2\u3001IOzone \u6d4b\u8bd5\u8bfb\u5199\u6a21\u5f0f"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u6d4b\u8bd5\u9879"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Write"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u5411\u4e00\u4e2a\u65b0\u6587\u4ef6\u5199\u5165\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5f53\u4e00\u4e2a\u65b0\u6587\u4ef6\u88ab\u5199\u5165\u65f6\uff0c\u4e0d\u4ec5\u4ec5\u662f\u90a3\u4e9b\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u9700\u8981\u88ab\u5b58\u50a8\uff0c\u8fd8\u5305\u62ec\u90a3\u4e9b\u7528\u4e8e\u5b9a\u4f4d\u6570\u636e\u5728\u5b58\u50a8\u4ecb\u8d28\u7684\u5177\u4f53\u4f4d\u7f6e\u7684\u989d\u5916\u4fe1\u606f\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},'\u8fd9\u4e9b\u989d\u5916\u4fe1\u606f\u88ab\u79f0\u4f5c "\u5143\u6570\u636e"\u3002\u5b83\u5305\u62ec\u76ee\u5f55\u4fe1\u606f\uff0c\u6240\u5206\u914d\u7684\u7a7a\u95f4\u548c\u4e00\u4e9b\u4e0e\u8be5\u6587\u4ef6\u6709\u5173\u4f46\u53c8\u5e76\u975e\u8be5\u6587\u4ef6\u6240\u542b\u6570\u636e\u7684\u5176\u4ed6\u6570\u636e\u3002'),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u62dc\u8fd9\u4e9b\u989d\u5916\u4fe1\u606f\u6240\u8d50\uff0cWrite \u7684\u6027\u80fd\u901a\u5e38\u4f1a\u6bd4 Re-write \u7684\u6027\u80fd\u4f4e\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Re-write"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u5411\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u6587\u4ef6\u5199\u5165\u7684\u6027\u80fd\u3002\u5f53\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u6587\u4ef6\u88ab\u5199\u5165\u65f6\uff0c\u6240\u9700\u5de5\u4f5c\u91cf\u8f83\u5c11\uff0c\u56e0\u4e3a\u6b64\u65f6\u5143\u6570\u636e\u5df2\u7ecf\u5b58\u5728\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Re-write \u7684\u6027\u80fd\u901a\u5e38\u6bd4 Write \u7684\u6027\u80fd\u9ad8\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Read"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u8bfb\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u6587\u4ef6\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Re-Read"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u8bfb\u4e00\u4e2a\u6700\u8fd1\u8bfb\u8fc7\u7684\u6587\u4ef6\u7684\u6027\u80fd\u3002Re-Read \u6027\u80fd\u4f1a\u9ad8\u4e9b\uff0c\u56e0\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u901a\u5e38\u4f1a\u7f13\u5b58\u6700\u8fd1\u8bfb\u8fc7\u7684\u6587\u4ef6\u6570\u636e\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u56e0\u4e3a\u7cfb\u7edf\u7f13\u5b58\u53ef\u4ee5\u88ab\u7528\u4e8e\u8bfb\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Random Read"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u8bfb\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7684\u968f\u673a\u504f\u79fb\u91cf\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8bb8\u591a\u56e0\u7d20\u90fd\u53ef\u80fd\u5f71\u54cd\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u7cfb\u7edf\u6027\u80fd\uff0c\u4f8b\u5982\uff1a\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\u7684\u5927\u5c0f\uff0c\u78c1\u76d8\u6570\u91cf\uff0c\u5bfb\u9053\u5ef6\u8fdf\u548c\u5176\u4ed6\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Random Write"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u5199\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7684\u968f\u673a\u504f\u79fb\u91cf\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u540c\u6837\uff0c\u6709\u8bb8\u591a\u56e0\u7d20\u53ef\u80fd\u5f71\u54cd\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u7cfb\u7edf\u6027\u80fd\uff0c\u4f8b\u5982\uff1a\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\u7684\u5927\u5c0f\uff0c\u78c1\u76d8\u6570\u91cf\uff0c\u5bfb\u9053\u5ef6\u8fdf\u548c\u5176\u4ed6\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Random Mix"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u8bfb\u5199\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7684\u968f\u673a\u504f\u79fb\u91cf\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8bb8\u591a\u56e0\u7d20\u53ef\u80fd\u5f71\u54cd\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u7cfb\u7edf\u6027\u80fd\u8fd0\u4f5c\uff0c\u4f8b\u5982\uff1a\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\u7684\u5927\u5c0f\uff0c\u78c1\u76d8\u6570\u91cf\uff0c\u5bfb\u9053\u5ef6\u8fdf\u548c\u5176\u4ed6\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e2a\u6d4b\u8bd5\u53ea\u6709\u5728\u541e\u5410\u91cf\u6d4b\u8bd5\u6a21\u5f0f\u4e0b\u624d\u80fd\u8fdb\u884c\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u6bcf\u4e2a\u7ebf\u7a0b/\u8fdb\u7a0b\u8fd0\u884c\u8bfb\u6216\u5199\u6d4b\u8bd5\u3002\u8fd9\u79cd\u5206\u5e03\u5f0f\u8bfb/\u5199\u6d4b\u8bd5\u662f\u57fa\u4e8eround robin \u6a21\u5f0f\u7684\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u6700\u597d\u4f7f\u7528\u591a\u4e8e\u4e00\u4e2a\u7ebf\u7a0b/\u8fdb\u7a0b\u6267\u884c\u6b64\u6d4b\u8bd5\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Backwards Read"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u4f7f\u7528\u5012\u5e8f\u8bfb\u4e00\u4e2a\u6587\u4ef6\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u79cd\u8bfb\u6587\u4ef6\u65b9\u6cd5\u53ef\u80fd\u770b\u8d77\u6765\u5f88\u53ef\u7b11\uff0c\u4e8b\u5b9e\u4e0a\u6709\u4e9b\u5e94\u7528\u786e\u5b9e\u8fd9\u4e48\u5e72\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"MSC Nastran \u662f\u4e00\u4e2a\u4f7f\u7528\u5012\u5e8f\u8bfb\u6587\u4ef6\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002\u5b83\u6240\u8bfb\u7684\u6587\u4ef6\u90fd\u5341\u5206\u5927\uff08\u5927\u5c0f\u4eceG\u7ea7\u522b\u5230T\u7ea7\u522b\uff09\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5c3d\u7ba1\u8bb8\u591a\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528\u4e00\u4e9b\u7279\u6b8a\u5b9e\u73b0\u6765\u4f18\u5316\u987a\u5e8f\u8bfb\u6587\u4ef6\u7684\u901f\u5ea6\uff0c\u5f88\u5c11\u6709\u64cd\u4f5c\u7cfb\u7edf\u6ce8\u610f\u5230\u5e76\u589e\u5f3a\u5012\u5e8f\u8bfb\u6587\u4ef6\u7684\u6027\u80fd\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Record Rewrite"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u5199\u4e0e\u8986\u76d6\u5199\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7684\u7279\u5b9a\u5757\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e2a\u5757\u53ef\u80fd\u4f1a\u53d1\u751f\u4e00\u4e9b\u5f88\u6709\u8da3\u7684\u4e8b\u3002\u5982\u679c\u8fd9\u4e2a\u5757\u8db3\u591f\u5c0f\uff08\u6bd4CPU\u6570\u636e\u7f13\u5b58\u5c0f\uff09\uff0c\u6d4b\u51fa\u6765\u7684\u6027\u80fd\u5c06\u4f1a\u975e\u5e38\u9ad8\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5982\u679c\u6bd4 CPU \u6570\u636e\u7f13\u5b58\u5927\u800c\u6bd4 TLB \u5c0f\uff0c\u6d4b\u51fa\u6765\u7684\u662f\u53e6\u4e00\u4e2a\u7ed3\u679c\u7684\u6027\u80fd\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5982\u679c\u6bd4\u4e8c\u8005\u90fd\u5927\uff0c\u4f46\u6bd4\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\u5c0f\uff0c\u5f97\u5230\u7684\u6027\u80fd\u53c8\u662f\u4e00\u4e2a\u7ed3\u679c\u3002\u82e5\u5927\u5230\u8d85\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\uff0c\u53c8\u662f\u53e6\u4e00\u756a\u7ed3\u679c\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Strided Read"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u8df3\u8dc3\u8bfb\u4e00\u4e2a\u6587\u4ef6\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u4e3e\u4f8b\u5982\u4e0b\uff1a\u5728 0 \u504f\u79fb\u91cf\u5904\u8bfb 4Kbytes\uff0c\u7136\u540e\u95f4\u9694 200Kbytes \u8bfb 4Kbytes\uff0c\u518d\u95f4\u9694 200Kbytes\uff0c\u5982\u6b64\u53cd\u590d\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u6b64\u65f6\u7684\u6a21\u5f0f\u662f\u8bfb 4Kbytes\uff0c\u95f4\u9694 200Kbytes \u5e76\u91cd\u590d\u8fd9\u4e2a\u6a21\u5f0f\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u53c8\u662f\u4e00\u4e2a\u5178\u578b\u7684\u5e94\u7528\u884c\u4e3a\uff0c\u6587\u4ef6\u4e2d\u4f7f\u7528\u4e86\u6570\u636e\u7ed3\u6784\u5e76\u4e14\u8bbf\u95ee\u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\u7684\u7279\u5b9a\u533a\u57df\u7684\u5e94\u7528\u7a0b\u5e8f\u5e38\u5e38\u8fd9\u6837\u505a\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8bb8\u591a\u64cd\u4f5c\u7cfb\u7edf\u5e76\u6ca1\u6ce8\u610f\u5230\u8fd9\u79cd\u884c\u4e3a\u6216\u8005\u9488\u5bf9\u8fd9\u79cd\u7c7b\u578b\u7684\u8bbf\u95ee\u505a\u4e00\u4e9b\u4f18\u5316\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u540c\u6837\u8fd9\u79cd\u8bbf\u95ee\u884c\u4e3a\u4e5f\u53ef\u80fd\u5bfc\u81f4\u4e00\u4e9b\u6709\u8da3\u7684\u6027\u80fd\u5f02\u5e38\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u4e00\u4e2a\u4f8b\u5b50\u662f\u5728\u4e00\u4e2a\u6570\u636e\u7247\u5316\u7684\u6587\u4ef6\u7cfb\u7edf\u91cc\uff0c\u5e94\u7528\u7a0b\u5e8f\u7684\u8df3\u8dc3\u5bfc\u81f4\u67d0\u4e00\u4e2a\u7279\u5b9a\u7684\u78c1\u76d8\u6210\u4e3a\u6027\u80fd\u74f6\u9888\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Fwrite"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u8c03\u7528\u5e93\u51fd\u6570 fwrite() \u6765\u5199\u6587\u4ef6\u7684\u6027\u80fd\u3002\u8fd9\u662f\u4e00\u4e2a\u6267\u884c\u7f13\u5b58\u4e0e\u963b\u585e\u5199\u64cd\u4f5c\u7684\u5e93\u4f8b\u7a0b\u3002\u7f13\u5b58\u5728\u7528\u6237\u7a7a\u95f4\u4e4b\u5185\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5982\u679c\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u60f3\u8981\u5199\u5f88\u5c0f\u7684\u4f20\u8f93\u5757\uff0cfwrite() \u51fd\u6570\u4e2d\u7684\u7f13\u5b58\u4e0e\u963b\u585e I/O \u529f\u80fd\u53ef\u4ee5\u901a\u8fc7\u51cf\u5c11\u7cfb\u7edf\u8c03\u7528\uff0c"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5e76\u5728\u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u65f6\u589e\u52a0\u4f20\u8f93\u5757\u7684\u5927\u5c0f\u6765\u589e\u5f3a\u5e94\u7528\u7a0b\u5e8f\u7684\u6027\u80fd\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e2a\u6d4b\u8bd5\u662f\u5199\u4e00\u4e2a\u65b0\u6587\u4ef6\uff0c\u6240\u4ee5\u5143\u6570\u636e\u7684\u5199\u5165\u4e5f\u662f\u8981\u7684\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Frewrite"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u8c03\u7528\u5e93\u51fd\u6570 fwrite() \u6765\u5199\u6587\u4ef6\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e5f\u662f\u4e00\u4e2a\u6267\u884c\u7f13\u5b58\u4e0e\u963b\u585e\u5199\u64cd\u4f5c\u7684\u5e93\u4f8b\u7a0b\u3002\u662f\u7f13\u5b58\u5728\u7528\u6237\u7a7a\u95f4\u4e4b\u5185\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5982\u679c\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u60f3\u8981\u5199\u5f88\u5c0f\u7684\u4f20\u8f93\u5757\uff0cfwrite() \u51fd\u6570\u4e2d\u7684\u7f13\u5b58\u4e0e\u963b\u585e I/O \u529f\u80fd\u53ef\u4ee5\u901a\u8fc7\u51cf\u5c11\u7cfb\u7edf\u8c03\u7528\uff0c"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5e76\u5728\u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u65f6\u589e\u52a0\u4f20\u8f93\u5757\u7684\u5927\u5c0f\u6765\u589e\u5f3a\u5e94\u7528\u7a0b\u5e8f\u7684\u6027\u80fd\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e2a\u6d4b\u8bd5\u662f\u5199\u5165\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u6587\u4ef6\uff0c\u7531\u4e8e\u65e0\u5143\u6570\u636e\u64cd\u4f5c\uff0c\u6d4b\u8bd5\u7684\u6027\u80fd\u4f1a\u9ad8\u4e9b\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Fread"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d4b\u8bd5\u8c03\u7528\u5e93\u51fd\u6570 fread() \u6765\u8bfb\u6587\u4ef6\u7684\u6027\u80fd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u662f\u4e00\u4e2a\u6267\u884c\u7f13\u5b58\u4e0e\u963b\u585e\u8bfb\u64cd\u4f5c\u7684\u5e93\u4f8b\u7a0b\u3002\u7f13\u5b58\u5728\u7528\u6237\u7a7a\u95f4\u4e4b\u5185\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5982\u679c\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u60f3\u8981\u8bfb\u5f88\u5c0f\u7684\u4f20\u8f93\u5757\uff0cfwrite() \u51fd\u6570\u4e2d\u7684\u7f13\u5b58\u4e0e\u963b\u585e I/O \u529f\u80fd\u53ef\u4ee5\u901a\u8fc7\u51cf\u5c11\u7cfb\u7edf\u8c03\u7528\uff0c"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\u5e76\u5728\u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u65f6\u589e\u52a0\u4f20\u8f93\u5757\u7684\u5927\u5c0f\u4ece\u800c\u589e\u5f3a\u5e94\u7528\u7a0b\u5e8f\u7684\u6027\u80fd\u3002"),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("h3",{id:"a3iozone-\u5b89\u88c5"},"A3\u3001IOzone \u5b89\u88c5"),(0,l.kt)("p",null,"\u6e90\u7801\u4e0b\u8f7d\u5730\u5740\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://www.iozone.org/src/current/"},"https://www.iozone.org/src/current/")),(0,l.kt)("p",null,"\u5b89\u88c5\u8fc7\u7a0b\u5982\u4e0b\uff0c\u6ce8\u610f\u6211\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u4e0b\u6709 gcc \u7f16\u8bd1\u5668\uff0c\u5982\u679c\u6ca1\u6709\u7f16\u8bd1\u73af\u5883\u9700\u8981\u81ea\u884c\u5b89\u88c5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# wget --no-check-certificate https://www.iozone.org/src/current/iozone3_493.tgz\n[root@arm64v8 ~]# ls\niozone3_493.tgz\n[root@arm64v8 ~]# tar xf iozone3_493.tgz \n[root@arm64v8 ~]# cd iozone3_493/\n[root@arm64v8 iozone3_493]#\n[root@arm64v8 iozone3_493]# tree -d\n.\n\u251c\u2500\u2500 docs\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 current\n\n3 directories\n[root@arm64v8 iozone3_493]#\n[root@arm64v8 iozone3_493]# cd src/current/\n[root@arm64v8 current]# ls\nAndroid.mk         fileop.c         gnuplotps.dem         libbif.c        spec.in\nAndroid_Readme.md  Generate_Graphs  Gnuplot.txt           makefile        write_telemetry\nApplication.mk     gengnuplot.sh    iozone.c              pit_server.c\nChanges.txt        gnu3d.dem        iozone_visualizer.pl  read_telemetry\nclient_list        gnuplot.dem      libasync.c            report.pl\n[root@arm64v8 current]#\n[root@arm64v8 current]# make linux-arm\nwhich: no ndk-build in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/root/bin)\n\nBuilding iozone for Linux-arm\n\ncc -c -O3 -Dunix -DHAVE_ANSIC_C -DASYNC_IO -DHAVE_PREAD \\\n    -DNAME='\"linux-arm\"' -DLINUX_ARM -DSHARED_MEM \\\n    -Dlinux -D_LARGEFILE64_SOURCE  iozone.c \\\n    -o iozone_linux-arm.o\ncc -c -O3 -Dunix -DHAVE_ANSIC_C -DASYNC_IO -D_LARGEFILE64_SOURCE \\\n    -DSHARED_MEM -Dlinux  libbif.c -o libbif.o\ncc -c -O3 -Dunix -Dlinux -DHAVE_ANSIC_C -DASYNC_IO \\\n    -D_LARGEFILE64_SOURCE  libasync.c  -o libasync.o\n\nBuilding fileop for Linux-arm\n\ngcc -Wall -c -O3  fileop.c -o fileop_linux-arm.o\n\nBuilding the pit_server\n\ncc -c   pit_server.c  -o pit_server.o \ncc -O3  iozone_linux-arm.o libbif.o libasync.o \\\n    -lrt -lpthread -o iozone\ncc -O3 -Dlinux fileop_linux-arm.o -o fileop\ncc -O3 -Dlinux pit_server.o -o pit_server\n[root@arm64v8 current]#\n[root@arm64v8 current]# cp iozone /usr/local/bin/\n[root@arm64v8 ~]# iozone -h | more\niozone: help mode\n\n    Usage: iozone [-s filesize_kB] [-r record_size_kB] [-f [path]filename] [-h]\n                  [-i test] [-E] [-p] [-a] [-A] [-z] [-Z] [-m] [-M] [-t children]\n                  [-l min_number_procs] [-u max_number_procs] [-v] [-R] [-x] [-o]\n                  [-d microseconds] [-F path1 path2...] [-V pattern] [-j stride]\n                  [-T] [-C] [-B] [-D] [-G] [-I] [-H depth] [-k depth] [-U mount_point]\n                  [-S cache_size] [-O] [-L cacheline_size] [-K] [-g maxfilesize_kB]\n                  [-n minfilesize_kB] [-N] [-Q] [-P start_cpu] [-e] [-c] [-b Excel.xls]\n                  [-J milliseconds] [-X write_telemetry_filename] [-w] [-W]\n                  [-Y read_telemetry_filename] [-y minrecsize_kB] [-q maxrecsize_kB]\n                  [-+u] [-+m cluster_filename] [-+d] [-+x multiplier] [-+p # ]\n                  [-+r] [-+t] [-+X] [-+Z] [-+w percent dedupable] [-+y percent_interior_dedup]\n                  [-+C percent_dedup_within] [-+a zero_pct]  [-+Q dedup granule size]\n                  [-+M dedup+compress flag ]\n\n           -a  Auto mode\n           -A  Auto2 mode\n           -b Filename  Create Excel worksheet file\n           -B  Use mmap() files\n           ......\n")),(0,l.kt)("h3",{id:"a4iozone-\u4e3b\u8981\u53c2\u6570\u8bf4\u660e"},"A4\u3001IOzone \u4e3b\u8981\u53c2\u6570\u8bf4\u660e"),(0,l.kt)("p",null,"iozone \u5e38\u7528\u7684\u51e0\u4e2a\u53c2\u6570\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"-","a\uff1a\u5168\u9762\u6d4b\u8bd5\uff0c\u6bd4\u5982\u5757\u5927\u5c0f\u5b83\u4f1a\u81ea\u52a8\u52a0\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"-","i N\uff1a\u7528\u6765\u9009\u62e9\u6d4b\u8bd5\u9879\uff0c\u6bd4\u5982 Read/Write/Random \u6bd4\u8f83\u5e38\u7528\u7684\u662f 0 1 2\uff0c\u53ef\u4ee5\u6307\u5b9a\u6210 -i 0 -i 1 -i 2\u3002"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"N \u4ee3\u8868\u6570\u5b57\uff0c\u4e0d\u540c\u7684\u6570\u5b57\u4ee3\u8868\u4e0d\u540c\u7684\u6d4b\u8bd5\u6a21\u5f0f\uff0c\u53ef\u4ee5\u540c\u65f6\u6267\u884c\u591a\u4e2a\u6a21\u5f0f\u3002")),(0,l.kt)("table",{parentName:"li"},(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"N \u53d6\u503c"),(0,l.kt)("th",{parentName:"tr",align:null},"\u6d4b\u8bd5\u9879"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"0"),(0,l.kt)("td",{parentName:"tr",align:null},"write/rewrite")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"read/re-read")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"random read/random write")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"3"),(0,l.kt)("td",{parentName:"tr",align:null},"backwards read")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"4"),(0,l.kt)("td",{parentName:"tr",align:null},"re-write-record")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"5"),(0,l.kt)("td",{parentName:"tr",align:null},"stride-read")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"6"),(0,l.kt)("td",{parentName:"tr",align:null},"fwrite/re-fwrite")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"7"),(0,l.kt)("td",{parentName:"tr",align:null},"fread/re-fread")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"8"),(0,l.kt)("td",{parentName:"tr",align:null},"random mix")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"9"),(0,l.kt)("td",{parentName:"tr",align:null},"pwrite/re-pwrite")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"10"),(0,l.kt)("td",{parentName:"tr",align:null},"pread/re-pread")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"11"),(0,l.kt)("td",{parentName:"tr",align:null},"pwritev/re-pwritev")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"12"),(0,l.kt)("td",{parentName:"tr",align:null},"preadv/re-preadv"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"-","r block size\uff1a\u6307\u5b9a\u4e00\u6b21\u5199\u5165/\u8bfb\u51fa\u7684\u5757\u5927\u5c0f\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"-","s file size\uff1a\u6307\u5b9a\u6d4b\u8bd5\u6587\u4ef6\u7684\u5927\u5c0f\u3002"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"\u6ce8\u610f\uff1a\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u8bbe\u7f6e\u7684\u6d4b\u8bd5\u6587\u4ef6\u5927\u5c0f\u4e00\u5b9a\u8981\u5927\u8fc7\u4f60\u7684\u5185\u5b58(\u6700\u4f73\u4e3a\u5185\u5b58\u7684 2 \u500d\u5927\u5c0f)\uff0c\u4e0d\u7136 linux \u4f1a\u7ed9\u4f60\u7684\u8bfb\u5199\u7684\u5185\u5bb9\u8fdb\u884c\u7f13\u5b58\u3002\u4f1a\u4f7f\u6570\u503c\u975e\u5e38\u4e0d\u771f\u5b9e\u3002")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"-","f filename\uff1a\u6307\u5b9a\u6d4b\u8bd5\u6587\u4ef6\u7684\u540d\u5b57\uff0c\u5b8c\u6210\u540e\u4f1a\u81ea\u52a8\u5220\u9664(\u8fd9\u4e2a\u6587\u4ef6\u5fc5\u987b\u6307\u5b9a\u4f60\u8981\u6d4b\u8bd5\u7684\u90a3\u4e2a\u786c\u76d8\u4e2d)\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"-","F file1 file2\u2026\uff1a\u6307\u5b9a\u591a\u7ebf\u7a0b\u4e0b\u6d4b\u8bd5\u7684\u6587\u4ef6\u540d\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"-","g #\uff1a\u5728 auto \u6a21\u5f0f\u4e0b\uff0c\u8bbe\u5b9a\u6700\u5927\u6587\u4ef6\u5927\u5c0f(Kbytes)\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"-","n #\uff1a\u5728 auto \u6a21\u5f0f\u4e0b\uff0c\u8bbe\u5b9a\u6700\u5c0f\u6587\u4ef6\u5927\u5c0f(Kbytes)\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"-","a -R\uff1a\u751f\u6210 excel \u62a5\u544a\uff0ciozone \u4f1a\u751f\u6210\u4e00\u4e2a excel \u517c\u5bb9\u6027\u62a5\u544a\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u5e76\u7ed8\u5236\u4e00\u4e2a\u5173\u4e8e\u6587\u4ef6\u7cfb\u7edf\u6027\u80fd\u7684 3D \u56fe\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u66f4\u591a\u9009\u9879\u8bf7\u53c2\u8003 ",(0,l.kt)("a",{parentName:"p",href:"https://www.iozone.org/docs/IOzone_msword_98.pdf"},"https://www.iozone.org/docs/IOzone","_","msword","_","98.pdf"),"\u3002"))),(0,l.kt)("h3",{id:"a5iozone-\u6d4b\u8bd5\u7528\u4f8b"},"A5\u3001IOzone \u6d4b\u8bd5\u7528\u4f8b"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5b98\u65b9\u7528\u4f8b")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u4ee5\u81ea\u52a8\u5316\u7684\u65b9\u5f0f\u5f00\u59cb\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"iozone -a\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5982\u679c\u4f60\u5e0c\u671b\u751f\u6210\u56fe\u7247\uff0c\u90a3\u4e48\u4e0d\u59a8\u6253\u5f00 Excel mode\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"iozone -Ra                   # \u8f93\u51fa\u53ef\u4ee5\u4f7f\u7528\u7a7a\u683c\u6216tab\u5206\u9694\u7b26\u5bfc\u5165\niozone -Rab output.wks       # \u8f93\u51fa output.wks \u6587\u4ef6\uff0c\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u7535\u5b50\u8868\u683c\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5982\u679c\u4f60\u7684\u64cd\u4f5c\u7cfb\u7edf\u8d85\u8fc7 512M \u5185\u5b58\uff0c\u6d4b\u8bd5\u65f6\u4f60\u9700\u8981\u901a\u8fc7\u6700\u5927\u6587\u4ef6\u5927\u5c0f\u9009\u9879\u6307\u5b9a\u4e00\u4e2a\u66f4\u5927\u503c\uff1b\u6bd4\u5982\uff0c\u4f60\u7684\u64cd\u4f5c\u7cfb\u7edf\u662f 1G \u7684\u5185\u5b58\u5927\u5c0f\uff0c\u4f60\u53ef\u4ee5\u507f\u8bd5\u8fd9\u6837\u53bb\u6d4b\u8bd5\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"iozone -Ra -g 2G\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u6587\u4ef6\u7cfb\u7edf\u65f6\uff0c\u4f1a\u7528\u5230\u5185\u5b58\u4f5c\u4e3a\u7f13\u5b58\uff0c\u4e3a\u4e86\u6d4b\u51fa\u78c1\u76d8\u7684\u771f\u5b9e\u6548\u679c\uff0c\u6d4b\u8bd5\u6587\u4ef6\u6700\u5927\u503c\u8981\u8fdc\u8fdc\u5927\u4e8e\u5185\u5b58\u503c\uff0c\u5b98\u65b9\u5efa\u8bae\u662f\u5927 1 \u500d\u3002"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5982\u679c\u4f60\u53ea\u662f\u5173\u5fc3 read/write \u7684\u78c1\u76d8\u6027\u80fd\uff0c\u800c\u4e0d\u60f3\u82b1\u66f4\u591a\u7684\u65f6\u95f4\u53bb\u505a\u6240\u6709\u7684\u6027\u80fd\u6d4b\u8bd5\uff0c\u4e0d\u59a8\u50cf\u4e0b\u9762\u4e00\u6837\u9650\u5236\u6d4b\u8bd5\u7528\u4f8b\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"iozone -Ra -g 2G -i 0 -i 1\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5982\u679c\u4f60\u60f3\u4f5c\u4e3a\u4e00\u4e2a NFS \u5ba2\u6237\u7aef\u901a\u8fc7 iozone \u53bb\u6d4b\u8bd5 NFS \u6587\u4ef6\u7cfb\u7edf\u7684\u6027\u80fd\uff0c\u53ef\u4ee5\u507f\u8bd5\u8fd9\u6837\u64cd\u4f5c\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"iozone -Rac\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8fd9\u4f1a\u544a\u8bc9 iozone \u5728\u6d4b\u8bd5\u7684\u65f6\u5019\u9700\u8981\u8c03\u7528 close()\uff0c\u5f53\u5ba2\u6237\u7aef\u662f nfs v3 \u7248\u672c\u7684\u65f6\u5019\u5f88\u6709\u5fc5\u8981\u3002\u56e0\u4e3a\u5728\u5ba2\u6237\u7aef\u662f nfs v3 \u7684\u65f6\u5019\uff0cclose() \u4f1a\u51cf\u5c11\u5ba2\u6237\u7aef\u4fa7\u7684\u7f13\u5b58\u5f71\u54cd\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5f53\u7136\u5982\u679c\u4f60\u6307\u5b9a\u7684\u6d4b\u8bd5\u6587\u4ef6\u5927\u5c0f\u6bd4\u5185\u5b58\u5927\uff0c\u90a3\u4e48 c \u9009\u9879\u53ef\u4ee5\u4e0d\u7528\u6307\u5b9a\u3002")))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u751f\u4ea7\u5b9e\u8df5")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u751f\u4ea7\u73af\u5883 ssd \u6d4b\u8bd5\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# mkfs.xfs /dev/sdj -f\nmeta-data=/dev/sdj               isize=512    agcount=4, agsize=29303222 blks\n        =                       sectsz=4096  attr=2, projid32bit=1\n        =                       crc=1        finobt=1, sparse=1, rmapbt=0\n        =                       reflink=0\ndata     =                       bsize=4096   blocks=117212886, imaxpct=25\n        =                       sunit=0      swidth=0 blks\nnaming   =version 2              bsize=4096   ascii-ci=0, ftype=1\nlog      =internal log           bsize=4096   blocks=57232, version=2\n        =                       sectsz=4096  sunit=1 blks, lazy-count=1\nrealtime =none                   extsz=4096   blocks=0, rtextents=0\n[root@arm64v8 ~]# mkdir /iozone/ssd -p\n[root@arm64v8 ~]# mount /dev/sdj /iozone/ssd/\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# iozone -Ra -g 300G -i 0 -i 1 -f /iozone/ssd/ssdrwtest -b ssdoutput.xls > iozone_ssdrw.out \n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u751f\u4ea7\u73af\u5883 hdd \u6d4b\u8bd5\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# mkfs.xfs /dev/sdb -f\nmeta-data=/dev/sdb               isize=512    agcount=8, agsize=268435455 blks\n        =                       sectsz=4096  attr=2, projid32bit=1\n        =                       crc=1        finobt=1, sparse=1, rmapbt=0\n        =                       reflink=0\ndata     =                       bsize=4096   blocks=1953506646, imaxpct=5\n        =                       sunit=0      swidth=0 blks\nnaming   =version 2              bsize=4096   ascii-ci=0, ftype=1\nlog      =internal log           bsize=4096   blocks=521728, version=2\n        =                       sectsz=4096  sunit=1 blks, lazy-count=1\nrealtime =none                   extsz=4096   blocks=0, rtextents=0\n[root@arm64v8 ~]# mkdir /iozone/hdd\n[root@arm64v8 ~]# mount /dev/sdb /iozone/hdd\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# iozone -Ra -g 300G -i 0 -i 1 -f /iozone/hdd/hddrwtest -b hddoutput.xls > iozone_hddrw.out\n")))),(0,l.kt)("p",null,"\u4e0a\u9762\u4e24\u4e2a\u6d4b\u8bd5\u63a5\u8fd1\u751f\u4ea7\u73af\u5883\u4e0b\u7684\u6d4b\u8bd5\uff0c\u751f\u6210\u7684 xls \u6587\u4ef6\u53ef\u4ee5\u4f7f\u7528 excel \u6253\u5f00\uff0c\u7136\u540e\u9488\u5bf9\u76f8\u5e94\u7684\u6570\u636e\u5177\u4f53\u5206\u6790\u3002\u5f53\u7136\uff0c\u751f\u4ea7\u73af\u5883\u4e0b\u7684\u9700\u6c42\u6bd4\u8fd9\u4e2a\u8981\u590d\u6742\u5f97\u591a\uff0c\u6bd4\u5982 raid \u5361\u4e2d raid0 raid1 raid5 \u7b49\u6027\u80fd\u5982\u4f55\uff0craid \u5361\u76f4\u901a\u4e0b\u78c1\u76d8\u6027\u80fd\u5982\u4f55\uff0c\u4e3a\u4e86\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\uff0c\u8d2d\u4e70\u6602\u8d35\u7684 SAN \u5b58\u50a8\uff0c\u5206\u5e03\u5f0f\u5b58\u50a8\uff0c\u5404\u81ea\u7684\u5b58\u50a8\u6027\u80fd\u5982\u4f55\u3002\u90fd\u9700\u8981\u5177\u4f53\u95ee\u9898\u5177\u4f53\u5206\u6790\u3002"),(0,l.kt)("p",null,"\u4e0b\u9762\u6211\u4eec\u4f7f\u7528 out \u6587\u4ef6\u7ed8\u5236\u51e0\u4e2a\u56fe\uff0c\u66f4\u52a0\u5f62\u8c61\u5730\u8868\u8fbe\u6d4b\u8bd5\u7ed3\u679c\uff0c\u5c31\u5229\u7528 iozone","_","hddrw.out \u6587\u4ef6\u770b\u770b hdd \u78c1\u76d8\u7684\u6027\u80fd\u5982\u4f55\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u7ed8\u56fe\u9700\u8981 gnuplot \u8fd9\u4e2a\u5f00\u6e90\u5de5\u5177\n[root@arm64v8 ~]# yum install gnuplot -y\n\n# \u4e13\u95e8\u521b\u5efa\u4e00\u4e2a\u7528\u6765\u753b\u56fe\u7684\u76ee\u5f55 /opt/gnuplot\uff0c\u628a iozone \u6d4b\u8bd5\u751f\u6210\u7684\u7ed3\u679c\u6587\u4ef6\u4ee5\u53ca\u6e90\u7801\u81ea\u5e26\u7684\u7ed8\u56fe\u5de5\u5177\u4e00\u5e76\u62f7\u8d1d\u8fdb\u53bb\n[root@arm64v8 ~]# mkdir /opt/gnuplot\n[root@arm64v8 ~]# cp iozone_hddrw.out /opt/gnuplot\n[root@arm64v8 ~]# cp iozone3_493/src/current/Generate_Graphs /opt/gnuplot\n[root@arm64v8 ~]# cp iozone3_493/src/current/gengnuplot.sh /opt/gnuplot\n[root@arm64v8 ~]# cp iozone3_493/src/current/Gnuplot.txt /opt/gnuplot\n[root@arm64v8 ~]# cp iozone3_493/src/current/gnu3d.dem /opt/gnuplot\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# cd /opt/gnuplot/\n[root@arm64v8 gnuplot]# ls\nGenerate_Graphs  gengnuplot.sh  gnu3d.dem  Gnuplot.txt  iozone_hddrw.out\n[root@arm64v8 gnuplot]#\n")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"iozone plot write",src:a(98577).Z,width:"922",height:"826"})),(0,l.kt)("p",null,"\u8fd8\u6709\u51e0\u4e2a\u56fe\uff0c\u5c31\u4e0d\u4e00\u4e00\u9644\u4e0a\u6765\u4e86\uff0c\u56fe\u753b\u5f97\u662f\u4e0d\u548b\u7684\uff0c\u4f46\u662f\u4e0d\u5f71\u54cd\u6570\u636e\u5206\u6790\u3002"))}s.isMDXComponent=!0},69638:function(t,e,a){e.Z=a.p+"assets/images/fio-4416337fc525b3e68aa9a6246753a81b.png"},98577:function(t,e,a){e.Z=a.p+"assets/images/iozone plot write-92ae82e113a18b1b0ad0158b0a05c6d5.png"}}]);