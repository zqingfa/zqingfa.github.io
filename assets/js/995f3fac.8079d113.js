"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2263],{3905:function(e,n,a){a.d(n,{Zo:function(){return k},kt:function(){return u}});var t=a(67294);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){l(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function m(e,n){if(null==e)return{};var a,t,l=function(e,n){if(null==e)return{};var a,t,l={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=t.createContext({}),i=function(e){var n=t.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},k=function(e){var n=i(e.components);return t.createElement(p.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},s=t.forwardRef((function(e,n){var a=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,k=m(e,["components","mdxType","originalType","parentName"]),s=i(a),u=l,d=s["".concat(p,".").concat(u)]||s[u]||c[u]||r;return a?t.createElement(d,o(o({ref:n},k),{},{components:a})):t.createElement(d,o({ref:n},k))}));function u(e,n){var a=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=a.length,o=new Array(r);o[0]=s;var m={};for(var p in n)hasOwnProperty.call(n,p)&&(m[p]=n[p]);m.originalType=e,m.mdxType="string"==typeof e?e:l,o[1]=m;for(var i=2;i<r;i++)o[i]=a[i];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}s.displayName="MDXCreateElement"},43012:function(e,n,a){a.r(n),a.d(n,{assets:function(){return k},contentTitle:function(){return p},default:function(){return u},frontMatter:function(){return m},metadata:function(){return i},toc:function(){return c}});var t=a(87462),l=a(63366),r=(a(67294),a(3905)),o=["components"],m={id:"linux-advanced-1",slug:"/linux-advanced-1",title:"\u7b2c 1 \u7ae0 Linux \u8fdb\u9636\u547d\u4ee4",authors:"zhangqf",keywords:["linux","command"]},p=void 0,i={unversionedId:"linux/advanced/linux-advanced-1",id:"linux/advanced/linux-advanced-1",title:"\u7b2c 1 \u7ae0 Linux \u8fdb\u9636\u547d\u4ee4",description:"\u5728 Primary School \u7bc7\uff0c\u6211\u4eec\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u5f88\u591a\u57fa\u7840\u547d\u4ee4\uff0c\u4e5f\u6d89\u53ca\u5f88\u591a\u7cfb\u7edf\u5c42\u7ea7\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u90fd\u53ef\u4ee5\u7b97\u4f5c\u5165\u95e8\u7bc7\u7ae0\u3002\u4ece\u8fd9\u91cc\u5f00\u59cb\uff0c\u6211\u4eec\u7ee7\u7eed\u6df1\u5165\u63a2\u7d22\u5e94\u7528\u5c42\u9762\u7684\u76f8\u5173\u77e5\u8bc6\uff0c\u4e3b\u8981\u4ece\u5de5\u4f5c\u4e2d\u7ecf\u5e38\u5e94\u7528\u8fd9\u4e2a\u89d2\u5ea6\u51fa\u53d1\uff0c\u603b\u7ed3\u4e00\u4e9b\u5b9d\u8d35\u7ecf\u9a8c\u3002\u540c\u6837\u7684\uff0c\u5728\u6ca1\u6709\u7279\u522b\u8bf4\u660e\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u5728 ARM64 \u67b6\u6784\u670d\u52a1\u5668\u4e0b\u5b8c\u6210\u3002",source:"@site/docs/linux/advanced/\u7b2c 1 \u7ae0 Linux \u8fdb\u9636\u547d\u4ee4.md",sourceDirName:"linux/advanced",slug:"/linux-advanced-1",permalink:"/docs/linux-advanced-1",draft:!1,tags:[],version:"current",frontMatter:{id:"linux-advanced-1",slug:"/linux-advanced-1",title:"\u7b2c 1 \u7ae0 Linux \u8fdb\u9636\u547d\u4ee4",authors:"zhangqf",keywords:["linux","command"]},sidebar:"linux",previous:{title:"Linux\u8fdb\u9636",permalink:"/docs/category/linux\u8fdb\u9636"},next:{title:"\u7b2c 2 \u7ae0 Linux \u9632\u706b\u5899",permalink:"/docs/linux-advanced-2"}},k={},c=[{value:"1.1 \u9ad8\u6548\u5904\u7406\u6587\u672c",id:"11-\u9ad8\u6548\u5904\u7406\u6587\u672c",level:2},{value:"1.1.1\u3001grep \u547d\u4ee4",id:"111grep-\u547d\u4ee4",level:3},{value:"1.1.1.1\u3001grep \u8bed\u6cd5\u683c\u5f0f",id:"1111grep-\u8bed\u6cd5\u683c\u5f0f",level:4},{value:"1.1.1.2\u3001options \u9009\u9879",id:"1112options-\u9009\u9879",level:4},{value:"1.1.1.3\u3001pattern \u6a21\u5f0f",id:"1113pattern-\u6a21\u5f0f",level:4},{value:"1.1.2\u3001sed \u547d\u4ee4",id:"112sed-\u547d\u4ee4",level:3},{value:"1.1.2.1\u3001sed \u8bed\u6cd5\u683c\u5f0f",id:"1121sed-\u8bed\u6cd5\u683c\u5f0f",level:4},{value:"1.1.2.2\u3001options \u9009\u9879",id:"1122options-\u9009\u9879",level:4},{value:"1.1.2.3\u3001address \u5b9a\u5740\u8868\u8fbe\u5f0f",id:"1123address-\u5b9a\u5740\u8868\u8fbe\u5f0f",level:4},{value:"1.1.2.4\u3001command \u529f\u80fd\u547d\u4ee4",id:"1124command-\u529f\u80fd\u547d\u4ee4",level:4},{value:"1.1.3\u3001awk \u547d\u4ee4",id:"113awk-\u547d\u4ee4",level:3},{value:"1.1.3.1\u3001\u5b89\u88c5\u65b0\u7248\u672c gawk",id:"1131\u5b89\u88c5\u65b0\u7248\u672c-gawk",level:4},{value:"1.1.3.2\u3001awk \u7528\u4f8b\u6587\u4ef6",id:"1132awk-\u7528\u4f8b\u6587\u4ef6",level:4},{value:"1.1.3.3\u3001awk \u7528\u6cd5\u5165\u95e8",id:"1133awk-\u7528\u6cd5\u5165\u95e8",level:4},{value:"1.1.3.4\u3001BEGIN \u548c END \u8bed\u53e5\u5757",id:"1134begin-\u548c-end-\u8bed\u53e5\u5757",level:4},{value:"1.1.3.5\u3001awk \u547d\u4ee4\u884c\u7ed3\u6784\u548c\u8bed\u6cd5\u7ed3\u6784",id:"1135awk-\u547d\u4ee4\u884c\u7ed3\u6784\u548c\u8bed\u6cd5\u7ed3\u6784",level:4},{value:"1.1.3.6\u3001awk \u8bfb\u53d6\u884c\u7684\u7ec6\u8282",id:"1136awk-\u8bfb\u53d6\u884c\u7684\u7ec6\u8282",level:4},{value:"1.1.3.7\u3001awk \u5212\u5206\u5b57\u6bb5",id:"1137awk-\u5212\u5206\u5b57\u6bb5",level:4},{value:"1.1.3.7.1\u3001\u5f15\u7528\u5b57\u6bb5\u7684\u65b9\u5f0f",id:"11371\u5f15\u7528\u5b57\u6bb5\u7684\u65b9\u5f0f",level:5},{value:"1.1.3.7.2\u3001\u5206\u5272\u5b57\u6bb5\u7684\u65b9\u5f0f",id:"11372\u5206\u5272\u5b57\u6bb5\u7684\u65b9\u5f0f",level:5},{value:"1.1.3.7.3\u3001\u68c0\u67e5\u5b57\u6bb5\u5212\u5206\u7684\u65b9\u5f0f",id:"11373\u68c0\u67e5\u5b57\u6bb5\u5212\u5206\u7684\u65b9\u5f0f",level:5},{value:"1.1.3.8\u3001$0 \u91cd\u65b0\u8ba1\u7b97",id:"11380-\u91cd\u65b0\u8ba1\u7b97",level:4},{value:"1.1.3.9\u3001awk \u6570\u636e\u7b5b\u9009\u793a\u4f8b",id:"1139awk-\u6570\u636e\u7b5b\u9009\u793a\u4f8b",level:4},{value:"1.1.3.10\u3001awk \u5de5\u4f5c\u6d41\u7a0b",id:"11310awk-\u5de5\u4f5c\u6d41\u7a0b",level:4},{value:"1.1.3.11\u3001getline \u7528\u6cd5\u8be6\u89e3",id:"11311getline-\u7528\u6cd5\u8be6\u89e3",level:4},{value:"1.1.3.11.1\u3001\u65e0\u53c2\u6570\u7684 getline",id:"113111\u65e0\u53c2\u6570\u7684-getline",level:5},{value:"1.1.3.11.2\u3001\u4e00\u4e2a\u53c2\u6570\u7684 getline",id:"113112\u4e00\u4e2a\u53c2\u6570\u7684-getline",level:5},{value:"1.1.3.11.3\u3001\u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e",id:"113113\u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e",level:5},{value:"1.1.3.11.4\u3001\u4ece Shell \u547d\u4ee4\u8f93\u51fa\u7ed3\u679c\u4e2d\u8bfb\u53d6\u6570\u636e",id:"113114\u4ece-shell-\u547d\u4ee4\u8f93\u51fa\u7ed3\u679c\u4e2d\u8bfb\u53d6\u6570\u636e",level:5},{value:"1.1.3.11.5\u3001awk \u4e2d\u7684 coprocess",id:"113115awk-\u4e2d\u7684-coprocess",level:5},{value:"1.1.3.11.6\u3001close()",id:"113116close",level:5},{value:"1.1.3.12\u3001awk \u53d8\u91cf",id:"11312awk-\u53d8\u91cf",level:4},{value:"1.1.3.12.1\u3001\u53d8\u91cf\u8d4b\u503c",id:"113121\u53d8\u91cf\u8d4b\u503c",level:5},{value:"1.1.3.12.2\u3001awk \u4e2d\u58f0\u660e\u53d8\u91cf\u7684\u4f4d\u7f6e",id:"113122awk-\u4e2d\u58f0\u660e\u53d8\u91cf\u7684\u4f4d\u7f6e",level:5},{value:"1.1.3.12.3\u3001awk \u4e2d\u4f7f\u7528 Shell \u53d8\u91cf",id:"113123awk-\u4e2d\u4f7f\u7528-shell-\u53d8\u91cf",level:5},{value:"1.1.3.13\u3001\u6570\u636e\u7c7b\u578b\u548c\u5b57\u9762\u91cf",id:"11313\u6570\u636e\u7c7b\u578b\u548c\u5b57\u9762\u91cf",level:4},{value:"1.1.3.13.1\u3001\u6570\u636e\u7c7b\u578b",id:"113131\u6570\u636e\u7c7b\u578b",level:5},{value:"1.1.3.13.2\u3001awk \u5b57\u9762\u91cf",id:"113132awk-\u5b57\u9762\u91cf",level:5},{value:"1.1.3.14\u3001gawk \u652f\u6301\u7684\u6b63\u5219\u8868\u8fbe\u5f0f",id:"11314gawk-\u652f\u6301\u7684\u6b63\u5219\u8868\u8fbe\u5f0f",level:4},{value:"1.1.3.15\u3001awk \u5e03\u5c14\u503c\u3001\u6bd4\u8f83\u548c\u903b\u8f91\u8fd0\u7b97",id:"11315awk-\u5e03\u5c14\u503c\u6bd4\u8f83\u548c\u903b\u8f91\u8fd0\u7b97",level:4},{value:"1.1.3.15.1\u3001awk \u5e03\u5c14\u503c",id:"113151awk-\u5e03\u5c14\u503c",level:5},{value:"1.1.3.15.2\u3001awk \u4e2d\u6bd4\u8f83\u64cd\u4f5c",id:"113152awk-\u4e2d\u6bd4\u8f83\u64cd\u4f5c",level:5},{value:"1.1.3.15.3\u3001\u903b\u8f91\u8fd0\u7b97",id:"113153\u903b\u8f91\u8fd0\u7b97",level:5},{value:"1.1.3.15.4\u3001\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7",id:"113154\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7",level:5},{value:"1.1.3.16\u3001awk \u6d41\u7a0b\u63a7\u5236",id:"11316awk-\u6d41\u7a0b\u63a7\u5236",level:4},{value:"1.1.3.17\u3001awk \u6570\u7ec4",id:"11317awk-\u6570\u7ec4",level:4},{value:"1.1.3.18\u3001awk ARGC \u548c ARGV",id:"11318awk-argc-\u548c-argv",level:4},{value:"1.1.3.19\u3001awk \u81ea\u5b9a\u4e49\u51fd\u6570",id:"11319awk-\u81ea\u5b9a\u4e49\u51fd\u6570",level:4},{value:"1.1.3.20\u3001awk \u9009\u9879\u3001\u5185\u7f6e\u53d8\u91cf",id:"11320awk-\u9009\u9879\u5185\u7f6e\u53d8\u91cf",level:4},{value:"1.1.3.21\u3001\u7efc\u5408\u6848\u4f8b",id:"11321\u7efc\u5408\u6848\u4f8b",level:4},{value:"1.2\u3001\u7f51\u7edc\u6293\u5305\u548c\u626b\u63cf",id:"12\u7f51\u7edc\u6293\u5305\u548c\u626b\u63cf",level:2},{value:"1.2.1\u3001tcpdump \u547d\u4ee4",id:"121tcpdump-\u547d\u4ee4",level:3},{value:"1.2.2\u3001nmap \u547d\u4ee4",id:"122nmap-\u547d\u4ee4",level:3}],s={toc:c};function u(e){var n=e.components,m=(0,l.Z)(e,o);return(0,r.kt)("wrapper",(0,t.Z)({},s,m,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\u5728 Primary School \u7bc7\uff0c\u6211\u4eec\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u5f88\u591a\u57fa\u7840\u547d\u4ee4\uff0c\u4e5f\u6d89\u53ca\u5f88\u591a\u7cfb\u7edf\u5c42\u7ea7\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u90fd\u53ef\u4ee5\u7b97\u4f5c\u5165\u95e8\u7bc7\u7ae0\u3002\u4ece\u8fd9\u91cc\u5f00\u59cb\uff0c\u6211\u4eec\u7ee7\u7eed\u6df1\u5165\u63a2\u7d22\u5e94\u7528\u5c42\u9762\u7684\u76f8\u5173\u77e5\u8bc6\uff0c\u4e3b\u8981\u4ece\u5de5\u4f5c\u4e2d\u7ecf\u5e38\u5e94\u7528\u8fd9\u4e2a\u89d2\u5ea6\u51fa\u53d1\uff0c\u603b\u7ed3\u4e00\u4e9b\u5b9d\u8d35\u7ecf\u9a8c\u3002\u540c\u6837\u7684\uff0c\u5728\u6ca1\u6709\u7279\u522b\u8bf4\u660e\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u5728 ARM64 \u67b6\u6784\u670d\u52a1\u5668\u4e0b\u5b8c\u6210\u3002"),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"11-\u9ad8\u6548\u5904\u7406\u6587\u672c"},"1.1 \u9ad8\u6548\u5904\u7406\u6587\u672c"),(0,r.kt)("p",null,"\u5728\u5de5\u4f5c\u5f53\u4e2d\uff0c\u6d89\u53ca\u5230\u6587\u672c\u5904\u7406\uff0c\u6700\u5148\u60f3\u5230\u7684\u5c31\u662f grep\u3001sed\u3001awk \u4e09\u4e2a\u547d\u4ee4\uff0c\u4fd7\u79f0\u6587\u672c\u4e09\u5251\u5ba2\uff1b\u8fd9\u4e09\u4e2a\u5de5\u5177\u5b9e\u9645\u4e0a\u501f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5bf9\u6587\u672c\u8fdb\u884c\u5339\u914d\uff0c\u7136\u540e\u8fdb\u884c\u52a8\u4f5c\u5904\u7406\u3002"),(0,r.kt)("p",null,"\u5373\u4fbf\u662f\u5728\u7f16\u7a0b\u9886\u57df\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u7528\u8d77\u6765\u4e5f\u6709\u4e00\u5b9a\u96be\u5ea6\uff0c\u6240\u4ee5\u4e0b\u9762\u6211\u4f1a\u4ecb\u7ecd\u8fd9\u4e09\u4e2a\u5de5\u5177\u7684\u5e38\u89c4\u7528\u6cd5\uff0c\u5982\u679c\u6ee1\u8db3\u4e0d\u4e86\u9700\u6c42\uff0c\u4e0d\u9632\u4f7f\u7528 python \u7f16\u7a0b\uff0c\u6ca1\u6709\u5fc5\u8981\u5728\u4e00\u4e2a\u5de5\u5177\u4e0a\u82b1\u8d39\u592a\u591a\u65f6\u95f4\u3002"),(0,r.kt)("h3",{id:"111grep-\u547d\u4ee4"},"1.1.1\u3001grep \u547d\u4ee4"),(0,r.kt)("p",null,"grep \u5168\u79f0\u662f Global Regular Expression Print\uff0c\u8868\u793a\u5168\u5c40\u6b63\u5219\u8868\u8fbe\u5f0f\u7248\u672c\uff0c\u5b83\u7684\u4f7f\u7528\u6743\u9650\u662f\u6240\u6709\u7528\u6237\u3002"),(0,r.kt)("p",null,"grep \u7684\u5de5\u4f5c\u65b9\u5f0f\u662f\u8fd9\u6837\u7684\uff0c\u5b83\u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u4e2d\u641c\u7d22\u5b57\u7b26\u4e32\u6a21\u677f\u3002\u5982\u679c\u6a21\u677f\u5305\u62ec\u7a7a\u683c\uff0c\u5219\u5fc5\u987b\u88ab\u5f15\u7528\uff0c\u6a21\u677f\u540e\u7684\u6240\u6709\u5b57\u7b26\u4e32\u88ab\u770b\u4f5c\u6587\u4ef6\u540d\u3002\u641c\u7d22\u7684\u7ed3\u679c\u88ab\u9001\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u4e0d\u5f71\u54cd\u539f\u6587\u4ef6\u5185\u5bb9\u3002"),(0,r.kt)("p",null,"grep \u53ef\u7528\u4e8e shell \u811a\u672c\uff0c\u56e0\u4e3a grep \u901a\u8fc7\u8fd4\u56de\u4e00\u4e2a\u72b6\u6001\u503c\u6765\u8bf4\u660e\u641c\u7d22\u7684\u72b6\u6001\uff0c\u5982\u679c\u6a21\u677f\u641c\u7d22\u6210\u529f\uff0c\u5219\u8fd4\u56de 0\uff0c\u5982\u679c\u641c\u7d22\u4e0d\u6210\u529f\uff0c\u5219\u8fd4\u56de 1\uff0c\u5982\u679c\u641c\u7d22\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de 2\u3002\u6211\u4eec\u5229\u7528\u8fd9\u4e9b\u8fd4\u56de\u503c\u5c31\u53ef\u8fdb\u884c\u4e00\u4e9b\u81ea\u52a8\u5316\u7684\u6587\u672c\u5904\u7406\u5de5\u4f5c\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"egrep = grep -E\uff1a\u6269\u5c55\u7684\u6b63\u5219\u8868\u8fbe\u5f0f"),"( \u9664\u4e86 ",(0,r.kt)("strong",{parentName:"p"},"\\","< , ","\\","> , ","\\","b")," \u4f7f\u7528\u5176\u4ed6\u6b63\u5219\u8868\u8fbe\u5f0f\u90fd\u53ef\u4ee5\u53bb\u6389\u8f6c\u4e49\u7b26 ","\\"," )"),(0,r.kt)("h4",{id:"1111grep-\u8bed\u6cd5\u683c\u5f0f"},"1.1.1.1\u3001grep \u8bed\u6cd5\u683c\u5f0f"),(0,r.kt)("p",null,"\u547d\u4ee4\u683c\u5f0f\uff1agrep ","[","options","]"," pattern file"),(0,r.kt)("h4",{id:"1112options-\u9009\u9879"},"1.1.1.2\u3001options \u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"-A[num]:            \u9664\u4e86\u663e\u793a\u7b26\u5408 pattern \u7684\u90a3\u4e00\u5217\u4e4b\u5916\uff0c\u5e76\u663e\u793a\u8be5\u884c\u4e4b\u540e\u7684 num \u884c\u3002\n-B[num]:            \u9664\u4e86\u663e\u793a\u7b26\u5408 pattern \u7684\u90a3\u4e00\u884c\u4e4b\u5916\uff0c\u5e76\u663e\u793a\u8be5\u884c\u4e4b\u524d\u7684 num \u884c\u3002\n-C[num]:            \u9664\u4e86\u663e\u793a\u7b26\u5408 pattern \u7684\u90a3\u4e00\u884c\u4e4b\u5916\uff0c\u5e76\u663e\u793a\u8be5\u884c\u4e4b\u524d\u540e\u7684 num \u884c\u3002\n-c:                 \u7edf\u8ba1\u5339\u914d\u7684\u884c\u6570\n-e:                 \u5b9e\u73b0\u591a\u4e2a\u9009\u9879\u95f4\u7684\u903b\u8f91 or \u5173\u7cfb\n-E:                 \u6269\u5c55\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\n-f FILE:            \u4ece FILE \u83b7\u53d6 PATTERN \u5339\u914d\n-F:                 \u76f8\u5f53\u4e8e fgrep\n-i --ignore-case:   \u5ffd\u7565\u5b57\u7b26\u5927\u5c0f\u5199\u7684\u5dee\u522b\u3002\n-n:                 \u663e\u793a\u5339\u914d\u7684\u884c\u53f7\n-o:                 \u4ec5\u663e\u793a\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\n-q:                 \u9759\u9ed8\u6a21\u5f0f\uff0c\u4e0d\u8f93\u51fa\u4efb\u4f55\u4fe1\u606f\n-s:                 \u4e0d\u663e\u793a\u9519\u8bef\u4fe1\u606f\u3002\n-v:                 \u663e\u793a\u4e0d\u88ab pattern \u5339\u914d\u5230\u7684\u884c\uff0c\u76f8\u5f53\u4e8e [^] \u53cd\u5411\u5339\u914d\n-w:                 \u5339\u914d\u6574\u4e2a\u5355\u8bcd\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# cat test.txt \naaaaa\nbbbbb\nccccc\nAAAbb\nDDDDCCCBBB\n[root@arm64v8 ~]# grep -A2 "b" test.txt \nbbbbb\nccccc\nAAAbb\nDDDDCCCBBB\n[root@arm64v8 ~]# grep -e "AAA" -e "BBB" test.txt \nAAAbb\nDDDDCCCBBB\n[root@arm64v8 ~]# grep -in "b" test.txt \n2:bbbbb\n4:AAAbb\n5:DDDDCCCBBB\n[root@arm64v8 ~]# grep -wn "aaaaa" test.txt \n1:aaaaa\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# cat pattern.txt \nDDDDC\n[root@arm64v8 ~]# grep -n -f pattern.txt test.txt \n5:DDDDCCCBBB\n[root@arm64v8 ~]#\n')),(0,r.kt)("h4",{id:"1113pattern-\u6a21\u5f0f"},"1.1.1.3\u3001pattern \u6a21\u5f0f"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u57fa\u672c\u6b63\u5219\u8868\u8fbe\u5f0f")),(0,r.kt)("p",null,"\u5339\u914d\u5b57\u7b26"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},".                           \u5339\u914d\u4efb\u610f\u5355\u4e2a\u5b57\u7b26\uff0c\u4e0d\u80fd\u5339\u914d\u7a7a\u884c\n[]                          \u5339\u914d\u6307\u5b9a\u8303\u56f4\u5185\u7684\u4efb\u610f\u5355\u4e2a\u5b57\u7b26\n[^]                         \u53d6\u53cd\n[:alnum:] or [0-9a-zA-Z]    \u5339\u914d\u5927\u5c0f\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u96c6\n[:alpha:] or [a-zA-Z]       \u5339\u914d\u5927\u5c0f\u5199\u5b57\u6bcd\u96c6\n[:upper:] or [A-Z]          \u5339\u914d\u5927\u5199\u5b57\u6bcd\u96c6\n[:lower:] or [a-z]          \u5339\u914d\u5c0f\u5199\u5b57\u6bcd\u96c6\n[:blank:]                   \u5339\u914d\u7a7a\u767d\u5b57\u7b26\u96c6(\u7a7a\u683c\u548c\u5236\u8868\u7b26)\n[:space:]                   \u5339\u914d\u7a7a\u683c\u5b57\u7b26\u96c6(\u7a7a\u683c\u3001\u5236\u8868\u7b26\u3001\u5782\u76f4\u5236\u8868\u7b26\u3001\u6362\u884c\u7b26\u3001\u56de\u8f66\u7b26\u548c\u5206\u9875\u7b26)\n[:cntrl:]                   \u5339\u914d\u63a7\u5236\u5b57\u7b26\u96c6(ASCII\u4e2d\uff0c\u8fd9\u4e9b\u5b57\u7b26\u7684\u516b\u8fdb\u5236\u4ee3\u7801\u4ece000\u5230037\uff0c\u8fd8\u5305\u62ec177(DEL))\n[:digit:]                   \u5339\u914d\u6570\u5b57\u5b57\u7b26\u96c6(0-9)\n[:xdigit:]                  \u5339\u914d\u5341\u516d\u8fdb\u5236\u96c6(0-9A-Fa-f)\n[:graph:]                   \u5339\u914d\u7ed8\u56fe\u96c6(\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u6807\u70b9\u7b26\u53f7)\n[:print:]                   \u5339\u914d\u6253\u5370\u5b57\u7b26\u96c6(\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u6807\u70b9\u7b26\u53f7\u548c\u7a7a\u683c)\n[:punct:]                   \u5339\u914d\u6807\u70b9\u7b26\u53f7\u96c6 '! \" # $ % & ' ( ) * + , - . / : ; < = > ? @ [ \\ ] ^ _ ' { | } ~'\u3002\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# cat test.txt \naaa\na1a\nb//cd\n\ncc44AA\n[root@arm64v8 ~]# grep . test.txt \naaa\na1a\nb//cd\ncc44AA\n[root@arm64v8 ~]# grep "[a/]" test.txt \naaa\na1a\nb//cd\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# grep [[:punct:]] test.txt \nb//cd\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u5339\u914d\u6b21\u6570"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"*           \u5339\u914d\u524d\u9762\u7684\u5b57\u7b26\u4efb\u610f\u6b21\uff0c\u5305\u62ec0\u6b21\uff0c\u8d2a\u5a6a\u6a21\u5f0f\uff1a\u5c3d\u53ef\u80fd\u957f\u7684\u5339\u914d\n.*          \u5339\u914d\u4efb\u610f\u957f\u5ea6\u7684\u4efb\u610f\u5b57\u7b26\uff0c\u4e0d\u5305\u62ec0\u6b21\n\\?          \u5339\u914d\u5176\u524d\u9762\u7684\u5b57\u7b260 \u6216 1\u6b21\n\\+          \u5339\u914d\u5176\u524d\u9762\u7684\u5b57\u7b26\u81f3\u5c111\u6b21\n\\{n\\}       \u5339\u914d\u524d\u9762\u7684\u5b57\u7b26n\u6b21\n\\{m,n\\}     \u5339\u914d\u524d\u9762\u7684\u5b57\u7b26\u81f3\u5c11m \u6b21\uff0c\u81f3\u591an\u6b21\n\\{,n\\}      \u5339\u914d\u524d\u9762\u7684\u5b57\u7b26\u81f3\u591an\u6b21\n\\{n,\\}      \u5339\u914d\u524d\u9762\u7684\u5b57\u7b26\u81f3\u5c11n\u6b21\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# cat test.txt \nggle\ngogle\ngoogle\ngooooooooooooogle\ngagle\n[root@arm64v8 ~]# grep "g[o]*gle" test.txt \nggle\ngogle\ngoogle\ngooooooooooooogle\n[root@arm64v8 ~]# grep "g[o].*gle" test.txt \ngogle\ngoogle\ngooooooooooooogle\n[root@arm64v8 ~]# grep "g[o]\\?gle" test.txt \nggle\ngogle\n[root@arm64v8 ~]# grep "g[o]\\+gle" test.txt \ngogle\ngoogle\ngooooooooooooogle\n[root@arm64v8 ~]# grep "g[o]\\{1,2\\}gle" test.txt \ngogle\ngoogle\n[root@arm64v8 ~]# grep -E "g[o]{10,}gle" test.txt \ngooooooooooooogle\n[root@arm64v8 ~]# egrep "g[o]{,10}gle" test.txt \nggle\ngogle\ngoogle\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u4f4d\u7f6e\u951a\u5b9a\uff1a\u5b9a\u4f4d\u51fa\u73b0\u7684\u4f4d\u7f6e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"^                   \u884c\u9996\u951a\u5b9a\uff0c\u7528\u4e8e\u6a21\u5f0f\u7684\u6700\u5de6\u4fa7\n$                   \u884c\u5c3e\u951a\u5b9a\uff0c\u7528\u4e8e\u6a21\u5f0f\u7684\u6700\u53f3\u4fa7\n^PATTERN$           \u7528\u4e8e\u6a21\u5f0f\u5339\u914d\u6574\u884c\n^$                  \u7a7a\u884c\n\\< or \\b             \u8bcd\u9996\u951a\u5b9a\uff0c\u7528\u4e8e\u5355\u8bcd\u6a21\u5f0f\u7684\u5de6\u4fa7\n\\> or \\b             \u8bcd\u5c3e\u951a\u5b9a\uff1b\u7528\u4e8e\u5355\u8bcd\u6a21\u5f0f\u7684\u53f3\u4fa7\n\\<PATTERN\\>           \u5339\u914d\u6574\u4e2aPATTERN\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# cat test.txt \naaa\nbbb\n\nabcd\n[root@arm64v8 ~]# grep ^a test.txt \naaa\nabcd\n[root@arm64v8 ~]# grep b$ test.txt \nbbb\n[root@arm64v8 ~]# grep ^$ test.txt \n\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# grep "\\<a.*d\\>" test.txt \nabcd\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u5206\u7ec4\u548c\u540e\u5411\u5f15\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"1. \u5206\u7ec4\uff1a\\(\\) \u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\u6346\u7ed1\u5728\u4e00\u8d77\uff0c\u5f53\u4f5c\u4e00\u4e2a\u6574\u4f53\u8fdb\u884c\u5904\u7406\n   \u5206\u7ec4\u62ec\u53f7\u4e2d\u7684\u6a21\u5f0f\u5339\u914d\u5230\u7684\u5185\u5bb9\u4f1a\u88ab\u6b63\u5219\u8868\u8fbe\u5f0f\u5f15\u64ce\u8bb0\u5f55\u4e8e\u5185\u90e8\u7684\u53d8\u91cf\u4e2d\uff0c\u8fd9\u4e9b\u53d8\u91cf\u7684\u547d\u540d\u65b9\u5f0f\u4e3a: \\1, \\2, \\3, ...\n\n2. \u540e\u5411\u5f15\u7528\n   \u5f15\u7528\u524d\u9762\u7684\u5206\u7ec4\u62ec\u53f7\u4e2d\u7684\u6a21\u5f0f\u6240\u5339\u914d\u5b57\u7b26\uff0c\u800c\u975e\u6a21\u5f0f\u672c\u8eab\n   \\1 \u8868\u793a\u4ece\u5de6\u4fa7\u8d77\u7b2c\u4e00\u4e2a\u5de6\u62ec\u53f7\u4ee5\u53ca\u4e0e\u4e4b\u914d\u5bf9\u53f3\u62ec\u53f7\u4e4b\u95f4\u7684\u6a21\u5f0f\u6240\u5339\u914d\u5230\u7684\u5b57\u7b26\n   \\2 \u8868\u793a\u4ece\u5de6\u4fa7\u8d77\u7b2c2\u4e2a\u5de6\u62ec\u53f7\u4ee5\u53ca\u4e0e\u4e4b\u914d\u5bf9\u53f3\u62ec\u53f7\u4e4b\u95f4\u7684\u6a21\u5f0f\u6240\u5339\u914d\u5230\u7684\u5b57\u7b26\uff0c\u4ee5\u6b64\u7c7b\u63a8\n   \\& \u8868\u793a\u524d\u9762\u7684\u5206\u7ec4\u4e2d\u6240\u6709\u5b57\u7b26\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# cat test.txt \nHe beautifies his beauty.\nShe beautifies her pretty.\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# grep "\\(beau\\).*\\1" test.txt \nHe beautifies his beauty.\n[root@arm64v8 ~]#\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"\uff081\uff09\u5b57\u7b26\u5339\u914d\uff1a\n\n .  \u4efb\u610f\u5355\u4e2a\u5b57\u7b26\n []  \u6307\u5b9a\u8303\u56f4\u7684\u5b57\u7b26\n [^] \u4e0d\u5728\u6307\u5b9a\u8303\u56f4\u7684\u5b57\u7b26\n   \u6b21\u6570\u5339\u914d\uff1a\n * \uff1a\u5339\u914d\u524d\u9762\u5b57\u7b26\u4efb\u610f\u6b21\n ?  : 0 \u62161\u6b21\n + \uff1a1 \u6b21\u6216\u591a\u6b21\n {m} \uff1a\u5339\u914dm\u6b21 \u6b21\n {m,n} \uff1a\u81f3\u5c11m \uff0c\u81f3\u591an\u6b21\n\uff082\uff09\u4f4d\u7f6e\u951a\u5b9a\uff1a\n\n ^ : \u884c\u9996\n $ : \u884c\u5c3e\n \\<, \\b : \u8bed\u9996\n \\>, \\b : \u8bed\u5c3e\n   \u5206\u7ec4\uff1a()\n \u540e\u5411\u5f15\u7528\uff1a\\1, \\2, ...\n\uff083\uff09\u603b\u7ed3\n\n\u3000\u3000\u9664\u4e86\\<, \\b : \u8bed\u9996\u3001\\>, \\b : \u8bed\u5c3e\uff1b\u4f7f\u7528\u5176\u4ed6\u6b63\u5219\u90fd\u53ef\u4ee5\u53bb\u6389\\\uff1b\u4e0a\u9762\u6709\u6f14\u793a\u6848\u4f8b\uff0c\u4e0d\u518d\u8fdb\u884c\u6f14\u793a\n")),(0,r.kt)("h3",{id:"112sed-\u547d\u4ee4"},"1.1.2\u3001sed \u547d\u4ee4"),(0,r.kt)("p",null,"sed \u662f\u4e00\u4e2a\u6d41\u5f0f\u7f16\u8f91\u5668\u7a0b\u5e8f\uff0c\u5176\u5de5\u4f5c\u8def\u7ebf\u5927\u81f4\u5982\u4e0b\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5b83\u8bfb\u53d6\u8f93\u5165\u6d41(\u53ef\u4ee5\u662f\u6587\u4ef6\u3001\u6807\u51c6\u8f93\u5165)\u7684\u6bcf\u4e00\u884c\u653e\u8fdb\u6a21\u5f0f\u7a7a\u95f4(pattern space)\uff0c\u540c\u65f6\u5c06\u6b64\u884c\u884c\u53f7\u901a\u8fc7 sed \u884c\u53f7\u8ba1\u6570\u5668\u8bb0\u5f55\u5728\u5185\u5b58\u4e2d\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u7136\u540e\u5bf9\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u7684\u884c\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\uff0c\u5982\u679c\u80fd\u5339\u914d\u4e0a\u5219\u4f7f\u7528 sed \u7a0b\u5e8f\u5185\u90e8\u7684\u547d\u4ee4\u8fdb\u884c\u5904\u7406\uff0c\u5904\u7406\u7ed3\u675f\u540e\uff0c\u4ece\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u8f93\u51fa(\u9ed8\u8ba4)\u51fa\u53bb\uff0c\u5e76\u6e05\u7a7a\u6a21\u5f0f\u7a7a\u95f4\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u968f\u540e\u518d\u4ece\u8f93\u5165\u6d41\u4e2d\u8bfb\u53d6\u4e0b\u4e00\u884c\u5230\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u8fdb\u884c\u76f8\u540c\u7684\u64cd\u4f5c\uff0c\u76f4\u5230\u8f93\u5165\u6d41\u4e2d\u7684\u6240\u6709\u884c\u90fd\u5904\u7406\u5b8c\u6210\u3002\u7531\u6b64\u53ef\u89c1\uff0csed \u662f\u4e00\u4e2a\u5faa\u73af\u4e00\u4e2a\u5faa\u73af\u5904\u7406\u5185\u5bb9\u7684\u3002")),(0,r.kt)("h4",{id:"1121sed-\u8bed\u6cd5\u683c\u5f0f"},"1.1.2.1\u3001sed \u8bed\u6cd5\u683c\u5f0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sed OPTIONS SCRIPT INPUT_STREAM\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5176\u4e2d SCRIPT \u90e8\u5206\u5c31\u662f\u6240\u8c13\u7684 sed \u811a\u672c\uff0c\u5b83\u662f sed \u5185\u90e8\u547d\u4ee4\u7684\u96c6\u5408\uff0csed \u4e2d\u7684\u547d\u4ee4\u6709\u4e9b\u5947\u7279\uff0c\u5b83\u5305\u542b\u884c\u5339\u914d\u4ee5\u53ca\u8981\u6267\u884c\u7684\u547d\u4ee4\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u683c\u5f0f\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"ADDR1[,ADDR2]cmd_list")),(0,r.kt)("li",{parentName:"ul"},"\u4f8b\u5982\uff0c\u8981\u5bf9\u7b2c 2 \u884c\u6267\u884c\u5220\u9664\u547d\u4ee4\uff0c\u5176\u547d\u4ee4\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"sed 2d filename"),"\uff0c\u53ea\u8f93\u51fa\u7b2c 4 \u884c\u5230 6 \u884c\uff0c\u5176\u547d\u4ee4\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"sed -n 4,6p"),"\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u65e2\u7136 SCRIPT \u662f\u547d\u4ee4\u7684\u96c6\u5408\uff0c\u4e8e\u662f sed \u5faa\u73af\u8fc7\u7a0b\u53ef\u4ee5\u4fee\u6539\u4e3a\u5982\u4e0b\uff1a",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u8bfb\u53d6\u8f93\u5165\u6d41\u7684\u4e00\u884c\u5230\u6a21\u5f0f\u7a7a\u95f4"),(0,r.kt)("li",{parentName:"ol"},'\u5bf9\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u5185\u5bb9\u6267\u884c SCRIPT(\u5305\u62ec\u4e0a\u9762\u793a\u4f8b\u4e2d\u7684 "2d" \u548c "4,6p")'),(0,r.kt)("li",{parentName:"ol"},"\u8bfb\u53d6\u8f93\u5165\u6d41\u7684\u4e0b\u4e00\u884c\u5230\u6a21\u5f0f\u7a7a\u95f4"),(0,r.kt)("li",{parentName:"ol"},"\u5bf9\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u5185\u5bb9\u6267\u884c SCRIPT")))),(0,r.kt)("p",null,"\u5176\u4e2d SCRIPT \u90e8\u5206\u5305\u542b\u4e86 sed \u547d\u4ee4\u884c\u4e2d\u7684\u5185\u90e8\u547d\u4ee4\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u8fd8\u5305\u62ec\u4e24\u4e2a\u7279\u6b8a\u52a8\u4f5c\uff1a\u81ea\u52a8\u8f93\u51fa\u548c\u6e05\u7a7a\u6a21\u5f0f\u7a7a\u95f4\u5185\u5bb9\u3002\u8fd9\u4e24\u4e2a\u52a8\u4f5c\u662f\u4e00\u5b9a\u4f1a\u6267\u884c\u7684"),"\uff0c\u53ea\u4e0d\u8fc7\u6709\u4e9b\u65f6\u5019\u901a\u8fc7\u67d0\u4e9b\u547d\u4ee4\u53ef\u4ee5\u4f7f\u5176\u8f93\u51fa\u7a7a\u5185\u5bb9\u3001\u4f7f\u5176\u6e05\u7a7a\u4e0d\u4e86\u6a21\u5f0f\u7a7a\u95f4\u3002"),(0,r.kt)("p",null,"\u5982\u679c\u4f7f\u7528\u7f16\u7a0b\u7ed3\u6784\u6765\u63cf\u8ff0\uff0c\u5219\u5927\u81f4\u8fc7\u7a0b\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"for ((line=1;line<=last_line_num;++line))\ndo\n    read $line to pattern_space;\n    while pattern_space is not null\n    do\n        execute cmd1 in SCRIPT;\n        execute cmd2 in SCRIPT;\n        execute cmd3 in SCRIPT;\n        \u2026\u2026\n        auto_print;\n        remove_pattern_space;\n    done\ndone\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5176\u4e2d while \u5faa\u73af\u6267\u884c\u7684\u6b63\u662f SCRIPT \u4e2d\u7684\u6240\u6709\u547d\u4ee4\uff0c\u53ea\u4e0d\u8fc7\u4e00\u822c\u60c5\u51b5\u4e0b\uff0cwhile \u5faa\u73af\u53ea\u6267\u884c\u4e00\u8f6e\u5c31\u9000\u51fa\u5e76\u8fdb\u5165\u5916\u5c42\u7684 for \u5faa\u73af\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'\u4e8e\u662f\uff0c\u5916\u5c42\u7684 for \u5faa\u73af\u79f0\u4e4b\u4e3a "sed\u5faa\u73af"\uff0c\u5185\u5c42\u7684 while \u5faa\u73af\u79f0\u4e4b\u4e3a "SCRIPT" \u5faa\u73af\u3002\u6240\u4ee5\uff0cfor \u5faa\u73af\u53ea\u5305\u542b\u4e86\u4e24\u4e2a\u52a8\u4f5c\uff1a\u8bfb\u53d6\u4e0b\u4e00\u884c\u548c\u6267\u884c SCRIPT \u5faa\u73af\u3002')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5176\u5b9e while \u5faa\u73af\u4e2d\u662f\u6709 continue\u3001break \u751a\u81f3\u662f exit \u7684\uff0c\u5206\u522b\u8868\u793a\u56de\u5230 SCRIPT \u7684\u9876\u7aef(\u5373\u8fdb\u5165\u4e0b\u4e00\u4e2a SCRIPT \u5faa\u73af)\u3001\u9000\u51fa\u5f53\u524d SCRIPT \u5faa\u73af\u56de\u5230\u5916\u5c42 sed \u5faa\u73af\u4ee5\u53ca\u9000\u51fa\u6574\u4e2a sed \u5faa\u73af\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6700\u540e\uff0c\u8bf4\u660e\u4e0b sed \u547d\u4ee4\u884c\u5982\u4f55\u4e66\u5199\uff0c\u5176\u5b9e\u5c31\u662f\u5199 SCRIPT \u90e8\u5206\uff0c\u8fd9\u90e8\u5206\u7684\u5199\u6cd5\u6bd4\u8f83\u7075\u6d3b\uff0c\u5927\u81f4\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4e00\u884c\u5f0f\uff0c\u591a\u4e2a\u547d\u4ee4\u4f7f\u7528\u5206\u53f7\u5206\u9694\nsed Address{cmd1;cmd2;cmd3...}\n\n# \u591a\u4e2a\u8868\u8fbe\u5f0f\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\"-e\"\u9009\u9879\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u7528\uff0c\u4f46\u4f7f\u7528\u5206\u53f7\u5206\u9694\nsed Address1{cmd1;cmd2;cmd3};Address2{cmd1;cmd2;cmd3}...\nsed  -e 'Address1{cmd1;cmd2;cmd3}' -e 'Address2{cmd1;cmd2;cmd3}' ...\n\n# \u5206\u884c\u5199\u65f6\nsed Address1{\n  cmd1\n  cmd2\n  cmd3\n}\nAddress2{\n  cmd1\n  cmd2\n  cmd3\n}\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u662f\u5199\u5728\u6587\u4ef6\u4e2d\uff0c\u5373 sed \u811a\u672c\uff0c\u4ee5\u6587\u4ef6\u540d\u4e3a a.sed \u4e3a\u4f8b\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"#!/usr/bin/sed -f\n#\u6ce8\u91ca\u884c\nAddress1{cmd1;cmd2...}\nAddress2{cmd1;cmd2...}\n......\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'\u5176\u4e2d cmd \u90e8\u5206\u8fd8\u53ef\u4ee5\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\uff0c\u4e5f\u5373\u7c7b\u4f3c\u4e8e "Address{{pattern1}cmd1;{pattern2}cmd2}" \u7684\u5199\u6cd5\u3002\u4f8b\u5982\uff0c',(0,r.kt)("inlineCode",{parentName:"li"},"/^abc/{2d;p}"),"\u3002")))),(0,r.kt)("h4",{id:"1122options-\u9009\u9879"},"1.1.2.2\u3001options \u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'-n:             \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0csed\u5c06\u5728\u6bcf\u8f6escript\u5faa\u73af\u7ed3\u675f\u65f6\u81ea\u52a8\u8f93\u51fa\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u7684\u5185\u5bb9\u3002\n                \u4f7f\u7528\u8be5\u9009\u9879\u540e\u53ef\u4ee5\u4f7f\u5f97\u8fd9\u6b21\u81ea\u52a8\u8f93\u51fa\u52a8\u4f5c\u8f93\u51fa\u7a7a\u5185\u5bb9\uff0c\u800c\u4e0d\u662f\u5f53\u524d\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u7684\u5185\u5bb9\u3002\n                \u6ce8\u610f\uff0c"-n"\u662f\u8f93\u51fa\u7a7a\u5185\u5bb9\u800c\u4e0d\u662f\u7981\u7528\u8f93\u51fa\u52a8\u4f5c\uff0c\u6709\u4e9b\u4f9d\u8d56\u4e8e\u8f93\u51fa\u52a8\u4f5c\u548c\u8f93\u51fa\u6d41\u7684\u5730\u65b9\uff0c\u5b83\u4eec\u7684\u533a\u522b\u662f\u5f88\u5927\u7684\u3002\n\n-e SCRIPT       \u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a"-e"\u9009\u9879\u5411SCRIPT\u4e2d\u6dfb\u52a0\u547d\u4ee4\u3002\n                \u53ef\u4ee5\u7701\u7565"-e"\u9009\u9879\uff0c\u4f46\u5982\u679c\u547d\u4ee4\u884c\u5bb9\u6613\u4ea7\u751f\u6b67\u4e49\uff0c\u5219\u4f7f\u7528"-e"\u9009\u9879\u53ef\u660e\u786e\u8bf4\u660e\u8fd9\u90e8\u5206\u662fSCRIPT\u4e2d\u7684\u547d\u4ee4\u3002\n\n-f SCRIPT-FILE  \u6307\u5b9a\u5305\u542b\u547d\u4ee4\u96c6\u5408\u7684SCRIPT\u6587\u4ef6\uff0c\u8ba9sed\u6839\u636eSCRIPT\u6587\u4ef6\u4e2d\u7684\u547d\u4ee4\u96c6\u5904\u7406\u8f93\u5165\u6d41\u3002\n-i[SUFFIX]      \u8be5\u9009\u9879\u6307\u5b9a\u8981\u5c06sed\u7684\u8f93\u51fa\u7ed3\u679c\u4fdd\u5b58(\u8986\u76d6\u7684\u65b9\u5f0f)\u5230\u5f53\u524d\u7f16\u8f91\u7684\u6587\u4ef6\u4e2d\u3002\n                sed\u662f\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u5e76\u5c06\u5904\u7406\u540e\u7684\u7ed3\u679c\u5199\u5165\u5230\u8be5\u4e34\u65f6\u6587\u4ef6\uff0c\u7136\u540e\u91cd\u547d\u540d\u4e3a\u6e90\u6587\u4ef6\u6765\u5b9e\u73b0\u7684\u3002\n                \u5982\u679c\u8fd8\u63d0\u4f9b\u4e86SUFFIX\uff0c\u5219\u5728\u91cd\u547d\u540d\u4e34\u65f6\u6587\u4ef6\u4e4b\u524d\uff0c\u5148\u4f7f\u7528\u8be5SUFFIX\u4fee\u6539\u6e90\u6587\u4ef6\u540d\uff0c\u4ece\u800c\u751f\u6210\u4e00\u4e2a\u6e90\u6587\u4ef6\u7684\u5907\u4efd\u6587\u4ef6\u3002\n                \u5982\u679cSUFFIX\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26"*"\uff0c\u5219\u6bcf\u4e2a"*"\u90fd\u66ff\u6362\u4e3a\u539f\u6587\u4ef6\u540d(\u53c2\u89c1\u5b9e\u4f8b3)\u3002\n                \u8be5\u9009\u9879\u9690\u542b\u4e86"-s"\u9009\u9879\u3002\n\n-r              \u4f7f\u7528\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u9ed8\u8ba4\u7684\u57fa\u7840\u6b63\u5219\u8868\u8fbe\u5f0f\u3002sed\u6240\u652f\u6301\u7684\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\u548cegrep\u4e00\u6837\u3002\n\n-s              \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4e3ased\u6307\u5b9a\u4e86\u591a\u4e2a\u8f93\u5165\u6587\u4ef6\uff0c\u5982sed OPTIONS SCRIPT file1 file2 file3\uff0c\n                \u5219\u591a\u4e2a\u6587\u4ef6\u4f1a\u88absed\u5f53\u4f5c\u4e00\u4e2a\u957f\u7684\u8f93\u5165\u6d41\uff0c\u4e5f\u5c31\u662f\u8bf4\u6240\u6709\u6587\u4ef6\u88ab\u5f53\u6210\u4e00\u4e2a\u5927\u6587\u4ef6\u3002\n                \u6307\u5b9a\u8be5\u9009\u9879\u540e\uff0csed\u5c06\u8ba4\u4e3a\u547d\u4ee4\u884c\u4e2d\u7ed9\u5b9a\u7684\u6bcf\u4e2a\u6587\u4ef6\u90fd\u662f\u72ec\u7acb\u7684\u8f93\u5165\u6d41\u3002\n')),(0,r.kt)("p",null,"\u5236\u4f5c\u5b9e\u9a8c\u6837\u672c\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# grep -v "^$" /etc/fstab | grep -v "^#$" > fstab.txt\n[root@arm64v8 ~]# cat fstab.txt \n# /etc/fstab\n# Created by anaconda on Tue Aug 24 08:30:54 2021\n# Accessible filesystems, by reference, are maintained under \'/dev/disk\'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\nUUID=7d2ddfd1-f735-4176-b2a8-cf64cc13ffa0 /                       ext4    defaults        1 1\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u5b9e\u4f8b 1\uff1a\u53ea\u8f93\u51fa fstab.txt \u7b2c 4 \u884c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# sed -n 4p fstab.txt \n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'\u8fd9\u91cc\u4f7f\u7528\u4e86 "-n" \u9009\u9879\uff0c\u4f7f\u5f97\u8bfb\u53d6\u5230\u6a21\u5f0f\u7a7a\u95f4\u7684\u6bcf\u4e00\u884c\u90fd\u65e0\u6cd5\u88ab\u8f93\u51fa\uff0c\u53ea\u6709\u660e\u786e\u4f7f\u7528\u4e86 "p" \u9009\u9879\u624d\u80fd\u88ab "p" \u52a8\u4f5c\u8f93\u51fa\u3002'),(0,r.kt)("li",{parentName:"ul"},"\u4e0a\u9762\u7684\u547d\u4ee4\u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"sed -n -e 4p fstab.txt"),' \u662f\u5b8c\u5168\u4e00\u6837\u7684\uff0c\u56e0\u4e3a "4p" \u5728 sed \u89e3\u6790\u547d\u4ee4\u884c\u65f6\u4e0d\u4f1a\u4ea7\u751f\u6b67\u4e49\uff0c\u6240\u4ee5\u53ef\u4ee5\u7701\u7565 "-e" \u9009\u9879\u3002')),(0,r.kt)("p",null,"\u5b9e\u4f8b 2\uff1a\u8f93\u51fa fstab.txt\uff0c\u5e76\u8f93\u51fa\u6bcf\u884c\u7684\u884c\u53f7\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# sed \"=\" fstab.txt \n1\n# /etc/fstab\n2\n# Created by anaconda on Tue Aug 24 08:30:54 2021\n3\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n4\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n5\nUUID=7d2ddfd1-f735-4176-b2a8-cf64cc13ffa0 /                       ext4    defaults        1 1\n6\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\n7\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\n8\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'\u7531\u4e8e\u8981\u8f93\u51fa fstab.txt \u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u4e0d\u4f7f\u7528 "-n" \u9009\u9879\uff0c\u540c\u65f6 "=" \u547d\u4ee4\u4f1a\u8f93\u51fa\u6bcf\u884c\u884c\u53f7\u3002')),(0,r.kt)("p",null,'\u5b9e\u4f8b 3\uff1a\u8f93\u51fa fstab.txt \u7b2c 4 \u884c\uff0c\u5e76\u4ee5 ".bak" \u540e\u7f00\u5907\u4efd\u6e90\u6587\u4ef6\u3002'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# cat fstab.txt \n# /etc/fstab\n# Created by anaconda on Tue Aug 24 08:30:54 2021\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\nUUID=7d2ddfd1-f735-4176-b2a8-cf64cc13ffa0 /                       ext4    defaults        1 1\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed -i'.bak' -n '4p' fstab.txt \n[root@arm64v8 ~]# \n[root@arm64v8 ~]# ls\nfstab.txt  fstab.txt.bak\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# cat fstab.txt\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n[root@arm64v8 ~]#\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# ls\nfstab.txt\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# sed -i'*-*.bak' -n '4p' fstab.txt \n[root@arm64v8 ~]# ls\nfstab.txt  fstab.txt-fstab.txt.bak\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# cat fstab.txt\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# cat fstab.txt-fstab.txt.bak \n# /etc/fstab\n# Created by anaconda on Tue Aug 24 08:30:54 2021\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\nUUID=7d2ddfd1-f735-4176-b2a8-cf64cc13ffa0 /                       ext4    defaults        1 1\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u5b9e\u4f8b 4\uff1a\u4f7f\u7528\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u8f93\u51fa fstab.txt \u5305\u542b\u8fde\u7eed 4 \u4e2a\u4ee5\u4e0a\u5927\u5199\u5b57\u6bcd\u7684\u884c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# cat fstab.txt \n# /etc/fstab\n# Created by anaconda on Tue Aug 24 08:30:54 2021\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\nUUID=7d2ddfd1-f735-4176-b2a8-cf64cc13ffa0 /                       ext4    defaults        1 1\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed -r -n \"/[[:upper:]]{4,}/p\" fstab.txt \nUUID=7d2ddfd1-f735-4176-b2a8-cf64cc13ffa0 /                       ext4    defaults        1 1\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]#\n")),(0,r.kt)("h4",{id:"1123address-\u5b9a\u5740\u8868\u8fbe\u5f0f"},"1.1.2.3\u3001address \u5b9a\u5740\u8868\u8fbe\u5f0f"),(0,r.kt)("p",null,"\u5f53 sed \u5c06\u8f93\u5165\u6d41\u4e2d\u7684\u884c\u8bfb\u53d6\u5230\u6a21\u5f0f\u7a7a\u95f4\u540e\uff0c\u5c31\u9700\u8981\u5bf9\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u7684\u5185\u5bb9\u8fdb\u884c\u5339\u914d\uff0c\u5982\u679c\u80fd\u5339\u914d\u5c31\u80fd\u6267\u884c\u5bf9\u5e94\u7684\u547d\u4ee4\uff0c\u5982\u679c\u4e0d\u80fd\u5339\u914d\u5c31\u76f4\u63a5\u8f93\u51fa\u3001\u6e05\u7a7a\u6a21\u5f0f\u7a7a\u95f4\u5e76\u8fdb\u5165\u4e0b\u4e00\u4e2a sed \u5faa\u73af\u8bfb\u53d6\u4e0b\u4e00\u884c\u3002"),(0,r.kt)("p",null,"\u5339\u914d\u7684\u8fc7\u7a0b\u79f0\u4e3a\u5b9a\u5740\u3002\u5b9a\u5740\u8868\u8fbe\u5f0f\u6709\u591a\u79cd\uff0c\u4f46\u603b\u7684\u6765\u8bf4\uff0c\u5176\u683c\u5f0f\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"[ADDR1][,ADDR2]"),"\u3002\u8fd9\u53ef\u4ee5\u5206\u4e3a 3 \u79cd\u65b9\u5f0f\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"ADDR1 \u548c ADDR2 \u90fd\u7701\u7565\u65f6\uff0c\u8868\u793a\u6240\u6709\u884c\u90fd\u80fd\u88ab\u5339\u914d\u4e0a\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u7701\u7565 ADDR2 \u65f6\uff0c\u8868\u793a\u53ea\u6709\u88ab ADDR1 \u8868\u8fbe\u5f0f\u5339\u914d\u4e0a\u7684\u884c\u624d\u7b26\u5408\u6761\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4e0d\u7701\u7565 ADDR2 \u65f6\uff0c\u662f\u8303\u56f4\u5730\u5740\u3002\u8868\u793a\u4ece ADDR1 \u5339\u914d\u6210\u529f\u7684\u884c\u5f00\u59cb\uff0c\u5230 ADDR2 \u5339\u914d\u6210\u529f\u7684\u884c\u7ed3\u675f\u3002")),(0,r.kt)("p",null,"\u65e0\u8bba\u662f ADDR1 \u8fd8\u662f ADDR2\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u5339\u914d\uff1a\u884c\u53f7\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'N:              \u6307\u5b9a\u4e00\u4e2a\u884c\u53f7\uff0csed\u5c06\u53ea\u5339\u914d\u8be5\u884c\u3002("-s"\u6216"-i"\u9009\u9879\u5c06\u5bf9\u591a\u4e2a\u6587\u4ef6\u7684\u884c\u8fde\u7eed\u8ba1\u6570)\nFIRST~STEP:     \u8868\u793a\u4ece\u7b2cFIRST\u884c\u5f00\u59cb\uff0c\u6bcf\u9694STEP\u884c\u5c31\u518d\u53d6\u4e00\u6b21\u3002\u4e5f\u5c31\u662f\u53d6\u884c\u53f7\u6ee1\u8db3FIRST+(N*STEP) (\u5176\u4e2dN>=0)\u7684\u884c\u3002\n                \u56e0\u6b64\uff0c\u8981\u9009\u62e9\u6240\u6709\u5947\u6570\u884c\uff0c\u4f7f\u7528"1~2"\uff1b\u8981\u4ece\u7b2c2\u884c\u5f00\u59cb\u6bcf\u96943\u884c\u53d6\u4e00\u6b21\uff0c\u4f7f\u7528"2~3"\uff1b\n                \u8981\u4ece\u7b2c10\u884c\u5f00\u59cb\u6bcf\u96945\u884c\u53d6\u4e00\u6b21\uff0c\u4f7f\u7528"10~5"\uff1b\u800c"50~0"\u5219\u8868\u793a\u53ea\u53d6\u7b2c50\u884c\u3002\n\n$:              \u9ed8\u8ba4\u8be5\u7b26\u53f7\u5339\u914d\u7684\u662f\u6700\u540e\u4e00\u4e2a\u6587\u4ef6\u7684\u6700\u540e\u4e00\u884c\u3002\n                \u5982\u679c\u6307\u5b9a\u4e86"-i"\u6216"-s"\uff0c\u5219\u5339\u914d\u7684\u662f\u6bcf\u4e2a\u6587\u4ef6\u7684\u6700\u540e\u4e00\u884c\u3002\u603b\u4e4b\uff0c"$"\u5339\u914d\u7684\u662f\u6bcf\u4e2a\u8f93\u5165\u6d41\u7684\u6700\u540e\u4e00\u884c\u3002\n\n/REGEXP/        \u5c06\u9009\u62e9\u80fd\u88ab\u6b63\u5219\u8868\u8fbe\u5f0fREGEXP\u5339\u914d\u7684\u6240\u6709\u884c\u3002\u5982\u679cREGEXP\u4e2d\u81ea\u8eab\u5305\u542b\u4e86\u5b57\u7b26"/"\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u53cd\u659c\u7ebf\u8f6c\u4e49\uff0c\u5373"\\/"\u3002\n/REGEXP/I       \u548c"/REGEXP/"\u662f\u4e00\u6837\u7684\uff0c\u53ea\u4e0d\u8fc7\u5339\u914d\u7684\u65f6\u5019\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002\n\\%REGEXP%       \u8fd9\u548c\u4e0a\u4e00\u4e2a\u5b9a\u5740\u8868\u8fbe\u5f0f\u7684\u4f5c\u7528\u662f\u4e00\u6837\u7684\uff0c\u53ea\u4e0d\u8fc7\u662f\u4f7f\u7528\u7b26\u53f7"%"\u66ff\u6362\u4e86\u7b26\u53f7"/"\u3002\n                \u5f53REGEXP\u4e2d\u5305\u542b"/"\u7b26\u53f7\u65f6\uff0c\u4f7f\u7528\u8be5\u5b9a\u5740\u8868\u8fbe\u5f0f\u5c31\u65e0\u9700\u5bf9"/"\u4f7f\u7528\u53cd\u659c\u7ebf"\\"\u8f6c\u4e49\u3002\n                \u4f46\u5982\u679c\u6b64\u65f6REGEXP\u4e2d\u5305\u542b\u4e86"%"\u7b26\u53f7\u65f6\uff0c\u8be5\u7b26\u53f7\u9700\u8981\u4f7f\u7528"\\"\u8f6c\u4e49\u3002\n\nADDR1,+N        \u5339\u914dADDR1\u548c\u5176\u540e\u7684N\u884c\u3002\nADDR1,~N        \u5339\u914dADDR1\u548c\u5176\u540e\u7684\u884c\u76f4\u5230\u51fa\u73b0N\u7684\u500d\u6570\u884c\u3002\n                \u500d\u6570\u53ef\u4e3a\u968f\u610f\u6574\u6570\u500d\uff0c\u53ea\u8981N\u7684\u500d\u6570\u662f\u6700\u63a5\u8fd1\u4e14\u5927\u4e8eADDR1\u7684\u5373\u53ef\u3002\n                \u5982ADDR1=1,N=3\u5339\u914d1-3\u884c\uff0cADDR1=5,N=4\u5339\u914d5-8\u884c\u3002\u800c"1,+3"\u5339\u914d\u7684\u662f\u7b2c\u4e00\u884c\u548c\u5176\u540e\u76843\u884c\u53731-4\u884c\u3002\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'\u5728\u5b9a\u5740\u8868\u8fbe\u5f0f\u7684\u540e\u9762\u52a0"!"\u7b26\u53f7\u8868\u793a\u53cd\u8f6c\u5339\u914d\u7684\u542b\u4e49\u3002\u4e5f\u5c31\u662f\u8bf4\u90a3\u4e9b\u5339\u914d\u7684\u884c\u5c06\u4e0d\u88ab\u9009\u62e9\uff0c\u800c\u662f\u4e0d\u5339\u914d\u7684\u884c\u88ab\u9009\u62e9\u3002')),(0,r.kt)("p",null,"\u4e3e\u51e0\u4e2a\u5b9e\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# cat fstab.txt \n# /etc/fstab\n# Created by anaconda on Tue Aug 24 08:30:54 2021\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\nUUID=7d2ddfd1-f735-4176-b2a8-cf64cc13ffa0 /                       ext4    defaults        1 1\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n\n[root@arm64v8 ~]# sed -n '3p' fstab.txt \n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n\n[root@arm64v8 ~]# sed -n '3,5!p' fstab.txt \n# /etc/fstab\n# Created by anaconda on Tue Aug 24 08:30:54 2021\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n\n[root@arm64v8 ~]# sed -n '2,/^#.*/p' fstab.txt \n# Created by anaconda on Tue Aug 24 08:30:54 2021\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n\n[root@arm64v8 ~]# sed -n '2,/^#.*/!p' fstab.txt \n# /etc/fstab\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\nUUID=7d2ddfd1-f735-4176-b2a8-cf64cc13ffa0 /                       ext4    defaults        1 1\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]#\n")),(0,r.kt)("h4",{id:"1124command-\u529f\u80fd\u547d\u4ee4"},"1.1.2.4\u3001command \u529f\u80fd\u547d\u4ee4"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'\u5f3a\u5236\u8f93\u51fa\u547d\u4ee4 "p"'),(0,r.kt)("p",{parentName:"li"},'\u8be5\u547d\u4ee4\u80fd\u5f3a\u5236\u8f93\u51fa\u5f53\u524d\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u3002\u5373\u4f7f\u4f7f\u7528\u4e86 "-n" \u9009\u9879\u3002'),(0,r.kt)("p",{parentName:"li"},"\u4e8b\u5b9e\u4e0a\uff0c\u5b83\u4eec\u672c\u5c31\u4e0d\u51b2\u7a81\uff0c\u56e0\u4e3a\u5faa\u73af\u8fc7\u7a0b\u5982\u4e0b\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'for ((line=1;line<=last_line_num;++line))\ndo\n   read $line to pattern_space;\n   while pattern_space is not null\n   do\n       execute cmd1 in SCRIPT;\n       execute cmd2 in SCRIPT;\n       ADDR1,ADDR2{print};        # "p" command\n       \u2026\u2026\n       auto_print;\n       remove_pattern_space;\n   done\ndone\n')),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'\u5728 sed \u5904\u7406\u7684\u8fc7\u7a0b\u4e2d\uff0c"p" \u548c "auto',"_",'print" \u662f\u4e24\u4e2a\u8f93\u51fa\u52a8\u4f5c\uff0c\u90fd\u662f\u8f93\u51fa\u5f53\u524d\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\uff0c\u53ea\u4e0d\u8fc7 auto',"_","print \u662f\u9690\u542b\u52a8\u4f5c\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'\u4f7f\u7528\u4e86 "-n" \u9009\u9879\uff0c\u5176\u6240\u5f71\u54cd\u7684\u52a8\u4f5c\u4ec5\u662f "auto',"_",'print"\uff0c\u4f7f\u5176\u8f93\u51fa\u7a7a\u5185\u5bb9\u3002\u4e5f\u56e0\u6b64\uff0c\u5f53\u6ca1\u6709\u4f7f\u7528 "-n" \u9009\u9879\u65f6\uff0c\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u4f1a\u88ab\u8f93\u51fa\u4e24\u6b21\u3002'),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# echo -e "abc\\nxyz" | sed -n 2p\nxyz\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# echo -e "abc\\nxyz" | sed 2p\nabc\nxyz    # \u8fd9\u662fp\u547d\u4ee4\u8f93\u51fa\u7684\u7ed3\u679c\nxyz    # \u8fd9\u662f\u81ea\u52a8\u8f93\u51fa\u7684\u7ed3\u679c\n[root@arm64v8 ~]#\n'))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'\u5220\u9664\u547d\u4ee4 "d"'),(0,r.kt)("p",{parentName:"li"},'\u547d\u4ee4 "d" \u7528\u4e8e\u5220\u9664\u6574\u4e2a\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u7684\u5185\u5bb9\uff0c\u5e76\u7acb\u5373\u9000\u51fa\u5f53\u524d SCRIPT \u5faa\u73af\uff0c\u8fdb\u5165\u4e0b\u4e00\u4e2a sed \u5faa\u73af\uff0c\u5373\u8bfb\u53d6\u4e0b\u4e00\u884c\u3002'),(0,r.kt)("p",{parentName:"li"},"\u5faa\u73af\u5927\u81f4\u683c\u5f0f\u5982\u4e0b:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'for ((line=1;line<=last_line_num;++line))\ndo\n   read $line to pattern_space;\n   while pattern_space is not null\n   do\n       execute cmd1 in SCRIPT;\n       execute cmd2 in SCRIPT;\n       ADDR1,ADDR2{delete;break};     # "d" command\n       \u2026\u2026\n       auto_print;\n       remove_pattern_space;\n   done\ndone\n')),(0,r.kt)("p",{parentName:"li"},'\u552f\u4e00\u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\u7acb\u5373\u9000\u51fa\u5f53\u524d SCRIPT \u5faa\u73af\uff0c\u8fd9\u610f\u5473\u7740\u5982\u679c "d" \u547d\u4ee4\u540e\u9762\u8fd8\u6709\u5176\u4ed6\u7684\u547d\u4ee4\uff0c\u5219\u8fd9\u4e9b\u547d\u4ee4\u90fd\u4e0d\u4f1a\u6267\u884c\u3002'),(0,r.kt)("p",{parentName:"li"},"\u4e3e\u51e0\u4e2a\u5b9e\u4f8b\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5220\u9664fstab.txt\u4e2d\u7684\u7b2c5\u884c\uff0c\u5e76\u4fdd\u5b58\u5230\u539f\u6587\u4ef6\u4e2d\uff0c\u5e76\u5907\u4efd\u539ffstab.txt\u4e3afstab.txt.bak\n[root@arm64v8 ~]# cat fstab.txt \n# /etc/fstab\n# Created by anaconda on Tue Aug 24 08:30:54 2021\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\nUUID=7d2ddfd1-f735-4176-b2a8-cf64cc13ffa0 /                       ext4    defaults        1 1\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed -i'.bak' '5d' fstab.txt \n[root@arm64v8 ~]# cat fstab.txt\n# /etc/fstab\n# Created by anaconda on Tue Aug 24 08:30:54 2021\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]#\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5220\u9664fstab.txt\u4e2d\u5305\u542b\"#\"\u5f00\u5934\u7684\u6ce8\u91ca\u884c\uff0c\u4f46\u7b2c\u4e00\u884c\u7684# /etc/fstab\u4e0d\u5220\u9664\u3002\n[root@arm64v8 ~]# cat fstab.txt\n# /etc/fstab\n# Created by anaconda on Tue Aug 24 08:30:54 2021\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed '/^#/{1!d}' fstab.txt\n# /etc/fstab\nUUID=02d21f87-4742-4e2f-92c1-e8df1001a781 /boot                   ext4    defaults        1 2\nUUID=67D1-D2C2          /boot/efi               vfat    umask=0077,shortname=winnt 0 0\nUUID=8272fd7c-6bfa-47d2-af97-429aa83ab510 swap                    swap    defaults        0 0\n[root@arm64v8 ~]#\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# \u5982\u679c"d"\u540e\u9762\u8fd8\u6709\u547d\u4ee4\uff0c\u5728\u5220\u9664\u6a21\u5f0f\u7a7a\u95f4\u540e\uff0c\u8fd9\u4e9b\u547d\u4ee4\u4e0d\u4f1a\u6267\u884c\uff0c\u56e0\u4e3a\u4f1a\u7acb\u5373\u9000\u51fa\u5f53\u524dSCRIPT\u5faa\u73af\u3002\n[root@arm64v8 ~]# echo -e "abc\\nxyz" | sed \'{/abc/d;=}\'\n2\nxyz\n[root@arm64v8 ~]#\n')),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'\u5176\u4e2d "=" \u8fd9\u4e2a\u547d\u4ee4\u7528\u4e8e\u8f93\u51fa\u884c\u53f7\uff0c\u4f46\u662f\u7ed3\u679c\u5e76\u6ca1\u6709\u8f93\u51fa\u88ab "abc" \u5339\u914d\u7684\u884c\u7684\u884c\u53f7\u3002'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'\u9000\u51fa sed \u7a0b\u5e8f\u547d\u4ee4 "q" \u548c "Q"'),(0,r.kt)("p",{parentName:"li"},'\u4f7f\u7528 "q" \u548c "Q" \u547d\u4ee4\u7684\u4f5c\u7528\u662f\u7acb\u5373\u9000\u51fa\u5f53\u524d sed \u7a0b\u5e8f\uff0c\u4f7f\u5176\u4e0d\u518d\u6267\u884c\u540e\u9762\u7684\u547d\u4ee4\uff0c\u4e5f\u4e0d\u518d\u8bfb\u53d6\u540e\u9762\u7684\u884c\u3002\u56e0\u6b64\uff0c\u5728\u5904\u7406\u5927\u6587\u4ef6\u6216\u5927\u91cf\u6587\u4ef6\u65f6\uff0c\u4f7f\u7528 "q" \u6216 "Q" \u547d\u4ee4\u80fd\u63d0\u9ad8\u5f88\u5927\u6548\u7387\u3002'),(0,r.kt)("p",{parentName:"li"},'\u5b83\u4eec\u4e4b\u95f4\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e "q" \u547d\u4ee4\u88ab\u6267\u884c\u540e\u8fd8\u4f1a\u4f7f\u7528\u81ea\u52a8\u8f93\u51fa\u52a8\u4f5c\u8f93\u51fa\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\uff0c\u9664\u975e\u4f7f\u7528\u4e86 "-n" \u9009\u9879\u3002\u800c "Q" \u547d\u4ee4\u5219\u4f1a\u7acb\u5373\u9000\u51fa\uff0c\u4e0d\u4f1a\u8f93\u51fa\u6a21\u5f0f\u7a7a\u95f4\u5185\u5bb9\u3002\u53e6\u5916\uff0c\u53ef\u4ee5\u4e3a\u5b83\u4eec\u6307\u5b9a\u9000\u51fa\u72b6\u6001\u7801\uff0c\u4f8b\u5982 "q 1"\u3002'),(0,r.kt)("p",{parentName:"li"},'\u4f7f\u7528\u4e86 "q" \u548c "Q" \u7684 sed \u5faa\u73af\u7ed3\u6784\u5927\u81f4\u5982\u4e0b\uff1a'),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# "q"\u547d\u4ee4\nfor ((line=1;line<=last_line_num;++line))\ndo\n   read $line to pattern_space;\n   while pattern_space is not null\n   do\n       execute cmd1 in SCRIPT;\n       execute cmd2 in SCRIPT;\n       ADDR1,ADDR2{auto_print;exit};     # "q" command\n       \u2026\u2026\n       auto_print;\n       remove_pattern_space;\n   done\ndone\n\n# "Q"\u547d\u4ee4\nfor ((line=1;line<=last_line_num;++line))\ndo\n   read $line to pattern_space;\n   while pattern_space is not null\n   do\n       execute cmd1 in SCRIPT;\n       execute cmd2 in SCRIPT;\n       ADDR1,ADDR2{exit};      # "Q" command\n       \u2026\u2026\n       auto_print;\n       remove_pattern_space;\n   done\ndone\n')),(0,r.kt)("p",{parentName:"li"},"\u4e3e\u4e2a\u4f8b\u5b50\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# \u641c\u7d22\u811a\u672csource.txt\uff0c\u5f53\u641c\u7d22\u5230\u4f7f\u7528\u4e86"."\u6216"source"\u547d\u4ee4\u52a0\u8f7d\u73af\u5883\u914d\u7f6e\u811a\u672c\u65f6\u5c31\u8f93\u51fa\u5e76\u7acb\u5373\u9000\u51fa\u3002\n[root@arm64v8 ~]# cat source.txt\nsource /etc/profile.d/bash_completions\n  . /etc/init.d/functions\nls /etc\ncat ~/.bashrc\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed -n -r "/^[ \\t]*(\\.|source) /{p;q}" source.txt \nsource /etc/profile.d/bash_completions\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed -n -r "/^[ \\t]*(\\.|source) /{p}" source.txt \nsource /etc/profile.d/bash_completions\n  . /etc/init.d/functions\n[root@arm64v8 ~]#\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'\u8f93\u51fa\u884c\u53f7\u547d\u4ee4 "="'),(0,r.kt)("p",{parentName:"li"},'"=" \u547d\u4ee4\u7528\u4e8e\u8f93\u51fa\u6700\u8fd1\u88ab\u8bfb\u53d6\u884c\u7684\u884c\u53f7\u3002\u5728 sed \u5185\u90e8\uff0c\u4f7f\u7528\u884c\u53f7\u8ba1\u6570\u5668\u8fdb\u884c\u884c\u53f7\u8ba1\u6570\uff0c\u6bcf\u8bfb\u53d6\u4e00\u884c\uff0c\u884c\u53f7\u8ba1\u6570\u5668\u52a0 1\u3002'),(0,r.kt)("p",{parentName:"li"},'\u8ba1\u6570\u5668\u7684\u503c\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u5728\u8981\u6c42\u8f93\u51fa\u884c\u53f7\u65f6\uff0c\u76f4\u63a5\u63d2\u5165\u5728\u8f93\u51fa\u6d41\u4e2d\u7684\u6307\u5b9a\u4f4d\u7f6e\u3002\u7531\u4e8e\u503c\u662f\u5b58\u5728\u4e8e\u5185\u5b58\u4e2d\uff0c\u800c\u975e\u6a21\u5f0f\u7a7a\u95f4\u4e2d\uff0c\u56e0\u6b64\u4e0d\u53d7 "-n" \u9009\u9879\u7684\u5f71\u54cd\u3002'),(0,r.kt)("p",{parentName:"li"},"\u8fd9\u662f\u4e00\u4e2a\u4f9d\u8d56\u4e8e\u8f93\u51fa\u6d41\u7684\u547d\u4ee4\uff0c\u53ea\u8981\u6709\u8f93\u51fa\u52a8\u4f5c\u5c31\u4f1a\u8ffd\u52a0\u5728\u8be5\u8f93\u51fa\u6d41\u7684\u5c3e\u90e8\u3002"),(0,r.kt)("p",{parentName:"li"},"\u4e3e\u4e2a\u4f8b\u5b50\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# \u641c\u7d22\u51fahttpd.conf\u4e2d"DocumentRoot"\u5f00\u5934\u7684\u884c\u7684\u884c\u53f7\uff0c\u5141\u8bb8\u6709\u524d\u5bfc\u7a7a\u767d\u5b57\u7b26\u3002\n[root@arm64v8 ~]# sed -n \'/^[ \\t]*DocumentRoot/{p;=}\' httpd.conf \nDocumentRoot "/var/www/html"\n119\n[root@arm64v8 ~]#\n')),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'\u5982\u679c "=" \u547d\u4ee4\u524d\u6ca1\u6709 "p" \u8f93\u51fa\u547d\u4ee4\uff0c\u4e14\u6ca1\u6709\u4f7f\u7528 "-n" \u9009\u9879\uff0c\u5219\u884c\u53f7\u8f93\u51fa\u5728 Document \u6240\u5728\u884c\u7684\u524d\u4e00\u884c\uff0c\u56e0\u4e3a SCRIPT \u6700\u540e\u7684\u81ea\u52a8\u8f93\u51fa\u52a8\u4f5c\u4e5f\u6709\u8f93\u51fa\u6d41\u3002'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'\u5b57\u7b26\u4e00\u4e00\u5bf9\u5e94\u66ff\u6362\u547d\u4ee4 "y"'),(0,r.kt)("p",{parentName:"li"},'\u8be5\u547d\u4ee4\u548c "tr" \u547d\u4ee4\u7684\u6620\u5c04\u529f\u80fd\u4e00\u6837\uff0c\u90fd\u662f\u5c06\u5b57\u7b26\u8fdb\u884c\u4e00\u4e00\u66ff\u6362\u3002'),(0,r.kt)("p",{parentName:"li"},"\u4e3e\u4e2a\u4f8b\u5b50\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4ed4\u7ec6\u89c2\u5bdf\uff0c\u4ec0\u4e48\u662f\u4e00\u4e00\u6620\u5c04\u66ff\u6362\uff0c\u4ec0\u4e48\u662f\u6574\u4f53\u66ff\u6362\uff0c\u8fd9\u4e2ay\u547d\u4ee4\u548c\u540e\u9762\u8981\u8bb2\u7684s\u547d\u4ee4\u8981\u533a\u5206\u5f00\n[root@arm64v8 ~]# echo \"YESYesyEs\" | sed 'y/YES/yes/'\nyesyesyes\n[root@arm64v8 ~]# echo \"YESYesyEs\" | sed 's/YES/yes/'\nyesYesyEs\n[root@arm64v8 ~]#\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'\u66ff\u6362\u547d\u4ee4 "s"'),(0,r.kt)("p",{parentName:"li"},"\u8fd9\u662f sed \u7528\u7684\u6700\u591a\u7684\u547d\u4ee4\u3002\u4e24\u4e2a\u5b57\u5c31\u80fd\u6982\u62ec\u5176\u529f\u80fd\uff1a\u66ff\u6362\u3002\u5c06\u5339\u914d\u5230\u7684\u5185\u5bb9\u66ff\u6362\u6210\u6307\u5b9a\u7684\u5185\u5bb9\u3002"),(0,r.kt)("p",{parentName:"li"},'"s" \u547d\u4ee4\u7684\u8bed\u6cd5\u683c\u5f0f\u4e3a\uff1a\u5176\u4e2d "/" \u53ef\u4ee5\u66ff\u6362\u6210\u4efb\u610f\u5176\u4ed6\u5355\u4e2a\u5b57\u7b26\u3002'),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"s/REGEXP/REPLACEMENT/FLAGS\n")),(0,r.kt)("p",{parentName:"li"},'\u5b83\u4f7f\u7528 REGEXP \u53bb\u5339\u914d\u884c\uff0c\u5c06\u5339\u914d\u5230\u7684\u90a3\u90e8\u5206\u5b57\u7b26\u66ff\u6362\u6210 REPLACEMENT\u3002FLAGS \u662f "s" \u547d\u4ee4\u7684\u4fee\u9970\u7b26\uff0c\u5e38\u89c1\u7684\u6709 "g"\u3001"p" \u548c "i" \u6216 "I"\u3002'),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'"g"\uff1a\u8868\u793a\u66ff\u6362\u884c\u4e2d\u6240\u6709\u80fd\u88ab REGEXP \u5339\u914d\u7684\u90e8\u5206\u3002\u4e0d\u4f7f\u7528 g \u65f6\uff0c\u9ed8\u8ba4\u53ea\u66ff\u6362\u884c\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5339\u914d\u5185\u5bb9\u3002\u6b64\u5916\uff0c"g" \u8fd8\u53ef\u4ee5\u66ff\u6362\u6210\u4e00\u4e2a\u6570\u503c N\uff0c\u8868\u793a\u53ea\u66ff\u6362\u884c\u4e2d\u7b2c N \u4e2a\u88ab\u5339\u914d\u7684\u5185\u5bb9\u3002'),(0,r.kt)("li",{parentName:"ul"},'"p"\uff1a\u8f93\u51fa\u66ff\u6362\u540e\u6a21\u5f0f\u7a7a\u95f4\u4e2d\u7684\u5185\u5bb9\u3002'),(0,r.kt)("li",{parentName:"ul"},'"i" \u6216 "I"\uff1aREGEXP \u5339\u914d\u65f6\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002')),(0,r.kt)("p",{parentName:"li"},'REPLACEMENT \u4e2d\u53ef\u4ee5\u4f7f\u7528 "',"\\",'N"(N \u662f\u4ece 1 \u5230 9 \u7684\u6574\u6570) \u8fdb\u884c\u540e\u5411\u5f15\u7528\uff0c\u6240\u4ee3\u8868\u7684\u662f REGEXP \u7b2c N \u4e2a\u62ec\u53f7 (...) \u4e2d\u5339\u914d\u7684\u5185\u5bb9\u3002'),(0,r.kt)("p",{parentName:"li"},"\u4e3e\u51e0\u4e2a\u4f8b\u5b50\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# \u5220\u9664sysctl.conf\u4e2d\u6240\u6709"#"\u5f00\u5934(\u53ef\u4ee5\u5305\u62ec\u524d\u5bfc\u7a7a\u767d)\u7684\u6ce8\u91ca\u7b26\u53f7"#"\uff0c\u7b2c\u4e00\u884c\u4e0d\u5904\u7406\n[root@arm64v8 ~]# cat sysctl.conf \n# sysctl settings are defined through files in\n# /usr/lib/sysctl.d/, /run/sysctl.d/, and /etc/sysctl.d/.\n#\n# Vendors settings live in /usr/lib/sysctl.d/.\n# To override a whole file, create a new file with the same in\n# /etc/sysctl.d/ and put new settings there. To override\n# only specific settings, add a file with a lexically later\n# name in /etc/sysctl.d/ and put new settings there.\n#\n# For more information, see sysctl.conf(5) and sysctl.d(5).\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed \'2,$s/^[ \\t]*#//\' sysctl.conf \n# sysctl settings are defined through files in\n/usr/lib/sysctl.d/, /run/sysctl.d/, and /etc/sysctl.d/.\n\nVendors settings live in /usr/lib/sysctl.d/.\nTo override a whole file, create a new file with the same in\n/etc/sysctl.d/ and put new settings there. To override\nonly specific settings, add a file with a lexically later\nname in /etc/sysctl.d/ and put new settings there.\n\nFor more information, see sysctl.conf(5) and sysctl.d(5).\n[root@arm64v8 ~]#\n')),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4e3asysctl.conf\u6587\u4ef6\u4e2d\u7684\u7b2c2\u884c\u5230\u6700\u540e\u4e00\u884c\u7684\u884c\u9996\u52a0\u4e0a\u6ce8\u91ca\u7b26\u53f7\"#\"\u3002\n[root@arm64v8 ~]# cat sysctl.conf\n# sysctl settings are defined through files in\n/usr/lib/sysctl.d/, /run/sysctl.d/, and /etc/sysctl.d/.\n\nVendors settings live in /usr/lib/sysctl.d/.\nTo override a whole file, create a new file with the same in\n/etc/sysctl.d/ and put new settings there. To override\nonly specific settings, add a file with a lexically later\nname in /etc/sysctl.d/ and put new settings there.\n\nFor more information, see sysctl.conf(5) and sysctl.d(5).\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed '2,$s/^/#/' sysctl.conf \n# sysctl settings are defined through files in\n# /usr/lib/sysctl.d/, /run/sysctl.d/, and /etc/sysctl.d/.\n#\n# Vendors settings live in /usr/lib/sysctl.d/.\n# To override a whole file, create a new file with the same in\n# /etc/sysctl.d/ and put new settings there. To override\n# only specific settings, add a file with a lexically later\n# name in /etc/sysctl.d/ and put new settings there.\n#\n# For more information, see sysctl.conf(5) and sysctl.d(5).\n[root@arm64v8 ~]# \n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5c06string.test\u4e2d\u7684love\u66ff\u6362\u6210like\uff0c\u5bf9\u6bd4\u601d\u8003\n[root@arm64v8 ~]# cat string.test \nI love China love you love Country love you!\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed 's/\\blove\\b/like/' string.test \nI like China love you love Country love you!\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# sed 's/\\blove\\b/like/g' string.test \nI like China like you like Country like you!\n[root@arm64v8 ~]#\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u507f\u8bd5\u5c06cmd2\u548ccmd3\u4f4d\u7f6e\u5bf9\u8c03\n[root@arm64v8 ~]# echo \"cmd1 && cmd2 || cmd3\" | sed 's%&&\\(.*\\) || \\(.*\\)%%'\ncmd1 \n[root@arm64v8 ~]# echo \"cmd1 && cmd2 || cmd3\" | sed 's%&&\\(.*\\) || \\(.*\\)%&%'\ncmd1 && cmd2 || cmd3\n[root@arm64v8 ~]# echo \"cmd1 && cmd2 || cmd3\" | sed 's%&&\\(.*\\) || \\(.*\\)%\\&\\& \\2 ||\\1%'\ncmd1 && cmd3 || cmd2\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'\u8fd9\u91cc\u4f7f\u7528\u4e86 "%" \u4ee3\u66ff "/"\uff0c\u4e14\u7b2c\u4e09\u53e5\u5728 REPLACEMENT \u90e8\u5206\u5bf9 "&" \u8fdb\u884c\u4e86\u8f6c\u4e49\uff0c\u56e0\u4e3a\u8be5\u7b26\u53f7\u5728 REPLACEMENT \u4e2d\u8868\u793a\u7684\u662f\u5f15\u7528 REGEXP \u6240\u5339\u914d\u7684\u6240\u6709\u5185\u5bb9\u3002'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'\u8ffd\u52a0\u3001\u63d2\u5165\u548c\u4fee\u6539\u547d\u4ee4 "a"\u3001"i"\u3001"c"'),(0,r.kt)("p",{parentName:"li"},'\u8fd9 3 \u4e2a\u547d\u4ee4\u7684\u683c\u5f0f\u662f "',"[","a|i|c","]",' TEXT"\uff0c\u8868\u793a\u5c06 TEXT \u5185\u5bb9\u961f\u5217\u5316\u5230\u5185\u5b58\u4e2d\uff0c\u5f53\u6709\u8f93\u51fa\u6d41\u6216\u8005\u8bf4\u6709\u8f93\u51fa\u52a8\u4f5c\u7684\u65f6\u5019\uff0c\u534a\u8def\u8ffd\u4e0a\u8f93\u51fa\u6d41\uff0c\u5206\u522b\u8ffd\u52a0\u3001\u63d2\u5165\u548c\u66ff\u6362\u5230\u8be5\u8f93\u51fa\u6d41\u7136\u540e\u8f93\u51fa\u3002'),(0,r.kt)("p",{parentName:"li"},"\u8ffd\u52a0\u662f\u6307\u8ffd\u52a0\u5728\u8f93\u51fa\u6d41\u7684\u5c3e\u90e8\uff0c\u63d2\u5165\u662f\u6307\u63d2\u5165\u5728\u8f93\u51fa\u6d41\u7684\u9996\u90e8\uff0c\u66ff\u6362\u662f\u6307\u5c06\u6574\u4e2a\u8f93\u51fa\u6d41\u66ff\u6362\u6389\u3002"),(0,r.kt)("p",{parentName:"li"},'"c" \u547d\u4ee4\u548c "a"\u3001"i" \u547d\u4ee4\u6709\u4e00\u4e1d\u4e0d\u540c\uff0c\u5b83\u66ff\u6362\u7ed3\u675f\u540e\u7acb\u5373\u9000\u51fa\u5f53\u524d SCRIPT \u5faa\u73af\uff0c\u5e76\u8fdb\u5165\u4e0b\u4e00\u4e2a sed \u5faa\u73af\uff0c\u56e0\u6b64 "c" \u547d\u4ee4\u540e\u7684\u547d\u4ee4\u90fd\u4e0d\u4f1a\u88ab\u6267\u884c\u3002'),(0,r.kt)("p",{parentName:"li"},"\u4e3e\u51e0\u4e2a\u4f8b\u5b50\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# echo -e \"you\\nare\\nsomething\" | sed '/you/a really'\nyou\nreally\nare\nsomething\n[root@arm64v8 ~]# \n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'\u5176\u5b9e "a"\u3001"i" \u548c "c" \u547d\u4ee4\u7684 TEXT \u90e8\u5206\u5199\u6cd5\u662f\u6bd4\u8f83\u590d\u6742\u7684\uff0c\u5982\u679cTEXT\u53ea\u662f\u51e0\u4e2a\u7b80\u5355\u5b57\u7b26\uff0c\u5982\u4e0a\u5373\u53ef\u3002'),(0,r.kt)("li",{parentName:"ul"},'\u4f46\u5982\u679c\u8981 TEXT \u662f\u5206\u884c\u6587\u672c\uff0c\u6216\u8005\u5305\u542b\u4e86\u5f15\u53f7\uff0c\u6216\u8005\u8fd9\u51e0\u4e2a\u547d\u4ee4\u662f\u5199\u5728 "{}" \u4e2d\u7684\uff0c\u5219\u4e0a\u9762\u7684\u5199\u6cd5\u5c31\u65e0\u6cd5\u5b9e\u73b0\u3002'),(0,r.kt)("li",{parentName:"ul"},'\u9700\u8981\u4f7f\u7528\u7b26\u53f7 "',"\\",'" \u6765\u8f6c\u4e49\u884c\u5c3e\u7b26\u53f7\uff0c\u8fd9\u8868\u793a\u5f00\u542f\u4e00\u4e2a\u65b0\u884c\uff0c\u6b64\u540e\u8f93\u5165\u7684\u5185\u5bb9\u90fd\u662f TEXT\uff0c\u76f4\u5230\u9047\u5230\u5f15\u53f7\u6216\u8005 ";" \u5f00\u5934\u7684\u884c\u65f6\u3002')),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5728#!/bin/bash\u540e\u884c\u8ffd\u52a0# Script filename: bash.sh\u548c\u7a7a\u884c\n[root@arm64v8 ~]# cat bash.sh \n#!/bin/bash\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# sed '\\@^#!/bin/bash@a\\# Script filename: bash.sh\\n' bash.sh \n#!/bin/bash\n# Script filename: bash.sh\n\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4f7f\u7528 @ \u66ff\u4ee3 / \u8868\u8ff0\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f @ \u7b26\u53f7\u9700\u8981\u8f6c\u4e49 ","\\","@\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'"a" \u547d\u4ee4\u540e\u7684\u7b2c\u4e00\u4e2a\u53cd\u659c\u7ebf\u7528\u4e8e\u6807\u8bb0 TEXT \u7684\u5f00\u59cb\uff0c"',"\\",'n" \u7528\u4e8e\u6dfb\u52a0\u7a7a\u767d\u884c\u3002\u5982\u679c\u5206\u884c\u5199\uff0c\u6216\u8005 "a" \u547d\u4ee4\u5199\u5728\u5927\u62ec\u53f7 "{}" \u4e2d\uff0c\u5219\u683c\u5f0f\u5982\u4e0b\uff1a'),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sed '\\@^#!/bin/bash@a\\\n# Script filename: bash.sh\\n\n' bash.sh \n")))),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("em",{parentName:"p"},'\u8bf4\u660e\uff1a\u8fd9 3 \u4e2a\u547d\u4ee4\u7684 TEXT \u662f\u5b58\u653e\u5728\u5185\u5b58\u4e2d\u7684\uff0c\u4e0d\u4f1a\u8fdb\u5165\u6a21\u5f0f\u7a7a\u95f4\uff0c\u56e0\u6b64\u4e0d\u53d7 "-n" \u9009\u9879\u6216\u67d0\u4e9b\u547d\u4ee4\u7684\u5f71\u54cd\u3002\u6b64\u5916\uff0c\u8fd9 3 \u4e2a\u547d\u4ee4\u4f9d\u8d56\u4e8e\u8f93\u51fa\u6d41\uff0c\u53ea\u8981\u6709\u8f93\u51fa\u52a8\u4f5c\uff0c\u4e0d\u7ba1\u662f\u7a7a\u8f93\u51fa\u6d41\u8fd8\u662f\u975e\u7a7a\u7684\u8f93\u51fa\u6d41\uff0c\u53ea\u8981\u6709\u8f93\u51fa\uff0c\u8fd9\u51e0\u4e2a\u547d\u4ee4\u5c31\u4f1a\u534a\u8def "\u52ab\u6740"\u3002')))),(0,r.kt)("h3",{id:"113awk-\u547d\u4ee4"},"1.1.3\u3001awk \u547d\u4ee4"),(0,r.kt)("p",null,"awk \u662f\u4e00\u79cd\u7f16\u7a0b\u8bed\u8a00\uff0c\u7528\u4e8e\u5728 linux/unix \u4e0b\u5bf9\u6587\u672c\u548c\u6570\u636e\u8fdb\u884c\u5904\u7406\u3002\u6570\u636e\u53ef\u4ee5\u6765\u81ea\u6807\u51c6\u8f93\u5165(stdin)\u3001\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\uff0c\u6216\u5176\u5b83\u547d\u4ee4\u7684\u8f93\u51fa\u3002"),(0,r.kt)("p",null,"\u5b83\u652f\u6301\u7528\u6237\u81ea\u5b9a\u4e49\u51fd\u6570\u548c\u52a8\u6001\u6b63\u5219\u8868\u8fbe\u5f0f\u7b49\u5148\u8fdb\u529f\u80fd\uff0c\u662f linux/unix \u4e0b\u7684\u4e00\u4e2a\u5f3a\u5927\u7f16\u7a0b\u5de5\u5177\u3002\u5b83\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528\uff0c\u4f46\u66f4\u591a\u662f\u4f5c\u4e3a\u811a\u672c\u6765\u4f7f\u7528\u3002",(0,r.kt)("strong",{parentName:"p"},"awk \u6709\u5f88\u591a\u5185\u5efa\u7684\u529f\u80fd"),"\uff0c\u6bd4\u5982\u6570\u7ec4\u3001\u51fd\u6570\u7b49\uff0c\u8fd9\u662f\u5b83\u548c C \u8bed\u8a00\u7684\u76f8\u540c\u4e4b\u5904\uff0c\u7075\u6d3b\u6027\u662f awk \u6700\u5927\u7684\u4f18\u52bf\u3002"),(0,r.kt)("h4",{id:"1131\u5b89\u88c5\u65b0\u7248\u672c-gawk"},"1.1.3.1\u3001\u5b89\u88c5\u65b0\u7248\u672c gawk"),(0,r.kt)("p",null,"awk \u6709\u5f88\u591a\u79cd\u7248\u672c\uff0c\u4f8b\u5982 nawk\u3001gawk\u3002gawk \u662f GNU awk\uff0c\u5b83\u7684\u529f\u80fd\u5f88\u4e30\u5bcc\u3002"),(0,r.kt)("p",null,"\u672c\u6559\u7a0b\u91c7\u7528\u7684\u662f gawk 4.2.0 \u7248\u672c\uff0c4.2.0 \u7248\u672c\u7684 gawk \u662f\u4e00\u4e2a\u6bd4\u8f83\u5927\u7684\u6539\u7248\uff0c\u65b0\u652f\u6301\u7684\u4e00\u4e9b\u7279\u6027\u975e\u5e38\u597d\u7528\uff0c\u800c\u5728\u4f4e\u4e8e 4.2.0 \u7248\u672c\u65f6\u8fd9\u4e9b\u8bed\u6cd5\u53ef\u80fd\u4f1a\u62a5\u9519\u3002\u6240\u4ee5\uff0c\u8bf7\u5148\u5b89\u88c5 4.2.0 \u7248\u672c\u6216\u66f4\u9ad8\u7248\u672c\u7684 gawk\u3002"),(0,r.kt)("p",null,"\u67e5\u770b\u7cfb\u7edf\u81ea\u5e26 awk \u7248\u672c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk --version | grep "GNU Awk"\nGNU Awk 4.0.2\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u8fd9\u91cc\u4ee5\u5b89\u88c5 gawk 4.2.0 \u4e3a\u4f8b"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4e0b\u8f7d"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# wget --no-check-certificate https://mirrors.tuna.tsinghua.edu.cn/gnu/gawk/gawk-4.2.0.tar.gz\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u89e3\u538b\u3001\u8fdb\u5165\u89e3\u538b\u540e\u76ee\u5f55"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tar xf gawk-4.2.0.tar.gz \n[root@arm64v8 ~]# cd gawk-4.2.0/\n[root@arm64v8 gawk-4.2.0]#\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u7f16\u8bd1\uff0c\u5e76\u6267\u884c\u5b89\u88c5\u76ee\u5f55\u4e3a /usr/local/gawk4.2"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 gawk-4.2.0]# ./configure --prefix=/usr/local/gawk4.2 && make && make install\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a\u8f6f\u94fe\u63a5\uff1a\u8ba9 awk \u6307\u5411\u521a\u65b0\u88c5\u7684 gawk \u7248\u672c"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 gawk-4.2.0]# ln -fsv /usr/local/gawk4.2/bin/gawk /usr/bin/awk\n\u2018/usr/bin/awk\u2019 -> \u2018/usr/local/gawk4.2/bin/gawk\u2019\n[root@arm64v8 gawk-4.2.0]#\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6b64\u65f6\uff0c\u8c03\u7528 awk \u5c06\u8c03\u7528\u65b0\u7248\u672c\u7684 gawk\uff0c\u8c03\u7528 gawk \u5c06\u8c03\u7528\u65e7\u7248\u672c\u7684 gawk"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk --version | grep "GNU Awk"\nGNU Awk 4.2.0, API: 2.0\n[root@arm64v8 ~]# gawk --version | grep "GNU Awk"\nGNU Awk 4.0.2\n[root@arm64v8 ~]#\n')))),(0,r.kt)("h4",{id:"1132awk-\u7528\u4f8b\u6587\u4ef6"},"1.1.3.2\u3001awk \u7528\u4f8b\u6587\u4ef6"),(0,r.kt)("p",null,"\u6574\u4e2a awk \u7684\u8bb2\u89e3\u90fd\u4f1a\u7528\u5230\u5982\u4e0b\u793a\u4f8b\u6587\u4ef6 a.txt"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n")),(0,r.kt)("h4",{id:"1133awk-\u7528\u6cd5\u5165\u95e8"},"1.1.3.3\u3001awk \u7528\u6cd5\u5165\u95e8"),(0,r.kt)("p",null,"\u7b80\u5355\u6765\u8bf4\uff0cawk \u7684\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk 'awk_program' a.txt\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5355\u5f15\u53f7\u5305\u56f4\u7684\u662f awk \u4ee3\u7801\uff0c\u4e5f\u79f0\u4e3a awk \u7a0b\u5e8f\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6700\u597d\u4f7f\u7528\u5355\u5f15\u53f7\uff0c\u56e0\u4e3a\u5728 awk \u4e2d\u7ecf\u5e38\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"$")," \u7b26\u53f7\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"$")," \u65e2\u53ef\u4ee5\u88ab shell \u89e3\u6790\uff0c\u4e5f\u53ef\u4ee5\u88ab awk \u89e3\u6790\uff0c\u800c\u53cc\u5f15\u53f7\u5c5e\u4e8e\u5f31\u5f15\u7528\uff0c\u5355\u5f15\u53f7\u5c5e\u4e8e\u5f3a\u5f15\u7528\uff0c\u8fd9\u91cc\u5fc5\u987b\u4f7f\u7528\u5f3a\u5f15\u7528\u7684\u5355\u5f15\u53f7\uff0c\u4f7f\u5f97 ",(0,r.kt)("inlineCode",{parentName:"li"},"$")," \u4ec5\u88ab awk \u89e3\u6790\u3002"))),(0,r.kt)("li",{parentName:"ul"},"a.txt \u662f awk \u8981\u8bfb\u53d6\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u662f 0 \u4e2a\u6587\u4ef6\u6216\u4e00\u4e2a\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u662f\u591a\u4e2a\u6587\u4ef6\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u7ed9\u5b9a\u6587\u4ef6\u5219\u53ef\u4ee5\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6"))),(0,r.kt)("li",{parentName:"ul"},'awk \u7a0b\u5e8f\u4e2d\uff0c\u5927\u91cf\u4f7f\u7528\u5927\u62ec\u53f7\uff0c\u5927\u62ec\u53f7\u8868\u793a\u4ee3\u7801\u5757\uff0c\u591a\u4e2a\u4ee3\u7801\u5757\u4e4b\u95f4\u53ef\u4ee5\u8fde\u7528\uff0c\u4ee3\u7801\u5757\u5185\u90e8\u7684\u591a\u4e2a\u8bed\u53e5\u9700\u8981\u4f7f\u7528 ";" \u5206\u9694\u3002')),(0,r.kt)("p",null,"awk \u793a\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u8f93\u51faa.txt\u4e2d\u7684\u6bcf\u4e00\u884c\n[root@arm64v8 ~]# awk '{print $0}' a.txt \nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n[root@arm64v8 ~]#\n\n# \u591a\u4e2a\u4ee3\u7801\u5757\uff0c\u4ee3\u7801\u5757\u4e2d\u591a\u4e2a\u8bed\u53e5\n# \u8f93\u51fa\u6bcf\u884c\u4e4b\u540e\u8fd8\u8f93\u51fa\u4e24\u884c\uff1ahello\u884c\u548cworld\u884c\n[root@arm64v8 ~]# awk '{print $0}{print \"hello\";print \"world\"}' a.txt \nID  name    gender  age  email          phone\nhello\nworld\n1   Bob     male    28   abc@qq.com     18023394012\nhello\nworld\n2   Alice   female  24   def@gmail.com  18084925203\nhello\nworld\n3   Tony    male    21   aaa@163.com    17048792503\nhello\nworld\n4   Kevin   male    21   bbb@189.com    17023929033\nhello\nworld\n5   Alex    male    18   ccc@xyz.com    18185904230\nhello\nworld\n6   Andy    female  22   ddd@139.com    18923902352\nhello\nworld\n7   Jerry   female  25   exdsa@189.com  18785234906\nhello\nworld\n8   Peter   male    20   bax@qq.com     17729348758\nhello\nworld\n9   Steven  female  23   bc@sohu.com    15947893212\nhello\nworld\n10  Bruce   female  27   bcbd@139.com   13942943905\nhello\nworld\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e ",(0,r.kt)("inlineCode",{parentName:"li"},"awk '{print $0}' a.txt")," \uff0c\u5b83\u7c7b\u4f3c\u4e8e shell \u7684 while \u5faa\u73af ",(0,r.kt)("inlineCode",{parentName:"li"},'while read line;do echo "$line";done <a.txt'),"\u3002")),(0,r.kt)("p",null,"\u4e0b\u9762\u518d\u5206\u6790\u8be5 awk \u547d\u4ee4\u7684\u6267\u884c\u8fc7\u7a0b\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u8bfb\u53d6\u6587\u4ef6\u7b2c\u4e00\u884c( awk \u9ed8\u8ba4\u6309\u884c\u8bfb\u53d6\u6587\u4ef6 )\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5c06\u6240\u8bfb\u53d6\u7684\u884c\u8d4b\u503c\u7ed9 awk \u7684\u53d8\u91cf ",(0,r.kt)("inlineCode",{parentName:"li"},"$0"),"\uff0c\u4e8e\u662f ",(0,r.kt)("inlineCode",{parentName:"li"},"$0")," \u4e2d\u4fdd\u5b58\u7684\u5c31\u662f\u672c\u6b21\u6240\u8bfb\u53d6\u7684\u884c\u6570\u636e\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u8fdb\u5165\u4ee3\u7801\u5757 ",(0,r.kt)("inlineCode",{parentName:"li"},"print $0")," \u5e76\u6267\u884c\u5176\u4e2d\u4ee3\u7801 ",(0,r.kt)("inlineCode",{parentName:"li"},"print $0"),"\uff0c\u5373\u8f93\u51fa ",(0,r.kt)("inlineCode",{parentName:"li"},"$0"),"\uff0c\u4e5f\u5373\u8f93\u51fa\u5f53\u524d\u6240\u8bfb\u53d6\u7684\u884c\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u6267\u884c\u5b8c\u672c\u6b21\u4ee3\u7801\u4e4b\u540e\uff0c\u8fdb\u5165\u4e0b\u4e00\u8f6e awk \u5faa\u73af\uff1a\u7ee7\u7eed\u8bfb\u53d6\u4e0b\u4e00\u884c(\u7b2c\u4e8c\u884c)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5c06\u7b2c\u4e8c\u884c\u8d4b\u503c\u7ed9\u53d8\u91cf ",(0,r.kt)("inlineCode",{parentName:"li"},"$0")),(0,r.kt)("li",{parentName:"ul"},"\u8fdb\u5165\u4ee3\u7801\u5757\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"print $0")),(0,r.kt)("li",{parentName:"ul"},"\u6267\u884c\u5b8c\u4ee3\u7801\u5757\u540e\u518d\u6b21\u8fdb\u5165\u4e0b\u4e00\u8f6e awk \u5faa\u73af\uff0c\u5373\u8bfb\u53d6\u7b2c\u4e09\u884c\uff0c\u7136\u540e\u8d4b\u503c\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"li"},"$0"),"\uff0c\u518d\u6267\u884c\u4ee3\u7801\u5757"),(0,r.kt)("li",{parentName:"ul"},"\u2026\u4e0d\u65ad\u5faa\u73af\uff0c\u76f4\u5230\u8bfb\u5b8c\u6587\u4ef6\u6240\u6709\u6570\u636e\u2026"))),(0,r.kt)("li",{parentName:"ol"},"\u9000\u51fa awk")),(0,r.kt)("h4",{id:"1134begin-\u548c-end-\u8bed\u53e5\u5757"},"1.1.3.4\u3001BEGIN \u548c END \u8bed\u53e5\u5757"),(0,r.kt)("p",null,"awk \u7684\u6240\u6709\u4ee3\u7801( \u76ee\u524d\u8fd9\u4e48\u8ba4\u4e3a )\u90fd\u662f\u5199\u5728\u8bed\u53e5\u5757\u4e2d\u7684\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk '{print $0}' a.txt\nawk '{print $0}{print $0;print $0}' a.txt\n")),(0,r.kt)("p",null,"\u6bcf\u4e2a\u8bed\u53e5\u5757\u524d\u9762\u53ef\u4ee5\u6709 pattern\uff0c\u6240\u4ee5\u683c\u5f0f\u4e3a\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pattern1{statement1}pattern2{statement3;statement4;...}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8bed\u53e5\u5757\u53ef\u5206\u4e3a 3 \u7c7b\uff1aBEGIN \u8bed\u53e5\u5757\u3001END \u8bed\u53e5\u5757\u548c main \u8bed\u53e5\u5757\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5176\u4e2d BEGIN \u8bed\u53e5\u5757\u548c END \u8bed\u53e5\u5757\u683c\u5f0f\u5206\u522b\u4e3a BEGIN{...} \u548c END{...}\uff0c\u800c main \u8bed\u53e5\u5757\u662f\u4e00\u79cd\u7edf\u79f0\uff0c\u5b83\u7684 pattern \u90e8\u5206\u6ca1\u6709\u56fa\u5b9a\u683c\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u7701\u7565\uff0cmain \u4ee3\u7801\u5757\u662f\u5728\u8bfb\u53d6\u6587\u4ef6\u7684\u6bcf\u4e00\u884c\u7684\u65f6\u5019\u90fd\u6267\u884c\u7684\u4ee3\u7801\u5757\u3002")))),(0,r.kt)("p",null,"\u5206\u6790\u4e0b\u9762\u4e09\u4e2a awk \u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'BEGIN{print "\u6211\u5728\u524d\u9762"}{print $0}\' a.txt \n\u6211\u5728\u524d\u9762\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# awk \'END{print "\u6211\u5728\u540e\u9762"}{print $0}\' a.txt\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n\u6211\u5728\u540e\u9762\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# awk \'BEGIN{print "\u6211\u5728\u524d\u9762"}{print $0}END{print "\u6211\u5728\u540e\u9762"}\' a.txt \n\u6211\u5728\u524d\u9762\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n\u6211\u5728\u540e\u9762\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u6839\u636e\u4e0a\u9762 3 \u884c\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\uff0c\u53ef\u603b\u7ed3\u51fa\u5982\u4e0b\u6709\u5173\u4e8e BEGIN\u3001END \u548c main \u4ee3\u7801\u5757\u7684\u7279\u6027\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"BEGIN \u4ee3\u7801\u5757\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728\u8bfb\u53d6\u6587\u4ef6",(0,r.kt)("strong",{parentName:"li"},"\u4e4b\u524d"),"\u6267\u884c\uff0c\u4e14\u6267\u884c\u4e00\u6b21"),(0,r.kt)("li",{parentName:"ul"},"\u5728 BEGIN \u4ee3\u7801\u5757\u4e2d\uff0c\u65e0\u6cd5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"$0")," \u6216\u5176\u5b83\u4e00\u4e9b\u7279\u6b8a\u53d8\u91cf"))),(0,r.kt)("li",{parentName:"ul"},"main \u4ee3\u7801\u5757\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u8bfb\u53d6\u6587\u4ef6\u65f6\u5faa\u73af\u6267\u884c\uff0c(\u9ed8\u8ba4\u60c5\u51b5)\u6bcf\u8bfb\u53d6\u4e00\u884c\uff0c\u5c31\u6267\u884c\u4e00\u6b21 main \u4ee3\u7801\u5757"),(0,r.kt)("li",{parentName:"ul"},"main \u4ee3\u7801\u5757\u53ef\u6709\u591a\u4e2a"))),(0,r.kt)("li",{parentName:"ul"},"END \u4ee3\u7801\u5757\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728\u8bfb\u53d6\u6587\u4ef6\u5b8c\u6210",(0,r.kt)("strong",{parentName:"li"},"\u4e4b\u540e"),"\u6267\u884c\uff0c\u4e14\u6267\u884c\u4e00\u6b21"),(0,r.kt)("li",{parentName:"ul"},"\u6709 END \u4ee3\u7801\u5757\uff0c\u5fc5\u987b\u8981\u6709\u8bfb\u53d6\u7684\u6570\u636e(\u53ef\u4ee5\u662f\u6807\u51c6\u8f93\u5165)"),(0,r.kt)("li",{parentName:"ul"},"END \u4ee3\u7801\u5757\u4e2d\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"$0")," \u7b49\u4e00\u4e9b\u7279\u6b8a\u53d8\u91cf\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u4e9b\u7279\u6b8a\u53d8\u91cf\u4fdd\u5b58\u7684\u662f\u6700\u540e\u4e00\u8f6e awk \u5faa\u73af\u7684\u6570\u636e")))),(0,r.kt)("h4",{id:"1135awk-\u547d\u4ee4\u884c\u7ed3\u6784\u548c\u8bed\u6cd5\u7ed3\u6784"},"1.1.3.5\u3001awk \u547d\u4ee4\u884c\u7ed3\u6784\u548c\u8bed\u6cd5\u7ed3\u6784"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u547d\u4ee4\u884c\u7ed3\u6784")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk [ -- ] program-text file ...        (1)\nawk -f program-file [ -- ] file ...     (2)\nawk -e program-text [ -- ] file ...     (3)\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"program-text \u5373 awk \u547d\u4ee4\u884c\u4e2d\u7684 awk \u4ee3\u7801\u90e8\u5206\uff0c\u4e00\u822c\u4f7f\u7528\u5355\u5f15\u53f7\u5305\u56f4"),(0,r.kt)("li",{parentName:"ul"},"-","f program-file \u8868\u793a\u5c06 awk \u4ee3\u7801\u90e8\u5206\u5199\u5728\u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u4f7f\u7528 -f \u9009\u9879\u53bb\u5f15\u7528\u8fd9\u4e2a\u6587\u4ef6"),(0,r.kt)("li",{parentName:"ul"},"-","e program-text \u4e5f\u7528\u4e8e\u6307\u5b9a awk \u4ee3\u7801\uff0c\u4f46\u662f\u65e2\u8981 -f \u6307\u5b9a\u4ee3\u7801\u6587\u4ef6\uff0c\u53c8\u8981\u7528\u547d\u4ee4\u884c awk \u4ee3\u7801\uff0c\u5219\u5fc5\u987b\u540c\u65f6\u4f7f\u7528 -f \u548c -e\uff0c\u5373 ",(0,r.kt)("inlineCode",{parentName:"li"},"awk -f file -e 'awk_code'"),"\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u8bed\u6cd5\u7ed3\u6784")),(0,r.kt)("p",null,"awk \u8bed\u6cd5\u7ed3\u6784\u5373 awk \u4ee3\u7801\u90e8\u5206\u7684\u7ed3\u6784\u3002"),(0,r.kt)("p",null,"awk \u7684\u8bed\u6cd5\u5145\u65a5\u7740 ",(0,r.kt)("inlineCode",{parentName:"p"},"pattern{action}")," \u7684\u6a21\u5f0f\uff0c\u5b83\u4eec\u79f0\u4e3a awk rule\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'BEGIN{n=3} /^[0-9]/&&$1>5{print $1} /Alice/{print "Alice"} END{print "hello"}\' a.txt\nAlice\n6\n7\n8\n9\n10\nhello\n[root@arm64v8 ~]#\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6709 BEGIN \u8bed\u53e5\u5757\uff0c\u6709 END \u8bed\u53e5\u5757\uff0c\u8fd8\u6709 2 \u4e2a main \u4ee3\u7801\u5757\uff0c\u4e24\u4e2a main \u4ee3\u7801\u5757\u90fd\u4f7f\u7528\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f\u4f5c\u4e3a pattern\u3002")),(0,r.kt)("p",null,"\u5173\u4e8e awk \u7684\u8bed\u6cd5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u591a\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"pattern{action}")," \u53ef\u4ee5\u76f4\u63a5\u8fde\u7528"),(0,r.kt)("li",{parentName:"ul"},"action \u4e2d\u591a\u4e2a\u8bed\u53e5\u5982\u679c\u5199\u5728\u540c\u4e00\u884c\uff0c\u5219\u9700\u4f7f\u7528\u5206\u53f7\u5206\u9694"),(0,r.kt)("li",{parentName:"ul"},"pattern \u90e8\u5206\u7528\u4e8e\u7b5b\u9009\u884c\uff0caction \u8868\u793a\u5728\u7b5b\u9009\u901a\u8fc7\u540e\u6267\u884c\u7684\u64cd\u4f5c"),(0,r.kt)("li",{parentName:"ul"},"pattern \u548c action \u90fd\u53ef\u4ee5\u7701\u7565",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7701\u7565 pattern\uff0c\u7b49\u4ef7\u4e8e\u5bf9\u6bcf\u4e00\u884c\u6570\u636e\u90fd\u6267\u884c action"),(0,r.kt)("li",{parentName:"ul"},"\u4f8b\u5982\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"awk '{print $0}' a.txt")),(0,r.kt)("li",{parentName:"ul"},"\u7701\u7565\u4ee3\u7801\u5757 ",(0,r.kt)("inlineCode",{parentName:"li"},"action"),"\uff0c\u7b49\u4ef7\u4e8e ",(0,r.kt)("inlineCode",{parentName:"li"},"print")," \u5373\u8f93\u51fa\u6240\u6709\u884c"),(0,r.kt)("li",{parentName:"ul"},"\u4f8b\u5982\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"awk '/Alice/' a.txt")," \u7b49\u4ef7\u4e8e ",(0,r.kt)("inlineCode",{parentName:"li"},"awk '/Alice/{print $0}' a.txt")),(0,r.kt)("li",{parentName:"ul"},"\u7701\u7565\u4ee3\u7801\u5757\u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"action"),"\uff0c\u8868\u793a\u5bf9\u7b5b\u9009\u7684\u884c\u4ec0\u4e48\u90fd\u4e0d\u505a"),(0,r.kt)("li",{parentName:"ul"},"\u4f8b\u5982\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"awk '/Alice/{}' a.txt")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"pattern{action}")," \u4efb\u4f55\u4e00\u90e8\u5206\u90fd\u53ef\u4ee5\u7701\u7565"),(0,r.kt)("li",{parentName:"ul"},"\u4f8b\u5982\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"awk '' a.txt"))))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"pattern \u548c action")),(0,r.kt)("p",null,"\u5bf9\u4e8e ",(0,r.kt)("inlineCode",{parentName:"p"},"pattern{action}")," \u8bed\u53e5\u7ed3\u6784(\u90fd\u79f0\u4e4b\u4e3a\u8bed\u53e5\u5757)\uff0c\u5176\u4e2d\u7684 pattern \u90e8\u5206\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u5217\u51fa\u7684\u6a21\u5f0f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u7279\u6b8apattern\nBEGIN\nEND\n\n# \u5e03\u5c14pattern\n/regular expression/            # \u6b63\u5219\u5339\u914d\u6210\u529f\u4e0e\u5426 /a.*ef/{action}\nrelational expression           # \u5373\u7b49\u503c\u6bd4\u8f83\u3001\u5927\u5c0f\u6bd4\u8f83 3>2{action}\npattern && pattern              # \u903b\u8f91\u4e0e 3>2 && 3>1 {action}\npattern || pattern              # \u903b\u8f91\u6216 3>2 || 3<1 {action}\n! pattern                       # \u903b\u8f91\u53d6\u53cd !/a.*ef/{action}\n(pattern)                       # \u6539\u53d8\u4f18\u5148\u7ea7\npattern ? pattern : pattern     # \u4e09\u76ee\u8fd0\u7b97\u7b26\u51b3\u5b9a\u7684\u5e03\u5c14\u503c\n\n# \u8303\u56f4pattern\uff0c\u975e\u5e03\u5c14\u4ee3\u7801\u5757\npattern1, pattern2              # \u8303\u56f4\uff0cpat1\u6253\u5f00\u3001pat2\u5173\u95ed\uff0c\u5373flip,flop\u6a21\u5f0f\n")),(0,r.kt)("p",null,"action \u90e8\u5206\uff0c\u53ef\u4ee5\u662f\u4efb\u4f55\u8bed\u53e5\uff0c\u4f8b\u5982 print\u3002"),(0,r.kt)("h4",{id:"1136awk-\u8bfb\u53d6\u884c\u7684\u7ec6\u8282"},"1.1.3.6\u3001awk \u8bfb\u53d6\u884c\u7684\u7ec6\u8282"),(0,r.kt)("p",null,"awk \u8bfb\u53d6\u8f93\u5165\u6587\u4ef6\u65f6\uff0c\u6bcf\u6b21\u8bfb\u53d6\u4e00\u6761\u8bb0\u5f55(record)(\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6309\u884c\u8bfb\u53d6\uff0c\u6240\u4ee5\u6b64\u65f6\u8bb0\u5f55\u5c31\u662f\u884c)\u3002\u6bcf\u8bfb\u53d6\u4e00\u6761\u8bb0\u5f55\uff0c\u5c06\u5176\u4fdd\u5b58\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u4e2d\uff0c\u7136\u540e\u6267\u884c\u4e00\u6b21 main \u4ee3\u7801\u6bb5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk '{print $0}' a.txt\n")),(0,r.kt)("p",null,"\u5982\u679c\u662f\u7a7a\u6587\u4ef6\uff0c\u5219\u56e0\u4e3a\u65e0\u6cd5\u8bfb\u53d6\u5230\u4efb\u4f55\u4e00\u6761\u8bb0\u5f55\uff0c\u5c06\u5bfc\u81f4\u76f4\u63a5\u5173\u95ed\u6587\u4ef6\uff0c\u800c\u4e0d\u4f1a\u8fdb\u5165 main \u4ee3\u7801\u6bb5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# touch x.log\n[root@arm64v8 ~]# awk '{print \"hello world\"}' x.log \n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u53ef\u8bbe\u7f6e\u8868\u793a\u8f93\u5165\u8bb0\u5f55\u5206\u9694\u7b26\u7684\u9884\u5b9a\u4e49\u53d8\u91cf RS(Record Separator) \u6765\u6539\u53d8\u6bcf\u6b21\u8bfb\u53d6\u7684\u8bb0\u5f55\u6a21\u5f0f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# RS="\\n" \u3001 RS="m"\nawk \'BEGIN{RS="\\n"}{print $0}\' a.txt\nawk \'BEGIN{RS="m"}{print $0}\' a.txt\n')),(0,r.kt)("p",null,"RS \u901a\u5e38\u8bbe\u7f6e\u5728 BEGIN \u4ee3\u7801\u5757\u4e2d\uff0c\u56e0\u4e3a\u8981\u5148\u4e8e\u8bfb\u53d6\u6587\u4ef6\u786e\u5b9a\u597d RS \u5206\u9694\u7b26\u3002"),(0,r.kt)("p",null,'RS \u6307\u5b9a\u8f93\u5165\u8bb0\u5f55\u5206\u9694\u7b26\u65f6\uff0c\u6240\u8bfb\u53d6\u7684\u8bb0\u5f55\u4e2d\u662f\u4e0d\u5305\u542b\u5206\u9694\u7b26\u5b57\u7b26\u7684\u3002\u4f8b\u5982 RS="a"\uff0c\u5219 $0 \u4e2d\u4e00\u5b9a\u4e0d\u53ef\u80fd\u51fa\u73b0\u5b57\u7b26 a\u3002'),(0,r.kt)("p",null,"RS \u4e24\u79cd\u53ef\u80fd\u60c5\u51b5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"RS \u4e3a\u5355\u4e2a\u5b57\u7b26\uff1a\u76f4\u63a5\u4f7f\u7528\u8be5\u5b57\u7b26\u6765\u5206\u5272\u8bb0\u5f55\u3002"),(0,r.kt)("li",{parentName:"ul"},"RS \u4e3a\u591a\u4e2a\u5b57\u7b26\uff1a\u5c06\u5176\u5f53\u4f5c\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u53ea\u8981\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u7b26\u53f7\uff0c\u90fd\u7528\u6765\u5206\u5272\u8bb0\u5f55\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u9884\u5b9a\u4e49\u53d8\u91cf IGNORECASE \u4e3a\u975e\u96f6\u503c\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u65f6\u8868\u793a\u5ffd\u7565\u5927\u5c0f\u5199\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u517c\u5bb9\u6a21\u5f0f\u4e0b\uff0c\u53ea\u6709\u9996\u5b57\u7b26\u624d\u751f\u6548\uff0c\u4e0d\u4f1a\u4f7f\u7528\u6b63\u5219\u6a21\u5f0f\u53bb\u5206\u5272\u8bb0\u5f55\u3002")))),(0,r.kt)("p",null,"\u7279\u6b8a\u7684 RS \u503c\u7528\u6765\u89e3\u51b3\u7279\u6b8a\u8bfb\u53d6\u9700\u6c42\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'RS=""'),"\uff1a\u6309\u6bb5\u843d\u8bfb\u53d6"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'RS="\\0"'),"\uff1a\u4e00\u6b21\u6027\u8bfb\u53d6\u6240\u6709\u6570\u636e\uff0c\u4f46\u6709\u4e9b\u7279\u6b8a\u6587\u4ef6\u4e2d\u5305\u542b\u4e86\u7a7a\u5b57\u7b26 ",(0,r.kt)("inlineCode",{parentName:"li"},"\\0")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'RS="^$"'),"\uff1a\u771f\u6b63\u7684\u4e00\u6b21\u6027\u8bfb\u53d6\u6240\u6709\u6570\u636e\uff0c\u56e0\u4e3a\u975e\u7a7a\u6587\u4ef6\u4e0d\u53ef\u80fd\u5339\u914d\u6210\u529f"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'RS="\\n+"'),"\uff1a\u6309\u884c\u8bfb\u53d6\uff0c\u4f46\u5ffd\u7565\u6240\u6709\u7a7a\u884c")),(0,r.kt)("p",null,"\u793a\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u6309\u6bb5\u843d\u8bfb\u53d6\uff1aRS=''\n[root@arm64v8 ~]# awk 'BEGIN{RS=\"\"}{print $0\"------\"}' a.txt\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905------\n[root@arm64v8 ~]#\n\n# \u4e00\u6b21\u6027\u8bfb\u53d6\u6240\u6709\u6570\u636e\uff1aRS='\\0' RS=\"^$\"\n[root@arm64v8 ~]# awk 'BEGIN{RS='\\0'}{print $0\"------\"}' a.txt\n[root@arm64v8 ~]# awk 'BEGIN{RS=\"^$\"}{print $0\"------\"}' a.txt\n\n# \u5ffd\u7565\u7a7a\u884c\uff1aRS='\\n+'\n[root@arm64v8 ~]# awk 'BEGIN{RS=\"\\n+\"}{print $0\"-------\"}' a.txt \n\n# \u5ffd\u7565\u5927\u5c0f\u5199\uff1a\u9884\u5b9a\u4e49\u53d8\u91cfIGNORECASE\u8bbe\u7f6e\u4e3a\u975e0\u503c\n[root@arm64v8 ~]# awk 'BEGIN{IGNORECASE=1}{print $0\"-------\"}' RS='[ab]' a.txt\n")),(0,r.kt)("p",null,"\u9884\u5b9a\u4e49\u53d8\u91cf RT\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5728 awk \u6bcf\u6b21\u8bfb\u5b8c\u4e00\u6761\u8bb0\u5f55\u65f6\uff0c\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u79f0\u4e3a RT \u7684\u9884\u5b9a\u4e49\u53d8\u91cf\uff0c\u8868\u793a Record Termination\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5f53 RS \u4e3a\u5355\u4e2a\u5b57\u7b26\u65f6\uff0cRT \u7684\u503c\u548c RS \u7684\u503c\u662f\u76f8\u540c\u7684\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5f53 RS \u4e3a\u591a\u4e2a\u5b57\u7b26(\u6b63\u5219\u8868\u8fbe\u5f0f)\u65f6\uff0c\u5219 RT \u8bbe\u7f6e\u4e3a\u6b63\u5219\u5339\u914d\u5230\u8bb0\u5f55\u5206\u9694\u7b26\u4e4b\u540e\uff0c\u771f\u6b63\u7528\u4e8e\u5212\u5206\u8bb0\u5f55\u65f6\u7684\u5b57\u7b26\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5f53\u65e0\u6cd5\u5339\u914d\u5230\u8bb0\u5f55\u5206\u9694\u7b26\u65f6\uff0cRT \u8bbe\u7f6e\u4e3a\u63a7\u5236\u7a7a\u5b57\u7b26\u4e32(\u5373\u9ed8\u8ba4\u7684\u521d\u59cb\u503c)\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{RS=\"(fe)?male\"}{print RT}' a.txt\nmale\nfemale\nmale\nmale\nmale\nfemale\nfemale\nmale\nfemale\nfemale\n\n[root@arm64v8 ~]#\n")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4e24\u79cd\u884c\u53f7\uff1aNR \u548c FNR")),(0,r.kt)("p",null,"\u5728\u8bfb\u53d6\u6bcf\u6761\u8bb0\u5f55\u4e4b\u540e\uff0c\u5c06\u5176\u8d4b\u503c\u7ed9 $0\uff0c\u540c\u65f6\u8fd8\u4f1a\u8bbe\u7f6e NR\u3001FNR\u3001RT\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"NR\uff1a\u6240\u6709\u6587\u4ef6\u7684\u884c\u53f7\u8ba1\u6570\u5668"),(0,r.kt)("li",{parentName:"ul"},"FNR\uff1a\u662f\u5404\u4e2a\u6587\u4ef6\u7684\u884c\u53f7\u8ba1\u6570\u5668")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '{print NR}' a.txt a.txt \n[root@arm64v8 ~]# awk '{print FNR}' a.txt a.txt \n")),(0,r.kt)("h4",{id:"1137awk-\u5212\u5206\u5b57\u6bb5"},"1.1.3.7\u3001awk \u5212\u5206\u5b57\u6bb5"),(0,r.kt)("p",null,"awk \u8bfb\u53d6\u6bcf\u4e00\u6761\u8bb0\u5f55\u4e4b\u540e\uff0c\u4f1a\u5c06\u5176\u8d4b\u503c\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0"),"\uff0c\u540c\u65f6\u8fd8\u4f1a\u5bf9\u8fd9\u6761\u8bb0\u5f55\u6309\u7167 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u9884\u5b9a\u4e49\u53d8\u91cf FS")," \u5212\u5206\u5b57\u6bb5\uff0c\u5c06\u5212\u5206\u597d\u7684\u5404\u4e2a\u5b57\u6bb5\u5206\u522b\u8d4b\u503c\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"p"},"$1 $2 $3 $4...$N"),"\uff0c\u540c\u65f6\u5c06\u5212\u5206\u7684\u5b57\u6bb5\u6570\u91cf\u8d4b\u503c\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u9884\u5b9a\u4e49\u53d8\u91cfNF"),"\u3002"),(0,r.kt)("h5",{id:"11371\u5f15\u7528\u5b57\u6bb5\u7684\u65b9\u5f0f"},"1.1.3.7.1\u3001\u5f15\u7528\u5b57\u6bb5\u7684\u65b9\u5f0f"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"$N")," \u5f15\u7528\u5b57\u6bb5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"N=0"),"\uff1a\u5373 ",(0,r.kt)("inlineCode",{parentName:"li"},"$0"),"\uff0c\u5f15\u7528\u8bb0\u5f55\u672c\u8eab"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"0<N<=NF"),"\uff1a\u5f15\u7528\u5bf9\u5e94\u5b57\u6bb5"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"N>NF"),"\uff1a\u8868\u793a\u5f15\u7528\u4e0d\u5b58\u5728\u7684\u5b57\u6bb5\uff0c\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"N<0"),"\uff1a\u62a5\u9519")),(0,r.kt)("p",null,"\u53ef\u4f7f\u7528\u53d8\u91cf\u6216\u8ba1\u7b97\u7684\u65b9\u5f0f\u6307\u5b9a\u8981\u83b7\u53d6\u7684\u5b57\u6bb5\u5e8f\u53f7\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '{n=5;print $5}' a.txt \nemail\nabc@qq.com\ndef@gmail.com\naaa@163.com\nbbb@189.com\nccc@xyz.com\nddd@139.com\nexdsa@189.com\nbax@qq.com\nbc@sohu.com\nbcbd@139.com\n[root@arm64v8 ~]# awk '{print $(2+2)}' a.txt  # \u62ec\u53f7\u5fc5\u4e0d\u53ef\u5c11\uff0c\u7528\u4e8e\u6539\u53d8\u4f18\u5148\u7ea7\nage\n28\n24\n21\n21\n18\n22\n25\n20\n23\n27\n[root@arm64v8 ~]# awk '{print $(NF-3)}' a.txt \ngender\nmale\nfemale\nmale\nmale\nmale\nfemale\nfemale\nmale\nfemale\nfemale\n[root@arm64v8 ~]#\n")),(0,r.kt)("h5",{id:"11372\u5206\u5272\u5b57\u6bb5\u7684\u65b9\u5f0f"},"1.1.3.7.2\u3001\u5206\u5272\u5b57\u6bb5\u7684\u65b9\u5f0f"),(0,r.kt)("p",null,"\u8bfb\u53d6 record \u4e4b\u540e\uff0c\u5c06\u4f7f\u7528\u9884\u5b9a\u4e49\u53d8\u91cf FS\u3001FIELDWIDTHS \u6216 FPAT \u4e2d\u7684\u4e00\u79cd\u6765\u5206\u5272\u5b57\u6bb5\u3002\u5206\u5272\u5b8c\u6210\u4e4b\u540e\uff0c\u518d\u8fdb\u5165 main \u4ee3\u7801\u6bb5(\u6240\u4ee5\uff0c\u5728 main \u4e2d\u8bbe\u7f6e FS \u5bf9\u672c\u6b21\u5df2\u7ecf\u8bfb\u53d6\u7684 record \u662f\u6ca1\u6709\u5f71\u54cd\u7684\uff0c\u4f46\u4f1a\u5f71\u54cd\u4e0b\u6b21\u8bfb\u53d6)\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5212\u5206\u5b57\u6bb5\u65b9\u5f0f(\u4e00)\uff1aFS \u6216 -F")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"FS")," \u6216\u8005 ",(0,r.kt)("inlineCode",{parentName:"p"},"-F"),"\uff1a\u5b57\u6bb5\u5206\u9694\u7b26"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"FS \u4e3a\u5355\u4e2a\u5b57\u7b26\u65f6\uff0c\u8be5\u5b57\u7b26\u5373\u4e3a\u5b57\u6bb5\u5206\u9694\u7b26"),(0,r.kt)("li",{parentName:"ul"},"FS \u4e3a\u591a\u4e2a\u5b57\u7b26\u65f6\uff0c\u5219\u91c7\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u4f5c\u4e3a\u5b57\u6bb5\u5206\u9694\u7b26"),(0,r.kt)("li",{parentName:"ul"},"\u7279\u6b8a\u7684\uff0c\u4e5f\u662f FS \u9ed8\u8ba4\u7684\u60c5\u51b5\uff0cFS \u4e3a\u5355\u4e2a\u7a7a\u683c\u65f6\uff0c\u5c06\u4ee5\u8fde\u7eed\u7684\u7a7a\u767d\uff08\u7a7a\u683c\u3001\u5236\u8868\u7b26\u3001\u6362\u884c\u7b26\uff09\u4f5c\u4e3a\u5b57\u6bb5\u5206\u9694\u7b26"),(0,r.kt)("li",{parentName:"ul"},"\u7279\u6b8a\u7684\uff0cFS \u4e3a\u7a7a\u5b57\u7b26\u4e32 \u201d\u201d \u65f6\uff0c\u5c06\u5bf9\u6bcf\u4e2a\u5b57\u7b26\u90fd\u8fdb\u884c\u5206\u9694\uff0c\u5373\u6bcf\u4e2a\u5b57\u7b26\u90fd\u4f5c\u4e3a\u4e00\u4e2a\u5b57\u6bb5"),(0,r.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u9884\u5b9a\u4e49\u53d8\u91cf IGNORECASE \u4e3a\u975e\u96f6\u503c\uff0c\u6b63\u5219\u5339\u914d\u65f6\u8868\u793a\u5ffd\u7565\u5927\u5c0f\u5199(\u53ea\u5f71\u54cd\u6b63\u5219\uff0c\u6240\u4ee5 FS \u4e3a\u5355\u5b57\u65f6\u65e0\u5f71\u54cd)"),(0,r.kt)("li",{parentName:"ul"},'\u5982\u679c record \u4e2d\u65e0\u6cd5\u627e\u5230 FS \u6307\u5b9a\u7684\u5206\u9694\u7b26(\u4f8b\u5982\u5c06 FS \u8bbe\u7f6e\u4e3a "',"\\",'n")\uff0c\u5219\u6574\u4e2a\u8bb0\u5f55\u4f5c\u4e3a\u4e00\u4e2a\u5b57\u6bb5\uff0c\u5373 ',(0,r.kt)("inlineCode",{parentName:"li"},"$1")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"$0")," \u76f8\u7b49")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5b57\u6bb5\u5206\u9694\u7b26\u6307\u5b9a\u4e3a\u5355\u4e2a\u5b57\u7b26\n[root@arm64v8 ~]# awk -F\":\" '{print $1}' /etc/passwd\n[root@arm64v8 ~]# awk 'BEGIN{FS=\":\"}{print $1}' /etc/passwd\n\n# \u5b57\u6bb5\u5206\u9694\u7b26\u6307\u5b9a\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\n[root@arm64v8 ~]# awk 'BEGIN{FS=\" +|@\"}{print $1,$2,$3,$4,$5,$6}' a.txt \nID name gender age email phone\n1 Bob male 28 abc qq.com\n2 Alice female 24 def gmail.com\n3 Tony male 21 aaa 163.com\n4 Kevin male 21 bbb 189.com\n5 Alex male 18 ccc xyz.com\n6 Andy female 22 ddd 139.com\n7 Jerry female 25 exdsa 189.com\n8 Peter male 20 bax qq.com\n9 Steven female 23 bc sohu.com\n10 Bruce female 27 bcbd 139.com\n[root@arm64v8 ~]#\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5212\u5206\u5b57\u6bb5\u65b9\u5f0f(\u4e8c)\uff1aFIELDWIDTHS")),(0,r.kt)("p",null,"\u6307\u5b9a\u9884\u5b9a\u4e49\u53d8\u91cf FIELDWIDTHS \u6309\u5b57\u7b26\u5bbd\u5ea6\u5206\u5272\u5b57\u6bb5\uff0c\u8fd9\u662f gawk \u63d0\u4f9b\u7684\u9ad8\u7ea7\u529f\u80fd\u3002\u5728\u5904\u7406\u67d0\u5b57\u6bb5\u7f3a\u5931\u65f6\u975e\u5e38\u597d\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'FIELDWIDTHS="3 5 6 9" \u8868\u793a\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u8bfb 3 \u4e2a\u5b57\u7b26\uff0c\u7b2c\u4e8c\u4e2a\u5b57\u6bb5 5 \u5b57\u7b26...'),(0,r.kt)("li",{parentName:"ul"},'FIELDWIDTHS="8 1:5 6 2:33" \u8868\u793a\uff1a',(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u8bfb 8 \u4e2a\u5b57\u7b26"),(0,r.kt)("li",{parentName:"ul"},"\u7136\u540e\u8df3\u8fc7 1 \u4e2a\u5b57\u7b26\u518d\u8bfb 5 \u4e2a\u5b57\u7b26\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u5b57\u6bb5"),(0,r.kt)("li",{parentName:"ul"},"\u7136\u540e\u8bfb 6 \u4e2a\u5b57\u7b26\u4f5c\u4e3a\u7b2c\u4e09\u4e2a\u5b57\u6bb5"),(0,r.kt)("li",{parentName:"ul"},"\u7136\u540e\u8df3\u8fc7 2 \u4e2a\u5b57\u7b26\uff0c\u518d\u8bfb 33 \u4e2a\u5b57\u7b26\u4f5c\u4e3a\u7b2c\u56db\u4e2a\u5b57\u6bb5(\u4e0d\u8db3 33 \u4e2a\u5b57\u7b26\uff0c\u8bfb\u5230\u7ed3\u5c3e)"))),(0,r.kt)("li",{parentName:"ul"},'FIELDWIDTHS="2 3 ',"*",'":',(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u4e2a\u5b57\u6bb5 2 \u4e2a\u5b57\u7b26"),(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u4e2a\u5b57\u6bb5 3 \u4e2a\u5b57\u7b26"),(0,r.kt)("li",{parentName:"ul"},"\u5269\u4f59\u6240\u6709\u5b57\u7b26\u4f5c\u4e3a\u7b2c\u4e09\u4e2a\u5b57\u6bb5"),(0,r.kt)("li",{parentName:"ul"},"\u661f\u53f7\u53ea\u80fd\u653e\u5728\u6700\u540e\uff0c\u4e14\u53ea\u80fd\u5355\u72ec\u4f7f\u7528\uff0c\u8868\u793a\u5269\u4f59\u6240\u6709")))),(0,r.kt)("p",null,"\u5b9e\u4f8b 1\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# \u6ca1\u53d6\u5b8c\u7684\u5b57\u7b26\u4e32DDD\u88ab\u4e22\u5f03\uff0c\u4e14NF=3\n[root@arm64v8 ~]# awk \'BEGIN{FIELDWIDTHS="2 3 2"}{print $1,$2,$3,$4}\' <<< "AABBBCCDDDD"\nAA BBB CC \n[root@arm64v8 ~]#\n\n# \u5b57\u7b26\u4e32\u4e0d\u591f\u957f\u5ea6\u65f6\u65e0\u89c6\n[root@arm64v8 ~]# awk \'BEGIN{FIELDWIDTHS="2 3 2 100"}{print $1,$2,$3,$4"-"}\' <<<"AABBBCCDDDD"\nAA BBB CC DDDD-\n[root@arm64v8 ~]#\n\n# *\u53f7\u53d6\u5269\u4f59\u6240\u6709\uff0cNF=3\n[root@arm64v8 ~]# awk \'BEGIN{FIELDWIDTHS="2 3 *"}{print $1,$2,$3}\' <<<"AABBBCCDDDD"\nAA BBB CCDDDD\n[root@arm64v8 ~]#\n\n# \u5b57\u6bb5\u6570\u591a\u4e86\uff0c\u5219\u53d6\u5b8c\u5b57\u7b26\u4e32\u5373\u53ef\uff0cNF=2\n[root@arm64v8 ~]# awk \'BEGIN{FIELDWIDTHS="2 30 *"}{print $1,$2,NF}\' <<<"AABBBCCDDDD"\nAA BBBCCDDDD 2\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u5b9e\u4f8b 2\uff1a\u5904\u7406\u67d0\u4e9b\u5b57\u6bb5\u7f3a\u5931\u7684\u6570\u636e"),(0,r.kt)("p",null,"\u5982\u679c\u6309\u7167\u5e38\u89c4\u7684 FS \u8fdb\u884c\u5b57\u6bb5\u5206\u5272\uff0c\u5219\u5bf9\u4e8e\u7f3a\u5931\u5b57\u6bb5\u7684\u884c\u548c\u6ca1\u6709\u7f3a\u5931\u5b57\u6bb5\u7684\u884c\u5f88\u96be\u7edf\u4e00\u5904\u7406\uff0c\u4f46\u4f7f\u7528 FIELDWIDTHS \u5219\u975e\u5e38\u65b9\u4fbf\u3002"),(0,r.kt)("p",null,"\u5047\u8bbe a.txt \u6587\u672c\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18                  18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n")),(0,r.kt)("p",null,"\u56e0\u4e3a email \u5b57\u6bb5\u6709\u7684\u662f\u7a7a\u5b57\u6bb5\uff0c\u6240\u4ee5\u76f4\u63a5\u7528 FS \u5212\u5206\u5b57\u6bb5\u4e0d\u4fbf\u5904\u7406\u3002\u53ef\u4f7f\u7528 FIELDWIDTHS\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# \u5b57\u6bb51\uff1a4\u5b57\u7b26\n# \u5b57\u6bb52\uff1a8\u5b57\u7b26\n# \u5b57\u6bb53\uff1a8\u5b57\u7b26\n# \u5b57\u6bb54\uff1a2\u5b57\u7b26\n# \u5b57\u6bb55\uff1a\u5148\u8df3\u8fc73\u5b57\u7b26\uff0c\u518d\u8bfb13\u5b57\u7b26\uff0c\u8be5\u5b57\u6bb513\u5b57\u7b26\n# \u5b57\u6bb56\uff1a\u5148\u8df3\u8fc72\u5b57\u7b26\uff0c\u518d\u8bfb11\u5b57\u7b26\uff0c\u8be5\u5b57\u6bb511\u5b57\u7b26\n[root@arm64v8 ~]# awk \'\nBEGIN{FIELDWIDTHS="4 8 8 2 3:13 2:11"}\nNR>1{\n    print "<"$1">","<"$2">","<"$3">","<"$4">","<"$5">","<"$6">"\n}\' a.txt\n<1   > <Bob     > <male    > <28> <abc@qq.com   > <18023394012>\n<2   > <Alice   > <female  > <24> <def@gmail.com> <18084925203>\n<3   > <Tony    > <male    > <21> <aaa@163.com  > <17048792503>\n<4   > <Kevin   > <male    > <21> <bbb@189.com  > <17023929033>\n<5   > <Alex    > <male    > <18> <             > <18185904230>\n<6   > <Andy    > <female  > <22> <ddd@139.com  > <18923902352>\n<7   > <Jerry   > <female  > <25> <exdsa@189.com> <18785234906>\n<8   > <Peter   > <male    > <20> <bax@qq.com   > <17729348758>\n<9   > <Steven  > <female  > <23> <bc@sohu.com  > <15947893212>\n<10  > <Bruce   > <female  > <27> <bcbd@139.com > <13942943905>\n[root@arm64v8 ~]#\n\n# \u5982\u679cemail\u4e3a\u7a7a\uff0c\u5219\u8f93\u51fa\u5b83\n[root@arm64v8 ~]# awk \'\n> BEGIN{FIELDWIDTHS="4 8 8 2 3:13 2:11"}\n> NR>1{\n>     if($5 ~ /^ +$/){print $0}\n> }\' a.txt\n5   Alex    male    18                  18185904230\n[root@arm64v8 ~]#\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5212\u5206\u5b57\u6bb5\u65b9\u5f0f(\u4e09)\uff1aFPAT")),(0,r.kt)("p",null,"FS \u662f\u6307\u5b9a\u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u6765\u53d6\u5f97\u9664\u5206\u9694\u7b26\u5916\u7684\u90e8\u5206\u4f5c\u4e3a\u5b57\u6bb5\u3002"),(0,r.kt)("p",null,"FPAT \u662f\u53d6\u5f97\u5339\u914d\u7684\u5b57\u7b26\u90e8\u5206\u4f5c\u4e3a\u5b57\u6bb5\u3002\u5b83\u662f gawk \u63d0\u4f9b\u7684\u4e00\u4e2a\u9ad8\u7ea7\u529f\u80fd\u3002"),(0,r.kt)("p",null,"FPAT \u6839\u636e\u6307\u5b9a\u7684\u6b63\u5219\u6765\u5168\u5c40\u5339\u914d record\uff0c\u7136\u540e\u5c06\u6240\u6709\u5339\u914d\u6210\u529f\u7684\u90e8\u5206\u7ec4\u6210 ",(0,r.kt)("inlineCode",{parentName:"p"},"$1\u3001$2..."),"\uff0c\u4e0d\u4f1a\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'awk \'BEGIN{FPAT="[0-9]+"}{print $3"-"}\' a.txt')),(0,r.kt)("li",{parentName:"ul"},"\u4e4b\u540e\u518d\u8bbe\u7f6e FS \u6216 FPAT\uff0c\u8be5\u53d8\u91cf\u5c06\u5931\u6548")),(0,r.kt)("p",null,"FPAT \u5e38\u7528\u4e8e\u5b57\u6bb5\u4e2d\u5305\u542b\u4e86\u5b57\u6bb5\u5206\u9694\u7b26\u7684\u573a\u666f\u3002\u4f8b\u5982\uff0cCSV \u6587\u4ef6\u4e2d\u7684\u4e00\u884c\u6570\u636e\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'Robbins,Arnold,"1234 A Pretty Street, NE",MyTown,MyState,12345-6789,USA\n')),(0,r.kt)("p",null,"\u5176\u4e2d\u9017\u53f7\u5206\u9694\u6bcf\u4e2a\u5b57\u6bb5\uff0c\u4f46\u53cc\u5f15\u53f7\u5305\u56f4\u7684\u662f\u4e00\u4e2a\u5b57\u6bb5\u6574\u4f53\uff0c\u5373\u4f7f\u5176\u4e2d\u6709\u9017\u53f7\u3002"),(0,r.kt)("p",null,"\u8fd9\u65f6\u4f7f\u7528 FPAT \u6765\u5212\u5206\u5404\u5b57\u6bb5\u6bd4\u4f7f\u7528 FS \u8981\u65b9\u4fbf\u7684\u591a\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# echo \'Robbins,Arnold,"1234 A Pretty Street, NE",MyTown,MyState,12345-6789,USA\' | awk \'\nBEGIN{FPAT="[^,]*|(\\"[^\\"]*\\")"}\n{\n        for (i=1;i<NF+1;i++){\n            print "<"$i">"\n        }\n}\n\'\n<Robbins>\n<Arnold>\n<"1234 A Pretty Street, NE">\n<MyTown>\n<MyState>\n<12345-6789>\n<USA>\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u6700\u540e\uff0cpatsplit() \u51fd\u6570\u548c FPAT \u7684\u529f\u80fd\u4e00\u6837\u3002"),(0,r.kt)("h5",{id:"11373\u68c0\u67e5\u5b57\u6bb5\u5212\u5206\u7684\u65b9\u5f0f"},"1.1.3.7.3\u3001\u68c0\u67e5\u5b57\u6bb5\u5212\u5206\u7684\u65b9\u5f0f"),(0,r.kt)("p",null,"\u6709 FS\u3001FIELDWIDTHS\u3001FPAT \u4e09\u79cd\u83b7\u53d6\u5b57\u6bb5\u7684\u65b9\u5f0f\uff0c\u53ef\u4f7f\u7528 PROCINFO \u6570\u7ec4\u6765\u786e\u5b9a\u672c\u6b21\u4f7f\u7528\u4f55\u79cd\u65b9\u5f0f\u83b7\u5f97\u5b57\u6bb5\u3002"),(0,r.kt)("p",null,"PROCINFO \u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u8bb0\u5f55\u4e86 awk \u8fdb\u7a0b\u5de5\u4f5c\u65f6\u7684\u72b6\u6001\u4fe1\u606f\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'PROCINFO["FS"]=="FS"'),"\uff0c\u8868\u793a\u4f7f\u7528 FS \u5206\u5272\u83b7\u53d6\u5b57\u6bb5"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'PROCINFO["FPAT"]=="FPAT"'),"\uff0c\u8868\u793a\u4f7f\u7528FPAT\u5339\u914d\u83b7\u53d6\u5b57\u6bb5"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'PROCINFO["FIELDWIDTHS"]=="FIELDWIDTHS"'),"\uff0c\u8868\u793a\u4f7f\u7528 FIELDWIDTHS \u5206\u5272\u83b7\u53d6\u5b57\u6bb5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'if(PROCINFO["FS"]=="FS"){\n    ...FS spliting...\n} else if(PROCINFO["FPAT"]=="FPAT"){\n    ...FPAT spliting...\n} else if(PROCINFO["FIELDWIDTHS"]=="FIELDWIDTHS"){\n    ...FIELDWIDTHS spliting...\n}\n')),(0,r.kt)("h4",{id:"11380-\u91cd\u65b0\u8ba1\u7b97"},"1.1.3.8\u3001$0 \u91cd\u65b0\u8ba1\u7b97"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4fee\u6539\u5b57\u6bb5\u6216 NF \u503c\u7684\u8054\u52a8\u6548\u5e94")),(0,r.kt)("p",null,"\u6ce8\u610f\u4e0b\u9762\u7684\u5206\u5272\u548c\u8ba1\u7b97\u4e24\u8bcd\uff1a\u5206\u5272\u8868\u793a\u4f7f\u7528 FS\uff08field Separator\uff09\uff0c\u8ba1\u7b97\u8868\u793a\u4f7f\u7528\u9884\u5b9a\u4e49\u53d8\u91cf OFS\uff08Output Field Separator\uff09\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0"),"\uff0c\u5c06\u4f7f\u7528 FS \u91cd\u65b0\u5206\u5272\u5b57\u6bb5\uff0c\u6240\u4ee5\u4f1a\u5f71\u54cd ",(0,r.kt)("inlineCode",{parentName:"p"},"$1\u3001$2..."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"p"},"$1\u3001$2"),"\uff0c\u5c06\u6839\u636e ",(0,r.kt)("inlineCode",{parentName:"p"},"$1")," \u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"$NF")," \u7b49\u5404\u5b57\u6bb5\u6765\u91cd\u65b0\u8ba1\u7b97 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5373\u4f7f\u662f ",(0,r.kt)("inlineCode",{parentName:"li"},"$1 = $1")," \u8fd9\u6837\u7684\u539f\u503c\u4e0d\u53d8\u7684\u4fee\u6539\uff0c\u4e5f\u4e00\u6837\u4f1a\u91cd\u65b0\u8ba1\u7b97 ",(0,r.kt)("inlineCode",{parentName:"li"},"$0")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4e3a\u4e0d\u5b58\u5728\u7684\u5b57\u6bb5\u8d4b\u503c\uff0c\u5c06\u65b0\u589e\u5b57\u6bb5\u6309\u9700\u4f7f\u7528\u7a7a\u5b57\u7b26\u4e32\u586b\u5145\u4e2d\u95f4\u7684\u5b57\u6bb5\uff0c\u5e76\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"OFS")," \u91cd\u65b0\u8ba1\u7b97 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{OFS=\"-\"}{$(NF+2)=5;print $0}' a.txt\nID-name-gender-age-email-phone--5\n1-Bob-male-28-abc@qq.com-18023394012--5\n2-Alice-female-24-def@gmail.com-18084925203--5\n3-Tony-male-21-aaa@163.com-17048792503--5\n4-Kevin-male-21-bbb@189.com-17023929033--5\n5-Alex-male-18-ccc@xyz.com-18185904230--5\n6-Andy-female-22-ddd@139.com-18923902352--5\n7-Jerry-female-25-exdsa@189.com-18785234906--5\n8-Peter-male-20-bax@qq.com-17729348758--5\n9-Steven-female-23-bc@sohu.com-15947893212--5\n10-Bruce-female-27-bcbd@139.com-13942943905--5\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6ce8\u610f\u540e\u9762\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"--5"),"\uff0c\u539f\u672c a.txt \u6587\u4ef6\u6bcf\u884c\u53ea\u6709 6 \u4e2a\u5b57\u6bb5\uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"$(NF+2)=5")," \u91cd\u65b0\u8ba1\u7b97\u540e\uff0c\u5171 8 \u4e2a\u5b57\u6bb5\uff0c\u7b2c 7 \u4e2a\u5b57\u6bb5\u4e3a\u7a7a\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u589e\u52a0 NF \u503c\uff0c\u5c06\u4f7f\u7528\u7a7a\u5b57\u7b26\u4e32\u65b0\u589e\u5b57\u6bb5\uff0c\u5e76\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"OFS")," \u91cd\u65b0\u8ba1\u7b97 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{OFS=\"-\"}{NF+=3;print $0}' a.txt\nID-name-gender-age-email-phone---\n1-Bob-male-28-abc@qq.com-18023394012---\n2-Alice-female-24-def@gmail.com-18084925203---\n3-Tony-male-21-aaa@163.com-17048792503---\n4-Kevin-male-21-bbb@189.com-17023929033---\n5-Alex-male-18-ccc@xyz.com-18185904230---\n6-Andy-female-22-ddd@139.com-18923902352---\n7-Jerry-female-25-exdsa@189.com-18785234906---\n8-Peter-male-20-bax@qq.com-17729348758---\n9-Steven-female-23-bc@sohu.com-15947893212---\n10-Bruce-female-27-bcbd@139.com-13942943905---\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"NF+=3"),"\uff0c\u91cd\u65b0\u8ba1\u7b97\u540e\u6700\u7ec8\u5171 9 \u4e2a\u5b57\u6bb5\uff0c\u6700\u540e\u4e09\u4e2a\u5b57\u6bb5\u4e3a\u7a7a\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u51cf\u5c0f NF \u503c\uff0c\u5c06\u4e22\u5f03\u4e00\u5b9a\u6570\u91cf\u7684\u5c3e\u90e8\u5b57\u6bb5\uff0c\u5e76\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"OFS")," \u91cd\u65b0\u8ba1\u7b97 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{OFS=\"-\"}{NF-=3;print $0}' a.txt\nID-name-gender\n1-Bob-male\n2-Alice-female\n3-Tony-male\n4-Kevin-male\n5-Alex-male\n6-Andy-female\n7-Jerry-female\n8-Peter-male\n9-Steven-female\n10-Bruce-female\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"NF -=3"),"\uff0c\u91cd\u65b0\u8ba1\u7b97\u540e\u6700\u7ec8\u5171 3 \u4e2a\u5b57\u6bb5\u3002")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5173\u4e8e$0")),(0,r.kt)("p",null,"\u5f53\u8bfb\u53d6\u4e00\u6761 record \u4e4b\u540e\uff0c\u5c06\u539f\u539f\u672c\u672c\u5730\u88ab\u4fdd\u5b58\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u5f53\u4e2d\u3002\u4f46\u662f\uff0c\u53ea\u8981\u51fa\u73b0\u4e86\u4e0a\u9762\u6240\u8bf4\u7684\u4efb\u4f55\u4e00\u79cd\u5bfc\u81f4 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u91cd\u65b0\u8ba1\u7b97\u7684\u64cd\u4f5c\uff0c\u90fd\u4f1a\u7acb\u5373\u4f7f\u7528 OFS \u53bb\u91cd\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"$0"),"\u3002"),(0,r.kt)("p",null,"\u6362\u53e5\u8bdd\u8bf4\uff0c\u6ca1\u6709\u5bfc\u81f4 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u91cd\u5efa\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u5c31\u4e00\u76f4\u662f\u539f\u539f\u672c\u672c\u7684\u6570\u636e\uff0c\u6240\u4ee5\u6307\u5b9a OFS \u4e5f\u65e0\u6548\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk 'BEGIN{OFS=\"-\"}{print $0}' a.txt  # OFS\u6b64\u5904\u65e0\u6548\n")),(0,r.kt)("p",null,"\u5f53 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u91cd\u5efa\u540e\uff0c\u5c06\u81ea\u52a8\u4f7f\u7528 OFS \u91cd\u5efa\uff0c\u6240\u4ee5\u5373\u4f7f\u6ca1\u6709\u6307\u5b9a OFS\uff0c\u5b83\u4e5f\u4f1a\u91c7\u7528\u9ed8\u8ba4\u503c(\u7a7a\u683c)\u8fdb\u884c\u91cd\u5efa\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '{$1=$1; print $0}' a.txt \nID name gender age email phone\n1 Bob male 28 abc@qq.com 18023394012\n2 Alice female 24 def@gmail.com 18084925203\n3 Tony male 21 aaa@163.com 17048792503\n4 Kevin male 21 bbb@189.com 17023929033\n5 Alex male 18 ccc@xyz.com 18185904230\n6 Andy female 22 ddd@139.com 18923902352\n7 Jerry female 25 exdsa@189.com 18785234906\n8 Peter male 20 bax@qq.com 17729348758\n9 Steven female 23 bc@sohu.com 15947893212\n10 Bruce female 27 bcbd@139.com 13942943905\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk '{print $0; $1=$1; print $0}' OFS=\"-\" a.txt\nID  name    gender  age  email          phone\nID-name-gender-age-email-phone\n1   Bob     male    28   abc@qq.com     18023394012\n1-Bob-male-28-abc@qq.com-18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n2-Alice-female-24-def@gmail.com-18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n3-Tony-male-21-aaa@163.com-17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n4-Kevin-male-21-bbb@189.com-17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n5-Alex-male-18-ccc@xyz.com-18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n6-Andy-female-22-ddd@139.com-18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n7-Jerry-female-25-exdsa@189.com-18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n8-Peter-male-20-bax@qq.com-17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n9-Steven-female-23-bc@sohu.com-15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n10-Bruce-female-27-bcbd@139.com-13942943905\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u5982\u679c\u91cd\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u4e4b\u540e\uff0c\u518d\u53bb\u4fee\u6539 OFS\uff0c\u5c06\u5bf9\u5f53\u524d\u884c\u65e0\u6548\uff0c\u4f46\u5bf9\u4e4b\u540e\u7684\u884c\u6709\u6548\u3002\u6240\u4ee5\u5982\u679c\u4e5f\u8981\u5bf9\u5f53\u524d\u884c\u751f\u6548\uff0c\u9700\u8981\u518d\u6b21\u91cd\u5efa\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# OFS\u5bf9\u7b2c\u4e00\u884c\u65e0\u6548\n[root@arm64v8 ~]# awk '{$4+=10;OFS=\"-\";print $0}' a.txt\nID name gender 10 email phone\n1-Bob-male-38-abc@qq.com-18023394012\n2-Alice-female-34-def@gmail.com-18084925203\n3-Tony-male-31-aaa@163.com-17048792503\n4-Kevin-male-31-bbb@189.com-17023929033\n5-Alex-male-28-ccc@xyz.com-18185904230\n6-Andy-female-32-ddd@139.com-18923902352\n7-Jerry-female-35-exdsa@189.com-18785234906\n8-Peter-male-30-bax@qq.com-17729348758\n9-Steven-female-33-bc@sohu.com-15947893212\n10-Bruce-female-37-bcbd@139.com-13942943905\n[root@arm64v8 ~]#\n\n# \u5bf9\u6240\u6709\u884c\u6709\u6548\n[root@arm64v8 ~]# awk '{$4+=10;OFS=\"-\";$1=$1;print $0}' a.txt\nID-name-gender-10-email-phone\n1-Bob-male-38-abc@qq.com-18023394012\n2-Alice-female-34-def@gmail.com-18084925203\n3-Tony-male-31-aaa@163.com-17048792503\n4-Kevin-male-31-bbb@189.com-17023929033\n5-Alex-male-28-ccc@xyz.com-18185904230\n6-Andy-female-32-ddd@139.com-18923902352\n7-Jerry-female-35-exdsa@189.com-18785234906\n8-Peter-male-30-bax@qq.com-17729348758\n9-Steven-female-33-bc@sohu.com-15947893212\n10-Bruce-female-37-bcbd@139.com-13942943905\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u5173\u6ce8 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u91cd\u5efa\u662f\u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684\u6280\u5de7\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u4e0b\u9762\u901a\u8fc7\u91cd\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u7684\u6280\u5de7\u6765\u5b9e\u73b0\u53bb\u9664\u884c\u9996\u884c\u5c3e\u7a7a\u683c\u5e76\u538b\u7f29\u4e2d\u95f4\u7a7a\u683c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# echo "   a b    c   d" | awk \'{$1=$1;print}\'\na b c d\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# echo "    a   b c   d" | awk \'{$1=$1;print}\' OFS="-"\na-b-c-d\n[root@arm64v8 ~]#\n')),(0,r.kt)("h4",{id:"1139awk-\u6570\u636e\u7b5b\u9009\u793a\u4f8b"},"1.1.3.9\u3001awk \u6570\u636e\u7b5b\u9009\u793a\u4f8b"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u7b5b\u9009\u884c")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6839\u636e\u884c\u53f7\u7b5b\u9009"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'NR==2' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk 'NR>=2' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n[root@arm64v8 ~]#\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6839\u636e\u6b63\u5219\u8868\u8fbe\u5f0f\u7b5b\u9009\u6574\u884c"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '/qq.com/' a.txt           # \u8f93\u51fa\u5e26\u6709qq.com\u7684\u884c\n1   Bob     male    28   abc@qq.com     18023394012\n8   Peter   male    20   bax@qq.com     17729348758\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk '$0 ~ /qq.com/' a.txt      # \u7b49\u4ef7\u4e8e\u4e0a\u9762\u547d\u4ee4\n1   Bob     male    28   abc@qq.com     18023394012\n8   Peter   male    20   bax@qq.com     17729348758\n[root@arm64v8 ~]#\n\n[root@arm64v8 ~]# awk '/^[^@]+$/' a.txt      # \u8f93\u51fa\u4e0d\u5305\u542b@\u7b26\u53f7\u7684\u884c\nID  name    gender  age  email          phone\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk '!/@/' a.txt               # \u8f93\u51fa\u4e0d\u5305\u542b@\u7b26\u53f7\u7684\u884c\nID  name    gender  age  email          phone\n[root@arm64v8 ~]#\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6839\u636e\u5b57\u6bb5\u6765\u7b5b\u9009\u884c"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u8f93\u51fa\u7b2c4\u5b57\u6bb5\u5927\u4e8e24\u7684\u884c\n[root@arm64v8 ~]# awk '($4+0) > 24{print $0}' a.txt  \n1   Bob     male    28   abc@qq.com     18023394012\n7   Jerry   female  25   exdsa@189.com  18785234906\n10  Bruce   female  27   bcbd@139.com   13942943905\n[root@arm64v8 ~]#\n\n# \u8f93\u51fa\u7b2c5\u5b57\u6bb5\u5305\u542bqq.com\u7684\u884c\n[root@arm64v8 ~]# awk '$5 ~ /qq.com/' a.txt\n1   Bob     male    28   abc@qq.com     18023394012\n8   Peter   male    20   bax@qq.com     17729348758\n[root@arm64v8 ~]#\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5c06\u591a\u4e2a\u7b5b\u9009\u6761\u4ef6\u7ed3\u5408\u8d77\u6765\u8fdb\u884c\u7b5b\u9009"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'NR>=2 && NR<=7' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk '$3==\"male\" && $6 ~ /^170/' a.txt \n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk '$3==\"male\" || $6 ~ /^170/' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n8   Peter   male    20   bax@qq.com     17729348758\n[root@arm64v8 ~]#\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6309\u7167\u8303\u56f4\u8fdb\u884c\u7b5b\u9009 flip flop"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# pattern1,pattern2{action}\n[root@arm64v8 ~]# awk 'NR==2, NR==7' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk 'NR==2, $6 ~ /^170/' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n[root@arm64v8 ~]#\n")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5904\u7406\u5b57\u6bb5")),(0,r.kt)("p",null,"\u4fee\u6539\u5b57\u6bb5\u65f6\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\uff0c\u53ef\u80fd\u5e26\u6765\u7684\u8054\u52a8\u6548\u5e94\uff1a\u5373\u4f7f\u7528 OFS \u91cd\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"$0"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'NR>1{$4=$4+5;print $0}' a.txt\n1 Bob male 33 abc@qq.com 18023394012\n2 Alice female 29 def@gmail.com 18084925203\n3 Tony male 26 aaa@163.com 17048792503\n4 Kevin male 26 bbb@189.com 17023929033\n5 Alex male 23 ccc@xyz.com 18185904230\n6 Andy female 27 ddd@139.com 18923902352\n7 Jerry female 30 exdsa@189.com 18785234906\n8 Peter male 25 bax@qq.com 17729348758\n9 Steven female 28 bc@sohu.com 15947893212\n10 Bruce female 32 bcbd@139.com 13942943905\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# awk 'BEGIN{OFS=\"-\"}NR>1{$4=$4+5;print $0}' a.txt\n1-Bob-male-33-abc@qq.com-18023394012\n2-Alice-female-29-def@gmail.com-18084925203\n3-Tony-male-26-aaa@163.com-17048792503\n4-Kevin-male-26-bbb@189.com-17023929033\n5-Alex-male-23-ccc@xyz.com-18185904230\n6-Andy-female-27-ddd@139.com-18923902352\n7-Jerry-female-30-exdsa@189.com-18785234906\n8-Peter-male-25-bax@qq.com-17729348758\n9-Steven-female-28-bc@sohu.com-15947893212\n10-Bruce-female-32-bcbd@139.com-13942943905\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# awk 'NR>1{$6=$6\"*\";print $0}' a.txt\n1 Bob male 28 abc@qq.com 18023394012*\n2 Alice female 24 def@gmail.com 18084925203*\n3 Tony male 21 aaa@163.com 17048792503*\n4 Kevin male 21 bbb@189.com 17023929033*\n5 Alex male 18 ccc@xyz.com 18185904230*\n6 Andy female 22 ddd@139.com 18923902352*\n7 Jerry female 25 exdsa@189.com 18785234906*\n8 Peter male 20 bax@qq.com 17729348758*\n9 Steven female 23 bc@sohu.com 15947893212*\n10 Bruce female 27 bcbd@139.com 13942943905*\n[root@arm64v8 ~]#\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u7efc\u5408\u5b9e\u4f8b")),(0,r.kt)("p",null,"\u4ece ifconfig \u547d\u4ee4\u7684\u7ed3\u679c\u4e2d\u7b5b\u9009\u51fa\u9664\u4e86 lo \u7f51\u5361\u5916\u7684\u6240\u6709 IPv4 \u5730\u5740\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# ifconfig | awk '/\\<inet\\>/ && !($2 ~ /^127/){print $2}'\n192.168.0.181\n[root@arm64v8 ~]#\n")),(0,r.kt)("h4",{id:"11310awk-\u5de5\u4f5c\u6d41\u7a0b"},"1.1.3.10\u3001awk \u5de5\u4f5c\u6d41\u7a0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# man --pager='less -p ^\"AWK PROGRAM EXECUTION\"' awk\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u89e3\u6790 -v var=val... \u9009\u9879\u4e2d\u7684\u53d8\u91cf\u8d4b\u503c\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u7f16\u8bd1 awk \u6e90\u4ee3\u7801\u4e3a awk \u53ef\u89e3\u91ca\u7684\u5185\u90e8\u683c\u5f0f\uff0c\u5305\u62ec -v \u7684\u53d8\u91cf\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u6267\u884c BEGIN \u4ee3\u7801\u6bb5\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u6839\u636e\u8f93\u5165\u8bb0\u5f55\u5206\u9694\u7b26 RS \u8bfb\u53d6\u6587\u4ef6(\u6839\u636e ARGV \u6570\u7ec4\u7684\u5143\u7d20\u51b3\u5b9a\u8981\u8bfb\u53d6\u7684\u6587\u4ef6)\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u6587\u4ef6\uff0c\u5219\u4ece\u6807\u51c6\u8f93\u5165\u4e2d\u8bfb\u53d6\u6587\u4ef6\uff0c\u540c\u65f6\u6267\u884c main \u4ee3\u7801\u6bb5\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u6587\u4ef6\u540d\u90e8\u5206\u6307\u5b9a\u4e3a var=val \u683c\u5f0f\uff0c\u5219\u58f0\u660e\u5e76\u521b\u5efa\u53d8\u91cf\uff0c\u6b64\u9636\u6bb5\u7684\u53d8\u91cf\u5728 BEGIN \u4e4b\u540e\u58f0\u660e\uff0c\u6240\u4ee5 BEGIN \u4e2d\u4e0d\u53ef\u7528\uff0c main \u4ee3\u7801\u6bb5\u53ef\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6bcf\u8bfb\u53d6\u4e00\u6761\u8bb0\u5f55\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u90fd\u5c06\u8bbe\u7f6e NR\u3001FNR\u3001RT\u3001$0 \u7b49\u53d8\u91cf\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u6839\u636e\u8f93\u5165\u5b57\u6bb5\u5206\u9694\u7b26 FS \u5207\u5272\u5b57\u6bb5\uff0c\u5c06\u5404\u5b57\u6bb5\u4fdd\u5b58\u5230 $1, $2\uff0c... \u4e2d\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6d4b\u8bd5 main \u4ee3\u7801\u6bb5\u7684 pattern \u90e8\u5206\uff0c\u5982\u679c\u6d4b\u8bd5\u6210\u529f\u5219\u6267\u884c action \u90e8\u5206\u3002"))))),(0,r.kt)("li",{parentName:"ol"},"\u6267\u884c END \u4ee3\u7801\u6bb5\u3002")),(0,r.kt)("h4",{id:"11311getline-\u7528\u6cd5\u8be6\u89e3"},"1.1.3.11\u3001getline \u7528\u6cd5\u8be6\u89e3"),(0,r.kt)("p",null,"\u9664\u4e86\u53ef\u4ee5\u4ece\u6807\u51c6\u8f93\u5165\u6216\u975e\u9009\u9879\u578b\u53c2\u6570\u6240\u6307\u5b9a\u7684\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528 getline \u4ece\u5176\u5b83\u5404\u79cd\u6e20\u9053\u83b7\u53d6\u9700\u8981\u5904\u7406\u7684\u6570\u636e\uff0c\u5b83\u7684\u7528\u6cd5\u6709\u5f88\u591a\u79cd\u3002"),(0,r.kt)("p",null,"getline \u7684\u8fd4\u56de\u503c\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u53ef\u4ee5\u8bfb\u53d6\u5230\u6570\u636e\uff0c\u8fd4\u56de 1"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u9047\u5230\u4e86 EOF\uff0c\u8fd4\u56de 0"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u9047\u5230\u4e86\u9519\u8bef\uff0c\u8fd4\u56de\u8d1f\u6570\u3002\u5982 -1 \u8868\u793a\u6587\u4ef6\u65e0\u6cd5\u6253\u5f00\uff0c-2 \u8868\u793a IO \u64cd\u4f5c\u9700\u8981\u91cd\u8bd5(retry)\u3002\u5728\u9047\u5230\u9519\u8bef\u7684\u540c\u65f6\uff0c\u8fd8\u4f1a\u8bbe\u7f6e ERRNO \u53d8\u91cf\u6765\u63cf\u8ff0\u9519\u8bef")),(0,r.kt)("p",null,"\u4e3a\u4e86\u5065\u58ee\u6027\uff0cgetline \u65f6\u5f3a\u70c8\u5efa\u8bae\u8fdb\u884c\u5224\u65ad\u3002\u4f8b\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"if ( (getline) <= 0 ){...}\nif ( (getline) < 0 ){...}\nif ( (getline) > 0 ){...}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u7684 getline \u7684\u62ec\u53f7\u5c3d\u91cf\u52a0\u4e0a\uff0c\u56e0\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"getline < 0")," \u8868\u793a\u7684\u662f\u8f93\u5165\u91cd\u5b9a\u5411\uff0c\u800c\u4e0d\u662f\u548c\u6570\u503c 0 \u8fdb\u884c\u5c0f\u4e8e\u53f7\u7684\u6bd4\u8f83\u3002"),(0,r.kt)("h5",{id:"113111\u65e0\u53c2\u6570\u7684-getline"},"1.1.3.11.1\u3001\u65e0\u53c2\u6570\u7684 getline"),(0,r.kt)("p",null,"getline \u65e0\u53c2\u6570\u65f6\uff0c\u8868\u793a\u4ece\u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u6587\u4ef6\u4e2d\u7acb\u5373\u8bfb\u53d6\u4e0b\u4e00\u6761\u8bb0\u5f55\u4fdd\u5b58\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u4e2d\uff0c\u5e76\u8fdb\u884c\u5b57\u6bb5\u5206\u5272\uff0c\u7136\u540e\u7ee7\u7eed\u6267\u884c\u540e\u7eed\u4ee3\u7801\u903b\u8f91\u3002"),(0,r.kt)("p",null,"\u6b64\u65f6\u7684 getline \u4f1a\u8bbe\u7f6e NF\u3001RT\u3001NR\u3001FNR\u3001$0 \u548c $N\u3002"),(0,r.kt)("p",null,"next \u4e5f\u53ef\u4ee5\u8bfb\u53d6\u4e0b\u4e00\u884c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"getline\uff1a\u8bfb\u53d6\u4e0b\u4e00\u884c\u4e4b\u540e\uff0c\u7ee7\u7eed\u6267\u884c getline \u540e\u9762\u7684\u4ee3\u7801"),(0,r.kt)("li",{parentName:"ul"},"next\uff1a\u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u7acb\u5373\u56de\u5934 awk \u5faa\u73af\u7684\u5934\u90e8\uff0c\u4e0d\u4f1a\u518d\u6267\u884c next \u540e\u9762\u7684\u4ee3\u7801")),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u5339\u914d\u5230\u67d0\u884c\u4e4b\u540e\uff0c\u518d\u8bfb\u4e00\u884c\u5c31\u9000\u51fa\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '/^1/{print;getline;print;exit}' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# awk '/^1/{print;next;print;exit}' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n10  Bruce   female  27   bcbd@139.com   13942943905\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u4e3a\u4e86\u66f4\u5065\u58ee\uff0c\u5e94\u5f53\u5bf9 getline \u7684\u8fd4\u56de\u503c\u8fdb\u884c\u5224\u65ad\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '/^1/{print;if((getline)<=0){exit};print}' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n10  Bruce   female  27   bcbd@139.com   13942943905\n[root@arm64v8 ~]#\n")),(0,r.kt)("h5",{id:"113112\u4e00\u4e2a\u53c2\u6570\u7684-getline"},"1.1.3.11.2\u3001\u4e00\u4e2a\u53c2\u6570\u7684 getline"),(0,r.kt)("p",null,"\u6ca1\u6709\u53c2\u6570\u7684 getline \u662f\u8bfb\u53d6\u4e0b\u4e00\u6761\u8bb0\u5f55\u4e4b\u540e\u5c06\u8bb0\u5f55\u4fdd\u5b58\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u4e2d\uff0c\u5e76\u5bf9\u8be5\u8bb0\u5f55\u8fdb\u884c\u5b57\u6bb5\u7684\u5206\u5272\u3002"),(0,r.kt)("p",null,"\u4e00\u4e2a\u53c2\u6570\u7684 getline \u662f\u5c06\u8bfb\u53d6\u7684\u8bb0\u5f55\u4fdd\u5b58\u5230\u6307\u5b9a\u7684\u53d8\u91cf\u5f53\u4e2d\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5bf9\u5176\u8fdb\u884c\u5206\u5272\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '/^1/{print;getline var;print;exit}' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n1   Bob     male    28   abc@qq.com     18023394012\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk '/^1/{print;getline var;print var;exit}' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u6b64\u65f6\u7684 getline \u53ea\u4f1a\u8bbe\u7f6e RT\u3001NR\u3001FNR \u53d8\u91cf\u548c\u6307\u5b9a\u7684\u53d8\u91cf var\u3002\u56e0\u6b64 ",(0,r.kt)("inlineCode",{parentName:"p"},"$0")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"$N")," \u4ee5\u53ca ",(0,r.kt)("inlineCode",{parentName:"p"},"NF")," \u4fdd\u6301\u4e0d\u53d8\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '\n> /^1/{\n>   if((getline var)<=0){exit}\n>   print var\n>   print $0\"--\"$2\n> }' a.txt\n2   Alice   female  24   def@gmail.com  18084925203\n1   Bob     male    28   abc@qq.com     18023394012--Bob\n[root@arm64v8 ~]#\n")),(0,r.kt)("h5",{id:"113113\u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e"},"1.1.3.11.3\u3001\u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"getline < filename\uff1a\u4ece\u6307\u5b9a\u6587\u4ef6 filename \u4e2d\u8bfb\u53d6\u4e00\u6761\u8bb0\u5f55\u5e76\u4fdd\u5b58\u5230 $0 \u4e2d",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f1a\u8fdb\u884c\u5b57\u6bb5\u7684\u5212\u5206\uff0c\u4f1a\u8bbe\u7f6e\u53d8\u91cf ",(0,r.kt)("inlineCode",{parentName:"li"},"$0 $N NF"),"\uff0c\u4e0d\u4f1a\u8bbe\u7f6e\u53d8\u91cf ",(0,r.kt)("inlineCode",{parentName:"li"},"NR FNR")))),(0,r.kt)("li",{parentName:"ol"},"getline var < filename\uff1a\u4ece\u6307\u5b9a\u6587\u4ef6 filename \u4e2d\u8bfb\u53d6\u4e00\u6761\u8bb0\u5f55\u5e76\u4fdd\u5b58\u5230\u6307\u5b9a\u53d8\u91cf var \u4e2d",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u4f1a\u5212\u5206\u5b57\u6bb5\uff0c\u4e0d\u4f1a\u8bbe\u7f6e\u53d8\u91cf ",(0,r.kt)("inlineCode",{parentName:"li"},"NR FNR NF $0 $N"))))),(0,r.kt)("p",null,"filename \u9700\u4f7f\u7528\u53cc\u5f15\u53f7\u5305\u56f4\u8868\u793a\u6587\u4ef6\u540d\u5b57\u7b26\u4e32\uff0c\u5426\u5219\u4f1a\u5f53\u4f5c\u53d8\u91cf\u89e3\u6790 ",(0,r.kt)("inlineCode",{parentName:"p"},'getline < "a.txt"'),"\u3002\u6b64\u5916\uff0c\u5982\u679c\u8def\u5f84\u662f\u4f7f\u7528\u53d8\u91cf\u6784\u5efa\u7684\uff0c\u5219\u5e94\u8be5\u4f7f\u7528\u62ec\u53f7\u5305\u56f4\u8def\u5f84\u90e8\u5206\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982 ",(0,r.kt)("inlineCode",{parentName:"p"},'getline < dir "/" filename')," \u4e2d\u4f7f\u7528\u4e86\u4e24\u4e2a\u53d8\u91cf\u6784\u5efa\u8def\u5f84\uff0c\u8fd9\u4f1a\u4ea7\u751f\u6b67\u4e49\uff0c\u5e94\u5f53\u5199\u6210 ",(0,r.kt)("inlineCode",{parentName:"p"},'getline <(dir "/" filename)'),"\u3002"),(0,r.kt)("p",null,"\u6ce8\u610f\uff0c\u6bcf\u6b21\u4ece filename \u8bfb\u53d6\u4e4b\u540e\u90fd\u4f1a\u505a\u597d\u4f4d\u7f6e\u504f\u79fb\u6807\u8bb0\uff0c\u4e0b\u6b21\u518d\u4ece\u8be5\u6587\u4ef6\u8bfb\u53d6\u65f6\u5c06\u6839\u636e\u8fd9\u4e2a\u4f4d\u7f6e\u6807\u8bb0\u7ee7\u7eed\u5411\u540e\u8bfb\u53d6\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u6bcf\u6b21\u884c\u9996\u4ee5 1 \u5f00\u5934\u65f6\u5c31\u8bfb\u53d6 a.txt \u6587\u4ef6\u7684\u6240\u6709\u884c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'/^1/{\n> print;\n> while((getline < "a.txt")>0){print};\n> close("a.txt")\n> }\' a.txt\n1   Bob     male    28   abc@qq.com     18023394012\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n10  Bruce   female  27   bcbd@139.com   13942943905\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n2   Alice   female  24   def@gmail.com  18084925203\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u4e0a\u9762\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},'close("a.txt")')," \u8868\u793a\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"while(getline)")," \u8bfb\u53d6\u5b8c\u6587\u4ef6\u4e4b\u540e\u5173\u6389\uff0c\u4ee5\u4fbf\u540e\u9762\u518d\u6b21\u8bfb\u53d6\uff0c\u5982\u679c\u4e0d\u5173\u6389\uff0c\u5219\u6587\u4ef6\u504f\u79fb\u6307\u9488\u5c06\u4e00\u76f4\u5728\u6587\u4ef6\u7ed3\u5c3e\u5904\uff0c\u4f7f\u5f97\u4e0b\u6b21\u8bfb\u53d6\u65f6\u76f4\u63a5\u9047\u5230 EOF\u3002"),(0,r.kt)("h5",{id:"113114\u4ece-shell-\u547d\u4ee4\u8f93\u51fa\u7ed3\u679c\u4e2d\u8bfb\u53d6\u6570\u636e"},"1.1.3.11.4\u3001\u4ece Shell \u547d\u4ee4\u8f93\u51fa\u7ed3\u679c\u4e2d\u8bfb\u53d6\u6570\u636e"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"cmd | getline"),"\uff1a\u4ece Shell \u547d\u4ee4 cmd \u7684\u8f93\u51fa\u7ed3\u679c\u4e2d\u8bfb\u53d6\u4e00\u6761\u8bb0\u5f55\u4fdd\u5b58\u5230 ",(0,r.kt)("inlineCode",{parentName:"li"},"$0")," \u4e2d",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f1a\u8fdb\u884c\u5b57\u6bb5\u5212\u5206\uff0c\u8bbe\u7f6e\u53d8\u91cf ",(0,r.kt)("inlineCode",{parentName:"li"},"$0 NF $N RT"),"\uff0c\u4e0d\u4f1a\u4fee\u6539\u53d8\u91cf ",(0,r.kt)("inlineCode",{parentName:"li"},"NR FNR")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"cmd | getline var"),"\uff1a\u4ece Shell \u547d\u4ee4 cmd \u7684\u8f93\u51fa\u7ed3\u679c\u4e2d\u8bfb\u53d6\u6570\u636e\u4fdd\u5b58\u5230 var \u4e2d",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u9664\u4e86 var \u548c RT\uff0c\u5176\u5b83\u53d8\u91cf\u90fd\u4e0d\u4f1a\u8bbe\u7f6e")))),(0,r.kt)("p",null,"\u5982\u679c\u8981\u518d\u6b21\u6267\u884c cmd \u5e76\u8bfb\u53d6\u5176\u8f93\u51fa\u6570\u636e\uff0c\u5219\u9700\u8981 close \u5173\u95ed\u8be5\u547d\u4ee4\u3002\u4f8b\u5982 ",(0,r.kt)("inlineCode",{parentName:"p"},'close("seq 1 5")'),"\uff0c\u53c2\u89c1\u4e0b\u9762\u7684\u793a\u4f8b\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982\uff1a\u6bcf\u6b21\u9047\u5230\u4ee5 1 \u5f00\u5934\u7684\u884c\u90fd\u8f93\u51fa seq \u547d\u4ee4\u4ea7\u751f\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"1 2 3 4 5"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'/^1/{print;while(("seq 1 5"|getline)>0){print};close("seq 1 5")}\' a.txt \n1   Bob     male    28   abc@qq.com     18023394012\n1\n2\n3\n4\n5\n10  Bruce   female  27   bcbd@139.com   13942943905\n1\n2\n3\n4\n5\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u518d\u4f8b\u5982\uff0c\u8c03\u7528 Shell \u7684 date \u547d\u4ee4\u751f\u6210\u65f6\u95f4\uff0c\u7136\u540e\u4fdd\u5b58\u5230 awk \u53d8\u91cf cur","_","date \u4e2d\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'/^1/{\n> print\n> "date +\\"%F %T\\""|getline cur_date\n> print cur_date\n> close("date +\\"%F %T\\"")\n> }\' a.txt\n1   Bob     male    28   abc@qq.com     18023394012\n2021-09-12 19:02:24\n10  Bruce   female  27   bcbd@139.com   13942943905\n2021-09-12 19:02:24\n[root@arm64v8 ~]#\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u5c06 cmd \u4fdd\u5b58\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\u53d8\u91cf\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'BEGIN{get_date="date +\\"%F %T\\""}\n> /^1/{\n> print\n> get_date | getline cur_date\n> print cur_date\n> close(get_date)\n> }\' a.txt\n1   Bob     male    28   abc@qq.com     18023394012\n2021-09-12 19:06:12\n10  Bruce   female  27   bcbd@139.com   13942943905\n2021-09-12 19:06:12\n[root@arm64v8 ~]#\n')))),(0,r.kt)("p",null,"\u66f4\u4e3a\u590d\u6742\u4e00\u70b9\u7684\uff0ccmd \u4e2d\u53ef\u4ee5\u5305\u542b Shell \u7684\u5176\u5b83\u7279\u6b8a\u5b57\u7b26\uff0c\u4f8b\u5982\u7ba1\u9053\u3001\u91cd\u5b9a\u5411\u7b26\u53f7\u7b49\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>   /^1/{\n>     print\n>     if(("seq 1 5 | xargs -i echo x{}y 2>/dev/null"|getline) > 0){\n>       print\n>     }\n>     close("seq 1 5 | xargs -i echo x{}y 2>/dev/null")\n> }\' a.txt\n1   Bob     male    28   abc@qq.com     18023394012\nx1y\n10  Bruce   female  27   bcbd@139.com   13942943905\nx1y\n[root@arm64v8 ~]#\n')),(0,r.kt)("h5",{id:"113115awk-\u4e2d\u7684-coprocess"},"1.1.3.11.5\u3001awk \u4e2d\u7684 coprocess"),(0,r.kt)("p",null,"awk \u867d\u7136\u5f3a\u5927\uff0c\u4f46\u662f\u6709\u4e9b\u6570\u636e\u4ecd\u7136\u4e0d\u65b9\u4fbf\u5904\u7406\uff0c\u8fd9\u65f6\u53ef\u5c06\u6570\u636e\u4ea4\u7ed9 Shell \u547d\u4ee4\u53bb\u5e2e\u52a9\u5904\u7406\uff0c\u7136\u540e\u518d\u4ece Shell \u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u4e2d\u53d6\u56de\u5904\u7406\u540e\u7684\u6570\u636e\u7ee7\u7eed awk \u5904\u7406\u3002"),(0,r.kt)("p",null,"awk \u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"|&")," \u7b26\u53f7\u6765\u652f\u6301 coproc\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'awk_print[f] "something" |& Shell_Cmd\nShell_Cmd |& getline [var]\n')),(0,r.kt)("p",null,"\u8fd9\u8868\u793a awk \u901a\u8fc7 print \u8f93\u51fa\u7684\u6570\u636e\u5c06\u4f20\u9012\u7ed9 Shell \u7684\u547d\u4ee4 Shell","_","Cmd \u53bb\u6267\u884c\uff0c\u7136\u540e awk \u518d\u4ece Shell","_","Cmd \u7684\u6267\u884c\u7ed3\u679c\u4e2d\u53d6\u56de Shell","_","Cmd \u4ea7\u751f\u7684\u6570\u636e\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u4e0d\u60f3\u4f7f\u7528 awk \u7684 substr() \u6765\u53d6\u5b50\u4e32\uff0c\u800c\u662f\u4f7f\u7528 sed \u547d\u4ee4\u6765\u66ff\u6362\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>     BEGIN{\n>       CMD="sed -nr \\"s/.*@(.*)$/\\\\1/p\\"";\n>     }\n> \n>     NR>1{\n>         print $5;\n>         print $5 |& CMD;\n>         close(CMD,"to");\n>         CMD |& getline email_domain;\n>         close(CMD);\n>         print email_domain;\n> }\' a.txt\nabc@qq.com\nqq.com\ndef@gmail.com\ngmail.com\naaa@163.com\n163.com\nbbb@189.com\n189.com\nccc@xyz.com\nxyz.com\nddd@139.com\n139.com\nexdsa@189.com\n189.com\nbax@qq.com\nqq.com\nbc@sohu.com\nsohu.com\nbcbd@139.com\n139.com\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u5bf9\u4e8e ",(0,r.kt)("inlineCode",{parentName:"p"},"awk_print |& cmd; cmd |& getline")," \u7684\u4f7f\u7528\uff0c\u987b\u6ce8\u610f\u7684\u662f\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"awk_print |& cmd")," \u4f1a\u76f4\u63a5\u5c06\u6570\u636e\u5199\u8fdb\u7ba1\u9053\uff0ccmd \u53ef\u4ee5\u4ece\u4e2d\u83b7\u53d6\u6570\u636e"),(0,r.kt)("li",{parentName:"ul"},"\u5f3a\u70c8\u5efa\u8bae\u5728 awk","_","print \u5199\u5b8c\u6570\u636e\u4e4b\u540e\u52a0\u4e0a ",(0,r.kt)("inlineCode",{parentName:"li"},'close(cmd,"to")'),"\uff0c\u8fd9\u6837\u8868\u793a\u5411\u7ba1\u9053\u4e2d\u5199\u5165\u4e00\u4e2a EOF \u6807\u8bb0\uff0c\u907f\u514d\u67d0\u4e9b\u8981\u6c42\u8bfb\u5b8c\u6240\u6709\u6570\u636e\u518d\u6267\u884c\u7684 cmd \u547d\u4ee4\u88ab\u6c38\u4e45\u963b\u585e"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c cmd \u662f\u6309\u5757\u7f13\u51b2\u7684\uff0c\u5219 getline \u53ef\u80fd\u4f1a\u9677\u5165\u963b\u585e\u3002\u8fd9\u65f6\u53ef\u5c06 cmd \u90e8\u5206\u6539\u5199\u6210 stdbuf -oL cmd \u4ee5\u5f3a\u5236\u5176\u6309\u884c\u7f13\u51b2\u8f93\u51fa\u6570\u636e",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'CMD="stdbuf -oL cmdline";awk_print |& CMD;close(CMD,"to");CMD |& getline'))))),(0,r.kt)("p",null,"\u5bf9\u4e8e\u90a3\u4e9b\u8981\u6c42\u8bfb\u5b8c\u6240\u6709\u6570\u636e\u518d\u6267\u884c\u7684\u547d\u4ee4\uff0c\u4f8b\u5982 sort \u547d\u4ee4\uff0c\u5b83\u4eec\u6709\u53ef\u80fd\u9700\u8981\u7b49\u5f85\u6570\u636e\u5df2\u7ecf\u5b8c\u6210\u540e\uff08\u9047\u5230 EOF \u6807\u8bb0\uff09\u624d\u5f00\u59cb\u6267\u884c\u4efb\u52a1\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u547d\u4ee4\uff0c\u53ef\u4ee5\u591a\u6b21\u5411 coprocess \u4e2d\u5199\u5165\u6570\u636e\uff0c\u6700\u540e ",(0,r.kt)("inlineCode",{parentName:"p"},'close(CMD,"to")')," \u8ba9 coprocess \u8fd0\u884c\u8d77\u6765\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u5bf9 age \u5b57\u6bb5(\u5373 $4)\u4f7f\u7528 sort \u547d\u4ee4\u6309\u6570\u503c\u5927\u5c0f\u8fdb\u884c\u6392\u5e8f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>     BEGIN{\n>       CMD="sort -k4n";\n>     }\n> \n>     # \u5c06\u6240\u6709\u884c\u90fd\u5199\u8fdb\u7ba1\u9053\n>     NR>1{\n>       print $0 |& CMD;\n>     }\n> \n>     END{\n>       close(CMD,"to");  # \u5173\u95ed\u7ba1\u9053\u901a\u77e5sort\u5f00\u59cb\u6392\u5e8f\n>       while((CMD |& getline)>0){\n>         print;\n>       }\n>       close(CMD);\n> } \' a.txt\n5   Alex    male    18   ccc@xyz.com    18185904230\n8   Peter   male    20   bax@qq.com     17729348758\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n6   Andy    female  22   ddd@139.com    18923902352\n9   Steven  female  23   bc@sohu.com    15947893212\n2   Alice   female  24   def@gmail.com  18084925203\n7   Jerry   female  25   exdsa@189.com  18785234906\n10  Bruce   female  27   bcbd@139.com   13942943905\n1   Bob     male    28   abc@qq.com     18023394012\n[root@arm64v8 ~]#\n')),(0,r.kt)("h5",{id:"113116close"},"1.1.3.11.6\u3001close()"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"close(filename)\nclose(cmd,[from | to])  # to\u53c2\u6570\u53ea\u7528\u4e8ecoprocess\u7684\u7b2c\u4e00\u4e2a\u9636\u6bb5\n")),(0,r.kt)("p",null,"\u5982\u679c close() \u5173\u95ed\u7684\u5bf9\u8c61\u4e0d\u5b58\u5728\uff0cawk \u4e0d\u4f1a\u62a5\u9519\uff0c\u4ec5\u4ec5\u53ea\u662f\u8ba9\u5176\u8fd4\u56de\u4e00\u4e2a\u8d1f\u6570\u8fd4\u56de\u503c\u3002"),(0,r.kt)("p",null,"close() \u6709\u4e24\u4e2a\u57fa\u672c\u4f5c\u7528\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5173\u95ed\u6587\u4ef6\uff0c\u4e22\u5f03\u5df2\u6709\u7684\u6587\u4ef6\u504f\u79fb\u6307\u9488",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e0b\u6b21\u518d\u8bfb\u53d6\u6587\u4ef6\uff0c\u5c06\u53ea\u80fd\u91cd\u65b0\u6253\u5f00\u6587\u4ef6\uff0c\u91cd\u65b0\u6253\u5f00\u6587\u4ef6\u4f1a\u4ece\u6587\u4ef6\u6700\u5f00\u5934\u5f00\u59cb\u8bfb\u53d6"))),(0,r.kt)("li",{parentName:"ol"},"\u53d1\u9001 EOF \u6807\u8bb0")),(0,r.kt)("p",null,"awk \u4e2d\u4efb\u4f55\u6587\u4ef6\u90fd\u53ea\u4f1a\u5728\u7b2c\u4e00\u6b21\u4f7f\u7528\u65f6\u6253\u5f00\uff0c\u4e4b\u540e\u90fd\u4e0d\u4f1a\u518d\u91cd\u65b0\u6253\u5f00\u3002\u53ea\u6709\u5173\u95ed\u4e4b\u540e\uff0c\u518d\u4f7f\u7528\u624d\u4f1a\u91cd\u65b0\u6253\u5f00\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# cat x.log \nI am an interpreter\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk \'/^1/{\n>     print;\n>     while((getline var < "x.log") > 0){\n>         print var\n>     }\n>     close("x.log")\n> }\' a.txt\n1   Bob     male    28   abc@qq.com     18023394012\nI am an interpreter\n10  Bruce   female  27   bcbd@139.com   13942943905\nI am an interpreter\n[root@arm64v8 ~]#\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u672c\u4f8b\u9700\u6c42\u662f\u53ea\u8981\u5728 a.txt \u4e2d\u5339\u914d\u5230 1 \u5f00\u5934\u7684\u884c\u5c31\u8f93\u51fa\u53e6\u4e00\u4e2a\u6587\u4ef6 x.log \u7684\u6240\u6709\u5185\u5bb9\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u90a3\u4e48\u5728\u7b2c\u4e00\u6b21\u8f93\u51fa x.log \u6587\u4ef6\u5185\u5bb9\u4e4b\u540e\uff0c\u6587\u4ef6\u504f\u79fb\u6307\u9488\u5c06\u5728 x.log \u6587\u4ef6\u7684\u7ed3\u5c3e\u5904\uff0c\u5982\u679c\u4e0d\u5173\u95ed\u8be5\u6587\u4ef6\uff0c\u5219\u540e\u7eed\u6240\u6709\u8bfb\u53d6 x.log \u7684\u6587\u4ef6\u64cd\u4f5c\u90fd\u4ece\u7ed3\u5c3e\u5904\u7ee7\u7eed\u8bfb\u53d6\uff0c\u4f46\u662f\u663e\u7136\u603b\u662f\u5f97\u5230 EOF \u5f02\u5e38\uff0c\u6240\u4ee5 getline \u8fd4\u56de\u503c\u4e3a 0\uff0c\u800c\u4e14\u4e5f\u8bfb\u53d6\u4e0d\u5230\u4efb\u4f55\u6570\u636e\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6240\u4ee5\uff0c\u5fc5\u987b\u5173\u95ed\u5b83\u624d\u80fd\u5728\u4e0b\u6b21\u5339\u914d\u6210\u529f\u65f6\u518d\u6b21\u4ece\u5934\u8bfb\u53d6\u8be5\u6587\u4ef6\u3002")),(0,r.kt)("p",null,'\u5728\u5904\u7406 Coprocess \u7684\u65f6\u5019\uff0cclose() \u53ef\u4ee5\u6307\u5b9a\u7b2c\u4e8c\u4e2a\u53c2\u6570 "from" \u6216 "to" \uff0c\u5b83\u4eec\u90fd\u9488\u5bf9\u4e8e coproc \u800c\u8a00\uff0cfrom \u65f6\u8868\u793a\u5173\u95ed ',(0,r.kt)("inlineCode",{parentName:"p"},"coproc |& getline")," \u7684\u7ba1\u9053\uff0c\u4f7f\u7528 to \u65f6\uff0c\u8868\u793a\u5173\u95ed ",(0,r.kt)("inlineCode",{parentName:"p"},"print something |& coproc")," \u7684\u7ba1\u9053\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'awk \'\nBEGIN{\n  CMD="sed -nr \\"s/.*@(.*)$/\\\\1/p\\"";\n}\nNR>1{\n    print $5;\n    print $5 |& CMD;\n    close(CMD,"to");   # \u672c\u6b21close()\u662f\u5fc5\u987b\u7684\n    CMD |& getline email_domain;\n    close(CMD);\n    print email_domain;\n}\' a.txt\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e0a\u9762\u7684\u7b2c\u4e00\u4e2a close \u662f\u5fc5\u987b\u7684\uff0c\u5426\u5219 sed \u4f1a\u4e00\u76f4\u963b\u585e\u3002\u56e0\u4e3a sed \u4e00\u76f4\u8ba4\u4e3a\u8fd8\u6709\u6570\u636e\u53ef\u8bfb\uff0c\u53ea\u6709\u5173\u95ed\u7ba1\u9053\u53d1\u9001\u4e00\u4e2a EOF\uff0csed \u624d\u4f1a\u5f00\u59cb\u5904\u7406\u3002")),(0,r.kt)("h4",{id:"11312awk-\u53d8\u91cf"},"1.1.3.12\u3001awk \u53d8\u91cf"),(0,r.kt)("p",null,"awk \u7684\u53d8\u91cf\u662f\u52a8\u6001\u53d8\u91cf\uff0c\u5728\u4f7f\u7528\u65f6\u58f0\u660e\u3002"),(0,r.kt)("p",null,"\u6240\u4ee5 awk \u53d8\u91cf\u6709 3 \u79cd\u72b6\u6001\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u672a\u58f0\u660e\u72b6\u6001\uff1a\u79f0\u4e3a untyped \u7c7b\u578b"),(0,r.kt)("li",{parentName:"ul"},"\u5f15\u7528\u8fc7\u4f46\u672a\u8d4b\u503c\u72b6\u6001\uff1aunassigned \u7c7b\u578b"),(0,r.kt)("li",{parentName:"ul"},"\u5df2\u8d4b\u503c\u72b6\u6001")),(0,r.kt)("p",null,"\u5f15\u7528\u672a\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u5176\u9ed8\u8ba4\u521d\u59cb\u503c\u4e3a\u7a7a\u5b57\u7b26\u4e32\u6216\u6570\u503c 0\u3002"),(0,r.kt)("p",null,"\u5728 awk \u4e2d\u672a\u58f0\u660e\u7684\u53d8\u91cf\u79f0\u4e3a untyped\uff0c\u58f0\u660e\u4e86\u4f46\u672a\u8d4b\u503c(\u53ea\u8981\u5f15\u7528\u4e86\u5c31\u58f0\u660e\u4e86)\u7684\u53d8\u91cf\u5176\u7c7b\u578b\u4e3a unassigned\u3002"),(0,r.kt)("p",null,"gawk 4.2\u7248\u63d0\u4f9b\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"typeof()")," \u51fd\u6570\uff0c\u53ef\u4ee5\u6d4b\u8bd5\u53d8\u91cf\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5305\u62ec\u6d4b\u8bd5\u53d8\u91cf\u662f\u5426\u58f0\u660e\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{\n>   print(typeof(a))            # untyped\n>   if(b==0){print(typeof(b))}  # unassigned\n> }'\nuntyped\nunassigned\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u9664\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"typeof()"),"\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u6280\u5de7\u8fdb\u884c\u68c0\u6d4b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'BEGIN{\n>   if(a=="" && a==0){    # \u672a\u8d4b\u503c\u65f6\uff0c\u4e24\u4e2a\u90fdtrue\n>     print "untyped or unassigned"\n>   } else {\n>       print "assigned"\n>   }\n> }\'\nuntyped or unassigned\n[root@arm64v8 ~]#\n')),(0,r.kt)("h5",{id:"113121\u53d8\u91cf\u8d4b\u503c"},"1.1.3.12.1\u3001\u53d8\u91cf\u8d4b\u503c"),(0,r.kt)("p",null,"awk \u4e2d\u7684\u53d8\u91cf\u8d4b\u503c\u8bed\u53e5\u4e5f\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u6709\u8fd4\u56de\u503c\u7684\u8868\u8fbe\u5f0f\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"a=3")," \u8d4b\u503c\u5b8c\u6210\u540e\u8fd4\u56de 3\uff0c\u540c\u65f6\u53d8\u91cf a \u4e5f\u88ab\u8bbe\u7f6e\u4e3a 3\u3002"),(0,r.kt)("p",null,"\u57fa\u4e8e\u8fd9\u4e2a\u7279\u70b9\uff0c\u6709\u4e24\u70b9\u7528\u6cd5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4ee5 ",(0,r.kt)("inlineCode",{parentName:"li"},"x=y=z=5"),"\uff0c\u7b49\u4ef7\u4e8e ",(0,r.kt)("inlineCode",{parentName:"li"},"z=5 y=5 x=5")),(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u5c06\u8d4b\u503c\u8bed\u53e5\u653e\u5728\u4efb\u610f\u5141\u8bb8\u4f7f\u7528\u8868\u8fbe\u5f0f\u7684\u5730\u65b9",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"x != (y = 1)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"awk 'BEGIN{print (a=4);print a}'"))))),(0,r.kt)("p",null,"\u95ee\u9898\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"a=1;arr[a+=2] = (a=a+6)")," \u662f\u600e\u4e48\u8d4b\u503c\u7684\uff0c\u5bf9\u5e94\u5143\u7d20\u7ed3\u679c\u7b49\u4e8e\uff1f",(0,r.kt)("inlineCode",{parentName:"p"},"arr[3]=7"),"\u3002\u4f46\u4e0d\u8981\u8fd9\u4e48\u505a\uff0c\u56e0\u4e3a\u4e0d\u540c awk \u7684\u8d4b\u503c\u8bed\u53e5\u5de6\u53f3\u4e24\u8fb9\u7684\u8bc4\u4f30\u987a\u5e8f\u6709\u53ef\u80fd\u4e0d\u540c\u3002"),(0,r.kt)("h5",{id:"113122awk-\u4e2d\u58f0\u660e\u53d8\u91cf\u7684\u4f4d\u7f6e"},"1.1.3.12.2\u3001awk \u4e2d\u58f0\u660e\u53d8\u91cf\u7684\u4f4d\u7f6e"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5728 BEGIN \u6216 main \u6216 END \u4ee3\u7801\u6bb5\u4e2d\u76f4\u63a5\u5f15\u7528\u6216\u8d4b\u503c"),(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"-v var=val")," \u9009\u9879\uff0c\u53ef\u5b9a\u4e49\u591a\u4e2a\uff0c\u5fc5\u987b\u653e\u5728 awk \u4ee3\u7801\u7684\u524d\u9762",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5b83\u7684\u53d8\u91cf\u58f0\u660e\u65e9\u4e8e BEGIN \u5757"),(0,r.kt)("li",{parentName:"ul"},"\u666e\u901a\u53d8\u91cf\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"awk -v age=123 'BEGIN{print age}'")),(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528 shell \u53d8\u91cf\u8d4b\u503c\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"awk -v age=$age 'BEGIN{print age}'")))),(0,r.kt)("li",{parentName:"ol"},"\u5728 awk \u4ee3\u7801\u540e\u9762\u4f7f\u7528 var=val \u53c2\u6570",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5b83\u7684\u53d8\u91cf\u58f0\u660e\u5728 BEGIN \u4e4b\u540e"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"awk '{print n}' n=3 a.txt n=4 b.txt")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"awk '{print $1}' FS=' ' a.txt FS=\":\" /etc/passwd")),(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528 Shell \u53d8\u91cf\u8d4b\u503c\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"awk '{print age}' age=$age a.txt"))))),(0,r.kt)("h5",{id:"113123awk-\u4e2d\u4f7f\u7528-shell-\u53d8\u91cf"},"1.1.3.12.3\u3001awk \u4e2d\u4f7f\u7528 Shell \u53d8\u91cf"),(0,r.kt)("p",null,"\u8981\u5728 awk \u4e2d\u4f7f\u7528 Shell \u53d8\u91cf\uff0c\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5728 -v \u9009\u9879\u4e2d\u5c06 Shell \u53d8\u91cf\u8d4b\u503c\u7ed9 awk \u53d8\u91cf"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# num=$(cat a.txt | wc -l)\n[root@arm64v8 ~]# awk -v n=$num 'BEGIN{print n}'\n11\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"-","v \u9009\u9879\u662f\u5728 awk \u5de5\u4f5c\u6d41\u7a0b\u7684\u7b2c\u4e00\u9636\u6bb5\u89e3\u6790\u7684\uff0c\u6240\u4ee5 -v \u9009\u9879\u58f0\u660e\u7684\u53d8\u91cf\u5728 BEGIN{}\u3001END{} \u548c main \u4ee3\u7801\u6bb5\u4e2d\u90fd\u80fd\u76f4\u63a5\u4f7f\u7528\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5728\u975e\u9009\u9879\u578b\u53c2\u6570\u4f4d\u7f6e\u5904\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"var=value")," \u683c\u5f0f\u5c06 Shell \u53d8\u91cf\u8d4b\u503c\u7ed9 awk \u53d8\u91cf"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# num=$(cat a.txt | wc -l)\n[root@arm64v8 ~]# awk '{print n}' n=$num a.txt \n11\n11\n11\n11\n11\n11\n11\n11\n11\n11\n11\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u975e\u9009\u9879\u578b\u53c2\u6570\u8bbe\u7f6e\u7684\u53d8\u91cf\u4e0d\u80fd\u5728 BEGIN \u4ee3\u7801\u6bb5\u4e2d\u4f7f\u7528\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u76f4\u63a5\u5728 awk \u4ee3\u7801\u90e8\u5206\u66b4\u9732 Shell \u53d8\u91cf\uff0c\u4ea4\u7ed9 Shell \u89e3\u6790\u8fdb\u884c Shell \u7684\u53d8\u91cf\u66ff\u6362"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# num=$(cat a.txt | wc -l)\n[root@arm64v8 ~]# awk 'BEGIN{print '\"$num\"'}'\n11\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u79cd\u65b9\u5f0f\u6700\u7075\u6d3b\uff0c\u4f46\u53ef\u8bfb\u6027\u6700\u5dee\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5927\u91cf\u7684\u5f15\u53f7\u3002")))),(0,r.kt)("h4",{id:"11313\u6570\u636e\u7c7b\u578b\u548c\u5b57\u9762\u91cf"},"1.1.3.13\u3001\u6570\u636e\u7c7b\u578b\u548c\u5b57\u9762\u91cf"),(0,r.kt)("h5",{id:"113131\u6570\u636e\u7c7b\u578b"},"1.1.3.13.1\u3001\u6570\u636e\u7c7b\u578b"),(0,r.kt)("p",null,"gawk \u6709\u4e24\u79cd\u57fa\u672c\u7684\u6570\u636e\u7c7b\u578b\uff1a\u6570\u503c\u548c\u5b57\u7b26\u4e32\u3002\u5728 gawk 4.2.0 \u7248\u672c\u4e2d\uff0c\u8fd8\u652f\u6301\u7b2c\u4e09\u79cd\u57fa\u672c\u7684\u6570\u636e\u7c7b\u578b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f\u7c7b\u578b\u3002"),(0,r.kt)("p",null,"\u6570\u636e\u662f\u4ec0\u4e48\u7c7b\u578b\u5728\u4f7f\u7528\u5b83\u7684\u4e0a\u4e0b\u6587\u4e2d\u51b3\u5b9a\uff1a\u5728\u5b57\u7b26\u4e32\u64cd\u4f5c\u73af\u5883\u4e0b\u5c06\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\uff0c\u5728\u6570\u503c\u64cd\u4f5c\u73af\u5883\u4e0b\u5c06\u8f6c\u6362\u4e3a\u6570\u503c\u3002\u8fd9\u548c\u81ea\u7136\u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u8bcd\u8bed\u3001\u4e00\u4e2a\u5355\u8bcd\u5728\u4e0d\u540c\u53e5\u5b50\u5185\u7684\u4e0d\u540c\u8bed\u4e49\u662f\u4e00\u6837\u7684\u3002"),(0,r.kt)("p",null,"\u9690\u5f0f\u8f6c\u6362\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7b97\u672f\u52a0 0 \u64cd\u4f5c\u53ef\u8f6c\u6362\u4e3a\u6570\u503c\u7c7b\u578b",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"123" + 0')," \u8fd4\u56de\u6570\u503c 123"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'" 123abc" + 0')," \u8f6c\u6362\u4e3a\u6570\u503c\u65f6\u4e3a 123"),(0,r.kt)("li",{parentName:"ul"},"\u65e0\u6548\u5b57\u7b26\u4e32\u5c06\u8f6c\u6362\u6210 0\uff0c\u4f8b\u5982 ",(0,r.kt)("inlineCode",{parentName:"li"},'"abc"+3')," \u8fd4\u56de 3"))),(0,r.kt)("li",{parentName:"ul"},"\u8fde\u63a5\u7a7a\u5b57\u7b26\u4e32\u53ef\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'123""')," \u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32 \u201d123\u201d")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{a=\"123\";print typeof(a+0)}' # number\nnumber\n[root@arm64v8 ~]# awk 'BEGIN{a=123;print typeof(a\"\")}'   # string\nstring\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# awk 'BEGIN{a=2;b=3;print(a b)+4}' # 27\n27\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u663e\u5f0f\u8f6c\u6362\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6570\u503c->\u5b57\u7b26\u4e32\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"CONVFMT \u6216 sprintf()\uff1a\u529f\u80fd\u7b49\u4ef7\u3002\u90fd\u662f\u6307\u5b9a\u6570\u503c\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u65f6\u7684\u683c\u5f0f")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'BEGIN{a=123.4567;CONVFMT="%.2f";print a""}\' #123.46\n123.46\n[root@arm64v8 ~]# awk \'BEGIN{a=123.4567;print sprintf("%.2f", a)}\' #123.46\n123.46\n[root@arm64v8 ~]# awk \'BEGIN{a=123.4567;printf("%.2f",a)}\'\n123.46[root@arm64v8 ~]# \n[root@arm64v8 ~]#\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5b57\u7b26\u4e32->\u6570\u503c\uff1astrtonum()"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# gawk 'BEGIN{a=\"123.4567\";print strtonum(a)}' # 123.457\n123.457\n[root@arm64v8 ~]#\n")))),(0,r.kt)("h5",{id:"113132awk-\u5b57\u9762\u91cf"},"1.1.3.13.2\u3001awk \u5b57\u9762\u91cf"),(0,r.kt)("p",null,"awk \u4e2d\u6709 3 \u79cd\u5b57\u9762\u91cf\uff1a\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u3001\u6570\u503c\u5b57\u9762\u91cf\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\u5b57\u9762\u91cf\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u6570\u503c\u5b57\u9762\u91cf")),(0,r.kt)("p",null,"\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u79d1\u5b66\u8ba1\u6570"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"105\u3001105.0\u30011.05e+2\u30011050e-1")),(0,r.kt)("p",null,"awk \u5185\u90e8\u603b\u662f\u4f7f\u7528\u6d6e\u70b9\u6570\u65b9\u5f0f\u4fdd\u5b58\u6240\u6709\u6570\u503c\uff0c\u4f46\u7528\u6237\u5728\u4f7f\u7528\u53ef\u4ee5\u8f6c\u6362\u6210\u6574\u6570\u7684\u6570\u503c\u65f6\u603b\u4f1a\u53bb\u6389\u5c0f\u6570\u70b9"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6570\u503c 12.0 \u9762\u5411\u7528\u6237\u7684\u503c\u4e3a 12\uff0c12 \u9762\u5411 awk \u5185\u90e8\u7684\u503c\u662f 12.00000...0")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u7ed3\u679c\u662f123\u800c\u975e123.0\n[root@arm64v8 ~]# awk 'BEGIN{a=123.0;print a}'\n123\n[root@arm64v8 ~]#\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u7b97\u672f\u8fd0\u7b97")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"++ --    \u81ea\u589e\u3001\u81ea\u51cf\uff0c\u652f\u6301i++\u548c++i\u6216--i\u6216i--  \n^        \u5e42\u8fd0\u7b97(**\u4e5f\u7528\u4e8e\u5e42\u8fd0\u7b97)\n+ -      \u4e00\u5143\u8fd0\u7b97\u7b26(\u6b63\u8d1f\u6570\u7b26\u53f7)\n* / %    \u4e58\u9664\u53d6\u6a21\u8fd0\u7b97\n+ -      \u52a0\u51cf\u6cd5\u8fd0\u7b97\n\n# \u6ce8\uff1a\n# 1.\n#   \n# 2.\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"++ \u548c -- \u65e2\u53ef\u4ee5\u5f53\u4f5c\u72ec\u7acb\u8bed\u53e5\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u8868\u8fbe\u5f0f\uff0c\u5982:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{a=3;a++;a=++a;print a}'\n5\n[root@arm64v8 ~]#\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"**")," \u6216 ",(0,r.kt)("inlineCode",{parentName:"p"},"^")," \u5e42\u8fd0\u7b97\u662f\u4ece\u53f3\u5411\u5de6\u8ba1\u7b97\u7684\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"print 2**1**3")," \u5f97\u5230 2 \u800c\u4e0d\u662f 8"))),(0,r.kt)("p",null,"\u8d4b\u503c\u64cd\u4f5c(\u4f18\u5148\u7ea7\u6700\u4f4e)\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"= += -= *= /= %= ^= **=\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7591\u60d1\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"b = 6;print b += b++")," \u8f93\u51fa\u7ed3\u679c\uff1f\u53ef\u80fd\u662f 12 \u6216 13\u3002\u4e0d\u540c\u7684 awk \u7684\u5b9e\u73b0\u5728\u8bc4\u4f30\u987a\u5e8f\u4e0a\u4e0d\u540c\uff0c\u6240\u4ee5\u4e0d\u8981\u7528\u8fd9\u79cd\u53ef\u80fd\u4ea7\u751f\u6b67\u4e49\u7684\u8bed\u53e5\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5b57\u7b26\u4e32\u5b57\u9762\u91cf")),(0,r.kt)("p",null,"awk \u4e2d\u7684\u5b57\u7b26\u4e32\u90fd\u4ee5\u53cc\u5f15\u53f7\u5305\u56f4\uff0c\u4e0d\u80fd\u4ee5\u5355\u5f15\u53f7\u5305\u56f4\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"abc"')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'""')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"\\0"'),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},'"\\n"'))),(0,r.kt)("p",null,"\u5b57\u7b26\u4e32\u8fde\u63a5\uff08\u4e32\u8054\uff09\uff1aawk \u6ca1\u6709\u4e3a\u5b57\u7b26\u4e32\u7684\u4e32\u8054\u64cd\u4f5c\u63d0\u4f9b\u8fd0\u7b97\u7b26\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fde\u63a5\u6216\u4f7f\u7528\u7a7a\u683c\u8fde\u63a5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'BEGIN{print ("one" "two")}\'  # "onetwo"\nonetwo\n[root@arm64v8 ~]# awk \'BEGIN{print ("one""two")}\'\nonetwo\n[root@arm64v8 ~]# awk \'BEGIN{a="one";b="two";print (a b)}\'\nonetwo\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u6ce8\u610f\uff1a\u5b57\u7b26\u4e32\u4e32\u8054\u867d\u7136\u65b9\u4fbf\uff0c\u4f46\u662f\u8981\u8003\u8651\u4e32\u8054\u7684\u4f18\u5148\u7ea7\u3002\u4f8b\u5982\u4e0b\u9762\u7684\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# \u4e0b\u9762\u7b2c\u4e00\u4e2a\u4e32\u8054\u6210\u529f\uff0c\u7b2c\u4e8c\u4e2a\u4e32\u8054\u5931\u8d25\uff0c\n# \u56e0\u4e3a\u4e32\u8054\u4f18\u5148\u7ea7\u4f4e\u4e8e\u52a0\u51cf\u8fd0\u7b97\uff0c\u7b49\u4ef7\u4e8e`12 (" " -23)`\n# \u5373\uff1a\u5148\u8f6c\u4e3a\u6570\u503c0-23\uff0c\u518d\u8f6c\u4e3a\u5b57\u7b26\u4e3212-23\n[root@arm64v8 ~]# awk \'BEGIN{a="one";b="two";print (12 " " 23)}\'\n12 23\n[root@arm64v8 ~]# awk \'BEGIN{a="one";b="two";print (12 " " -23)}\'\n12-23\n[root@arm64v8 ~]#\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u6b63\u5219\u8868\u8fbe\u5f0f\u5b57\u9762\u91cf")),(0,r.kt)("p",null,"\u666e\u901a\u6b63\u5219\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"/[0-9]+/")),(0,r.kt)("li",{parentName:"ul"},"\u5339\u914d\u65b9\u5f0f\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},'"str" ~ /pattern/')," \u6216 ",(0,r.kt)("inlineCode",{parentName:"li"},'"str" !~ /pattern/')),(0,r.kt)("li",{parentName:"ul"},"\u5339\u914d\u7ed3\u679c\u8fd4\u56de\u503c\u4e3a 0(\u5339\u914d\u5931\u8d25) \u6216 1(\u5339\u914d\u6210\u529f)"),(0,r.kt)("li",{parentName:"ul"},"\u4efb\u4f55\u5355\u72ec\u51fa\u73b0\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"/pattern/")," \u90fd\u7b49\u4ef7\u4e8e ",(0,r.kt)("inlineCode",{parentName:"li"},"$0 ~ /pattern/"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"if(/pattern/)")," \u7b49\u4ef7\u4e8e ",(0,r.kt)("inlineCode",{parentName:"li"},"if($0 ~ /pattern/)"))))),(0,r.kt)("p",null,"\u5f3a\u7c7b\u578b\u7684\u6b63\u5219\u5b57\u9762\u91cf(gawk 4.2.0 \u624d\u652f\u6301)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@/pattern/")," \u4f5c\u4e3a\u72ec\u7acb\u7684\u4e00\u79cd\u6570\u636e\u7c7b\u578b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f\u7c7b\u578b"),(0,r.kt)("li",{parentName:"ul"},"\u5728\u4f7f\u7528\u6b63\u5219\u5b57\u9762\u91cf\u53d8\u91cf\u8fdb\u884c\u5339\u914d\u7684\u65f6\u5019\uff0c\u4e0d\u80fd\u7b80\u5199 ",(0,r.kt)("inlineCode",{parentName:"li"},"a=@/Alice/;a{print}"),"\uff0c\u53ea\u80fd\u5199\u5b8c\u6574\u7684\u5339\u914d ",(0,r.kt)("inlineCode",{parentName:"li"},"a=@/Alice/;$0 ~ a{print}")),(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"typeof()"),"(\u4e5f\u662f 4.2 \u624d\u652f\u6301\u7684)\u68c0\u67e5\u7c7b\u578b\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u5c06\u662f ",(0,r.kt)("inlineCode",{parentName:"li"},"regexp"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"awk 'BEGIN{re=@/abc/;print typeof(re)}'"))))),(0,r.kt)("h4",{id:"11314gawk-\u652f\u6301\u7684\u6b63\u5219\u8868\u8fbe\u5f0f"},"1.1.3.14\u3001gawk \u652f\u6301\u7684\u6b63\u5219\u8868\u8fbe\u5f0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'.       # \u5339\u914d\u4efb\u610f\u5b57\u7b26\uff0c\u5305\u62ec\u6362\u884c\u7b26\n^\n$\n[...]\n[^...]\n|\n+\n*\n?\n()\n{m}\n{m,}\n{m,n}\n{,n}\n\n[:lower:]\n[:upper:]\n[:alpha:]\n[:digit:]\n[:alnum:]\n[:xdigit:]\n[:blank:]\n[:space:]\n[:punct:]\n[:graph:]\n[:print:]\n[:cntrl:]\n\n\u4ee5\u4e0b\u662fgawk\u652f\u6301\u7684\uff1a\n\\y    \u5339\u914d\u5355\u8bcd\u5de6\u53f3\u8fb9\u754c\u90e8\u5206\u7684\u7a7a\u5b57\u7b26\u4f4d\u7f6e "hello world"\n\\B    \u548c\\y\u76f8\u53cd\uff0c\u5339\u914d\u5355\u8bcd\u5185\u90e8\u7684\u7a7a\u5b57\u7b26\u4f4d\u7f6e\uff0c\u4f8b\u5982"crate" ~ `/c\\Brat\\Be/`\u6210\u529f\n\\<    \u5339\u914d\u5355\u8bcd\u5de6\u8fb9\u754c\n\\>    \u5339\u914d\u5355\u8bcd\u53f3\u8fb9\u754c\n\\s    \u5339\u914d\u7a7a\u767d\u5b57\u7b26\n\\S    \u5339\u914d\u975e\u7a7a\u767d\u5b57\u7b26\n\\w    \u5339\u914d\u5355\u8bcd\u7ec4\u6210\u5b57\u7b26(\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf)\n\\W    \u5339\u914d\u975e\u5355\u8bcd\u7ec4\u6210\u5b57\u7b26\n\\`    \u5339\u914d\u5b57\u7b26\u4e32\u7684\u7edd\u5bf9\u884c\u9996  "abc\\ndef"\n\\\'    \u5339\u914d\u5b57\u7b26\u4e32\u7684\u7edd\u5bf9\u884c\u5c3e\n')),(0,r.kt)("p",null,"gawk \u4e0d\u652f\u6301\u6b63\u5219\u4fee\u9970\u7b26\uff0c\u6240\u4ee5\u65e0\u6cd5\u76f4\u63a5\u6307\u5b9a\u5ffd\u7565\u5927\u5c0f\u5199\u7684\u5339\u914d\u3002"),(0,r.kt)("p",null,"\u5982\u679c\u60f3\u8981\u5b9e\u73b0\u5ffd\u7565\u5927\u5c0f\u5199\u5339\u914d\uff0c\u5219\u53ef\u4ee5\u5c06\u5b57\u7b26\u4e32\u5148\u8f6c\u6362\u4e3a\u5927\u5199\u3001\u5c0f\u5199\u518d\u8fdb\u884c\u5339\u914d\u3002\u6216\u8005\u8bbe\u7f6e\u9884\u5b9a\u4e49\u53d8\u91cf IGNORECASE \u4e3a\u975e 0 \u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u8f6c\u6362\u4e3a\u5c0f\u5199\n[root@arm64v8 ~]# awk 'tolower($0) ~ /bob/{print $0}' a.txt\n1   Bob     male    28   abc@qq.com     18023394012\n[root@arm64v8 ~]#\n\n# \u8bbe\u7f6eIGNORECASE\n[root@arm64v8 ~]# awk '/BOB/{print $0}' IGNORECASE=1 a.txt\n1   Bob     male    28   abc@qq.com     18023394012\n[root@arm64v8 ~]#\n")),(0,r.kt)("h4",{id:"11315awk-\u5e03\u5c14\u503c\u6bd4\u8f83\u548c\u903b\u8f91\u8fd0\u7b97"},"1.1.3.15\u3001awk \u5e03\u5c14\u503c\u3001\u6bd4\u8f83\u548c\u903b\u8f91\u8fd0\u7b97"),(0,r.kt)("h5",{id:"113151awk-\u5e03\u5c14\u503c"},"1.1.3.15.1\u3001awk \u5e03\u5c14\u503c"),(0,r.kt)("p",null,"\u5728 awk \u4e2d\uff0c\u6ca1\u6709\u50cf\u5176\u5b83\u8bed\u8a00\u4e00\u6837\u4e13\u95e8\u63d0\u4f9b true\u3001false \u8fd9\u6837\u7684\u5173\u952e\u5b57\u3002"),(0,r.kt)("p",null,"\u4f46\u5b83\u7684\u5e03\u5c14\u503c\u903b\u8f91\u975e\u5e38\u7b80\u5355\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6570\u503c 0 \u8868\u793a\u5e03\u5c14\u5047"),(0,r.kt)("li",{parentName:"ul"},"\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u5e03\u5c14\u5047"),(0,r.kt)("li",{parentName:"ul"},"\u5176\u4f59\u6240\u6709\u5747\u4e3a\u5e03\u5c14\u771f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5b57\u7b26\u4e32 \u201d0\u201d \u4e5f\u662f\u771f\uff0c\u56e0\u4e3a\u5b83\u662f\u5b57\u7b26\u4e32"))),(0,r.kt)("li",{parentName:"ul"},"awk \u4e2d\uff0c\u6b63\u5219\u5339\u914d\u4e5f\u6709\u8fd4\u56de\u503c\uff0c\u5339\u914d\u6210\u529f\u5219\u8fd4\u56de 1\uff0c\u5339\u914d\u5931\u8d25\u5219\u8fd4\u56de 0"),(0,r.kt)("li",{parentName:"ul"},"awk \u4e2d\uff0c\u6240\u6709\u7684\u5e03\u5c14\u8fd0\u7b97\u4e5f\u6709\u8fd4\u56de\u503c\uff0c\u5e03\u5c14\u771f\u8fd4\u56de\u503c 1\uff0c\u5e03\u5c14\u5047\u8fd4\u56de\u503c\u4e3a 0")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n> BEGIN{\n>     if(1){print "haha"}\n>     if("0"){print "hehe"}\n>     if(a=3){print "hoho"}  # if(3){print "hoho"}\n>     if(a==3){print "aoao"}\n>     if(/root/){print "heihei"}  # $0 ~ /root/\n> }\'\nhaha\nhehe\nhoho\naoao\n[root@arm64v8 ~]#\n')),(0,r.kt)("h5",{id:"113152awk-\u4e2d\u6bd4\u8f83\u64cd\u4f5c"},"1.1.3.15.2\u3001awk \u4e2d\u6bd4\u8f83\u64cd\u4f5c"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"strnum \u7c7b\u578b")),(0,r.kt)("p",null,"awk \u6700\u57fa\u672c\u7684\u6570\u636e\u7c7b\u578b\u53ea\u6709 string \u548c number(gawk 4.2.0\u7248\u672c\u4e4b\u540e\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u7c7b\u578b)\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u7528\u6237\u8f93\u5165\u6570\u636e(\u4f8b\u5982\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u7684\u5404\u4e2a\u5b57\u6bb5\u503c)\uff0c\u5b83\u4eec\u7406\u5e94\u5c5e\u4e8e string \u7c7b\u578b\uff0c\u4f46\u6709\u65f6\u5019\u5b83\u4eec\u770b\u4e0a\u53bb\u53ef\u80fd\u50cf\u662f\u6570\u503c(\u4f8b\u5982 $2=37)\uff0c\u800c\u6709\u65f6\u5019\u6709\u9700\u8981\u8fd9\u4e9b\u503c\u662f\u6570\u503c\u7c7b\u578b\u3002"),(0,r.kt)("p",null,"awk \u7684\u6570\u636e\u6765\u6e90\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"awk \u5185\u90e8\u4ea7\u751f\u7684\uff0c\u5305\u62ec\u53d8\u91cf\u7684\u8d4b\u503c\u3001\u8868\u8fbe\u5f0f\u6216\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4ece\u5176\u5b83\u6765\u6e90\u83b7\u53d6\u5230\u7684\u6570\u636e\uff0c\u90fd\u662f\u5916\u90e8\u6570\u636e\uff0c\u4e5f\u662f\u7528\u6237\u8f93\u5165\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u7406\u5e94\u5168\u90e8\u90fd\u662f string \u7c7b\u578b\u7684\u6570\u636e\u3002")),(0,r.kt)("p",null,"\u6240\u4ee5 POSIX \u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a \u201dnumeric string\u201d \u7684 \u201d\u5899\u5934\u8349\u201d \u7c7b\u578b\uff0cgawk \u4e2d\u5219\u79f0\u4e3a strnum \u7c7b\u578b\u3002\u5f53\u83b7\u53d6\u5230\u7684\u7528\u6237\u6570\u636e\u770b\u4e0a\u53bb\u662f\u6570\u5b57\u65f6\uff0c\u90a3\u4e48\u5b83\u5c31\u662f strnum \u7c7b\u578b\u3002strnum \u7c7b\u578b\u5728\u88ab\u4f7f\u7528\u65f6\u4f1a\u88ab\u5f53\u4f5c\u6570\u503c\u7c7b\u578b\u3002"),(0,r.kt)("p",null,"\u6ce8\u610f\uff0cstrnum\u7c7b\u578b\u53ea\u9488\u5bf9\u4e8eawk\u4e2d\u9664\u6570\u503c\u5e38\u91cf\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\u3001\u8868\u8fbe\u5f0f\u8ba1\u7b97\u7ed3\u679c\u5916\u7684\u6570\u636e\u3002\u4f8b\u5982\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u7684\u5b57\u6bb5 $1\u3001$2\u3001ARGV \u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u7b49\u7b49\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# echo "30" | awk \'{print typeof($0) " " typeof($1)}\'\nstrnum strnum\n[root@arm64v8 ~]# echo "+30" | awk \'{print typeof($1)}\'\nstrnum\n[root@arm64v8 ~]# echo "30a" | awk \'{print typeof($1)}\'\nstring\n[root@arm64v8 ~]# echo "30 a" | awk \'{print typeof($0) " " typeof($1)}\'\nstring strnum\n[root@arm64v8 ~]# echo " +30 " | awk \'{print typeof($0) " " typeof($1)}\'\nstrnum strnum\n[root@arm64v8 ~]#\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5927\u5c0f\u6bd4\u8f83\u64cd\u4f5c")),(0,r.kt)("p",null,"\u6bd4\u8f83\u64cd\u4f5c\u7b26\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"< > <= >= != ==  \u5927\u5c0f\u3001\u7b49\u503c\u6bd4\u8f83\nin     \u6570\u7ec4\u6210\u5458\u6d4b\u8bd5\n")),(0,r.kt)("p",null,"\u6bd4\u8f83\u89c4\u5219\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"       |STRING NUMERIC STRNUM\n-------|-----------------------\nSTRING |string string  string\nNUMERIC|string numeric numeric\nSTRNUM |string numeric numeric\n")),(0,r.kt)("p",null,"\u7b80\u5355\u6765\u8bf4\uff0cstring \u4f18\u5148\u7ea7\u6700\u9ad8\uff0c\u53ea\u8981 string \u7c7b\u578b\u53c2\u4e0e\u6bd4\u8f83\uff0c\u5c31\u90fd\u6309\u7167 string \u7684\u6bd4\u8f83\u65b9\u5f0f\uff0c\u6240\u4ee5\u53ef\u80fd\u4f1a\u8fdb\u884c\u9690\u5f0f\u7684\u7c7b\u578b\u8f6c\u6362\u3002"),(0,r.kt)("p",null,"\u5176\u5b83\u65f6\u5019\u90fd\u91c7\u7528 num \u7c7b\u578b\u6bd4\u8f83\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# echo ' +3.14' | awk '{print typeof($0) \" \" typeof($1)}'\nstrnum strnum\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# echo ' +3.14' | awk '{print($0 == \" +3.14\")}'\n1\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# echo ' +3.14' | awk '{print($0 == \"+3.14\")}'\n0\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# echo ' +3.14' | awk '{print($0 == \"3.14\")}'\n0\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# echo ' +3.14' | awk '{print($0 == 3.14)}'\n1\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# echo ' +3.14' | awk '{print($1 == 3.14)}'\n1\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# echo ' +3.14' | awk '{print($1 == \" +3.14\")}'\n0\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# echo ' +3.14' | awk '{print($1 == \"+3.14\")}'\n1\n[root@arm64v8 ~]# \n[root@arm64v8 ~]# echo ' +3.14' | awk '{print($1 == \"3.14\")}'\n0\n[root@arm64v8 ~]#\n[root@arm64v8 ~]# echo 1e2 3|awk '{print ($1<$2)?\"true\":\"false\"}'\nfalse\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u91c7\u7528\u5b57\u7b26\u4e32\u6bd4\u8f83\u65f6\u9700\u6ce8\u610f\uff0c\u5b83\u662f\u9010\u5b57\u7b26\u9010\u5b57\u7b26\u6bd4\u8f83\u7684\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'"11" < "9"  # true\n"ab" < 99   # false\n')),(0,r.kt)("h5",{id:"113153\u903b\u8f91\u8fd0\u7b97"},"1.1.3.15.3\u3001\u903b\u8f91\u8fd0\u7b97"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{print(!99)}'\n0\n[root@arm64v8 ~]# awk 'BEGIN{print(!\"ab\")}'\n0\n[root@arm64v8 ~]# awk 'BEGIN{print(!0)}'\n1\n[root@arm64v8 ~]# awk 'BEGIN{print(!ab)}'\n1\n[root@arm64v8 ~]# awk 'BEGIN{print(!!99)}'\n1\n[root@arm64v8 ~]# awk 'BEGIN{print(!!\"ab\")}'\n1\n[root@arm64v8 ~]# awk 'BEGIN{print(!!0)}'\n0\n[root@arm64v8 ~]# awk 'BEGIN{print(!!ab)}'\n0\n[root@arm64v8 ~]# \n")),(0,r.kt)("p",null,"\u7531\u4e8e awk \u4e2d\u7684\u53d8\u91cf\u672a\u8d4b\u503c\u65f6\u9ed8\u8ba4\u521d\u59cb\u5316\u4e3a\u7a7a\u5b57\u7b26\u4e32\u6216\u6570\u503c 0\uff0c\u4e5f\u5c31\u662f\u5e03\u5c14\u503c\u4e3a\u5047\u3002\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u5bf9\u4e00\u4e2a\u672a\u8d4b\u503c\u7684\u53d8\u91cf\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"!")," \u64cd\u4f5c\u3002"),(0,r.kt)("h5",{id:"113154\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7"},"1.1.3.15.4\u3001\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7"),(0,r.kt)("p",null,"\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'()\n$                       # $(2+2)\n++ --\n^ **\n+ - !                   # \u4e00\u5143\u8fd0\u7b97\u7b26\n* / %\n+ -\nspace                   # \u8fd9\u662f\u5b57\u7b26\u8fde\u63a5\u64cd\u4f5c `12 " " 23`  `12 " " -23`\n| |&\n< > <= >= != ==         # \u6ce8\u610f>\u5373\u662f\u5927\u4e8e\u53f7\uff0c\u4e5f\u662fprint/printf\u7684\u91cd\u5b9a\u5411\u7b26\u53f7\n~ !~\nin\n&&\n||\n?:\n= += -= *= /= %= ^=\n')),(0,r.kt)("p",null,"\u5bf9\u4e8e\u76f8\u540c\u4f18\u5148\u7ea7\u7684\u8fd0\u7b97\u7b26\uff0c\u901a\u5e38\u90fd\u662f\u4ece\u5de6\u5f00\u59cb\u8fd0\u7b97\uff0c\u4f46\u4e0b\u9762 2 \u79cd\u4f8b\u5916\uff0c\u5b83\u4eec\u90fd\u4ece\u53f3\u5411\u5de6\u8fd0\u7b97\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8d4b\u503c\u8fd0\u7b97\uff1a\u5982 ",(0,r.kt)("inlineCode",{parentName:"li"},"= += -= *=")),(0,r.kt)("li",{parentName:"ul"},"\u5e42\u8fd0\u7b97")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"a - b + c  =>  (a - b) + c\na = b = c  =>  a =(b = c)\n2**2**3    =>  2**(2**3)\n")),(0,r.kt)("p",null,"\u518d\u8005\uff0c\u6ce8\u610f print \u548c printf \u4e2d\u51fa\u73b0\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},">")," \u7b26\u53f7\uff0c\u8fd9\u65f6\u5019\u5b83\u8868\u793a\u7684\u662f\u91cd\u5b9a\u5411\u7b26\u53f7\uff0c\u4e0d\u80fd\u518d\u51fa\u73b0\u4f18\u5148\u7ea7\u6bd4\u5b83\u4f4e\u7684\u8fd0\u7b97\u7b26\uff0c\u8fd9\u65f6\u53ef\u4ee5\u4f7f\u7528\u62ec\u53f7\u6539\u53d8\u4f18\u5148\u7ea7\u3002\u4f8b\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk 'BEGIN{print \"foo\" > a < 3 ? 2 : 1)'   # \u8bed\u6cd5\u9519\u8bef\nawk 'BEGIN{print \"foo\" > (a < 3 ? 2 : 1)}' # \u6b63\u786e\n")),(0,r.kt)("h4",{id:"11316awk-\u6d41\u7a0b\u63a7\u5236"},"1.1.3.16\u3001awk \u6d41\u7a0b\u63a7\u5236"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"if\u2026else")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5355\u72ec\u7684if\nif(cond){\n    statements\n}\n\n# if...else\nif(cond1){\n    statements1\n} else {\n    statements2\n}\n\n# if...else if...else\nif(cond1){\n    statements1\n} else if(cond2){\n    statements2\n} else if(cond3){\n    statements3\n} else{\n    statements4\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>   BEGIN{\n>     mark = 999\n>     if (mark >=0 && mark < 60) {\n>       print "\u5b66\u6e23"\n>     } else if (mark >= 60 && mark < 90) {\n>       print "\u8fd8\u4e0d\u9519"\n>     } else if (mark >= 90 && mark <= 100) {\n>       print "\u5b66\u9738"\n>     } else {\n>       print "\u9519\u8bef\u5206\u6570"\n>     }\n>   }\n> \'\n\u9519\u8bef\u5206\u6570\n[root@arm64v8 ~]#\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4e09\u76ee\u8fd0\u7b97\u7b26?:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"expr1 ? expr2 : expr3\n\nif(expr1){\n    expr2\n} else {\n    expr3\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'BEGIN{a=50;b=(a>60) ? "\u53ca\u683c" : "\u4e0d\u53ca\u683c";print(b)}\'\n\u4e0d\u53ca\u683c\n[root@arm64v8 ~]# awk \'BEGIN{a=50; a>60 ? b="\u53ca\u683c" : b="\u4e0d\u53ca\u683c";print(b)}\'\n\u4e0d\u53ca\u683c\n[root@arm64v8 ~]#\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"switch\u2026case")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"switch (expression) {\n    case value1|regex1 : statements1\n    case value2|regex2 : statements2\n    case value3|regex3 : statements3\n    ...\n    [ default: statement ]\n}\n")),(0,r.kt)("p",null,"awk \u4e2d\u7684 switch \u5206\u652f\u8bed\u53e5\u529f\u80fd\u8f83\u5f31\uff0c\u53ea\u80fd\u8fdb\u884c\u7b49\u503c\u6bd4\u8f83\u6216\u6b63\u5219\u5339\u914d\u3002"),(0,r.kt)("p",null,"\u5404\u5206\u652f\u7ed3\u5c3e\u9700\u4f7f\u7528 break \u6765\u7ec8\u6b62\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'{\n    switch($1){\n        case 1:\n            print("Monday")\n            break\n        case 2:\n            print("Tuesday")\n            break\n        case 3:\n            print("Wednesday")\n            break\n        case 4:\n            print("Thursday")\n            break\n        case 5:\n            print("Friday")\n            break\n        case 6:\n            print("Saturday")\n            break\n        case 7:\n            print("Sunday")\n            break\n        default:\n            print("What day?")\n            break\n    }\n}\n')),(0,r.kt)("p",null,"\u5206\u652f\u7a7f\u900f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'{\n    switch($1){\n        case 1:\n        case 2:\n        case 3:\n        case 4:\n        case 5:\n            print("Weekday")\n            break\n        case 6:\n        case 7:\n            print("Weekend")\n            break\n        default:\n            print("What day?")\n            break\n    }\n}\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"while \u548c do\u2026while")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"while(condition){\n    statements\n}\n\ndo {\n    statements\n} while(condition)\n")),(0,r.kt)("p",null,"while \u5148\u5224\u65ad\u6761\u4ef6\u518d\u51b3\u5b9a\u662f\u5426\u6267\u884c statements\uff0cdo\u2026while \u5148\u6267\u884c statements \u518d\u5224\u65ad\u6761\u4ef6\u51b3\u5b9a\u4e0b\u6b21\u662f\u5426\u518d\u6267\u884c statements\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{i=0;while(i<5){print i;i++}}'\n0\n1\n2\n3\n4\n[root@arm64v8 ~]# awk 'BEGIN{i=0;do {print i;i++} while(i<5)}'\n0\n1\n2\n3\n4\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u591a\u6570\u65f6\u5019\uff0cwhile \u548c do\u2026while \u662f\u7b49\u4ef7\u7684\uff0c\u4f46\u5982\u679c\u7b2c\u4e00\u6b21\u6761\u4ef6\u5224\u65ad\u5931\u8d25\uff0c\u5219 do\u2026while \u548c while \u4e0d\u540c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{i=0;while(i == 2){print i;i++}}'\n[root@arm64v8 ~]# awk 'BEGIN{i=0;do {print i;i++} while(i ==2 )}'\n0\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u6240\u4ee5\uff0cwhile \u53ef\u80fd\u4e00\u6b21\u4e5f\u4e0d\u4f1a\u6267\u884c\uff0cdo\u2026while \u81f3\u5c11\u4f1a\u6267\u884c\u4e00\u6b21\u3002\u4e00\u822c\u7528 while\uff0cdo\u2026while \u76f8\u6bd4 while \u6765\u8bf4\uff0c\u7528\u7684\u9891\u7387\u975e\u5e38\u4f4e\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"for \u5faa\u73af")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"for (expr1; expr2; expr3) {\n    statement\n}\n\nfor (idx in array) {\n    statement\n}\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"break \u548c continue")),(0,r.kt)("p",null,"break \u53ef\u9000\u51fa for\u3001while\u3001do\u2026while\u3001switch \u8bed\u53e5\u3002continue \u53ef\u8ba9 for\u3001while\u3001do\u2026while \u8fdb\u5165\u4e0b\u4e00\u8f6e\u5faa\u73af\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk '\nBEGIN{\n  for(i=0;i<10;i++){\n    if(i==5){\n      break\n    }\n    print(i)\n  }\n\n  # continue\n  for(i=0;i<10;i++){\n    if(i==5)continue\n    print(i)\n  }\n}'\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"next \u548c nextfile")),(0,r.kt)("p",null,"next \u4f1a\u5728\u5f53\u524d\u8bed\u53e5\u5904\u7acb\u5373\u505c\u6b62\u540e\u7eed\u64cd\u4f5c\uff0c\u5e76\u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u8fdb\u5165\u5faa\u73af\u9876\u90e8\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u8f93\u51fa\u9664\u7b2c 3 \u884c\u5916\u7684\u6240\u6709\u884c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'NR==3{next}{print}' a.txt\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n[root@arm64v8 ~]# awk 'NR==3{getline}{print}' a.txt\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n3   Tony    male    21   aaa@163.com    17048792503\n4   Kevin   male    21   bbb@189.com    17023929033\n5   Alex    male    18   ccc@xyz.com    18185904230\n6   Andy    female  22   ddd@139.com    18923902352\n7   Jerry   female  25   exdsa@189.com  18785234906\n8   Peter   male    20   bax@qq.com     17729348758\n9   Steven  female  23   bc@sohu.com    15947893212\n10  Bruce   female  27   bcbd@139.com   13942943905\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"nextfile \u4f1a\u5728\u5f53\u524d\u8bed\u53e5\u5904\u7acb\u5373\u505c\u6b62\u540e\u7eed\u64cd\u4f5c\uff0c\u5e76\u76f4\u63a5\u8bfb\u53d6\u4e0b\u4e00\u4e2a\u6587\u4ef6\uff0c\u5e76\u8fdb\u5165\u5faa\u73af\u9876\u90e8\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u6bcf\u4e2a\u6587\u4ef6\u53ea\u8f93\u51fa\u524d 2 \u884c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'FNR==3{nextfile}{print}' a.txt a.txt\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\nID  name    gender  age  email          phone\n1   Bob     male    28   abc@qq.com     18023394012\n[root@arm64v8 ~]#\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"exit")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"exit [exit_code]\n")),(0,r.kt)("p",null,"\u76f4\u63a5\u9000\u51fa awk \u7a0b\u5e8f\u3002\u6ce8\u610f\uff0cEND \u8bed\u53e5\u5757\u4e5f\u662f exit \u64cd\u4f5c\u7684\u4e00\u90e8\u5206\uff0c\u6240\u4ee5\u5728 BEGIN \u6216 main \u6bb5\u4e2d\u6267\u884c exit \u64cd\u4f5c\uff0c\u4e5f\u4f1a\u6267\u884c END \u8bed\u53e5\u5757\u3002\u5982\u679c exit \u5728 END \u8bed\u53e5\u5757\u4e2d\u6267\u884c\uff0c\u5219\u7acb\u5373\u9000\u51fa\u3002"),(0,r.kt)("p",null,"\u6240\u4ee5\uff0c\u5982\u679c\u771f\u7684\u60f3\u76f4\u63a5\u9000\u51fa\u6574\u4e2a awk\uff0c\u5219\u53ef\u4ee5\u5148\u8bbe\u7f6e\u4e00\u4e2a flag \u53d8\u91cf\uff0c\u7136\u540e\u5728 END \u8bed\u53e5\u5757\u7684\u5f00\u5934\u68c0\u67e5\u8fd9\u4e2a\u53d8\u91cf\u518d exit\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'BEGIN{\n    ...code...\n    if(cond){\n        flag=1\n        exit\n    }\n}\n{}\nEND{\n    if(flag){\n        exit\n    }\n    ...code...\n}\n\nawk \'\n    BEGIN{print "begin";flag=1;exit}\n    {}\n    END{if(flag){exit};print "end2"}\n\'\n')),(0,r.kt)("p",null,"exit \u53ef\u4ee5\u6307\u5b9a\u9000\u51fa\u72b6\u6001\u7801\uff0c\u5982\u679c\u89e6\u53d1\u4e86\u4e24\u6b21 exit \u64cd\u4f5c\uff0c\u5373 BEGIN \u6216 main \u4e2d\u7684 exit \u89e6\u53d1\u4e86 END \u4e2d\u7684 exit\uff0c\u4e14 END \u4e2d\u7684 exit \u6ca1\u6709\u6307\u5b9a\u9000\u51fa\u72b6\u6001\u7801\u65f6\uff0c\u5219\u91c7\u53d6\u524d\u4e00\u4e2a\u9000\u51fa\u72b6\u6001\u7801\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{flag=1;exit 2}{}END{if(flag){exit 1}}' \n[root@arm64v8 ~]# echo $?\n1\n[root@arm64v8 ~]# awk 'BEGIN{flag=1;exit 2}{}END{if(flag){exit}}'\n[root@arm64v8 ~]# echo $?\n2\n[root@arm64v8 ~]#\n")),(0,r.kt)("h4",{id:"11317awk-\u6570\u7ec4"},"1.1.3.17\u3001awk \u6570\u7ec4"),(0,r.kt)("p",null,"awk \u6570\u7ec4\u7279\u6027\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"awk \u7684\u6570\u7ec4\u662f\u5173\u8054\u6570\u7ec4(\u5373 key/value \u65b9\u5f0f\u7684 hash \u6570\u636e\u7ed3\u6784)\uff0c\u7d22\u5f15\u4e0b\u6807\u53ef\u4e3a\u6570\u503c(\u751a\u81f3\u662f\u8d1f\u6570\u3001\u5c0f\u6570\u7b49)\uff0c\u4e5f\u53ef\u4e3a\u5b57\u7b26\u4e32",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728\u5185\u90e8\uff0cawk \u6570\u7ec4\u7684\u7d22\u5f15\u5168\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u5373\u4f7f\u662f\u6570\u503c\u7d22\u5f15\u5728\u4f7f\u7528\u65f6\u5185\u90e8\u4e5f\u4f1a\u8f6c\u6362\u6210\u5b57\u7b26\u4e32"),(0,r.kt)("li",{parentName:"ul"},"awk \u7684\u6570\u7ec4\u5143\u7d20\u7684\u987a\u5e8f\u548c\u5143\u7d20\u63d2\u5165\u65f6\u7684\u987a\u5e8f\u5f88\u53ef\u80fd\u662f\u4e0d\u76f8\u540c\u7684"))),(0,r.kt)("li",{parentName:"ul"},"awk \u6570\u7ec4\u652f\u6301\u6570\u7ec4\u7684\u6570\u7ec4")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u8bbf\u95ee\u3001\u8d4b\u503c\u6570\u7ec4\u5143\u7d20")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"arr[idx]\narr[idx] = value\n")),(0,r.kt)("p",null,"\u7d22\u5f15\u53ef\u4ee5\u662f\u6574\u6570\u3001\u8d1f\u6570\u30010\u3001\u5c0f\u6570\u3001\u5b57\u7b26\u4e32\u3002\u5982\u679c\u662f\u6570\u503c\u7d22\u5f15\uff0c\u4f1a\u6309\u7167 CONVFMT \u53d8\u91cf\u6307\u5b9a\u7684\u683c\u5f0f\u5148\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>   BEGIN{\n>     arr[1]   = 11\n>     arr["1"] = 111\n>     arr["a"] = "aa"\n>     arr[-1]  = -11\n>     arr[4.3] = 4.33\n>     print arr[1]\n>     print arr["1"]\n>     print arr["a"]\n>     print arr[-1]\n>     print arr[4.3]\n>   }\n> \'\n111\n111\naa\n-11\n4.33\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u901a\u8fc7\u7d22\u5f15\u7684\u65b9\u5f0f\u8bbf\u95ee\u6570\u7ec4\u4e2d\u4e0d\u5b58\u5728\u7684\u5143\u7d20\u65f6\uff0c\u4f1a\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\uff0c\u540c\u65f6\u4f1a\u521b\u5efa\u8fd9\u4e2a\u5143\u7d20\u5e76\u5c06\u5176\u503c\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '\n>   BEGIN{\n>     arr[-1]=3;\n>     print length(arr);  # 1\n>     print arr[1];\n>     print length(arr)   # 2\n>   }'\n1\n\n2\n[root@arm64v8 ~]# \n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u6570\u7ec4\u957f\u5ea6")),(0,r.kt)("p",null,"awk \u63d0\u4f9b\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"length()")," \u51fd\u6570\u6765\u83b7\u53d6\u6570\u7ec4\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u5b83\u4e5f\u53ef\u4ee5\u7528\u4e8e\u83b7\u53d6\u5b57\u7b26\u4e32\u7684\u5b57\u7b26\u6570\u91cf\u3002\u8fd8\u53ef\u4ee5\u83b7\u53d6\u6570\u503c\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\u540e\u7684\u5b57\u7b26\u6570\u91cf\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{arr[1]=1;arr[2]=2;print length(arr);print length(\"hello\")}'\n2\n5\n[root@arm64v8 ~]#\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u5220\u9664\u6570\u7ec4\u5143\u7d20")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"delete arr[idx]"),"\uff1a\u5220\u9664\u6570\u7ec4 ",(0,r.kt)("inlineCode",{parentName:"li"},"arr[idx]")," \u5143\u7d20",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5220\u9664\u4e0d\u5b58\u5728\u7684\u5143\u7d20\u4e0d\u4f1a\u62a5\u9519"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"delete arr"),"\uff1a\u5220\u9664\u6570\u7ec4\u6240\u6709\u5143\u7d20")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{arr[1]=1;arr[2]=2;arr[3]=3;delete arr[2];print length(arr)}'\n2\n[root@arm64v8 ~]# \n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u68c0\u6d4b\u662f\u5426\u662f\u6570\u7ec4")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"isarray(arr)")," \u53ef\u7528\u4e8e\u68c0\u6d4b arr \u662f\u5426\u662f\u6570\u7ec4\uff0c\u5982\u679c\u662f\u6570\u7ec4\u5219\u8fd4\u56de 1\uff0c\u5426\u5219\u8fd4\u56de 0\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"typeof(arr)"),' \u53ef\u8fd4\u56de\u6570\u636e\u7c7b\u578b\uff0c\u5982\u679c arr \u662f\u6570\u7ec4\uff0c\u5219\u5176\u8fd4\u56de "array"\u3002'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk 'BEGIN{\n>     arr[1]=1;\n>     print isarray(arr);\n>     print (typeof(arr) == \"array\")\n> }'\n1\n1\n[root@arm64v8 ~]#\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u6d4b\u8bd5\u5143\u7d20\u662f\u5426\u5728\u6570\u7ec4\u4e2d")),(0,r.kt)("p",null,"\u4e0d\u8981\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u6765\u6d4b\u8bd5\u5143\u7d20\u662f\u5426\u5728\u6570\u7ec4\u4e2d\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'if(arr["x"] != ""){...}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u5b58\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"arr[\u201cx\u201d]"),"\uff0c\u5219\u4f1a\u7acb\u5373\u521b\u5efa\u8be5\u5143\u7d20\uff0c\u5e76\u5c06\u5176\u503c\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32"),(0,r.kt)("li",{parentName:"ul"},"\u6709\u4e9b\u5143\u7d20\u7684\u503c\u672c\u8eab\u5c31\u662f\u7a7a\u5b57\u7b26\u4e32")),(0,r.kt)("p",null,"\u5e94\u5f53\u4f7f\u7528\u6570\u7ec4\u6210\u5458\u6d4b\u8bd5\u64cd\u4f5c\u7b26 in \u6765\u6d4b\u8bd5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u6ce8\u610f\uff0cidx\u4e0d\u8981\u4f7f\u7528index\uff0c\u5b83\u662f\u4e00\u4e2a\u5185\u7f6e\u51fd\u6570\nif (idx in arr){...}\n")),(0,r.kt)("p",null,"\u5b83\u4f1a\u6d4b\u8bd5\u7d22\u5f15 idx \u662f\u5426\u5728\u6570\u7ec4\u4e2d\uff0c\u5982\u679c\u5b58\u5728\u5219\u8fd4\u56de 1\uff0c\u4e0d\u5b58\u5728\u5219\u8fd4\u56de 0\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '\n>     BEGIN{\n>         arr[1]=1;\n>         arr[2]=2;\n>         arr[3]=3;\n> \n>         arr[1]=\"\";\n>         delete arr[2];\n> \n>         print (1 in arr);  # 1\n>         print (2 in arr);  # 0\n>     }'\n1\n0\n[root@arm64v8 ~]#\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u904d\u5386\u6570\u7ec4")),(0,r.kt)("p",null,"awk \u63d0\u4f9b\u4e86\u4e00\u79cd for \u53d8\u4f53\u6765\u904d\u5386\u6570\u7ec4\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"for(idx in arr){print arr[idx]}\n")),(0,r.kt)("p",null,"\u56e0\u4e3a awk \u6570\u7ec4\u662f\u5173\u8054\u6570\u7ec4\uff0c\u5143\u7d20\u662f\u4e0d\u8fde\u7eed\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u6ca1\u6709\u987a\u5e8f\u3002\u904d\u5386 awk \u6570\u7ec4\u65f6\uff0c\u987a\u5e8f\u662f\u4e0d\u53ef\u9884\u6d4b\u7684\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>     BEGIN{\n>         arr["one"] = 1\n>         arr["two"] = 2\n>         arr["three"] = 3\n>         arr["four"] = 4\n>         arr["five"] = 5\n> \n>         for(i in arr){\n>             print i " -> " arr[i]\n>         }\n>     }\n> \'\nthree -> 3\ntwo -> 2\nfive -> 5\nfour -> 4\none -> 1\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u6b64\u5916\uff0c\u4e0d\u8981\u968f\u610f\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"for(i=0;i<length(arr);i++)")," \u6765\u904d\u5386\u6570\u7ec4\uff0c\u56e0\u4e3a awk \u6570\u7ec4\u662f\u5173\u8054\u6570\u7ec4\u3002\u4f46\u5982\u679c\u5df2\u7ecf\u660e\u786e\u77e5\u9053\u6570\u7ec4\u7684\u6240\u6709\u5143\u7d20\u7d22\u5f15\u90fd\u4f4d\u4e8e\u67d0\u4e2a\u6570\u503c\u8303\u56f4\u5185\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u8be5\u65b9\u5f0f\u8fdb\u884c\u904d\u5386\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>     BEGIN{\n>         arr[1] = "one"\n>         arr[2] = "two"\n>         arr[3] = "three"\n>         arr[4] = "four"\n>         arr[5] = "five"\n>         arr[10]= "ten"\n> \n>         for(i=0;i<=10;i++){\n>             if(i in arr){\n>                 print arr[i]\n>             }\n>         }\n>     }\n> \'\none\ntwo\nthree\nfour\nfive\nten\n[root@arm64v8 ~]#\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u5b50\u6570\u7ec4")),(0,r.kt)("p",null,"\u5b50\u6570\u7ec4\u662f\u6307\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u4e5f\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5373 Array of Array\uff0c\u5b83\u4e5f\u79f0\u4e3a\u5b50\u6570\u7ec4(subarray)\u3002"),(0,r.kt)("p",null,"awk \u4e5f\u652f\u6301\u5b50\u6570\u7ec4\uff0c\u5728\u6548\u679c\u4e0a\u5373\u662f\u5d4c\u5957\u6570\u7ec4\u6216\u591a\u7ef4\u6570\u7ec4\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"a[1][1] = 11\na[1][2] = 12\na[1][3] = 13\na[2][1] = 21\na[2][2] = 22\na[2][3] = 23\na[2][4][1] = 241\na[2][4][2] = 242\na[2][4][1] = 241\na[2][4][3] = 243\n")),(0,r.kt)("p",null,"\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u904d\u5386\u4e8c\u7ef4\u6570\u7ec4\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '\n> BEGIN{\n> a[1][1] = 11\n> a[1][2] = 12\n> a[1][3] = 13\n> a[2][1] = 21\n> a[2][2] = 22\n> a[2][3] = 23\n> for(i in a){\n>     for (j in a[i]){\n>         if(isarray(a[i][j])){\n>             continue\n>         }\n>         print a[i][j]\n>     }\n> }}'\n11\n12\n13\n21\n22\n23\n[root@arm64v8 ~]#\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u6307\u5b9a\u6570\u7ec4\u904d\u5386\u987a\u5e8f")),(0,r.kt)("p",null,"\u7531\u4e8e awk \u6570\u7ec4\u662f\u5173\u8054\u6570\u7ec4\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"for(idx in arr)")," \u904d\u5386\u6570\u7ec4\u65f6\u987a\u5e8f\u662f\u4e0d\u53ef\u9884\u6d4b\u7684\u3002"),(0,r.kt)("p",null,"\u4f46\u662f gawk \u63d0\u4f9b\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},'PROCINFO["sorted_in"]')," \u6765\u6307\u5b9a\u904d\u5386\u7684\u5143\u7d20\u987a\u5e8f\u3002\u5b83\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4e24\u79cd\u7c7b\u578b\u7684\u503c\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u4e3a\u7528\u6237\u81ea\u5b9a\u4e49\u51fd\u6570"),(0,r.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u4e3a\u4e0b\u9762\u8fd9\u4e9b awk \u9884\u5b9a\u4e49\u597d\u7684\u503c\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@unsorted"),"\uff1a\u9ed8\u8ba4\u503c\uff0c\u904d\u5386\u65f6\u65e0\u5e8f"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ind_str_asc"),"\uff1a\u7d22\u5f15\u6309\u5b57\u7b26\u4e32\u6bd4\u8f83\u65b9\u5f0f\u5347\u5e8f\u904d\u5386"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ind_str_desc"),"\uff1a\u7d22\u5f15\u6309\u5b57\u7b26\u4e32\u6bd4\u8f83\u65b9\u5f0f\u964d\u5e8f\u904d\u5386"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ind_num_asc"),"\uff1a\u7d22\u5f15\u5f3a\u5236\u6309\u7167\u6570\u503c\u6bd4\u8f83\u65b9\u5f0f\u5347\u5e8f\u904d\u5386\u3002\u6240\u4ee5\u65e0\u6cd5\u8f6c\u6362\u4e3a\u6570\u503c\u7684\u5b57\u7b26\u4e32\u7d22\u5f15\u5c06\u5f53\u4f5c\u6570\u503c 0 \u8fdb\u884c\u6bd4\u8f83"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ind_num_desc"),"\uff1a\u7d22\u5f15\u5f3a\u5236\u6309\u7167\u6570\u503c\u6bd4\u8f83\u65b9\u5f0f\u964d\u5e8f\u904d\u5386\u3002\u6240\u4ee5\u65e0\u6cd5\u8f6c\u6362\u4e3a\u6570\u503c\u7684\u5b57\u7b26\u4e32\u7d22\u5f15\u5c06\u5f53\u4f5c\u6570\u503c 0 \u8fdb\u884c\u6bd4\u8f83"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@val_type_asc"),"\uff1a\u6309\u503c\u5347\u5e8f\u6bd4\u8f83\uff0c\u6b64\u5916\u6570\u503c\u7c7b\u578b\u51fa\u73b0\u5728\u524d\u9762\uff0c\u63a5\u7740\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u6700\u540e\u662f\u6570\u7ec4\u7c7b(\u5373\u8ba4\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"num<str<arr"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@val_type_desc"),"\uff1a\u6309\u503c\u964d\u5e8f\u6bd4\u8f83\uff0c\u6b64\u5916\u6570\u7ec4\u7c7b\u578b\u51fa\u73b0\u5728\u524d\u9762\uff0c\u63a5\u7740\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u6700\u540e\u662f\u6570\u503c\u578b(\u5373\u8ba4\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"num<str<arr"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@val_str_asc"),"\uff1a\u6309\u503c\u5347\u5e8f\u6bd4\u8f83\uff0c\u6570\u503c\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\u518d\u6bd4\u8f83\uff0c\u800c\u6570\u7ec4\u51fa\u73b0\u5728\u5c3e\u90e8(\u5373\u8ba4 ",(0,r.kt)("inlineCode",{parentName:"li"},"str<arr"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@val_str_desc"),"\uff1a\u6309\u503c\u964d\u5e8f\u6bd4\u8f83\uff0c\u6570\u503c\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\u518d\u6bd4\u8f83\uff0c\u800c\u6570\u7ec4\u51fa\u73b0\u5728\u5934\u90e8(\u5373\u8ba4 ",(0,r.kt)("inlineCode",{parentName:"li"},"str<arr"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@val_num_asc"),"\uff1a\u6309\u503c\u5347\u5e8f\u6bd4\u8f83\uff0c\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u6570\u503c\u518d\u6bd4\u8f83\uff0c\u800c\u6570\u7ec4\u51fa\u73b0\u5728\u5c3e\u90e8(\u5373\u8ba4 ",(0,r.kt)("inlineCode",{parentName:"li"},"num<arr"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@val_num_desc"),"\uff1a\u6309\u503c\u964d\u5e8f\u6bd4\u8f83\uff0c\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u6570\u503c\u518d\u6bd4\u8f83\uff0c\u800c\u6570\u7ec4\u51fa\u73b0\u5728\u5934\u90e8(\u5373\u8ba4\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"num<arr"),")")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>   BEGIN{\n>     arr[1] = "one"\n>     arr[2] = "two"\n>     arr[3] = "three"\n>     arr["a"] ="aa"\n>     arr["b"] ="bb"\n>     arr[10]= "ten"\n> \n>     #PROCINFO["sorted_in"] = "@ind_num_asc"\n>     #PROCINFO["sorted_in"] = "@ind_str_asc"\n>     PROCINFO["sorted_in"] = "@val_str_asc"\n>     for(idx in arr){\n>       print idx " -> " arr[idx]\n>     }\n> }\'\na -> aa\nb -> bb\n1 -> one\n10 -> ten\n3 -> three\n2 -> two\n[root@arm64v8 ~]#\n')),(0,r.kt)("h4",{id:"11318awk-argc-\u548c-argv"},"1.1.3.18\u3001awk ARGC \u548c ARGV"),(0,r.kt)("p",null,"\u9884\u5b9a\u4e49\u53d8\u91cf ARGV \u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u4e86\u6240\u6709\u7684\u547d\u4ee4\u884c\u53c2\u6570\u3002\u8be5\u6570\u7ec4\u4f7f\u7528\u4ece 0 \u5f00\u59cb\u7684\u6570\u503c\u4f5c\u4e3a\u7d22\u5f15\u3002"),(0,r.kt)("p",null,"\u9884\u5b9a\u4e49\u53d8\u91cf ARGC \u521d\u59cb\u65f6\u662f ARGV \u6570\u7ec4\u7684\u957f\u5ea6\uff0c\u5373\u547d\u4ee4\u884c\u53c2\u6570\u7684\u6570\u91cf\u3002"),(0,r.kt)("p",null,"ARGV \u6570\u7ec4\u7684\u6570\u91cf\u548c ARGC \u7684\u503c\u53ea\u6709\u5728 awk \u521a\u5f00\u59cb\u8fd0\u884c\u7684\u65f6\u5019\u662f\u4fdd\u8bc1\u76f8\u7b49\u7684\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk -va=1 -F: \'\n>   BEGIN{\n>     print ARGC;\n>     for(i in ARGV){\n>       print "ARGV[" i "]= " ARGV[i]\n>     }\n> }\' b=3 a.txt b.txt\n4\nARGV[0]= awk\nARGV[1]= b=3\nARGV[2]= a.txt\nARGV[3]= b.txt\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"awk \u8bfb\u53d6\u6587\u4ef6\u662f\u6839\u636e ARGC \u7684\u503c\u6765\u8fdb\u884c\u7684\uff0c\u6709\u70b9\u7c7b\u4f3c\u4e8e\u5982\u4e0b\u4f2a\u4ee3\u7801\u5f62\u5f0f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"while(i=1;i<ARGC;i++){\n    read from ARGV[i]\n}\n")),(0,r.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cawk \u5728\u8bfb\u5b8c ARGV \u4e2d\u7684\u4e00\u4e2a\u6587\u4ef6\u65f6\uff0c\u4f1a\u81ea\u52a8\u4ece\u5b83\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\u5f00\u59cb\u8bfb\u53d6\uff0c\u76f4\u5230\u8bfb\u5b8c\u6240\u6709\u6587\u4ef6\u3002"),(0,r.kt)("p",null,"\u76f4\u63a5\u51cf\u5c0f ARGC \u7684\u503c\uff0c\u4f1a\u5bfc\u81f4 awk \u4e0d\u4f1a\u8bfb\u53d6\u5c3e\u90e8\u7684\u4e00\u4e9b\u6587\u4ef6\u3002\u6b64\u5916\uff0c\u589e\u51cf ARGC \u7684\u503c\uff0c\u90fd\u4e0d\u4f1a\u5f71\u54cd ARGV \u6570\u7ec4\uff0c\u4ec5\u4ec5\u53ea\u662f\u5f71\u54cd awk \u8bfb\u53d6\u6587\u4ef6\u7684\u6570\u91cf\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4e0d\u4f1a\u8bfb\u53d6b.txt\n[root@arm64v8 ~]# awk 'BEGIN{ARGC=2}{print}' a.txt b.txt\n\n# \u8bfb\u5b8cb.txt\u540e\u81ea\u52a8\u9000\u51fa\n[root@arm64v8 ~]# awk 'BEGIN{ARGC=5}{print}' a.txt b.txt\n")),(0,r.kt)("p",null,'\u53ef\u4ee5\u5c06 ARGV \u4e2d\u67d0\u4e2a\u5143\u7d20\u8d4b\u503c\u4e3a\u7a7a\u5b57\u7b26\u4e32 ""\uff0cawk \u5728\u9009\u62e9\u4e0b\u4e00\u4e2a\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u65f6\uff0c\u4f1a\u81ea\u52a8\u5ffd\u7565 ARGV \u4e2d\u7684\u7a7a\u5b57\u7b26\u4e32\u5143\u7d20\u3002\u4e5f\u53ef\u4ee5 ',(0,r.kt)("inlineCode",{parentName:"p"},"delete ARGV[i]")," \u7684\u65b9\u5f0f\u6765\u5220\u9664 ARGV \u4e2d\u7684\u67d0\u5143\u7d20\u3002"),(0,r.kt)("p",null,"\u7528\u6237\u624b\u52a8\u589e\u3001\u5220 ARGV \u5143\u7d20\u65f6\uff0c\u4e0d\u4f1a\u81ea\u52a8\u4fee\u6539 ARGC\uff0c\u800c awk \u8bfb\u53d6\u6587\u4ef6\u65f6\u662f\u6839\u636e ARGC \u503c\u6765\u786e\u5b9a\u7684\u3002\u6240\u4ee5\uff0c\u5728\u589e\u52a0 ARGV \u5143\u7d20\u4e4b\u540e\uff0c\u8981\u624b\u52a8\u7684\u53bb\u589e\u52a0 ARGC \u7684\u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4e0d\u4f1a\u8bfb\u53d6b.txt\u6587\u4ef6\n[root@arm64v8 ~]# awk 'BEGIN{ARGV[2]=\"b.txt\"}{print}' a.txt\n\n# \u4f1a\u8bfb\u53d6b.txt\u6587\u4ef6\n[root@arm64v8 ~]# awk 'BEGIN{ARGV[2]=\"b.txt\";ARGC++}{print}' a.txt\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u5224\u65ad\u547d\u4ee4\u884c\u4e2d\u7ed9\u5b9a\u6587\u4ef6\u662f\u5426\u53ef\u8bfb")),(0,r.kt)("p",null,"awk \u547d\u4ee4\u884c\u4e2d\u53ef\u80fd\u4f1a\u7ed9\u51fa\u4e00\u4e9b\u4e0d\u5b58\u5728\u6216\u65e0\u6743\u9650\u6216\u5176\u5b83\u539f\u56e0\u800c\u65e0\u6cd5\u88ab awk \u8bfb\u53d6\u7684\u6587\u4ef6\u540d\uff0c\u8fd9\u65f6\u53ef\u4ee5\u5224\u65ad\u5e76\u4ece\u4e2d\u5254\u9664\u6389\u4e0d\u53ef\u8bfb\u53d6\u7684\u6587\u4ef6\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6392\u9664\u547d\u4ee4\u884c\u5c3e\u90e8(\u975e\u9009\u9879\u578b\u53c2\u6570)\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"var=val"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"-"),"\u3001\u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"/dev/stdin")," \u8fd9 3 \u79cd\u7279\u6b8a\u60c5\u51b5"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u53ef\u8bfb\uff0c\u5219\u4ece ",(0,r.kt)("inlineCode",{parentName:"li"},"ARGV")," \u4e2d\u5220\u9664\u8be5\u53c2\u6570"),(0,r.kt)("li",{parentName:"ul"},"\u5269\u4e0b\u7684\u90fd\u662f\u53ef\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"main")," \u4ee3\u7801\u6bb5\u6b63\u5e38\u8bfb\u53d6\u7684\u6587\u4ef6")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'BEGIN{\n  for(i=1;i<ARGC;i++){\n    if(ARGV[i] ~ /[a-zA-Z_][a-zA-Z0-9_]*=.*/ \\\n    || ARGV[i]=="-" || ARGV[i]=="/dev/stdin"){\n      continue\n    } else if((getline var < ARGV[i]) < 0){\n      delete ARGV[i]\n    } else{\n      close(ARGV[i])\n    }\n  }\n}\n')),(0,r.kt)("h4",{id:"11319awk-\u81ea\u5b9a\u4e49\u51fd\u6570"},"1.1.3.19\u3001awk \u81ea\u5b9a\u4e49\u51fd\u6570"),(0,r.kt)("p",null,"\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\u5c06\u591a\u4e2a\u64cd\u4f5c\u6574\u5408\u5728\u4e00\u8d77\u3002\u51fd\u6570\u5b9a\u4e49\u4e4b\u540e\uff0c\u53ef\u4ee5\u5230\u5904\u591a\u6b21\u8c03\u7528\uff0c\u4ece\u800c\u65b9\u4fbf\u590d\u7528\u3002"),(0,r.kt)("p",null,"\u4f7f\u7528 function \u5173\u952e\u5b57\u6765\u5b9a\u4e49\u51fd\u6570\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"function func_name([parameters]){\n    function_body\n}\n")),(0,r.kt)("p",null,"\u5bf9\u4e8e gawk \u6765\u8bf4\uff0c\u4e5f\u652f\u6301 func \u5173\u952e\u5b57\u6765\u5b9a\u4e49\u51fd\u6570\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"func func_name(){}\n")),(0,r.kt)("p",null,"\u51fd\u6570\u53ef\u4ee5\u5b9a\u4e49\u5728\u4e0b\u9762\u4f7f\u7528\u4e0b\u5212\u7ebf\u7684\u5730\u65b9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk '_ BEGIN{} _ MAIN{} _ END{} _'\n")),(0,r.kt)("p",null,"\u65e0\u8bba\u51fd\u6570\u5b9a\u4e49\u5728\u54ea\u91cc\uff0c\u90fd\u80fd\u5728\u4efb\u4f55\u5730\u65b9\u8c03\u7528\uff0c\u56e0\u4e3a awk \u5728 BEGIN \u4e4b\u524d\uff0c\u4f1a\u5148\u7f16\u8bd1 awk \u4ee3\u7801\u4e3a\u5185\u90e8\u683c\u5f0f\uff0c\u5728\u8fd9\u4e2a\u9636\u6bb5\u4f1a\u5c06\u6240\u6709\u51fd\u6570\u90fd\u9884\u5b9a\u4e49\u597d\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'awk \'\n    BEGIN{\n        f()\n        f()\n        f()\n    }\n    function f(){\n        print "\u661f\u671f\u4e00"\n        print "\u661f\u671f\u4e8c"\n        print "\u661f\u671f\u4e09"\n        print "\u661f\u671f\u56db"\n        print "\u661f\u671f\u4e94"\n        print "\u661f\u671f\u516d"\n        print "\u661f\u671f\u65e5"\n    }\n\'\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u51fd\u6570\u7684 return \u8bed\u53e5")),(0,r.kt)("p",null,"\u5982\u679c\u60f3\u8981\u8ba9\u51fd\u6570\u6709\u8fd4\u56de\u503c\uff0c\u90a3\u4e48\u9700\u8981\u5728\u51fd\u6570\u4e2d\u4f7f\u7528 return \u8bed\u53e5\u3002return \u8bed\u53e5\u4e5f\u53ef\u4ee5\u7528\u6765\u7acb\u5373\u7ed3\u675f\u51fd\u6570\u7684\u6267\u884c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '\n>     function add(){\n>         return 40\n>     }\n>     BEGIN{\n>         print add()\n>         res = add() \n>         print res\n>     }\n> '\n40\n40\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u5982\u679c\u4e0d\u4f7f\u7528 return \u6216 return \u6ca1\u6709\u53c2\u6570\uff0c\u5219\u8fd4\u56de\u503c\u4e3a\u7a7a\uff0c\u5373\u7a7a\u5b57\u7b26\u4e32\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>   function f1(){        }\n>   function f2(){return  }\n>   function f3(){return 3}\n>   BEGIN{\n>     print "-"f1()"-"\n>     print "-"f2()"-"\n>     print "-"f3()"-"\n>   }\n> \'\n--\n--\n-3-\n[root@arm64v8 ~]#\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u51fd\u6570\u53c2\u6570")),(0,r.kt)("p",null,"\u4e3a\u4e86\u8ba9\u51fd\u6570\u548c\u8c03\u7528\u8005\u80fd\u591f\u8fdb\u884c\u6570\u636e\u7684\u4ea4\u4e92\uff0c\u53ef\u4ee5\u4f7f\u7528\u53c2\u6570\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# awk '\n>   function f(a,b){\n>     print a\n>     print b\n>     return a+b\n>   }\n>   BEGIN{\n>     x=10\n>     y=20\n>     res = f(x,y)\n>     print res\n>     print f(x,y)\n>   }\n> '\n10\n20\n30\n10\n20\n30\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u5b9e\u73b0\u4e00\u4e2a\u91cd\u590d\u67d0\u5b57\u7b26\u4e32\u6307\u5b9a\u6b21\u6570\u7684\u51fd\u6570\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[root@arm64v8 ~]# awk \'\n>     function repeat(str,cnt  ,res_str){\n>         for(i=0;i<cnt;i++){\n>             res_str = res_str""str\n>         }\n>         return res_str\n>     }\n>     BEGIN{\n>         print repeat("abc",3)\n>         print repeat("-",30)\n>     }\n> \'\nabcabcabc\n------------------------------\n[root@arm64v8 ~]#\n')),(0,r.kt)("p",null,"\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u5b9e\u53c2\u6570\u91cf\u53ef\u4ee5\u6bd4\u5f62\u53c2\u6570\u91cf\u5c11\uff0c\u4e5f\u53ef\u4ee5\u6bd4\u5f62\u53c2\u6570\u91cf\u591a\u3002\u4f46\u662f\uff0c\u5728\u591a\u4e8e\u5f62\u53c2\u6570\u91cf\u65f6\u4f1a\u7ed9\u51fa\u8b66\u544a\u4fe1\u606f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'awk \'\n  function f(a,b){\n    print a\n    print b\n    return a+b\n  }\n  BEGIN{\n    x=10\n    y=20\n\n    print "---1----"\n    print "-"f()"-"          # \u4e0d\u4f20\u9012\u53c2\u6570\n\n    print "---2----"\n    print "-"f(30)"-"        # \u4f20\u90121\u4e2a\u53c2\u6570\n\n    print "---3----"\n    print "-"f(10,20,30)"-"  # \u4f20\u9012\u591a\u4e2a\u53c2\u6570\n  }\n\'\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u51fd\u6570\u53c2\u6570\u6570\u636e\u7c7b\u578b\u51b2\u7a81\u95ee\u9898")),(0,r.kt)("p",null,"\u5982\u679c\u51fd\u6570\u5185\u90e8\u4f7f\u7528\u53c2\u6570\u7684\u7c7b\u578b\u548c\u51fd\u6570\u5916\u90e8\u53d8\u91cf\u7684\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u4f1a\u51fa\u73b0\u6570\u636e\u7c7b\u578b\u4e0d\u540c\u800c\u5bfc\u81f4\u62a5\u9519\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk '\n    function f(a){\n        a[1]=30\n    }\n    BEGIN{\n        a=\"hello world\"\n        f(a)   # \u62a5\u9519\n\n        f(x)\n        x=10   # \u62a5\u9519\n    }\n'\n")),(0,r.kt)("p",null,"\u51fd\u6570\u5185\u90e8\u53c2\u6570\u5bf9\u5e94\u7684\u662f\u6570\u7ec4\uff0c\u90a3\u4e48\u5916\u9762\u5bf9\u5e94\u7684\u4e5f\u5fc5\u987b\u662f\u6570\u7ec4\u7c7b\u578b\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u53c2\u6570\u6309\u503c\u4f20\u9012\u8fd8\u662f\u6309\u5f15\u7528\u4f20\u9012")),(0,r.kt)("p",null,"\u5728\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u5c06\u6570\u636e\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570\u65f6\uff0c\u6709\u4e24\u79cd\u4f20\u9012\u65b9\u5f0f\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f20\u9012\u666e\u901a\u53d8\u91cf\u65f6\uff0c\u662f\u6309\u503c\u62f7\u8d1d\u4f20\u9012",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u76f4\u63a5\u62f7\u8d1d\u666e\u901a\u53d8\u91cf\u7684\u503c\u5230\u51fd\u6570\u4e2d"),(0,r.kt)("li",{parentName:"ul"},"\u51fd\u6570\u5185\u90e8\u4fee\u6539\u4e0d\u4f1a\u5f71\u54cd\u5230\u5916\u90e8"))),(0,r.kt)("li",{parentName:"ul"},"\u4f20\u9012\u6570\u7ec4\u65f6\uff0c\u662f\u6309\u5f15\u7528\u4f20\u9012",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u51fd\u6570\u5185\u90e8\u4fee\u6539\u4f1a\u5f71\u54cd\u5230\u5916\u90e8")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4f20\u9012\u666e\u901a\u53d8\u91cf\uff1a\u6309\u503c\u62f7\u8d1d\nawk '\n  function modify(a){\n    a=30\n    print a\n  }\n  BEGIN{\n    a=40\n    modify(a)\n    print a\n  }\n'\n\n# \u4f20\u9012\u6570\u7ec4\uff1a\u6309\u5f15\u7528\u62f7\u8d1d\nawk '\n  function modify(a){\n    a[1]=20\n  }\n\n  BEGIN{\n    a[1]=10\n    modify(a)\n    print a[1]\n  }\n'\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"awk \u4f5c\u7528\u57df\u95ee\u9898")),(0,r.kt)("p",null,"awk \u53ea\u6709\u5728\u51fd\u6570\u53c2\u6570\u4e2d\u624d\u662f\u5c40\u90e8\u53d8\u91cf\uff0c\u5176\u5b83\u5730\u65b9\u5b9a\u4e49\u7684\u53d8\u91cf\u5747\u4e3a\u5168\u5c40\u53d8\u91cf\u3002"),(0,r.kt)("p",null,"\u51fd\u6570\u5185\u90e8\u65b0\u589e\u7684\u53d8\u91cf\u662f\u5168\u5c40\u53d8\u91cf\uff0c\u4f1a\u5f71\u54cd\u5230\u5168\u5c40\uff0c\u6240\u4ee5\u5728\u51fd\u6570\u9000\u51fa\u540e\u4ecd\u7136\u80fd\u8bbf\u95ee\u3002\u4f8b\u5982\u4e0a\u9762\u7684 e \u53d8\u91cf\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk '\n  function f(){\n    a=30  # \u65b0\u589e\u7684\u53d8\u91cf\uff0c\u662f\u5168\u5c40\u53d8\u91cf\n    print \"in f: \" a\n  }\n  BEGIN{\n    a=40\n    f()\n    print a  # 30\n  }\n'\n")),(0,r.kt)("p",null,"\u51fd\u6570\u53c2\u6570\u4f1a\u906e\u63a9\u5168\u5c40\u540c\u540d\u53d8\u91cf\uff0c\u6240\u4ee5\u5728\u51fd\u6570\u6267\u884c\u65f6\uff0c\u65e0\u6cd5\u8bbf\u95ee\u5230\u6216\u64cd\u4f5c\u4e0e\u53c2\u6570\u540c\u540d\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u51fd\u6570\u9000\u51fa\u65f6\u4f1a\u81ea\u52a8\u64a4\u6389\u906e\u63a9\uff0c\u8fd9\u65f6\u624d\u80fd\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\u3002\u6240\u4ee5\uff0c\u53c2\u6570\u5177\u6709\u5c40\u90e8\u6548\u679c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk '\n  function f(a){\n    print a    # 50\uff0c\u6309\u503c\u62f7\u8d1d\uff0c\u548c\u5168\u5c40a\u5df2\u7ecf\u6ca1\u6709\u5173\u7cfb\n    a=40\n    print a    # 40\n  }\n  BEGIN{\n    a=50\n    f(a)\n    print a     # 50\uff0c\u51fd\u6570\u9000\u51fa\uff0c\u91cd\u65b0\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\n  }\n'\n")),(0,r.kt)("p",null,"\u7531\u4e8e\u51fd\u6570\u5185\u90e8\u65b0\u589e\u53d8\u91cf\u5747\u4e3a\u5168\u5c40\u53d8\u91cf\uff0cawk \u4e5f\u6ca1\u6709\u63d0\u4f9b\u5173\u952e\u5b57\u6765\u4fee\u9970\u4e00\u4e2a\u53d8\u91cf\u4f7f\u5176\u6210\u4e3a\u5c40\u90e8\u53d8\u91cf\u3002\u6240\u4ee5\uff0cawk \u53ea\u80fd\u5c06\u672c\u8be5\u51fa\u73b0\u5728\u51fd\u6570\u4f53\u5185\u7684\u5c40\u90e8\u53d8\u91cf\u653e\u5728\u53c2\u6570\u5217\u8868\u4e2d\uff0c\u53ea\u8981\u8c03\u7528\u51fd\u6570\u65f6\u4e0d\u8981\u4e3a\u8fd9\u4e9b\u53c2\u6570\u4f20\u9012\u6570\u636e\u5373\u53ef\uff0c\u4ece\u800c\u5b9e\u73b0\u5c40\u90e8\u53d8\u91cf\u7684\u6548\u679c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk '\n  function f(a,b       ,c,d){\n\n    # a,b\u662f\u53c2\u6570\uff0c\u8c03\u7528\u65f6\u9700\u4f20\u9012\u4e24\u4e2a\u53c2\u6570\n    # c,d\u662f\u5c40\u90e8\u53d8\u91cf\uff0c\u8c03\u7528\u65f6\u4e0d\u8981\u7ed9c\u548cd\u4f20\u9012\u6570\u636e\n    a=30\n    b=40\n    c=50\n    d=60\n    e=70  # \u5168\u5c40\u53d8\u91cf\n\n    print a,b,c,d,e  # 30 40 50 60 70\n  }\n  BEGIN{\n    a=31\n    b=41\n    c=51\n    d=61\n    f(a,b)  # \u8c03\u7528\u51fd\u6570\u65f6\u503c\u4f20\u9012\u4e24\u4e2a\u53c2\u6570\n    print a,b,c,d,e  # 31 41 51 61 70\n  }\n'\n")),(0,r.kt)("p",null,"\u6240\u4ee5\uff0cawk \u5bf9\u51fd\u6570\u53c2\u6570\u5217\u8868\u505a\u4e86\u4e24\u7c7b\u533a\u5206\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"arguments\uff1a\u8c03\u7528\u51fd\u6570\u65f6\u4f20\u9012\u7684\u53c2\u6570"),(0,r.kt)("li",{parentName:"ul"},"local variables\uff1a\u8c03\u7528\u51fd\u6570\u65f6\u7701\u7565\u7684\u53c2\u6570")),(0,r.kt)("p",null,"\u4e3a\u4e86\u533a\u5206 arguments \u548c local variables\uff0c\u7ea6\u5b9a\u4fd7\u6210\u7684\uff0c\u5c06 local variables \u653e\u5728\u4e00\u5927\u5806\u7a7a\u683c\u540e\u9762\u6765\u63d0\u793a\u7528\u6237\u3002\u4f8b\u5982 ",(0,r.kt)("inlineCode",{parentName:"p"},"function name(a,b, c,d)")," \u8868\u793a\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u5e94\u5f53\u4f20\u9012\u4e24\u4e2a\u53c2\u6570\uff0cc \u548c d \u662f\u672c\u51fd\u6570\u5185\u90e8\u4f7f\u7528\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4e0d\u8981\u4f20\u9012\u5bf9\u5e94\u7684\u53c2\u6570\u3002"),(0,r.kt)("p",null,"\u533a\u5206\u53c2\u6570\u548c\u5c40\u90e8\u53d8\u91cf\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53c2\u6570\u63d0\u4f9b\u4e86\u51fd\u6570\u548c\u5b83\u8c03\u7528\u8005\u8fdb\u884c\u6570\u636e\u4ea4\u4e92\u7684\u65b9\u5f0f"),(0,r.kt)("li",{parentName:"ul"},"\u5c40\u90e8\u53d8\u91cf\u662f\u4e34\u65f6\u5b58\u653e\u6570\u636e\u7684\u5730\u65b9")),(0,r.kt)("p",null,"arguments \u90e8\u5206\u4f53\u73b0\u7684\u662f\u51fd\u6570\u8c03\u7528\u65f6\u4f20\u9012\u7684\u53c2\u6570\uff0c\u8fd9\u4e9b\u53c2\u6570\u5728\u51fd\u6570\u5185\u90e8\u4f1a\u906e\u63a9\u5168\u5c40\u540c\u540d\u53d8\u91cf\u3002\u4f8b\u5982\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u51fd\u6570\u5185\u90e8\u8bbf\u95ee\u4e0d\u4e86\u5168\u5c40\u7684 a \u548c b\uff0c\u6240\u6709\u5bf9 a \u548c b \u7684\u64cd\u4f5c\u90fd\u662f\u51fd\u6570\u5185\u90e8\u7684\uff0c\u51fd\u6570\u9000\u51fa\u540e\u624d\u80fd\u91cd\u65b0\u8bbf\u95ee\u5168\u5c40 a \u548c b\u3002\u56e0\u6b64\uff0carguments \u4e5f\u6709\u5c40\u90e8\u7279\u6027\u3002"),(0,r.kt)("p",null,"local variables \u662f awk \u5b9e\u73b0\u771f\u6b63\u5c40\u90e8\u53d8\u91cf\u7684\u6280\u5de7\uff0c\u53ea\u662f\u56e0\u4e3a\u51fd\u6570\u5185\u90e8\u65b0\u589e\u7684\u53d8\u91cf\u90fd\u662f\u5168\u5c40\u53d8\u91cf\uff0c\u6240\u4ee5\u9000\u800c\u6c42\u5176\u6b21\u5c06\u5176\u653e\u5728\u53c2\u6570\u5217\u8868\u4e0a\u6765\u5b9e\u73b0\u5c40\u90e8\u53d8\u91cf\u3002"),(0,r.kt)("h4",{id:"11320awk-\u9009\u9879\u5185\u7f6e\u53d8\u91cf"},"1.1.3.20\u3001awk \u9009\u9879\u3001\u5185\u7f6e\u53d8\u91cf"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u9009\u9879")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"-e program-text\n--source program-text\n\u6307\u5b9aawk\u7a0b\u5e8f\u8868\u8fbe\u5f0f\uff0c\u53ef\u7ed3\u5408-f\u9009\u9879\u540c\u65f6\u4f7f\u7528\n\u5728\u4f7f\u7528\u4e86-f\u9009\u9879\u540e\uff0c\u5982\u679c\u4e0d\u4f7f\u7528-e\uff0cawk program\u662f\u4e0d\u4f1a\u6267\u884c\u7684\uff0c\u5b83\u4f1a\u88ab\u5f53\u4f5cARGV\u7684\u4e00\u4e2a\u53c2\u6570\n\n-f program-file\n--file program-file\n\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6awk\u6e90\u4ee3\u7801\u6765\u6267\u884c\uff0c\u53ef\u6307\u5b9a\u591a\u4e2a-f\u9009\u9879\n\n-F fs\n--field-separator fs\n\u6307\u5b9a\u8f93\u5165\u5b57\u6bb5\u5206\u9694\u7b26(FS\u9884\u5b9a\u4e49\u53d8\u91cf\u4e5f\u53ef\u8bbe\u7f6e)\n\n-n\n--non-decimal-data\n\u8bc6\u522b\u6587\u4ef6\u8f93\u5165\u4e2d\u76848\u8fdb\u5236\u6570(0\u5f00\u5934)\u548c16\u8fdb\u5236\u6570(0x\u5f00\u5934)\necho '030' | awk -n '{print $1+0}'\n\n-o [filename]\n\u683c\u5f0f\u5316awk\u4ee3\u7801\u3002\n\u4e0d\u6307\u5b9afilename\u65f6\uff0c\u5219\u9ed8\u8ba4\u4fdd\u5b58\u5230awkprof.out\n\u6307\u5b9a\u4e3a`-`\u65f6\uff0c\u8868\u793a\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\n\n-v var=val\n--assign var=val\n\u5728BEGIN\u4e4b\u524d\uff0c\u58f0\u660e\u5e76\u8d4b\u503c\u53d8\u91cfvar\uff0c\u53d8\u91cf\u53ef\u5728BEGIN\u4e2d\u4f7f\u7528\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u9884\u5b9a\u4e49\u53d8\u91cf")),(0,r.kt)("p",null,"\u9884\u5b9a\u4e49\u53d8\u91cf\u5206\u4e3a\u4e24\u7c7b\uff1a\u63a7\u5236 awk \u5de5\u4f5c\u7684\u53d8\u91cf\u548c\u643a\u5e26\u4fe1\u606f\u7684\u53d8\u91cf\u3002"),(0,r.kt)("p",null,"\u7b2c\u4e00\u7c7b\uff1a\u63a7\u5236 AWK \u5de5\u4f5c\u7684\u9884\u5b9a\u4e49\u53d8\u91cf"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"RS"),"\uff1a\u8f93\u5165\u8bb0\u5f55\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u6362\u884c\u7b26 ",(0,r.kt)("inlineCode",{parentName:"li"},"\\n")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IGNORECASE"),"\uff1a\u9ed8\u8ba4\u503c\u4e3a 0\uff0c\u8868\u793a\u6240\u6709\u7684\u6b63\u5219\u5339\u914d\u4e0d\u5ffd\u7565\u5927\u5c0f\u5199\u3002\u8bbe\u7f6e\u4e3a\u975e 0 \u503c\uff08\u4f8b\u5982 1\uff09\uff0c\u4e4b\u540e\u7684\u5339\u914d\u5c06\u5ffd\u7565\u5927\u5c0f\u5199\u3002\u4f8b\u5982\u5728 BEGIN \u5757\u4e2d\u5c06\u5176\u8bbe\u7f6e\u4e3a 1\uff0c\u5c06\u4f7f FS\u3001RS \u90fd\u4ee5\u5ffd\u7565\u5927\u5c0f\u5199\u7684\u65b9\u5f0f\u5206\u9694\u5b57\u6bb5\u6216\u5206\u9694 record"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"FS"),"\uff1a\u8bfb\u53d6\u8bb0\u5f55\u540e\uff0c\u5212\u5206\u4e3a\u5b57\u6bb5\u7684\u5b57\u6bb5\u5206\u9694\u7b26\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"FIELDWIDTHS"),"\uff1a\u4ee5\u6307\u5b9a\u5bbd\u5ea6\u5207\u5272\u5b57\u6bb5\u800c\u975e\u6309\u7167 FS\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"FPAT"),"\uff1a\u4ee5\u6b63\u5219\u5339\u914d\u5339\u914d\u5230\u7684\u7ed3\u679c\u4f5c\u4e3a\u5b57\u6bb5\uff0c\u800c\u975e\u6309\u7167 FS \u5212\u5206\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"OFS"),'\uff1aprint \u547d\u4ee4\u8f93\u51fa\u5404\u5b57\u6bb5\u5217\u8868\u65f6\u7684\u8f93\u51fa\u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\u683c " "'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ORS"),"\uff1aprint \u547d\u4ee4\u8f93\u51fa\u6570\u636e\u65f6\u5728\u5c3e\u90e8\u81ea\u52a8\u6dfb\u52a0\u7684\u8bb0\u5f55\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u6362\u884c\u7b26 ",(0,r.kt)("inlineCode",{parentName:"li"},"\\n")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"CONVFMT"),"\uff1a\u5728 awk \u4e2d\u6570\u503c\u9690\u5f0f\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u65f6\uff0c\u5c06\u6839\u636e CONVFMT \u7684\u683c\u5f0f\u6309\u7167 sprintf() \u7684\u65b9\u5f0f\u81ea\u52a8\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"OFMT"),"\uff1a\u5728 print \u4e2d\uff0c\u6570\u503c\u4f1a\u6839\u636e OFMT \u7684\u683c\u5f0f\u6309\u7167 sprintf() \u7684\u65b9\u5f0f\u81ea\u52a8\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u3002")),(0,r.kt)("p",null,"\u7b2c\u4e8c\u7c7b\uff1a\u643a\u5e26\u4fe1\u606f\u7684\u9884\u5b9a\u4e49\u53d8\u91cf"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ARGC")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"ARGV"),"\uff1aawk \u547d\u4ee4\u884c\u53c2\u6570\u7684\u6570\u91cf\u3001\u547d\u4ee4\u53c2\u6570\u7684\u6570\u7ec4\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ARGIND"),"\uff1aawk \u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u6587\u4ef6\u5728 ARGV \u4e2d\u7684\u7d22\u5f15\u4f4d\u7f6e\u3002\u6240\u4ee5\uff0c\u5982\u679c awk \u6b63\u5728\u5904\u7406\u547d\u4ee4\u884c\u53c2\u6570\u4e2d\u7684\u67d0\u6587\u4ef6\uff0c\u5219 ",(0,r.kt)("inlineCode",{parentName:"li"},"ARGV[ARGIND] == FILENAME")," \u4e3a\u771f"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"FILENAME"),"\uff1aawk \u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u6587\u4ef6(\u547d\u4ee4\u884c\u4e2d\u6307\u5b9a\u7684\u6587\u4ef6)\uff0c\u6240\u4ee5\u5728 BEGIN \u4e2d\u8be5\u53d8\u91cf\u503c\u4e3a\u7a7a"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ENVIRON"),"\uff1a\u4fdd\u5b58\u4e86 Shell \u7684\u73af\u5883\u53d8\u91cf\u7684\u6570\u7ec4\u3002\u4f8b\u5982 ",(0,r.kt)("inlineCode",{parentName:"li"},'ENVIRON["HOME"]')," \u5c06\u8fd4\u56de\u5f53\u524d\u7528\u6237\u7684\u5bb6\u76ee\u5f55"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NR"),":\u5f53\u524d\u5df2\u8bfb\u603b\u8bb0\u5f55\u6570\uff0c\u591a\u4e2a\u6587\u4ef6\u4ece\u4e0d\u4f1a\u91cd\u7f6e\u4e3a 0\uff0c\u6240\u4ee5\u5b83\u662f\u4e00\u76f4\u53e0\u52a0\u7684",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539 NR\uff0c\u4e0b\u6b21\u8bfb\u53d6\u8bb0\u5f55\u65f6\u5c06\u5728\u6b64\u4fee\u6539\u503c\u4e0a\u81ea\u589e"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"FNR"),":\u5f53\u524d\u6b63\u5728\u8bfb\u53d6\u6587\u4ef6\u7684\u7b2c\u51e0\u6761\u8bb0\u5f55\uff0c\u6bcf\u6b21\u6253\u5f00\u65b0\u6587\u4ef6\u4f1a\u91cd\u7f6e\u4e3a 0",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539 FNR\uff0c\u4e0b\u6b21\u8bfb\u53d6\u8bb0\u5f55\u65f6\u5c06\u5728\u6b64\u4fee\u6539\u503c\u4e0a\u81ea\u589e"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NF"),"\uff1a\u5f53\u524d\u8bb0\u5f55\u7684\u5b57\u6bb5\u6570"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"RT"),"\uff1a\u5728\u8bfb\u53d6\u8bb0\u5f55\u65f6\u771f\u6b63\u7684\u8bb0\u5f55\u5206\u9694\u7b26"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"RLENGTH"),"\uff1amatch() \u51fd\u6570\u6b63\u5219\u5339\u914d\u6210\u529f\u65f6\uff0c\u6240\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u5982\u679c\u5339\u914d\u5931\u8d25\uff0c\u8be5\u53d8\u91cf\u503c\u4e3a -1"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"RSTART"),"\uff1amatch() \u51fd\u6570\u5339\u914d\u6210\u529f\u65f6\uff0c\u5176\u9996\u5b57\u7b26\u7684\u7d22\u5f15\u4f4d\u7f6e\uff0c\u5982\u679c\u5339\u914d\u5931\u8d25\uff0c\u8be5\u53d8\u91cf\u503c\u4e3a 0"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"SUBSEP"),"\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"arr[x,y]")," \u4e2d\u4e0b\u6807\u5206\u9694\u7b26\u6784\u5efa\u6210\u7d22\u5f15\u65f6\u5bf9\u5e94\u7684\u5b57\u7b26\uff0c\u9ed8\u8ba4\u503c\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"\\034"),"\uff0c\u662f\u4e00\u4e2a\u4e0d\u592a\u53ef\u80fd\u51fa\u73b0\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u4e0d\u53ef\u6253\u5370\u5b57\u7b26\u3002")),(0,r.kt)("h4",{id:"11321\u7efc\u5408\u6848\u4f8b"},"1.1.3.21\u3001\u7efc\u5408\u6848\u4f8b"),(0,r.kt)("p",null,"\u8bf7\u53c2\u89c1 ",(0,r.kt)("a",{parentName:"p",href:"https://www.brinnatt.com/addons/%e7%ac%ac-a-1-%e7%ab%a0-awk-examples/"},"Awk Examples")),(0,r.kt)("h2",{id:"12\u7f51\u7edc\u6293\u5305\u548c\u626b\u63cf"},"1.2\u3001\u7f51\u7edc\u6293\u5305\u548c\u626b\u63cf"),(0,r.kt)("h3",{id:"121tcpdump-\u547d\u4ee4"},"1.2.1\u3001tcpdump \u547d\u4ee4"),(0,r.kt)("p",null,"tcpdump \u91c7\u7528\u547d\u4ee4\u884c\u65b9\u5f0f\u5bf9\u63a5\u53e3\u7684\u6570\u636e\u5305\u8fdb\u884c\u7b5b\u9009\u6293\u53d6\uff0c\u5176\u4e30\u5bcc\u7279\u6027\u8868\u73b0\u5728\u7075\u6d3b\u7684\u8868\u8fbe\u5f0f\u4e0a\u3002\u4e0d\u5e26\u4efb\u4f55\u9009\u9879\u7684 tcpdump\uff0c\u9ed8\u8ba4\u4f1a\u6293\u53d6\u7b2c\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3\uff0c\u4e14\u53ea\u6709\u5c06 tcpdump \u8fdb\u7a0b\u7ec8\u6b62\u624d\u4f1a\u505c\u6b62\u6293\u5305\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"tcpdump \u9009\u9879")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'tcpdump [ -DenNqvX ] [ -c count ] [ -F file ] [ -i interface ] [ -r file ]\n        [ -s snaplen ] [ -w file ] [ expression ]\n\n\u6293\u5305\u9009\u9879\uff1a\n-c:             \u6307\u5b9a\u8981\u6293\u53d6\u7684\u5305\u6570\u91cf\u3002\u6ce8\u610f\uff0c\u662f\u6700\u7ec8\u8981\u83b7\u53d6\u8fd9\u4e48\u591a\u4e2a\u5305\u3002\n                \u4f8b\u5982\uff0c\u6307\u5b9a"-c 10"\u5c06\u83b7\u53d610\u4e2a\u5305\uff0c\u4f46\u53ef\u80fd\u5df2\u7ecf\u5904\u7406\u4e86100\u4e2a\u5305\uff0c\u53ea\u4e0d\u8fc7\u53ea\u670910\u4e2a\u5305\u662f\u6ee1\u8db3\u6761\u4ef6\u7684\u5305\u3002\n\n-i interface:   \u6307\u5b9atcpdump\u9700\u8981\u76d1\u542c\u7684\u63a5\u53e3\u3002\u82e5\u672a\u6307\u5b9a\u8be5\u9009\u9879\uff0c\u5c06\u4ece\u7cfb\u7edf\u63a5\u53e3\u5217\u8868\u4e2d\u641c\u5bfb\u7f16\u53f7\u6700\u5c0f\u7684\u5df2\u914d\u7f6e\u597d\u7684\u63a5\u53e3\uff0c\n                \u4e0d\u5305\u62ecloopback\u63a5\u53e3\uff0c\u8981\u6293\u53d6loopback\u63a5\u53e3\u4f7f\u7528tcpdump -i lo\n                \u4e00\u65e6\u627e\u5230\u7b2c\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u63a5\u53e3\uff0c\u641c\u5bfb\u9a6c\u4e0a\u7ed3\u675f\u3002\u53ef\u4ee5\u4f7f\u7528\'any\'\u5173\u952e\u5b57\u8868\u793a\u6240\u6709\u7f51\u7edc\u63a5\u53e3\u3002\n\n-n:             \u5bf9\u5730\u5740\u4ee5\u6570\u5b57\u65b9\u5f0f\u663e\u5f0f\uff0c\u5426\u5219\u663e\u5f0f\u4e3a\u4e3b\u673a\u540d\uff0c\u4e5f\u5c31\u662f\u8bf4-n\u9009\u9879\u4e0d\u505a\u4e3b\u673a\u540d\u89e3\u6790\u3002\n-nn:            \u9664\u4e86-n\u7684\u4f5c\u7528\u5916\uff0c\u8fd8\u628a\u7aef\u53e3\u663e\u793a\u4e3a\u6570\u503c\uff0c\u5426\u5219\u663e\u793a\u7aef\u53e3\u670d\u52a1\u540d\u3002\n-N:             \u4e0d\u6253\u5370\u51fahost\u7684\u57df\u540d\u90e8\u5206\u3002\u4f8b\u5982tcpdump\u5c06\u4f1a\u6253\u5370\'nic\'\u800c\u4e0d\u662f\'nic.ddn.mil\'\u3002\n-P:             \u6307\u5b9a\u8981\u6293\u53d6\u7684\u5305\u662f\u6d41\u5165\u8fd8\u662f\u6d41\u51fa\u7684\u5305\u3002\u53ef\u4ee5\u7ed9\u5b9a\u7684\u503c\u4e3a"in"\u3001"out"\u548c"inout"\uff0c\u9ed8\u8ba4\u4e3a"inout"\u3002\n\n-s len:         \u8bbe\u7f6etcpdump\u7684\u6570\u636e\u5305\u6293\u53d6\u957f\u5ea6\u4e3alen\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u9ed8\u8ba4\u5c06\u4f1a\u662f65535\u5b57\u8282\u3002\u5bf9\u4e8e\u8981\u6293\u53d6\u7684\u6570\u636e\u5305\u8f83\u5927\u65f6\uff0c\n                \u957f\u5ea6\u8bbe\u7f6e\u4e0d\u591f\u53ef\u80fd\u4f1a\u4ea7\u751f\u5305\u622a\u65ad\uff0c\u82e5\u51fa\u73b0\u5305\u622a\u65ad\uff0c\u8f93\u51fa\u884c\u4e2d\u4f1a\u51fa\u73b0"[|proto]"\u7684\u6807\u5fd7(proto\u5b9e\u9645\u4f1a\u663e\u793a\u4e3a\u534f\u8bae\u540d)\u3002\n                \u4f46\u662f\u6293\u53d6len\u8d8a\u957f\uff0c\u5305\u7684\u5904\u7406\u65f6\u95f4\u8d8a\u957f\uff0c\u5e76\u4e14\u4f1a\u51cf\u5c11tcpdump\u53ef\u7f13\u5b58\u7684\u6570\u636e\u5305\u7684\u6570\u91cf\uff0c\u4ece\u800c\u4f1a\u5bfc\u81f4\u6570\u636e\u5305\u7684\u4e22\u5931\uff0c\n                \u6240\u4ee5\u5728\u80fd\u6293\u53d6\u6211\u4eec\u60f3\u8981\u7684\u5305\u7684\u524d\u63d0\u4e0b\uff0c\u6293\u53d6\u957f\u5ea6\u8d8a\u5c0f\u8d8a\u597d\u3002\n\n\u8f93\u51fa\u9009\u9879\uff1a\n-e:             \u8f93\u51fa\u7684\u6bcf\u884c\u4e2d\u90fd\u5c06\u5305\u62ec\u6570\u636e\u94fe\u8def\u5c42\u5934\u90e8\u4fe1\u606f\uff0c\u4f8b\u5982\u6e90MAC\u548c\u76ee\u6807MAC\u3002\n-q:             \u5feb\u901f\u6253\u5370\u8f93\u51fa\u3002\u5373\u6253\u5370\u5f88\u5c11\u7684\u534f\u8bae\u76f8\u5173\u4fe1\u606f\uff0c\u4ece\u800c\u8f93\u51fa\u884c\u90fd\u6bd4\u8f83\u7b80\u77ed\u3002\n-X:             \u8f93\u51fa\u5305\u7684\u5934\u90e8\u6570\u636e\uff0c\u4f1a\u4ee516\u8fdb\u5236\u548cASCII\u4e24\u79cd\u65b9\u5f0f\u540c\u65f6\u8f93\u51fa\u3002\n-XX:            \u8f93\u51fa\u5305\u7684\u5934\u90e8\u6570\u636e\uff0c\u4f1a\u4ee516\u8fdb\u5236\u548cASCII\u4e24\u79cd\u65b9\u5f0f\u540c\u65f6\u8f93\u51fa\uff0c\u66f4\u8be6\u7ec6\u3002\n-v:             \u5f53\u5206\u6790\u548c\u6253\u5370\u7684\u65f6\u5019\uff0c\u4ea7\u751f\u8be6\u7ec6\u7684\u8f93\u51fa\u3002\n-vv:            \u4ea7\u751f\u6bd4-v\u66f4\u8be6\u7ec6\u7684\u8f93\u51fa\u3002\n-vvv:           \u4ea7\u751f\u6bd4-vv\u66f4\u8be6\u7ec6\u7684\u8f93\u51fa\u3002\n\n\u5176\u4ed6\u529f\u80fd\u6027\u9009\u9879\uff1a\n-D:             \u5217\u51fa\u53ef\u7528\u4e8e\u6293\u5305\u7684\u63a5\u53e3\u3002\u5c06\u4f1a\u5217\u51fa\u63a5\u53e3\u7684\u6570\u503c\u7f16\u53f7\u548c\u63a5\u53e3\u540d\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u7528\u4e8e"-i"\u540e\u3002\n-F:             \u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6293\u5305\u7684\u8868\u8fbe\u5f0f\u3002\u82e5\u4f7f\u7528\u8be5\u9009\u9879\uff0c\u5219\u547d\u4ee4\u884c\u4e2d\u7ed9\u5b9a\u7684\u5176\u4ed6\u8868\u8fbe\u5f0f\u90fd\u5c06\u5931\u6548\u3002\n-w:             \u5c06\u6293\u5305\u6570\u636e\u8f93\u51fa\u5230\u6587\u4ef6\u4e2d\u800c\u4e0d\u662f\u6807\u51c6\u8f93\u51fa\u3002\u53ef\u4ee5\u540c\u65f6\u914d\u5408"-G time"\u9009\u9879\u4f7f\u5f97\u8f93\u51fa\u6587\u4ef6\u6bcftime\u79d2\u5c31\u81ea\u52a8\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u6587\u4ef6\u3002\n                \u53ef\u901a\u8fc7"-r"\u9009\u9879\u8f7d\u5165\u8fd9\u4e9b\u6587\u4ef6\u4ee5\u8fdb\u884c\u5206\u6790\u548c\u6253\u5370\u3002\n\n-r:             \u4ece\u7ed9\u5b9a\u7684\u6570\u636e\u5305\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\u3002\u4f7f\u7528"-"\u8868\u793a\u4ece\u6807\u51c6\u8f93\u5165\u4e2d\u8bfb\u53d6\u3002\n')),(0,r.kt)("p",null,"\u6240\u4ee5\u5e38\u7528\u7684\u9009\u9879\u4e5f\u5c31\u8fd9\u51e0\u4e2a\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"tcpdump -D"),(0,r.kt)("li",{parentName:"ul"},"tcpdump -c num -i int -nn -XX -vvv")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"tcpdump \u8868\u8fbe\u5f0f")),(0,r.kt)("p",null,"\u8868\u8fbe\u5f0f\u7528\u4e8e\u7b5b\u9009\u8f93\u51fa\u54ea\u4e9b\u7c7b\u578b\u7684\u6570\u636e\u5305\uff0c\u5982\u679c\u6ca1\u6709\u7ed9\u5b9a\u8868\u8fbe\u5f0f\uff0c\u6240\u6709\u7684\u6570\u636e\u5305\u90fd\u5c06\u8f93\u51fa\uff0c\u5426\u5219\u53ea\u8f93\u51fa\u8868\u8fbe\u5f0f\u4e3a true \u7684\u5305\u3002\u5728\u8868\u8fbe\u5f0f\u4e2d\u51fa\u73b0\u7684 shell \u5143\u5b57\u7b26\u5efa\u8bae\u4f7f\u7528\u5355\u5f15\u53f7\u5305\u56f4\u3002"),(0,r.kt)("p",null,'tcpdump \u7684\u8868\u8fbe\u5f0f\u7531\u4e00\u4e2a\u6216\u591a\u4e2a "\u5355\u5143" \u7ec4\u6210\uff0c\u6bcf\u4e2a\u5355\u5143\u4e00\u822c\u5305\u542b ID \u7684\u4fee\u9970\u7b26\u548c\u4e00\u4e2a ID(\u6570\u5b57\u6216\u540d\u79f0)\u3002\u6709\u4e09\u79cd\u4fee\u9970\u7b26\uff1a'),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"type\uff1a\u6307\u5b9a ID \u7684\u7c7b\u578b\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u7ed9\u5b9a\u7684\u503c\u6709 host/net/port/portrange\u3002"),(0,r.kt)("li",{parentName:"ul"},'\u4f8b\u5982 "host foo"\uff0c"net 128.3"\uff0c"port 20"\uff0c"portrange 6000-6008"\u3002\u9ed8\u8ba4\u7684 type \u4e3a host\u3002'))),(0,r.kt)("li",{parentName:"ol"},"dir\uff1a\u6307\u5b9a ID \u7684\u65b9\u5411\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u7ed9\u5b9a\u7684\u503c\u5305\u62ec src/dst/src or dst/src and dst\uff0c\u9ed8\u8ba4\u4e3a src or dst\u3002"),(0,r.kt)("li",{parentName:"ul"},'\u4f8b\u5982\uff0c"src foo" \u8868\u793a\u6e90\u4e3b\u673a\u4e3a foo \u7684\u6570\u636e\u5305\uff0c"dst net 128.3" \u8868\u793a\u76ee\u6807\u7f51\u7edc\u4e3a 128.3 \u7684\u6570\u636e\u5305\uff0c"src or dst port 22" \u8868\u793a\u6e90\u6216\u76ee\u7684\u7aef\u53e3\u4e3a 22 \u7684\u6570\u636e\u5305\u3002'))),(0,r.kt)("li",{parentName:"ol"},"proto\uff1a\u901a\u8fc7\u7ed9\u5b9a\u534f\u8bae\u9650\u5b9a\u5339\u914d\u7684\u6570\u636e\u5305\u7c7b\u578b\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5e38\u7528\u7684\u534f\u8bae\u6709 tcp/udp/arp/ip/ether/icmp \u7b49\uff0c\u82e5\u672a\u7ed9\u5b9a\u534f\u8bae\u7c7b\u578b\uff0c\u5219\u5339\u914d\u6240\u6709\u53ef\u80fd\u7684\u7c7b\u578b\u3002"),(0,r.kt)("li",{parentName:"ul"},'\u4f8b\u5982 "tcp port 21"\uff0c"udp portrange 7000-7009"\u3002')))),(0,r.kt)("p",null,'\u6240\u4ee5\uff0c\u4e00\u4e2a\u57fa\u672c\u7684\u8868\u8fbe\u5f0f\u5355\u5143\u683c\u5f0f\u4e3a "proto dir type ID"'),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"tcpdump",src:a(29871).Z,width:"1011",height:"374"})),(0,r.kt)("p",null,"\u9664\u4e86\u4f7f\u7528\u4fee\u9970\u7b26\u548c ID \u7ec4\u6210\u7684\u8868\u8fbe\u5f0f\u5355\u5143\uff0c\u8fd8\u6709\u5173\u952e\u5b57\u8868\u8fbe\u5f0f\u5355\u5143\uff1agateway\uff0cbroadcast\uff0cless\uff0cgreater \u4ee5\u53ca\u7b97\u672f\u8868\u8fbe\u5f0f\u3002\u8868\u8fbe\u5f0f\u5355\u5143\u4e4b\u95f4\u53ef\u4ee5\u4f7f\u7528\u64cd\u4f5c\u7b26 ",(0,r.kt)("inlineCode",{parentName:"p"},'" and / && / or / || / not / ! "')," \u8fdb\u884c\u8fde\u63a5\uff0c\u4ece\u800c\u7ec4\u6210\u590d\u6742\u7684\u6761\u4ef6\u8868\u8fbe\u5f0f\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"tcpdump \u793a\u4f8b")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u542f\u52a8"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump \n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6ce8\u610f\uff0ctcpdump \u53ea\u80fd\u6293\u53d6",(0,r.kt)("strong",{parentName:"li"},"\u6d41\u7ecf\u672c\u673a"),"\u7684\u6570\u636e\u5305\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u542f\u52a8 tcpdump \u5c06\u76d1\u89c6\u7b2c\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3(\u975e lo \u53e3)\u4e0a\u6240\u6709\u6d41\u901a\u7684\u6570\u636e\u5305\u3002\u8fd9\u6837\u6293\u53d6\u7684\u7ed3\u679c\u4f1a\u975e\u5e38\u591a\uff0c\u6eda\u52a8\u975e\u5e38\u5feb\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u76d1\u89c6\u6307\u5b9a\u7f51\u7edc\u63a5\u53e3\u7684\u6570\u636e\u5305"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump -i eth0 \n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u6307\u5b9a\u7f51\u5361\uff0c\u9ed8\u8ba4 tcpdump \u53ea\u4f1a\u76d1\u89c6\u7b2c\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3\uff0c\u5982 eth0\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u76d1\u89c6\u6307\u5b9a\u4e3b\u673a\u7684\u6570\u636e\u5305\uff0c\u4f8b\u5982\u6240\u6709\u8fdb\u5165\u6216\u79bb\u5f00 arm64v8 \u7684\u6570\u636e\u5305"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump host arm64v8\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6253\u5370 arm64v8<--\x3ebrinnatt \u6216 arm64v8<--\x3eprinter \u4e4b\u95f4\u901a\u4fe1\u7684\u6570\u636e\u5305"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump host arm64v8 and \\( brinnatt or printer \\)\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6253\u5370 arm64v8 \u4e0e\u4efb\u4f55\u5176\u4ed6\u4e3b\u673a\u4e4b\u95f4\u901a\u4fe1\u7684 IP \u6570\u636e\u5305,\u4f46\u4e0d\u5305\u62ec\u4e0e brinnatt \u4e4b\u95f4\u7684\u6570\u636e\u5305"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump ip host arm64v8 and not brinnatt\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u622a\u83b7\u4e3b\u673a arm64v8 \u53d1\u9001\u7684\u6240\u6709\u6570\u636e"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump src host arm64v8\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u76d1\u89c6\u6307\u5b9a\u4e3b\u673a\u548c\u7aef\u53e3\u7684\u6570\u636e\u5305"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump tcp port 22 and host arm64v8\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'\u76d1\u89c6\u6307\u5b9a\u7f51\u7edc\u7684\u6570\u636e\u5305\uff0c\u5982\u672c\u673a\u4e0e 10.51.111 \u7f51\u6bb5\u901a\u4fe1\u7684\u6570\u636e\u5305\uff0c"-c 10" \u8868\u793a\u53ea\u6293\u53d6 10 \u4e2a\u5305'),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump -c 10 net 10.51.111\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6293\u53d6 ping \u5305"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump -c 5 -nn -i eth0 icmp\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes\n02:43:47.202288 IP 10.51.111.142 > 10.51.111.1: ICMP echo request, id 5327, seq 7, length 64\n02:43:47.203538 IP 10.51.111.1 > 10.51.111.142: ICMP echo reply, id 5327, seq 7, length 64\n02:43:48.203592 IP 10.51.111.142 > 10.51.111.1: ICMP echo request, id 5327, seq 8, length 64\n02:43:48.204751 IP 10.51.111.1 > 10.51.111.142: ICMP echo reply, id 5327, seq 8, length 64\n02:43:49.204790 IP 10.51.111.142 > 10.51.111.1: ICMP echo request, id 5327, seq 9, length 64\n5 packets captured\n5 packets received by filter\n0 packets dropped by kernel\n[root@arm64v8 ~]#\n")),(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u660e\u786e\u8981\u6293\u53d6\u4e3b\u673a\u4e3a 10.51.111.52 \u5bf9\u672c\u673a\u7684 ping\uff0c\u5219\u4f7f\u7528 and \u64cd\u4f5c\u7b26\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump -c 5 -nn -i eth0 icmp and src 10.51.111.52\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes\n02:45:59.686057 IP 10.51.111.52 > 10.51.111.142: ICMP echo request, id 1, seq 92, length 40\n02:46:00.692499 IP 10.51.111.52 > 10.51.111.142: ICMP echo request, id 1, seq 93, length 40\n02:46:01.727462 IP 10.51.111.52 > 10.51.111.142: ICMP echo request, id 1, seq 94, length 40\n02:46:03.000676 IP 10.51.111.52 > 10.51.111.142: ICMP echo request, id 1, seq 95, length 40\n02:46:03.748285 IP 10.51.111.52 > 10.51.111.142: ICMP echo request, id 1, seq 96, length 40\n5 packets captured\n5 packets received by filter\n0 packets dropped by kernel\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6ce8\u610f\u4e0d\u80fd\u76f4\u63a5\u5199 icmp src 10.51.111.52\uff0c\u56e0\u4e3a icmp \u534f\u8bae\u4e0d\u652f\u6301\u76f4\u63a5\u5e94\u7528 host \u8fd9\u4e2a type\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6293\u53d6\u5230\u672c\u673a 22 \u7aef\u53e3\u5305"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump -c 5 -nn -i eth0 tcp dst port 22\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes\n02:48:51.781168 IP 10.51.111.52.5679 > 10.51.111.142.22: Flags [.], ack 3276621926, win 510, length 0\n02:48:51.781182 IP 10.51.111.52.2414 > 10.51.111.142.22: Flags [.], ack 319842498, win 509, length 0\n02:48:51.783513 IP 10.51.111.52.2414 > 10.51.111.142.22: Flags [.], ack 329, win 508, length 0\n02:48:51.851711 IP 10.51.111.52.2414 > 10.51.111.142.22: Flags [.], ack 477, win 507, length 0\n02:48:52.332314 IP 10.51.111.52.2414 > 10.51.111.142.22: Flags [.], ack 625, win 513, length 0\n5 packets captured\n6 packets received by filter\n0 packets dropped by kernel\n[root@arm64v8 ~]#\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u89e3\u6790\u5305\u6570\u636e"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# tcpdump -c 2 -q -XX -vvv -nn -i eth0 tcp dst port 22\ntcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes\n02:49:36.623578 IP (tos 0x0, ttl 64, id 14045, offset 0, flags [DF], proto TCP (6), length 40)\n    10.51.111.52.2414 > 10.51.111.142.22: tcp 0\n    0x0000:  0007 3e9b 155a e4a4 71bf b661 0800 4500  ..>..Z..q..a..E.\n    0x0010:  0028 36dd 4000 4006 10cb 0a33 6f34 0a33  .(6.@.@....3o4.3\n    0x0020:  6f8e 096e 0016 fbf5 a621 1310 815e 5010  o..n.....!...^P.\n    0x0030:  0200 7aa2 0000 0000 0000 0000            ..z.........\n02:49:36.628549 IP (tos 0x0, ttl 64, id 14046, offset 0, flags [DF], proto TCP (6), length 40)\n    10.51.111.52.2414 > 10.51.111.142.22: tcp 0\n    0x0000:  0007 3e9b 155a e4a4 71bf b661 0800 4500  ..>..Z..q..a..E.\n    0x0010:  0028 36de 4000 4006 10ca 0a33 6f34 0a33  .(6.@.@....3o4.3\n    0x0020:  6f8e 096e 0016 fbf5 a621 1310 83de 5010  o..n.....!....P.\n    0x0030:  01fe 7824 0000 0000 0000 0000            ..x$........\n2 packets captured\n2 packets received by filter\n0 packets dropped by kernel\n[root@arm64v8 ~]#\n")))),(0,r.kt)("h3",{id:"122nmap-\u547d\u4ee4"},"1.2.2\u3001nmap \u547d\u4ee4"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5b89\u88c5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# yum install nmap -y\nLoaded plugins: fastestmirror, langpacks\nLoading mirror speeds from cached hostfile\nPackage 2:nmap-6.40-19.axs7.aarch64 already installed and latest version\nNothing to do\n[root@arm64v8 ~]#\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"nmap \u547d\u4ee4\u8bed\u6cd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nmap [Scan Type...] [Options] {target specification}\n\n-iL <inputfilename>:  \u4ece\u8f93\u5165\u6587\u4ef6\u4e2d\u8bfb\u53d6\u4e3b\u673a\u6216\u8005IP\u5217\u8868\u4f5c\u4e3a\u63a2\u6d4b\u76ee\u6807\n-sn:                    PING\u626b\u63cf\uff0c\u4f46\u662f\u7981\u6b62\u7aef\u53e3\u626b\u63cf\u3002\u9ed8\u8ba4\u603b\u662f\u4f1a\u626b\u63cf\u7aef\u53e3\u3002\u7981\u7528\u7aef\u53e3\u626b\u63cf\u53ef\u4ee5\u52a0\u901f\u626b\u63cf\u4e3b\u673a\n-n/-R:                  \u6c38\u8fdc\u4e0d\u8981/\u603b\u662f\u8fdb\u884cDNS\u89e3\u6790\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6709\u65f6\u4f1a\u89e3\u6790\n-PE/PP/PM:              \u5206\u522b\u662f\u57fa\u4e8eecho/timestamp/netmask\u7684ICMP\u63a2\u6d4b\u62a5\u6587\u65b9\u5f0f\u3002\u4f7f\u7528echo\u6700\u5feb\n-sS/sT/sA/sW:           TCP SYN/Connect()/ACK/Window\uff0c\u5176\u4e2dsT\u626b\u63cf\u8868\u793aTCP\u626b\u63cf\n-sU:                    UDP\u626b\u63cf\n-sO:                    IP\u626b\u63cf\n-p <port ranges>:     \u6307\u5b9a\u626b\u63cf\u7aef\u53e3\n-v:                     \u663e\u793a\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f7f\u7528-vv\u6216\u8005\u66f4\u591a\u7684v\u663e\u793a\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\n-oN/-oX/ <file>:      \u8f93\u51fa\u626b\u63cf\u7ed3\u679c\u5230\u666e\u901a\u6587\u4ef6\u6216XML\u6587\u4ef6\u4e2d\u3002\u8f93\u5165\u5230XML\u6587\u4ef6\u4e2d\u7684\u7ed3\u679c\u662f\u683c\u5f0f\u5316\u7684\u7ed3\u679c\n--min-hostgroup/max-hostgroup <size>:             \u5bf9\u76ee\u6807\u4e3b\u673a\u8fdb\u884c\u5206\u7ec4\u7136\u540e\u7ec4\u4e4b\u95f4\u5e76\u884c\u626b\u63cf\n--min-parallelism/max-parallelism <numprobes>:        \u8bbe\u7f6e\u5e76\u884c\u626b\u63cf\u7684\u63a2\u9488\u6570\u91cf\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5c1d\u8bd5\u4e00\u6b21\u626b\u63cf")),(0,r.kt)("p",null,"nmap \u626b\u63cf\u4e00\u822c\u4f1a\u6bd4\u8f83\u6162\uff0c\u7279\u522b\u662f\u626b\u63cf\u975e\u672c\u673a\u7684\u65f6\u5019\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# nmap 127.0.0.1\n\nStarting Nmap 6.40 ( http://nmap.org ) at 2021-09-24 03:05 CST\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.0000090s latency).\nNot shown: 996 closed ports\nPORT    STATE SERVICE\n22/tcp  open  ssh\n25/tcp  open  smtp\n111/tcp open  rpcbind\n631/tcp open  ipp\n\nNmap done: 1 IP address (1 host up) scanned in 1.74 seconds\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53ea\u626b\u63cf\u51fa\u4e86 4 \u4e2a\u7aef\u53e3\uff0c\u4f46\u662f\u4e0d\u4ee3\u8868\u771f\u7684\u53ea\u5f00\u4e86 4 \u4e2a\u7aef\u53e3\uff0c\u8fd9\u6837\u4e0d\u52a0\u4efb\u4f55\u53c2\u6570\u7684 nmap \u5c06\u81ea\u52a8\u51b3\u5b9a\u626b\u63cf 1000 \u4e2a\u9ad8\u5371\u7aef\u53e3\uff0c\u4f46\u54ea\u4e9b\u662f\u9ad8\u5371\u7aef\u53e3\u7531 nmap \u51b3\u5b9a\u3002"),(0,r.kt)("li",{parentName:"ul"},'\u4ece\u7ed3\u679c\u4e2d\u4e5f\u80fd\u770b\u51fa\u6765\uff0c"NOT shown:996 closed ports" \u8868\u793a 996 \u4e2a\u5173\u95ed\u7684\u7aef\u53e3\u672a\u663e\u793a\u51fa\u6765\uff0c\u968f\u540e\u53c8\u663e\u793a\u4e86 4 \u4e2a open \u7aef\u53e3\uff0c\u6b63\u597d 1000 \u4e2a\u3002\u867d\u8bf4\u9ed8\u8ba4\u53ea\u626b\u63cf 1000 \u4e2a\uff0c\u4f46\u5e38\u89c1\u7684\u7aef\u53e3\u90fd\u80fd\u626b\u63cf\u51fa\u6765\u3002')),(0,r.kt)("p",null,"\u4ece arm64 \u53f0\u5f0f\u673a\u626b\u63cf x86 windows \u770b\u770b\u3002\u53ef\u4ee5\u611f\u53d7\u5230\uff0c\u626b\u63cf\u901f\u5ea6\u660e\u663e\u964d\u4f4e\u4e86\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# nmap 10.51.111.52\n\nStarting Nmap 6.40 ( http://nmap.org ) at 2021-09-24 03:08 CST\nNmap scan report for 10.51.111.52\nHost is up (0.014s latency).\nNot shown: 992 filtered ports\nPORT     STATE SERVICE\n135/tcp  open  msrpc\n139/tcp  open  netbios-ssn\n443/tcp  open  https\n445/tcp  open  microsoft-ds\n902/tcp  open  iss-realsecure\n912/tcp  open  apex-mesh\n1031/tcp open  iad2\n5357/tcp open  wsdapi\nMAC Address: E4:A4:71:BF:B6:61 (Unknown)\n\nNmap done: 1 IP address (1 host up) scanned in 33.28 seconds\n[root@arm64v8 ~]#\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'\u53ef\u4ee5\u6307\u5b9a "-p ',"[","1-65535","]",'" \u6765\u626b\u63cf\u6240\u6709\u7aef\u53e3\uff0c\u6216\u8005\u4f7f\u7528 "-p-" \u9009\u9879\u4e5f\u662f\u5168\u9762\u626b\u63cf\u3002'),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# nmap -p- 127.0.0.1\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"nmap \u9ed8\u8ba4\u603b\u662f\u4f1a\u626b\u63cf\u7aef\u53e3\uff0c\u53ef\u4ee5\u4f7f\u7528 -sn \u9009\u9879\u7981\u6b62\u626b\u63cf\u7aef\u53e3\uff0c\u4ee5\u52a0\u901f\u626b\u63cf\u4e3b\u673a\u662f\u5426\u5b58\u6d3b\u3002"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u626b\u63cf\u76ee\u6807\u8bf4\u660e")),(0,r.kt)("p",null,"Nmap \u652f\u6301 CIDR \u98ce\u683c\u7684\u5730\u5740\uff0cNmap \u5c06\u4f1a\u626b\u63cf\u6240\u6709\u548c",(0,r.kt)("strong",{parentName:"p"},"\u8be5\u53c2\u8003 IP \u5730\u5740"),"\u5177\u6709\u76f8\u540c cidr \u4f4d\u6570\u7684\u6240\u6709 IP \u5730\u5740\u6216\u4e3b\u673a\u3002"),(0,r.kt)("p",null,'CIDR \u6807\u5fd7\u4f4d\u5f88\u7b80\u6d01\u4f46\u6709\u65f6\u5019\u4e0d\u591f\u7075\u6d3b\u3002\u53ef\u4ee5\u7528\u9017\u53f7\u5206\u5f00\u7684\u6570\u5b57\u6216\u8303\u56f4\u5217\u8868\u4e3a IP \u5730\u5740\u6307\u5b9a\u5b83\u7684\u8303\u56f4\u3002\u4f8b\u5982 "192.168.0-255.1-254" \u5c06\u7565\u8fc7\u8be5\u8303\u56f4\u5185\u4ee5 ".0" \u548c ".255" \u7ed3\u675f\u7684\u5730\u5740\u3002'),(0,r.kt)("p",null,"Nmap \u547d\u4ee4\u884c\u63a5\u53d7\u591a\u4e2a\u4e3b\u673a\u8bf4\u660e\uff0c\u5b83\u4eec\u4e0d\u5fc5\u662f\u76f8\u540c\u7c7b\u578b\u3002\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nmap www.hostname.com 192.168.0.0/8 10.0.0,1,3-7.0-255\n")),(0,r.kt)("p",null,"\u867d\u7136\u76ee\u6807\u901a\u5e38\u5728\u547d\u4ee4\u884c\u6307\u5b9a\uff0c\u4e0b\u5217\u9009\u9879\u4e5f\u53ef\u7528\u6765\u63a7\u5236\u76ee\u6807\u7684\u9009\u62e9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-iL <inputfilename>")," \uff1a\u4ece\u5217\u8868\u4e2d\u8f93\u5165"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--exclude <host1[\uff0chost2][\uff0chost3]\uff0c...>"),"\uff1a\u6392\u9664\u4e3b\u673a/\u7f51\u7edc"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--excludefile <excludefile>"),"\uff1a\u6392\u9664\u6587\u4ef6\u4e2d\u7684\u5217\u8868\uff0c\u8fd9\u548c --exclude \u7684\u529f\u80fd\u4e00\u6837\uff0c\u53ea\u662f\u6240\u6392\u9664\u7684\u76ee\u6807\u662f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"<excludefile>")," \u63d0\u4f9b\u7684\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u8303\u56f4\u626b\u63cf")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# nmap 10.51.111.0/24\nNmap scan report for 10.51.111.1\nHost is up (0.0018s latency).\nNot shown: 998 closed ports\nPORT   STATE    SERVICE\n21/tcp open     ftp\n22/tcp filtered ssh\nMAC Address: 00:00:5E:00:01:6F (USC Information Sciences Inst)\n\nNmap scan report for 10.51.111.10\nHost is up (0.0022s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE\n23/tcp open  telnet\nMAC Address: CC:D8:1F:1C:A0:F1 (Unknown)\n......\nNmap done: 256 IP addresses (57 hosts up) scanned in 6898.00 seconds\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u603b\u5171\u82b1\u4e86 6898s\uff0c\u65f6\u95f4\u5f88\u6f2b\u957f\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8be5\u5c40\u57df\u7f51\u4e0b\u9762\uff0c\u6709\u5f88\u591a\u79cd\u8bbe\u5907\uff0c\u8ba1\u7b97\u673a\u3001\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u548c\u865a\u62df\u7f51\u5361\u7b49\uff0c\u6240\u4ee5\u53ef\u80fd\u6709\u7684\u8bbe\u5907\u53ea\u6709\u4e00\u4e2a IP \u5730\u5740\u548c MAC \u5730\u5740\uff0c\u6ca1\u6709\u6253\u5f00\u7684\u7aef\u53e3\u53f7\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u7aef\u53e3\u72b6\u6001\u8bf4\u660e")),(0,r.kt)("p",null,"Nmap \u529f\u80fd\u8d8a\u6765\u8d8a\u591a\uff0c\u4f46\u5b83\u8d56\u4ee5\u6210\u540d\u7684\u662f\u5b83\u7684\u6838\u5fc3\u529f\u80fd\u2014\u2014\u7aef\u53e3\u626b\u63cf\u3002"),(0,r.kt)("p",null,"Nmap \u628a\u7aef\u53e3\u5206\u6210\u516d\u4e2a\u72b6\u6001\uff1aopen(\u5f00\u653e\u7684)\uff0cclosed(\u5173\u95ed\u7684)\uff0cfiltered(\u88ab\u8fc7\u6ee4\u7684)\uff0cunfiltered(\u672a\u88ab\u8fc7\u6ee4\u7684)\uff0copen|filtered(\u5f00\u653e\u6216\u8005\u88ab\u8fc7\u6ee4\u7684)\uff0c\u6216\u8005 closed|filtered(\u5173\u95ed\u6216\u8005\u88ab\u8fc7\u6ee4\u7684)\u3002"),(0,r.kt)("p",null,"\u8fd9\u4e9b\u72b6\u6001\u5e76\u975e\u7aef\u53e3\u672c\u8eab\u7684\u6027\u8d28\uff0c\u800c\u662f\u63cf\u8ff0 Nmap \u600e\u6837\u770b\u5f85\u5b83\u4eec\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u540c\u6837\u7684\u76ee\u6807\u673a\u5668\u7684 135/tcp \u7aef\u53e3\uff0c\u4ece\u540c\u7f51\u7edc\u626b\u63cf\u663e\u793a\u5b83\u662f\u5f00\u653e\u7684\uff0c\u800c\u8de8\u7f51\u7edc\u505a\u5b8c\u5168\u76f8\u540c\u7684\u626b\u63cf\u5219\u53ef\u80fd\u663e\u793a\u5b83\u662f filtered(\u88ab\u8fc7\u6ee4\u7684)\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"open\uff1a(\u5f00\u653e\u7684)\u6709\u7a0b\u5e8f\u6b63\u5728\u8be5\u7aef\u53e3\u63a5\u6536 TCP \u6216\u8005 UDP \u62a5\u6587\u3002\u5b83\u5e38\u5e38\u662f\u7aef\u53e3\u626b\u63cf\u7684\u4e3b\u8981\u76ee\u6807\u3002"),(0,r.kt)("li",{parentName:"ol"},"closed\uff1a(\u5173\u95ed\u7684)\u5173\u95ed\u7684\u7aef\u53e3\u5bf9\u4e8e Nmap \u4e5f\u662f\u53ef\u8bbf\u95ee\u7684(\u5b83\u63a5\u53d7 Nmap \u7684\u63a2\u6d4b\u62a5\u6587\u5e76\u4f5c\u51fa\u54cd\u5e94)\uff0c\u4f46\u6ca1\u6709\u5e94\u7528\u7a0b\u5e8f\u5728\u5176\u4e0a\u76d1\u542c\u3002"),(0,r.kt)("li",{parentName:"ol"},"filtered\uff1a(\u88ab\u8fc7\u6ee4\u7684)\u7531\u4e8e\u76ee\u6807\u4e0a\u8bbe\u7f6e\u4e86\u5305\u8fc7\u6ee4(\u5982\u9632\u706b\u5899\u8bbe\u5907)\uff0c\u4f7f\u5f97\u63a2\u6d4b\u62a5\u6587\u88ab\u963b\u6b62\u5230\u8fbe\u7aef\u53e3\uff0cNmap \u65e0\u6cd5\u786e\u5b9a\u8be5\u7aef\u53e3\u662f\u5426\u5f00\u653e\u3002\u8fc7\u6ee4\u53ef\u80fd\u6765\u81ea\u4e13\u4e1a\u7684\u9632\u706b\u5899\u8bbe\u5907\uff0c\u8def\u7531\u5668\u89c4\u5219\u6216\u8005\u4e3b\u673a\u4e0a\u7684\u8f6f\u4ef6\u9632\u706b\u5899\u3002"),(0,r.kt)("li",{parentName:"ol"},"unfiltered\uff1a(\u672a\u88ab\u8fc7\u6ee4\u7684)\u672a\u88ab\u8fc7\u6ee4\u72b6\u6001\u610f\u5473\u7740\u7aef\u53e3\u53ef\u8bbf\u95ee\uff0c\u4f46 Nmap \u4e0d\u80fd\u786e\u5b9a\u5b83\u662f\u5f00\u653e\u8fd8\u662f\u5173\u95ed\u3002\u7528\u5176\u5b83\u7c7b\u578b\u7684\u626b\u63cf\u5982\u7a97\u53e3\u626b\u63cf\u3001SYN \u626b\u63cf\u3001FIN \u626b\u63cf\u6765\u626b\u63cf\u8fd9\u4e9b\u672a\u88ab\u8fc7\u6ee4\u7684\u7aef\u53e3\u53ef\u4ee5\u5e2e\u52a9\u786e\u5b9a\u7aef\u53e3\u662f\u5426\u5f00\u653e\u3002"),(0,r.kt)("li",{parentName:"ol"},"open|filtered\uff1a(\u5f00\u653e\u6216\u88ab\u8fc7\u6ee4\u7684)\u5f53\u65e0\u6cd5\u786e\u5b9a\u7aef\u53e3\u662f\u5f00\u653e\u8fd8\u662f\u88ab\u8fc7\u6ee4\u7684\uff0cNmap \u5c31\u628a\u8be5\u7aef\u53e3\u5212\u5206\u6210\u8fd9\u79cd\u72b6\u6001\u3002\u5f00\u653e\u7684\u7aef\u53e3\u4e0d\u54cd\u5e94\u5c31\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002\u6ca1\u6709\u54cd\u5e94\u4e5f\u53ef\u80fd\u610f\u5473\u7740\u76ee\u6807\u4e3b\u673a\u4e0a\u62a5\u6587\u8fc7\u6ee4\u5668\u4e22\u5f03\u4e86\u63a2\u6d4b\u62a5\u6587\u6216\u8005\u5b83\u5f15\u53d1\u7684\u4efb\u4f55\u54cd\u5e94\u3002\u56e0\u6b64 Nmap \u65e0\u6cd5\u786e\u5b9a\u8be5\u7aef\u53e3\u662f\u5f00\u653e\u7684\u8fd8\u662f\u88ab\u8fc7\u6ee4\u7684\u3002"),(0,r.kt)("li",{parentName:"ol"},"closed|filtered\uff1a(\u5173\u95ed\u6216\u88ab\u8fc7\u6ee4\u7684)\u8be5\u72b6\u6001\u7528\u4e8e Nmap \u4e0d\u80fd\u786e\u5b9a\u7aef\u53e3\u662f\u5173\u95ed\u7684\u8fd8\u662f\u88ab\u8fc7\u6ee4\u7684\u3002\u5b83\u53ea\u53ef\u80fd\u51fa\u73b0\u5728 IPID Idle \u626b\u63cf\u4e2d\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u65f6\u95f4\u53c2\u6570\u4f18\u5316")),(0,r.kt)("p",null,"\u6539\u5584\u626b\u63cf\u65f6\u95f4\u7684\u6280\u672f\u6709\uff1a\u5ffd\u7565\u975e\u5173\u952e\u7684\u68c0\u6d4b\u3001\u5347\u7ea7\u6700\u65b0\u7248\u672c\u7684 Nmap(\u6587\u6863\u4e2d\u8bf4 nmap \u7248\u672c\u8d8a\u9ad8\u6027\u80fd\u8d8a\u597d)\u7b49\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"-",'T<0-5>\uff1a\u8fd9\u8868\u793a\u76f4\u63a5\u4f7f\u7528 namp \u63d0\u4f9b\u7684\u626b\u63cf\u6a21\u677f\uff0c\u4e0d\u540c\u7684\u6a21\u677f\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u73af\u5883\u4e0b\uff0c\u9ed8\u8ba4\u7684\u6a21\u677f\u4e3a "-T 3"\uff0c\u5177\u4f53\u7684\u770b man \u6587\u6863\uff0c\u5176\u5b9e\u7528\u7684\u5f88\u5c11\u3002')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"-","-min-hostgroup ","\\",(0,r.kt)("inlineCode",{parentName:"p"},"<milliseconds>"),"; --max-hostgroup ","\\",(0,r.kt)("inlineCode",{parentName:"p"},"<milliseconds>"),"\uff1a\u8c03\u6574\u5e76\u884c\u626b\u63cf\u7ec4\u7684\u5927\u5c0f\u3002"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Nmap \u5177\u6709\u5e76\u884c\u626b\u63cf\u591a\u4e3b\u673a\u7aef\u53e3\u7684\u80fd\u529b\uff0c\u5b9e\u73b0\u65b9\u6cd5\u662f\u5c06\u6240\u6709\u7ed9\u5b9a\u7684\u76ee\u6807 IP \u6309\u7a7a\u95f4\u5206\u6210\u7ec4\uff0c\u7136\u540e\u4e00\u6b21\u626b\u63cf\u4e00\u4e2a\u7ec4\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u901a\u5e38\u7ec4\u5206\u7684\u8d8a\u5927\u6548\u7387\u8d8a\u9ad8\uff0c\u4f46\u5206\u7ec4\u7684\u7f3a\u70b9\u662f\u53ea\u6709\u5f53\u6574\u4e2a\u7ec4\u626b\u63cf\u7ed3\u675f\u540e\u624d\u4f1a\u8fd4\u56de\u8be5\u7ec4\u4e2d\u4e3b\u673a\u626b\u63cf\u7ed3\u679c\u3002\u4f8b\u5982\uff0c\u7ec4\u7684\u5927\u5c0f\u5b9a\u4e49\u4e3a 50\uff0c\u5219\u53ea\u6709\u524d 50 \u4e2a\u4e3b\u673a\u626b\u63cf\u7ed3\u675f\u540e\u624d\u80fd\u5f97\u5230\u8fd9 50 \u4e2a IP \u5185\u7684\u7ed3\u679c\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u65b9\u5f0f\u4e0b\uff0cNmap \u91c7\u53d6\u6298\u8877\u7684\u65b9\u6cd5\u3002\u5f00\u59cb\u626b\u63cf\u65f6\u7684\u7ec4\u8f83\u5c0f\uff0c\u9ed8\u8ba4\u503c\u4e3a 5\uff0c\u8fd9\u6837\u4fbf\u4e8e\u5c3d\u5feb\u4ea7\u751f\u7ed3\u679c\uff0c\u968f\u540e\u589e\u957f\u7ec4\u7684\u5927\u5c0f\uff0c\u9ed8\u8ba4\u6700\u5927\u4e3a 1024\u3002\u4f46\u6700\u5c0f\u548c\u6700\u5927\u786e\u5207\u7684\u503c\u5219\u4f9d\u8d56\u4e8e\u6240\u7ed9\u5b9a\u7684\u9009\u9879\u3002"),(0,r.kt)("li",{parentName:"ul"},"-","-max-hostgroup \u9009\u9879\u7528\u4e8e\u8bf4\u660e\u4f7f\u7528\u6700\u5927\u7684\u7ec4\uff0cNmap \u4e0d\u4f1a\u8d85\u51fa\u8fd9\u4e2a\u5927\u5c0f\u3002"),(0,r.kt)("li",{parentName:"ul"},"-","-min-hostgroup \u9009\u9879\u8bf4\u660e\u6700\u5c0f\u7684\u7ec4\uff0cNmap \u4f1a\u4fdd\u6301\u7ec4\u5927\u4e8e\u8fd9\u4e2a\u503c\u3002\u5982\u679c\u5728\u6307\u5b9a\u7684\u63a5\u53e3\u4e0a\u6ca1\u6709\u8db3\u591f\u7684\u76ee\u6807\u4e3b\u673a\u6765\u6ee1\u8db3\u6240\u6307\u5b9a\u7684\u6700\u5c0f\u503c\uff0cNmap \u53ef\u80fd\u4f1a\u91c7\u7528\u6bd4\u6240\u6307\u5b9a\u7684\u503c\u5c0f\u7684\u7ec4\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"-","-min-parallelism ","\\",(0,r.kt)("inlineCode",{parentName:"p"},"<milliseconds>"),"; --max-parallelism ","\\",(0,r.kt)("inlineCode",{parentName:"p"},"<milliseconds>"),"\uff1a\u8c03\u6574\u63a2\u6d4b\u62a5\u6587\u7684\u5e76\u884c\u5ea6\uff0c\u5373\u63a2\u9488\u6570\u3002"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u4e9b\u9009\u9879\u7528\u4e8e\u63a7\u5236\u4e3b\u673a\u7ec4\u7684\u63a2\u6d4b\u62a5\u6587\u6570\u91cf\uff0c\u53ef\u7528\u4e8e",(0,r.kt)("strong",{parentName:"li"},"\u7aef\u53e3\u626b\u63cf\u548c\u4e3b\u673a\u53d1\u73b0"),"\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u72b6\u6001\u4e0b\uff0cNmap \u57fa\u4e8e\u7f51\u7edc\u6027\u80fd\u8ba1\u7b97\u4e00\u4e2a\u7406\u60f3\u7684\u5e76\u884c\u5ea6\uff0c\u8fd9\u4e2a\u503c\u7ecf\u5e38\u6539\u53d8\u3002\u5982\u679c\u62a5\u6587\u88ab\u4e22\u5f03\uff0cNmap \u964d\u4f4e\u901f\u5ea6\uff0c\u63a2\u6d4b\u62a5\u6587\u6570\u91cf\u51cf\u5c11\u3002\u968f\u7740\u7f51\u7edc\u6027\u80fd\u7684\u6539\u5584\uff0c\u7406\u60f3\u7684\u63a2\u6d4b\u62a5\u6587\u6570\u91cf\u4f1a\u7f13\u6162\u589e\u52a0\u3002\u9ed8\u8ba4\u72b6\u6001\u4e0b\uff0c\u5f53\u7f51\u7edc\u4e0d\u53ef\u9760\u65f6\uff0c\u7406\u60f3\u7684\u5e76\u884c\u5ea6\u503c\u53ef\u80fd\u4e3a 1\uff0c\u5728\u597d\u7684\u6761\u4ef6\u4e0b\uff0c\u53ef\u80fd\u4f1a\u589e\u957f\u81f3\u51e0\u767e\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6700\u5e38\u89c1\u7684\u5e94\u7528\u662f --min-parallelism \u503c\u5927\u4e8e 1\uff0c\u4ee5\u52a0\u5feb\u6027\u80fd\u4e0d\u4f73\u7684\u4e3b\u673a\u6216\u7f51\u7edc\u7684\u626b\u63cf\u3002\u8fd9\u4e2a\u9009\u9879\u5177\u6709\u98ce\u9669\uff0c\u5982\u679c\u8fc7\u9ad8\u5219\u5f71\u54cd\u51c6\u786e\u5ea6\uff0c\u540c\u65f6\u4e5f\u4f1a\u964d\u4f4e Nmap \u57fa\u4e8e\u7f51\u7edc\u6761\u4ef6\u52a8\u6001\u63a7\u5236\u5e76\u884c\u5ea6\u7684\u80fd\u529b\u3002\u4e00\u822c\u8bf4\u6765\uff0c\u8fd9\u4e2a\u503c\u8981\u8bbe\u7f6e\u7684\u548c --min-hostgroup \u7684\u503c\u76f8\u7b49\u6216\u5927\u4e8e\u5b83\u6027\u80fd\u624d\u4f1a\u63d0\u5347\u3002")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u626b\u63cf\u64cd\u4f5c\u7cfb\u7edf\u7c7b\u578b")),(0,r.kt)("p",null,"\u626b\u63cf\u64cd\u4f5c\u7cfb\u7edf\u3002\u64cd\u4f5c\u7cfb\u7edf\u7684\u626b\u63cf\u6709\u53ef\u80fd\u4f1a\u51fa\u73b0\u8bef\u62a5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# nmap -O 127.0.0.1\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5feb\u901f\u626b\u63cf\u5b58\u6d3b\u7684\u4e3b\u673a")),(0,r.kt)("p",null,"\u8981\u5feb\u901f\u626b\u63cf\u5b58\u6d3b\u7684\u4e3b\u673a\uff0c\u9700\u8981\u4f7f\u7528\u7684\u51e0\u4e2a\u91cd\u8981\u9009\u9879"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"-","n\uff1a\u6c38\u8fdc\u4e0d\u8981 DNS \u89e3\u6790\u3002\u8fd9\u4e2a\u4e0d\u7ba1\u662f\u7ed9\u5b9a\u5730\u5740\u626b\u63cf\u8fd8\u662f\u7ed9\u5b9a\u7f51\u5740\u626b\u63cf\uff0c\u52a0\u4e0a\u5b83\u901f\u5ea6\u90fd\u4f1a\u6781\u901f\u63d0\u5347"),(0,r.kt)("li",{parentName:"ul"},"-","sn\uff1a\u7981\u6b62\u7aef\u53e3\u626b\u63cf"),(0,r.kt)("li",{parentName:"ul"},"-","PE\uff1a\u53ea\u6839\u636e echo \u56de\u663e\u5224\u65ad\u4e3b\u673a\u5728\u7ebf\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u9009\u9879\u4f7f\u7528\u8d8a\u591a\uff0c\u901f\u5ea6\u8d8a\u6162\uff0c\u5982 -PM -PP \u9009\u9879\u90fd\u662f\u7c7b\u4f3c\u7684\uff0c\u4f46\u4ed6\u4eec\u901f\u5ea6\u8981\u6162\u7684\u591a\u7684\u591a\uff0cPE \u6709\u4e2a\u7f3a\u70b9\uff0c\u4e0d\u80fd\u7a7f\u900f\u9632\u706b\u5899"),(0,r.kt)("li",{parentName:"ul"},"-","-min-hostgroup N\uff1a\u5f53 IP \u592a\u591a\u65f6\uff0cnmap \u9700\u8981\u5206\u7ec4\uff0c\u7136\u540e\u5e76\u626b\u63cf\uff0c\u4f7f\u7528\u8be5\u9009\u9879\u53ef\u4ee5\u6307\u5b9a\u591a\u5c11\u4e2a IP \u4e00\u7ec4"),(0,r.kt)("li",{parentName:"ul"},"-","-min-parallelism N\uff1a\u8fd9\u4e2a\u53c2\u6570\u975e\u5e38\u5173\u952e\uff0c\u4e3a\u4e86\u5145\u5206\u5229\u7528\u7cfb\u7edf\u548c\u7f51\u7edc\u8d44\u6e90\uff0c\u8bbe\u7f6e\u597d\u5408\u7406\u7684\u63a2\u9488\u6570\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u8bbe\u7f6e\u7684\u8d8a\u5927\u901f\u5ea6\u8d8a\u5feb\uff0c\u4e14\u548c min-hostgroup \u7684\u503c\u76f8\u7b49\u6216\u5927\u4e8e\u5b83\u6027\u80fd\u624d\u4f1a\u63d0\u5347")),(0,r.kt)("p",null,"\u793a\u4f8b\u4e00\uff1a\u626b\u63cf 10.51.111.0/24 \u7f51\u6bb5\u5b58\u6d3b\u7684\u673a\u5668"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# nmap -sn -n -PE --min-hostgroup 1024 --min-parallelism 1024 10.51.111.0/24\n......\nNmap done: 256 IP addresses (50 hosts up) scanned in 0.74 seconds\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"256 \u4e2a IP \u5730\u5740\uff0c0.74s \u5b8c\u6210\uff0c\u975e\u5e38\u5feb")),(0,r.kt)("p",null,"\u793a\u4f8b\u4e8c\uff1a\u518d\u6d4b\u8bd5\u626b\u63cf\u4e0b\u4ee5 ",(0,r.kt)("a",{parentName:"p",href:"http://www.baidu.com"},"www.baidu.com")," \u4f5c\u4e3a\u53c2\u8003\u5730\u5740\u7684\u5730\u5740\u7a7a\u95f4\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# nmap -sn -PE -n --min-hostgroup 1024 --min-parallelism 1024 -oX nmap_output.xml www.baidu.com/16\n......\nNmap done: 65536 IP addresses (13160 hosts up) scanned in 28.28 seconds\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"65536 \u4e2a IP \u5730\u5740\uff0c28.28s \u5b8c\u6210\uff0c\u975e\u5e38\u5feb")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5feb\u901f\u626b\u63cf\u7aef\u53e3")),(0,r.kt)("p",null,"\u65e2\u7136\u662f\u626b\u63cf\u7aef\u53e3\uff0c\u5c31\u4e0d\u80fd\u4f7f\u7528 -sn \u9009\u9879\uff0c\u4e5f\u4e0d\u80fd\u4f7f\u7528 -PE\uff0c\u5426\u5219\u4e0d\u4f1a\u8fd4\u56de\u7aef\u53e3\u72b6\u6001\uff0c\u53ea\u4f1a\u8fd4\u56de\u54ea\u4e9b\u4e3b\u673a\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@arm64v8 ~]# nmap -n -p 20-2000 --min-hostgroup 1024 --min-parallelism 1024 10.51.111.0/24\n")))}u.isMDXComponent=!0},29871:function(e,n,a){n.Z=a.p+"assets/images/tcpdump-9ba0c8e214d6339e0184a9512559ed85.png"}}]);